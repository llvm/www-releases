
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Extra Clang Tools 15.0.0 Release Notes &#8212; Extra Clang Tools 15.0.0 documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="_static/clang-tools-extra-styles.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clang-Tidy" href="clang-tidy/index.html" />
    <link rel="prev" title="Introduction" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Extra Clang Tools 15.0.0 documentation</span></a></h1>
        <h2 class="heading"><span>Extra Clang Tools 15.0.0 Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Introduction</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="clang-tidy/index.html">Clang-Tidy</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="extra-clang-tools-release-releasenotestitle">
<h1>Extra Clang Tools 15.0.0 Release Notes<a class="headerlink" href="#extra-clang-tools-release-releasenotestitle" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-s-new-in-extra-clang-tools-release" id="id2">What’s New in Extra Clang Tools 15.0.0?</a></p>
<ul>
<li><p><a class="reference internal" href="#major-new-features" id="id3">Major New Features</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clangd" id="id4">Improvements to clangd</a></p>
<ul>
<li><p><a class="reference internal" href="#inlay-hints" id="id5">Inlay hints</a></p></li>
<li><p><a class="reference internal" href="#diagnostics" id="id6">Diagnostics</a></p></li>
<li><p><a class="reference internal" href="#semantic-highlighting" id="id7">Semantic Highlighting</a></p></li>
<li><p><a class="reference internal" href="#compile-flags" id="id8">Compile flags</a></p></li>
<li><p><a class="reference internal" href="#hover" id="id9">Hover</a></p></li>
<li><p><a class="reference internal" href="#code-completion" id="id10">Code completion</a></p></li>
<li><p><a class="reference internal" href="#signature-help" id="id11">Signature help</a></p></li>
<li><p><a class="reference internal" href="#cross-references" id="id12">Cross-references</a></p></li>
<li><p><a class="reference internal" href="#objective-c" id="id13">Objective-C</a></p></li>
<li><p><a class="reference internal" href="#miscellaneous" id="id14">Miscellaneous</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#improvements-to-clang-doc" id="id15">Improvements to clang-doc</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-query" id="id16">Improvements to clang-query</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-rename" id="id17">Improvements to clang-rename</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-tidy" id="id18">Improvements to clang-tidy</a></p>
<ul>
<li><p><a class="reference internal" href="#new-checks" id="id19">New checks</a></p></li>
<li><p><a class="reference internal" href="#new-check-aliases" id="id20">New check aliases</a></p></li>
<li><p><a class="reference internal" href="#changes-in-existing-checks" id="id21">Changes in existing checks</a></p></li>
<li><p><a class="reference internal" href="#removed-checks" id="id22">Removed checks</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#improvements-to-include-fixer" id="id23">Improvements to include-fixer</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-include-fixer" id="id24">Improvements to clang-include-fixer</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-modularize" id="id25">Improvements to modularize</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-pp-trace" id="id26">Improvements to pp-trace</a></p></li>
<li><p><a class="reference internal" href="#clang-tidy-visual-studio-plugin" id="id27">Clang-tidy Visual Studio plugin</a></p></li>
</ul>
</li>
</ul>
</div>
<p>Written by the <a class="reference external" href="https://llvm.org/">LLVM Team</a></p>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document contains the release notes for the Extra Clang Tools, part of the
Clang release 15.0.0. Here we describe the status of the Extra Clang Tools in
some detail, including major improvements from the previous release and new
feature work. All LLVM releases may be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web
site</a>.</p>
<p>For more information about Clang or LLVM, including information about
the latest release, please see the <a class="reference external" href="https://clang.llvm.org">Clang Web Site</a> or
the <a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
<p>Note that if you are reading this file from a Git checkout or the
main Clang web page, this document applies to the <em>next</em> release, not
the current one. To see the release notes for a specific release, please
see the <a class="reference external" href="https://llvm.org/releases/">releases page</a>.</p>
</div>
<div class="section" id="what-s-new-in-extra-clang-tools-release">
<h2><a class="toc-backref" href="#id2">What’s New in Extra Clang Tools 15.0.0?</a><a class="headerlink" href="#what-s-new-in-extra-clang-tools-release" title="Permalink to this headline">¶</a></h2>
<p>Some of the major new features and improvements to Extra Clang Tools are listed
here. Generic improvements to Extra Clang Tools as a whole or to its underlying
infrastructure are described first, followed by tool-specific sections.</p>
<div class="section" id="major-new-features">
<h3><a class="toc-backref" href="#id3">Major New Features</a><a class="headerlink" href="#major-new-features" title="Permalink to this headline">¶</a></h3>
<p>…</p>
</div>
<div class="section" id="improvements-to-clangd">
<h3><a class="toc-backref" href="#id4">Improvements to clangd</a><a class="headerlink" href="#improvements-to-clangd" title="Permalink to this headline">¶</a></h3>
<div class="section" id="inlay-hints">
<h4><a class="toc-backref" href="#id5">Inlay hints</a><a class="headerlink" href="#inlay-hints" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="diagnostics">
<h4><a class="toc-backref" href="#id6">Diagnostics</a><a class="headerlink" href="#diagnostics" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>Improved Fix-its of some clang-tidy checks when applied with clangd.</p></li>
</ul>
</div>
<div class="section" id="semantic-highlighting">
<h4><a class="toc-backref" href="#id7">Semantic Highlighting</a><a class="headerlink" href="#semantic-highlighting" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="compile-flags">
<h4><a class="toc-backref" href="#id8">Compile flags</a><a class="headerlink" href="#compile-flags" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="hover">
<h4><a class="toc-backref" href="#id9">Hover</a><a class="headerlink" href="#hover" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="code-completion">
<h4><a class="toc-backref" href="#id10">Code completion</a><a class="headerlink" href="#code-completion" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="signature-help">
<h4><a class="toc-backref" href="#id11">Signature help</a><a class="headerlink" href="#signature-help" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="cross-references">
<h4><a class="toc-backref" href="#id12">Cross-references</a><a class="headerlink" href="#cross-references" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="objective-c">
<h4><a class="toc-backref" href="#id13">Objective-C</a><a class="headerlink" href="#objective-c" title="Permalink to this headline">¶</a></h4>
</div>
<div class="section" id="miscellaneous">
<h4><a class="toc-backref" href="#id14">Miscellaneous</a><a class="headerlink" href="#miscellaneous" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="improvements-to-clang-doc">
<h3><a class="toc-backref" href="#id15">Improvements to clang-doc</a><a class="headerlink" href="#improvements-to-clang-doc" title="Permalink to this headline">¶</a></h3>
<p>The improvements are…</p>
</div>
<div class="section" id="improvements-to-clang-query">
<h3><a class="toc-backref" href="#id16">Improvements to clang-query</a><a class="headerlink" href="#improvements-to-clang-query" title="Permalink to this headline">¶</a></h3>
<p>The improvements are…</p>
</div>
<div class="section" id="improvements-to-clang-rename">
<h3><a class="toc-backref" href="#id17">Improvements to clang-rename</a><a class="headerlink" href="#improvements-to-clang-rename" title="Permalink to this headline">¶</a></h3>
<p>The improvements are…</p>
</div>
<div class="section" id="improvements-to-clang-tidy">
<h3><a class="toc-backref" href="#id18">Improvements to clang-tidy</a><a class="headerlink" href="#improvements-to-clang-tidy" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added trace code to help narrow down any checks and the relevant source code
that result in crashes.</p></li>
<li><p>Clang-tidy now consideres newlines as separators of single elements in the <cite>Checks</cite> section in
<cite>.clang-tidy</cite> configuration files. Where previously a comma had to be used to distinguish elements in
this list from each other, newline characters now also work as separators in the parsed YAML. That
means it is advised to use YAML’s block style initiated by the pipe character <cite>|</cite> for the <cite>Checks</cite>
section in order to benefit from the easier syntax that works without commas.</p></li>
<li><p>Fixed a regression introduced in clang-tidy 14.0.0, which prevented NOLINTs
from suppressing diagnostics associated with macro arguments. This fixes
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55134">Issue 55134</a>.</p></li>
<li><p>Added an option -verify-config which will check the config file to ensure each
<cite>Checks</cite> and <cite>CheckOptions</cite> entries are recognised.</p></li>
<li><p>.clang-tidy files can now use the more natural dictionary syntax for specifying <cite>CheckOptions</cite>.</p></li>
</ul>
<div class="section" id="new-checks">
<h4><a class="toc-backref" href="#id19">New checks</a><a class="headerlink" href="#new-checks" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>New <a class="reference internal" href="clang-tidy/checks/bugprone/shared-ptr-array-mismatch.html"><span class="doc">bugprone-shared-ptr-array-mismatch</span></a> check.</p>
<p>Finds initializations of C++ shared pointers to non-array type that are initialized with an array.</p>
</li>
<li><p>New <a class="reference internal" href="clang-tidy/checks/bugprone/unchecked-optional-access.html"><span class="doc">bugprone-unchecked-optional-access</span></a> check.</p>
<p>Warns when the code is unwrapping a <cite>std::optional&lt;T&gt;</cite>, <cite>absl::optional&lt;T&gt;</cite>,
or <cite>base::Optional&lt;T&gt;</cite> object without assuring that it contains a value.</p>
</li>
<li><p>New <a class="reference internal" href="clang-tidy/checks/misc/confusable-identifiers.html"><span class="doc">misc-confusable-identifiers</span></a> check.</p>
<p>Detects confusable Unicode identifiers.</p>
</li>
<li><p>New <a class="reference internal" href="clang-tidy/checks/bugprone/assignment-in-if-condition.html"><span class="doc">bugprone-assignment-in-if-condition</span></a> check.</p>
<p>Warns when there is an assignment within an if statement condition expression.</p>
</li>
<li><p>New <a class="reference internal" href="clang-tidy/checks/misc/const-correctness.html"><span class="doc">misc-const-correctness</span></a> check.</p>
<p>Detects unmodified local variables and suggest adding <code class="docutils literal notranslate"><span class="pre">const</span></code> if the transformation is possible.</p>
</li>
<li><p>New <a class="reference internal" href="clang-tidy/checks/modernize/macro-to-enum.html"><span class="doc">modernize-macro-to-enum</span></a> check.</p>
<p>Replaces groups of adjacent macros with an unscoped anonymous enum.</p>
</li>
<li><p>New <a class="reference internal" href="clang-tidy/checks/portability/std-allocator-const.html"><span class="doc">portability-std-allocator-const</span></a> check.</p>
<p>Report use of <code class="docutils literal notranslate"><span class="pre">std::vector&lt;const</span> <span class="pre">T&gt;</span></code> (and similar containers of const
elements). These are not allowed in standard C++ due to undefined
<code class="docutils literal notranslate"><span class="pre">std::allocator&lt;const</span> <span class="pre">T&gt;</span></code>. They do not compile with libstdc++ or MSVC.
Future libc++ will remove the extension (<cite>D120996
&lt;https://reviews.llvm.org/D120996&gt;</cite>).</p>
</li>
</ul>
</div>
<div class="section" id="new-check-aliases">
<h4><a class="toc-backref" href="#id20">New check aliases</a><a class="headerlink" href="#new-check-aliases" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>New alias <a class="reference internal" href="clang-tidy/checks/cppcoreguidelines/macro-to-enum.html"><span class="doc">cppcoreguidelines-macro-to-enum</span></a> to <a class="reference internal" href="clang-tidy/checks/modernize/macro-to-enum.html"><span class="doc">modernize-macro-to-enum</span></a> was added.</p></li>
</ul>
</div>
<div class="section" id="changes-in-existing-checks">
<h4><a class="toc-backref" href="#id21">Changes in existing checks</a><a class="headerlink" href="#changes-in-existing-checks" title="Permalink to this headline">¶</a></h4>
<ul>
<li><p>Fixed nonsensical suggestion of <a class="reference internal" href="clang-tidy/checks/altera/struct-pack-align.html"><span class="doc">altera-struct-pack-align</span></a> check for empty structs.</p></li>
<li><p>Fixed a false positive in <a class="reference internal" href="clang-tidy/checks/bugprone/branch-clone.html"><span class="doc">bugprone-branch-clone</span></a> when the branches
involve unknown expressions.</p></li>
<li><p>Fixed some false positives in <a class="reference internal" href="clang-tidy/checks/bugprone/infinite-loop.html"><span class="doc">bugprone-infinite-loop</span></a> involving dependent expressions.</p></li>
<li><p>Fixed a crash in <a class="reference internal" href="clang-tidy/checks/bugprone/sizeof-expression.html"><span class="doc">bugprone-sizeof-expression</span></a> when <cite>sizeof(…)</cite> is
compared against a <cite>__int128_t</cite>.</p></li>
<li><p>Fixed bugs in <a class="reference internal" href="clang-tidy/checks/bugprone/use-after-move.html"><span class="doc">bugprone-use-after-move</span></a>:</p>
<ul class="simple">
<li><p>Treat a move in a lambda capture as happening in the function that defines
the lambda, not within the body of the lambda (as we were previously doing
erroneously).</p></li>
<li><p>Don’t emit an erroneous warning on self-moves.</p></li>
</ul>
</li>
<li><p>Improved <a class="reference internal" href="clang-tidy/checks/cert/dcl58-cpp.html"><span class="doc">cert-dcl58-cpp</span></a> check.</p>
<p>The check now detects explicit template specializations that are handled specially.</p>
</li>
<li><p>Made <a class="reference internal" href="clang-tidy/checks/cert/oop57-cpp.html"><span class="doc">cert-oop57-cpp</span></a> more sensitive
by checking for an arbitrary expression in the second argument of <code class="docutils literal notranslate"><span class="pre">memset</span></code>.</p></li>
<li><p>Made the fix-it of <a class="reference internal" href="clang-tidy/checks/cppcoreguidelines/init-variables.html"><span class="doc">cppcoreguidelines-init-variables</span></a> use <code class="docutils literal notranslate"><span class="pre">false</span></code> to initialize
boolean variables.</p></li>
<li><p>Improved <a class="reference internal" href="clang-tidy/checks/cppcoreguidelines/prefer-member-initializer.html"><span class="doc">cppcoreguidelines-prefer-member-initializer</span></a> check.</p>
<p>Fixed an issue when there was already an initializer in the constructor and
the check would try to create another initializer for the same member.</p>
</li>
<li><p>Fixed a false positive in <a class="reference internal" href="clang-tidy/checks/cppcoreguidelines/virtual-class-destructor.html"><span class="doc">cppcoreguidelines-virtual-class-destructor</span></a> involving
<code class="docutils literal notranslate"><span class="pre">final</span></code> classes. The check will not diagnose classes marked <code class="docutils literal notranslate"><span class="pre">final</span></code>, since
those cannot be used as base classes, consequently, they can not violate the
rule.</p></li>
<li><p>Fixed a crash in <a class="reference internal" href="clang-tidy/checks/llvmlibc/callee-namespace.html"><span class="doc">llvmlibc-callee-namespace</span></a> when executing for C++ code
that contain calls to advanced constructs, e.g. overloaded operators.</p></li>
<li><p>Fixed false positives in <a class="reference internal" href="clang-tidy/checks/misc/redundant-expression.html"><span class="doc">misc-redundant-expression</span></a>:</p>
<ul class="simple">
<li><p>Fixed a false positive involving overloaded comparison operators.</p></li>
<li><p>Fixed a false positive involving assignments in
conditions. This fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/35853">Issue 35853</a>.</p></li>
</ul>
</li>
<li><p>Fixed a false positive in <a class="reference internal" href="clang-tidy/checks/misc/unused-parameters.html"><span class="doc">misc-unused-parameters</span></a>
where invalid parameters were implicitly being treated as being unused.
This fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/56152">Issue 56152</a>.</p></li>
<li><p>Fixed false positives in <a class="reference internal" href="clang-tidy/checks/misc/unused-using-decls.html"><span class="doc">misc-unused-using-decls</span></a> where <cite>using</cite> statements bringing
operators into the scope where incorrectly marked as unused.
This fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/55095">issue 55095</a>.</p></li>
<li><p>Fixed a false positive in <a class="reference internal" href="clang-tidy/checks/modernize/deprecated-headers.html"><span class="doc">modernize-deprecated-headers</span></a> involving including
C header files from C++ files wrapped by <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span> <span class="pre">{</span> <span class="pre">...</span> <span class="pre">}</span></code> blocks.
Such includes will be ignored by now.
By default now it doesn’t warn for including deprecated headers from header
files, since that header file might be used from C source files. By passing
the <code class="docutils literal notranslate"><span class="pre">CheckHeaderFile=true</span></code> option if header files of the project only
included by C++ source files.</p></li>
<li><p>Improved <a class="reference internal" href="clang-tidy/checks/performance/inefficient-vector-operation.html"><span class="doc">performance-inefficient-vector-operation</span></a> to work when
the vector is a member of a structure.</p></li>
<li><p>Fixed a crash in <a class="reference internal" href="clang-tidy/checks/performance/unnecessary-value-param.html"><span class="doc">performance-unnecessary-value-param</span></a> when the specialization
template has an unnecessary value parameter. Removed the fix for a template.</p></li>
<li><p>Fixed a crash in <a class="reference internal" href="clang-tidy/checks/readability/const-return-type.html"><span class="doc">readability-const-return-type</span></a> when a pure virtual function
overrided has a const return type. Removed the fix for a virtual function.</p></li>
<li><p>Skipped addition of extra parentheses around member accesses (<code class="docutils literal notranslate"><span class="pre">a.b</span></code>) in fix-it for
<a class="reference internal" href="clang-tidy/checks/readability/container-data-pointer.html"><span class="doc">readability-container-data-pointer</span></a>.</p></li>
<li><p>Fixed incorrect suggestions for <a class="reference internal" href="clang-tidy/checks/readability/container-size-empty.html"><span class="doc">readability-container-size-empty</span></a> when smart pointers are involved.</p></li>
<li><p>Fixed a false positive in <a class="reference internal" href="clang-tidy/checks/readability/non-const-parameter.html"><span class="doc">readability-non-const-parameter</span></a> when the parameter is
referenced by an lvalue.</p></li>
<li><p>Expanded <a class="reference internal" href="clang-tidy/checks/readability/simplify-boolean-expr.html"><span class="doc">readability-simplify-boolean-expr</span></a> to simplify expressions
using DeMorgan’s Theorem.</p></li>
</ul>
</div>
<div class="section" id="removed-checks">
<h4><a class="toc-backref" href="#id22">Removed checks</a><a class="headerlink" href="#removed-checks" title="Permalink to this headline">¶</a></h4>
</div>
</div>
<div class="section" id="improvements-to-include-fixer">
<h3><a class="toc-backref" href="#id23">Improvements to include-fixer</a><a class="headerlink" href="#improvements-to-include-fixer" title="Permalink to this headline">¶</a></h3>
<p>The improvements are…</p>
</div>
<div class="section" id="improvements-to-clang-include-fixer">
<h3><a class="toc-backref" href="#id24">Improvements to clang-include-fixer</a><a class="headerlink" href="#improvements-to-clang-include-fixer" title="Permalink to this headline">¶</a></h3>
<p>The improvements are…</p>
</div>
<div class="section" id="improvements-to-modularize">
<h3><a class="toc-backref" href="#id25">Improvements to modularize</a><a class="headerlink" href="#improvements-to-modularize" title="Permalink to this headline">¶</a></h3>
<p>The improvements are…</p>
</div>
<div class="section" id="improvements-to-pp-trace">
<h3><a class="toc-backref" href="#id26">Improvements to pp-trace</a><a class="headerlink" href="#improvements-to-pp-trace" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added <cite>HashLoc</cite> information to <cite>InclusionDirective</cite> callback output.</p></li>
</ul>
</div>
<div class="section" id="clang-tidy-visual-studio-plugin">
<h3><a class="toc-backref" href="#id27">Clang-tidy Visual Studio plugin</a><a class="headerlink" href="#clang-tidy-visual-studio-plugin" title="Permalink to this headline">¶</a></h3>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Introduction</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="clang-tidy/index.html">Clang-Tidy</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2022, The Clang Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>