
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Libc++ 15.0.0 (In-Progress) Release Notes &#8212; libc++  documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Using libc++" href="UsingLibcxx.html" />
    <link rel="prev" title="“libc++” C++ Standard Library" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>libc++  documentation</span></a></h1>
        <h2 class="heading"><span>Libc++ 15.0.0 (In-Progress) Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">“libc++” C++ Standard Library</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsingLibcxx.html">Using libc++</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="libc-15-0-0-in-progress-release-notes">
<h1>Libc++ 15.0.0 (In-Progress) Release Notes<a class="headerlink" href="#libc-15-0-0-in-progress-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-s-new-in-libc-15-0-0" id="id2">What’s New in Libc++ 15.0.0?</a></p>
<ul>
<li><p><a class="reference internal" href="#implemented-papers" id="id3">Implemented Papers</a></p></li>
<li><p><a class="reference internal" href="#improvements-and-new-features" id="id4">Improvements and New Features</a></p></li>
<li><p><a class="reference internal" href="#deprecations-and-removals" id="id5">Deprecations and Removals</a></p></li>
<li><p><a class="reference internal" href="#upcoming-deprecations-and-removals" id="id6">Upcoming Deprecations and Removals</a></p></li>
<li><p><a class="reference internal" href="#abi-affecting-changes" id="id7">ABI Affecting Changes</a></p></li>
<li><p><a class="reference internal" href="#build-system-changes" id="id8">Build System Changes</a></p></li>
</ul>
</li>
</ul>
</div>
<p>Written by the <a class="reference external" href="https://libcxx.llvm.org">Libc++ Team</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These are in-progress notes for the upcoming libc++ 15 release.
Release notes for previous releases can be found on
<a class="reference external" href="https://releases.llvm.org/download.html">the Download Page</a>.</p>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document contains the release notes for the libc++ C++ Standard Library,
part of the LLVM Compiler Infrastructure, release 15.0.0. Here we describe the
status of libc++ in some detail, including major improvements from the previous
release and new feature work. For the general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. All LLVM releases may
be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
<p>For more information about libc++, please see the <a class="reference external" href="https://libcxx.llvm.org">Libc++ Web Site</a> or the <a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
<p>Note that if you are reading this file from a Git checkout or the
main Libc++ web page, this document applies to the <em>next</em> release, not
the current one. To see the release notes for a specific release, please
see the <a class="reference external" href="https://llvm.org/releases/">releases page</a>.</p>
</div>
<div class="section" id="what-s-new-in-libc-15-0-0">
<h2><a class="toc-backref" href="#id2">What’s New in Libc++ 15.0.0?</a><a class="headerlink" href="#what-s-new-in-libc-15-0-0" title="Permalink to this headline">¶</a></h2>
<p>The main focus of the libc++ team has been to implement new C++20 and C++23
features.</p>
<p>The C++20 <code class="docutils literal notranslate"><span class="pre">format</span></code> library is feature complete, but not all Standard LWG
issues have been addressed. Since it is expected that at least one of these
issues will cause an ABI break the <code class="docutils literal notranslate"><span class="pre">format</span></code> library is considered
experimental.</p>
<p>The C++20 <code class="docutils literal notranslate"><span class="pre">ranges</span></code> library has progressed a lot since the last release and is
almost complete. The <code class="docutils literal notranslate"><span class="pre">ranges</span></code> library is considered experimental.</p>
<div class="section" id="implemented-papers">
<h3><a class="toc-backref" href="#id3">Implemented Papers</a><a class="headerlink" href="#implemented-papers" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>P1004R2 - Making <code class="docutils literal notranslate"><span class="pre">std::vector</span></code> constexpr</p></li>
<li><p>P0627R6 - Function to mark unreachable code</p></li>
<li><p>P1165R1 - Make stateful allocator propagation more consistent for <code class="docutils literal notranslate"><span class="pre">operator+(basic_string)</span></code></p></li>
<li><p>P0674R1 - Support arrays in <code class="docutils literal notranslate"><span class="pre">make_shared</span></code> and <code class="docutils literal notranslate"><span class="pre">allocate_shared</span></code></p></li>
<li><p>P0980R1 - Making <code class="docutils literal notranslate"><span class="pre">std::string</span></code> constexpr</p></li>
<li><p>P2216R3 - <code class="docutils literal notranslate"><span class="pre">std::format</span></code> improvements</p></li>
<li><p>P0174R2 - Deprecating Vestigial Library Parts in C++17</p></li>
<li><p>N4190 - Removing <code class="docutils literal notranslate"><span class="pre">auto_ptr</span></code>, <code class="docutils literal notranslate"><span class="pre">random_shuffle()</span></code>, And Old <code class="docutils literal notranslate"><span class="pre">&lt;functional&gt;</span></code> Stuff</p></li>
<li><p>P0154R1 - Hardware inference size</p></li>
<li><p>P0618R0 - Deprecating <code class="docutils literal notranslate"><span class="pre">&lt;codecvt&gt;</span></code></p></li>
<li><p>P2418R2 - Add support for <code class="docutils literal notranslate"><span class="pre">std::generator</span></code>-like types to <code class="docutils literal notranslate"><span class="pre">std::format</span></code></p></li>
<li><p>LWG3659 - Consider <code class="docutils literal notranslate"><span class="pre">ATOMIC_FLAG_INIT</span></code> undeprecation</p></li>
<li><p>P1423R3 - <code class="docutils literal notranslate"><span class="pre">char8_t</span></code> backward compatibility remediation</p></li>
<li><p>Marked the following papers as “Complete” (note that some of those might have
been implemented in a previous release but not marked as such):</p>
<blockquote>
<div><ul class="simple">
<li><p>P1207R4 - Movability of Single-pass Iterators</p></li>
<li><p>P1474R1 - Helpful pointers for <code class="docutils literal notranslate"><span class="pre">ContiguousIterator</span></code></p></li>
<li><p>P1522R1 - Iterator Difference Type and Integer Overflow</p></li>
<li><p>P1523R1 - Views and Size Types</p></li>
<li><p>P1456R1 - Move-only views</p></li>
<li><p>P1870R1 - <code class="docutils literal notranslate"><span class="pre">forwarding-range</span></code> is too subtle</p></li>
<li><p>P1878R1 - Constraining Readable Types</p></li>
<li><p>P1970R2 - Consistency for <code class="docutils literal notranslate"><span class="pre">size()</span></code> functions: Add <code class="docutils literal notranslate"><span class="pre">ranges::ssize</span></code></p></li>
<li><p>P1983R0 - Wording for GB301, US296, US292, US291, and US283</p></li>
</ul>
</div></blockquote>
</li>
</ul>
</div>
<div class="section" id="improvements-and-new-features">
<h3><a class="toc-backref" href="#id4">Improvements and New Features</a><a class="headerlink" href="#improvements-and-new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">std::pop_heap</span></code> now uses an algorithm known as “bottom-up heapsort” or
“heapsort with bounce” to reduce the number of comparisons, and rearranges
elements using move-assignment instead of <code class="docutils literal notranslate"><span class="pre">std::swap</span></code>.</p></li>
<li><p>Libc++ now supports a variety of assertions that can be turned on to help catch
undefined behavior in user code. This new support is now separate from the old
(and incomplete) Debug Mode. Vendors can select whether the library they ship
should include assertions or not by default. For details, see
<a class="reference internal" href="UsingLibcxx.html#assertions-mode"><span class="std std-ref">the documentation</span></a> about this new feature.</p></li>
<li><p>Clang now implements the <code class="docutils literal notranslate"><span class="pre">-fexperimental-library</span></code> flag. This flag can be used to
enable experimental library features such as TSes and other in-progress work like
<code class="docutils literal notranslate"><span class="pre">&lt;ranges&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;format&gt;</span></code>. Using this flag makes it unnecessary to manually link
against <code class="docutils literal notranslate"><span class="pre">libc++experimental.a</span></code> – just use <code class="docutils literal notranslate"><span class="pre">-fexperimental-library</span></code> and the
compiler will do what’s needed to make experimental features work. However, be
aware that experimental features are not stable!</p></li>
<li><p>The implementation of the function <code class="docutils literal notranslate"><span class="pre">std::to_chars</span></code> for integral types using
base 10 has moved from the dylib to the header. This means the function no
longer has a minimum deployment target.</p></li>
<li><p>The performance for <code class="docutils literal notranslate"><span class="pre">std::to_chars</span></code>, for integral types using base 2, 8,
10, or 16 has been improved.</p></li>
<li><p>The functions <code class="docutils literal notranslate"><span class="pre">std::from_chars</span></code> and <code class="docutils literal notranslate"><span class="pre">std::to_chars</span></code> now have 128-bit integral
support.</p></li>
<li><p>The format functions (<code class="docutils literal notranslate"><span class="pre">std::format</span></code>, <code class="docutils literal notranslate"><span class="pre">std::format_to</span></code>, <code class="docutils literal notranslate"><span class="pre">std::format_to_n</span></code>, and
<code class="docutils literal notranslate"><span class="pre">std::formatted_size</span></code>) now validate the format string at compile time.
When the format string is invalid this will make the code ill-formed instead
of throwing an exception at run-time.  (This does not affect the <code class="docutils literal notranslate"><span class="pre">v</span></code>
functions.)</p></li>
<li><p>All format functions in <code class="docutils literal notranslate"><span class="pre">&lt;format&gt;</span></code> allow the usage of non-copyable types as
argument for the formatting functions. This change causes bit fields to become
invalid arguments for the formatting functions.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_CXX20_REMOVED_ALLOCATOR_VOID_SPECIALIZATION</span></code> macro has been added to allow
re-enabling the <code class="docutils literal notranslate"><span class="pre">allocator&lt;void&gt;</span></code> specialization. When used in conjunction with
<code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_CXX20_REMOVED_ALLOCATOR_MEMBERS</span></code>, this ensures that the members of
<code class="docutils literal notranslate"><span class="pre">allocator&lt;void&gt;</span></code> removed in C++20 can be accessed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">boyer_moore_searcher</span></code> and <code class="docutils literal notranslate"><span class="pre">boyer_moore_horspool_searcher</span></code> have been implemented.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">vector&lt;bool&gt;::const_reference</span></code>, <code class="docutils literal notranslate"><span class="pre">vector&lt;bool&gt;::const_iterator::reference</span></code>
and <code class="docutils literal notranslate"><span class="pre">bitset::const_reference</span></code> are now aliases for <cite>bool</cite> in the unstable ABI,
which improves libc++’s conformance to the Standard.</p></li>
</ul>
</div>
<div class="section" id="deprecations-and-removals">
<h3><a class="toc-backref" href="#id5">Deprecations and Removals</a><a class="headerlink" href="#deprecations-and-removals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The header <code class="docutils literal notranslate"><span class="pre">&lt;experimental/filesystem&gt;</span></code> has been removed. Instead, use
<code class="docutils literal notranslate"><span class="pre">&lt;filesystem&gt;</span></code> header. The associated macro
<code class="docutils literal notranslate"><span class="pre">_LIBCPP_DEPRECATED_EXPERIMENTAL_FILESYSTEM</span></code> has been removed too.</p></li>
<li><p>The C++14 function <code class="docutils literal notranslate"><span class="pre">std::quoted(const</span> <span class="pre">char*)</span></code> is no longer supported in
C++03 or C++11 modes.</p></li>
<li><p>Setting a custom debug handler with <code class="docutils literal notranslate"><span class="pre">std::__libcpp_debug_function</span></code> is not
supported anymore. Please migrate to using the new support for
<a class="reference internal" href="UsingLibcxx.html#assertions-mode"><span class="std std-ref">assertions</span></a> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::function</span></code> has been removed in C++03. If you are using it, please remove usages
or upgrade to C++11 or later. It is possible to re-enable <code class="docutils literal notranslate"><span class="pre">std::function</span></code> in C++03 by defining
<code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_CXX03_FUNCTION</span></code>. This option will be removed in LLVM 16.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">unary_function</span></code> and <code class="docutils literal notranslate"><span class="pre">binary_function</span></code> are no longer available in C++17 and C++20.
They can be re-enabled by defining <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_CXX17_REMOVED_UNARY_BINARY_FUNCTION</span></code>.
They are also marked as <code class="docutils literal notranslate"><span class="pre">[[deprecated]]</span></code> in C++11 and later. To disable deprecation warnings
you have to define <code class="docutils literal notranslate"><span class="pre">_LIBCPP_DISABLE_DEPRECATION_WARNINGS</span></code>. Note that this disables
all deprecation warnings.</p></li>
<li><p>The contents of <code class="docutils literal notranslate"><span class="pre">&lt;codecvt&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">wstring_convert</span></code> and <code class="docutils literal notranslate"><span class="pre">wbuffer_convert</span></code> have been marked as deprecated.
To disable deprecation warnings you have to define <code class="docutils literal notranslate"><span class="pre">_LIBCPP_DISABLE_DEPRECATION_WARNINGS</span></code>. Note that this
disables all deprecation warnings.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_DISABLE_EXTERN_TEMPLATE</span></code> macro is not honored anymore when defined by
users of libc++. Instead, users not wishing to take a dependency on libc++ should link
against the static version of libc++, which will result in no dependency being
taken against the shared library.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ABI_UNSTABLE</span></code> macro has been removed in favour of setting
<code class="docutils literal notranslate"><span class="pre">_LIBCPP_ABI_VERSION=2</span></code>. This should not have any impact on users because
they were not supposed to set <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ABI_UNSTABLE</span></code> manually, however we
still feel that it is worth mentioning in the release notes in case some users
had been doing it.</p></li>
<li><p>The integer distributions <code class="docutils literal notranslate"><span class="pre">binomial_distribution</span></code>, <code class="docutils literal notranslate"><span class="pre">discrete_distribution</span></code>,
<code class="docutils literal notranslate"><span class="pre">geometric_distribution</span></code>, <code class="docutils literal notranslate"><span class="pre">negative_binomial_distribution</span></code>, <code class="docutils literal notranslate"><span class="pre">poisson_distribution</span></code>,
and <code class="docutils literal notranslate"><span class="pre">uniform_int_distribution</span></code> now conform to the Standard by rejecting
template parameter types other than <code class="docutils literal notranslate"><span class="pre">short</span></code>, <code class="docutils literal notranslate"><span class="pre">int</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span></code>, <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">long</span></code>,
and the unsigned versions thereof. As an extension, <code class="docutils literal notranslate"><span class="pre">int8_t</span></code>, <code class="docutils literal notranslate"><span class="pre">__int128_t</span></code> and
their unsigned versions are supported too. In particular, instantiating these
distributions with non-integer types like <code class="docutils literal notranslate"><span class="pre">bool</span></code> and <code class="docutils literal notranslate"><span class="pre">char</span></code> will not compile
anymore.</p></li>
</ul>
</div>
<div class="section" id="upcoming-deprecations-and-removals">
<h3><a class="toc-backref" href="#id6">Upcoming Deprecations and Removals</a><a class="headerlink" href="#upcoming-deprecations-and-removals" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_DEBUG</span></code> macro is not supported anymore. It will be honoured until
LLVM 16, and then it will be an error to define that macro. To enable basic
assertions (previously <code class="docutils literal notranslate"><span class="pre">_LIBCPP_DEBUG=0</span></code>), please use <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_ASSERTIONS=1</span></code>.
To enable the debug mode (previously <code class="docutils literal notranslate"><span class="pre">_LIBCPP_DEBUG=1|2</span></code>), please ensure that
the library has been built with support for the debug mode, and it will be
enabled automatically (no need to define <code class="docutils literal notranslate"><span class="pre">_LIBCPP_DEBUG</span></code>).</p></li>
<li><p>The experimental versions of <code class="docutils literal notranslate"><span class="pre">boyer_moore_searcher</span></code> and <code class="docutils literal notranslate"><span class="pre">boyer_moore_horspool_searcher</span></code>
will be removed in LLVM 17. You can disable the deprecation warnings by defining
<code class="docutils literal notranslate"><span class="pre">_LIBCPP_NO_EXPERIMENTAL_DEPRECATION_WARNING_SEARCHERS</span></code>.</p></li>
<li><p>The implementation of the Coroutines TS in <code class="docutils literal notranslate"><span class="pre">std::experimental</span></code> will be removed in LLVM 16.</p></li>
<li><p>Libc++ is getting ready to remove unnecessary transitive inclusions. This may
break your code in the future. To future-proof your code to these removals,
please compile your code with <code class="docutils literal notranslate"><span class="pre">_LIBCPP_REMOVE_TRANSITIVE_INCLUDES</span></code> defined
and fix any compilation error resulting from missing includes.</p></li>
</ul>
</div>
<div class="section" id="abi-affecting-changes">
<h3><a class="toc-backref" href="#id7">ABI Affecting Changes</a><a class="headerlink" href="#abi-affecting-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ABI_USE_CXX03_NULLPTR_EMULATION</span></code> macro controlling whether we use an
emulation for <code class="docutils literal notranslate"><span class="pre">std::nullptr_t</span></code> in C++03 mode has been removed. After this change,
<code class="docutils literal notranslate"><span class="pre">_LIBCPP_ABI_USE_CXX03_NULLPTR_EMULATION</span></code> will not be honoured anymore and there
will be no way to opt back into the C++03 emulation of <code class="docutils literal notranslate"><span class="pre">std::nullptr_t</span></code>.</p></li>
<li><p>On FreeBSD, NetBSD, DragonFlyBSD and Solaris, <code class="docutils literal notranslate"><span class="pre">std::random_device</span></code> is now implemented on
top of <code class="docutils literal notranslate"><span class="pre">arc4random()</span></code> instead of reading from <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code>. Any implementation-defined
token used when constructing a <code class="docutils literal notranslate"><span class="pre">std::random_device</span></code> will now be ignored instead of
interpreted as a file to read entropy from.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::valarray</span></code>’s unary operators <code class="docutils literal notranslate"><span class="pre">!</span></code>, <code class="docutils literal notranslate"><span class="pre">+</span></code>, <code class="docutils literal notranslate"><span class="pre">~</span></code> and <code class="docutils literal notranslate"><span class="pre">-</span></code> now return an expression
object instead of a <code class="docutils literal notranslate"><span class="pre">valarray</span></code>. This was done to fix an issue where any expression involving
other <code class="docutils literal notranslate"><span class="pre">valarray</span></code> operators and one of these unary operators would end up with a dangling
reference. This is a potential ABI break for code that exposes <code class="docutils literal notranslate"><span class="pre">std::valarray</span></code> on an ABI
boundary, specifically if the return type of an ABI-boundary function is <code class="docutils literal notranslate"><span class="pre">auto</span></code>-deduced
from an expression involving unary operators on <code class="docutils literal notranslate"><span class="pre">valarray</span></code>. If you are concerned by this,
you can audit whether your executable or library exports any function that returns a
<code class="docutils literal notranslate"><span class="pre">valarray</span></code>, and if so ensure that any such function uses <code class="docutils literal notranslate"><span class="pre">std::valarray</span></code> directly
as a return type instead of relying on the type of <code class="docutils literal notranslate"><span class="pre">valarray</span></code>-expressions, which is
not guaranteed by the Standard anyway.</p></li>
<li><p>By default, the legacy debug mode symbols are not provided with the library anymore. If
you are a vendor and need to re-enable them, please use the <code class="docutils literal notranslate"><span class="pre">LIBCXX_ENABLE_BACKWARDS_COMPATIBILITY_DEBUG_MODE_SYMBOLS</span></code>
CMake flag, and contact the libc++ developers as this will be removed in LLVM 16.
Furthermore, please note that <code class="docutils literal notranslate"><span class="pre">LIBCXX_ENABLE_DEBUG_MODE_SUPPORT</span></code> is not honored anymore.</p></li>
</ul>
</div>
<div class="section" id="build-system-changes">
<h3><a class="toc-backref" href="#id8">Build System Changes</a><a class="headerlink" href="#build-system-changes" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Support for standalone builds have been entirely removed from libc++, libc++abi and
libunwind. Please use <a class="reference internal" href="BuildingLibcxx.html#build-instructions"><span class="std std-ref">these instructions</span></a> for building
libc++, libc++abi and/or libunwind.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">{LIBCXX,LIBCXXABI,LIBUNWIND}_TARGET_TRIPLE</span></code>, <code class="docutils literal notranslate"><span class="pre">{LIBCXX,LIBCXXABI,LIBUNWIND}_SYSROOT</span></code> and
<code class="docutils literal notranslate"><span class="pre">{LIBCXX,LIBCXXABI,LIBUNWIND}_GCC_TOOLCHAIN</span></code> CMake variables have been removed. Instead, please
use the <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER_TARGET</span></code>, <code class="docutils literal notranslate"><span class="pre">CMAKE_SYSROOT</span></code> and <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER_EXTERNAL_TOOLCHAIN</span></code>
variables provided by CMake.</p></li>
<li><p>When building for Windows, vendors who want to avoid dll-exporting symbols from the static libc++abi
library should set <code class="docutils literal notranslate"><span class="pre">LIBCXXABI_HERMETIC_STATIC_LIBRARY=ON</span></code> when configuring CMake. The current
behavior, which tries to guess the correct dll-export semantics based on whether we’re building
the libc++ shared library, will be removed in LLVM 16.</p></li>
<li><p>Previously, the C++ ABI library headers would be installed inside <code class="docutils literal notranslate"><span class="pre">&lt;prefix&gt;/include/c++/v1</span></code>
alongside the libc++ headers as part of building libc++. This is not the case anymore – the
ABI library is expected to install its headers where it wants them as part of its own build.
Note that no action is required for most users, who build libc++ against libc++abi, since
libc++abi already installs its headers in the right location. However, vendors building
libc++ against alternate ABI libraries should make sure that their ABI library installs
its own headers.</p></li>
<li><p>The legacy testing configuration is now deprecated and will be removed in LLVM 16. For
most users, this should not have any impact. However, if you are testing libc++, libc++abi, or
libunwind in a configuration or on a platform that used to be supported by the legacy testing
configuration and isn’t supported by one of the configurations in <code class="docutils literal notranslate"><span class="pre">libcxx/test/configs</span></code>,
<code class="docutils literal notranslate"><span class="pre">libcxxabi/test/configs</span></code>, or <code class="docutils literal notranslate"><span class="pre">libunwind/test/configs</span></code>, please move to one of those
configurations or define your own.</p></li>
<li><p>MinGW DLL builds of libc++ no longer use dllimport in their headers, which
means that the same set of installed headers works for both DLL and static
linkage. This means that distributors finally can build both library
versions with a single CMake invocation.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">LIBCXX_HIDE_FROM_ABI_PER_TU_BY_DEFAULT</span></code> configuration option has been removed. Indeed,
the risk of ODR violations from mixing different versions of libc++ in the same program has
been mitigated with a different technique that is simpler and does not have the drawbacks of
using internal linkage.</p></li>
</ul>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">“libc++” C++ Standard Library</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsingLibcxx.html">Using libc++</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2011-2022, LLVM Project.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>