
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>How to cross-compile Clang/LLVM using Clang/LLVM &#8212; LLVM 21.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/llvm-theme.css?v=96924833" />
    <script src="_static/documentation_options.js?v=c54a4614"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to Update Debug Info: A Guide for LLVM Pass Authors" href="HowToUpdateDebugInfo.html" />
    <link rel="prev" title="How to Cross Compile Compiler-rt Builtins For Arm" href="HowToCrossCompileBuiltinsOnArm.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="HowToUpdateDebugInfo.html" title="How to Update Debug Info: A Guide for LLVM Pass Authors"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="HowToCrossCompileBuiltinsOnArm.html" title="How to Cross Compile Compiler-rt Builtins For Arm"
             accesskey="P">previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="UserGuides.html" accesskey="U">User Guides</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to cross-compile Clang/LLVM using Clang/LLVM</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="https://llvm.org/docs/UserGuides.html">User Guides</a></li>
    <li><a href="https://llvm.org/docs/Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/Contributing.html">Contributing to LLVM</a></li>
    <li><a href="https://llvm.org/docs/HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#discord">Discord</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/FAQ.html">FAQ</a></li>
    <li><a href="https://llvm.org/docs/Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project/">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/HowToCrossCompileLLVM.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="how-to-cross-compile-clang-llvm-using-clang-llvm">
<h1>How to cross-compile Clang/LLVM using Clang/LLVM<a class="headerlink" href="#how-to-cross-compile-clang-llvm-using-clang-llvm" title="Link to this heading">¶</a></h1>
<section id="introduction">
<h2>Introduction<a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains information about building LLVM and
Clang on a host machine, targeting another platform.</p>
<p>For more information on how to use Clang as a cross-compiler,
please check <a class="reference external" href="https://clang.llvm.org/docs/CrossCompilation.html">https://clang.llvm.org/docs/CrossCompilation.html</a>.</p>
<p>This document describes cross-building a compiler in a single stage, using an
existing <code class="docutils literal notranslate"><span class="pre">clang</span></code> install as the host compiler.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>These instructions have been tested for targeting 32-bit ARM, AArch64, or
64-bit RISC-V from an x86_64 Linux host. But should be equally applicable to
any other target.</p>
</div>
</section>
<section id="setting-up-a-sysroot">
<h2>Setting up a sysroot<a class="headerlink" href="#setting-up-a-sysroot" title="Link to this heading">¶</a></h2>
<p>You will need a sysroot that contains essential build dependencies compiled
for the target architecture. In this case, we will be using CMake and Ninja on
a Linux host and compiling against a Debian sysroot. Detailed instructions on
producing sysroots are outside of the scope of this documentation, but the
following instructions should work on any Linux distribution with these
pre-requisites:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">binfmt_misc</span></code> configured to execute <code class="docutils literal notranslate"><span class="pre">qemu-user</span></code> for binaries of the
target architecture. This is done by installing the <code class="docutils literal notranslate"><span class="pre">qemu-user-static</span></code>
and <code class="docutils literal notranslate"><span class="pre">binfmt-support</span></code> packages on Debian-derived distributions.</p></li>
<li><p>Root access (setups involving <code class="docutils literal notranslate"><span class="pre">proot</span></code> or other tools to avoid this
requirement may be possible, but aren’t described here).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">debootstrap</span></code> tool. This is available in most distributions.</p></li>
</ul>
</div></blockquote>
<p>The following snippet will initialise sysroots for 32-bit Arm, AArch64, and
64-bit RISC-V (just pick the target(s) you are interested in):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>debootstrap<span class="w"> </span>--arch<span class="o">=</span>armhf<span class="w"> </span>--variant<span class="o">=</span>minbase<span class="w"> </span>--include<span class="o">=</span>build-essential,symlinks<span class="w"> </span>stable<span class="w"> </span>sysroot-deb-armhf-stable
sudo<span class="w"> </span>debootstrap<span class="w"> </span>--arch<span class="o">=</span>arm64<span class="w"> </span>--variant<span class="o">=</span>minbase<span class="w"> </span>--include<span class="o">=</span>build-essential,symlinks<span class="w"> </span>stable<span class="w"> </span>sysroot-deb-arm64-stable
sudo<span class="w"> </span>debootstrap<span class="w"> </span>--arch<span class="o">=</span>riscv64<span class="w"> </span>--variant<span class="o">=</span>minbase<span class="w"> </span>--include<span class="o">=</span>build-essential,symlinks<span class="w"> </span>unstable<span class="w"> </span>sysroot-deb-riscv64-unstable
</pre></div>
</div>
</div></blockquote>
<p>The created sysroot may contain absolute symlinks, which will resolve to a
location within the host when accessed during compilation, so we must convert
any absolute symlinks to relative ones:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>chroot<span class="w"> </span>sysroot-of-your-choice<span class="w"> </span>symlinks<span class="w"> </span>-cr<span class="w"> </span>.
</pre></div>
</div>
</div></blockquote>
</section>
<section id="configuring-cmake-and-building">
<h2>Configuring CMake and building<a class="headerlink" href="#configuring-cmake-and-building" title="Link to this heading">¶</a></h2>
<p>For more information on how to configure CMake for LLVM/Clang,
see <a class="reference internal" href="CMake.html"><span class="doc">Building LLVM with CMake</span></a>. Following CMake’s recommended practice, we will create a
<a class="reference external" href="https://cmake.org/cmake/help/book/mastering-cmake/chapter/Cross%20Compiling%20With%20CMake.html#toolchain-files">toolchain file</a>.</p>
<p>The following assumes you have a system install of <code class="docutils literal notranslate"><span class="pre">clang</span></code> and <code class="docutils literal notranslate"><span class="pre">lld</span></code> that
will be used for cross compiling and that the listed commands are executed
from within the root of a checkout of the <code class="docutils literal notranslate"><span class="pre">llvm-project</span></code> git repository.</p>
<p>First, set variables in your shell session that will be used throughout the
build instructions:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nv">SYSROOT</span><span class="o">=</span><span class="nv">$HOME</span>/sysroot-deb-arm64-stable
<span class="nv">TARGET</span><span class="o">=</span>aarch64-linux-gnu
<span class="nv">CFLAGS</span><span class="o">=</span><span class="s2">&quot;&quot;</span>
</pre></div>
</div>
</div></blockquote>
<p>To customise details of the compilation target or choose a different
architecture altogether, change the <code class="docutils literal notranslate"><span class="pre">SYSROOT</span></code>,
<code class="docutils literal notranslate"><span class="pre">TARGET</span></code>, and <code class="docutils literal notranslate"><span class="pre">CFLAGS</span></code> variables to something matching your target. For
example, for 64-bit RISC-V you might set
<code class="docutils literal notranslate"><span class="pre">SYSROOT=$HOME/sysroot-deb-riscv64-unstable</span></code>, <code class="docutils literal notranslate"><span class="pre">TARGET=riscv64-linux-gnu</span></code>
and <code class="docutils literal notranslate"><span class="pre">CFLAGS=&quot;-march=rva20u64&quot;</span></code>. Refer to documentation such as your target’s
compiler documentation or processor manual for guidance on which <code class="docutils literal notranslate"><span class="pre">CFLAGS</span></code>
settings may be appropriate. The specified <code class="docutils literal notranslate"><span class="pre">TARGET</span></code> should match the triple
used within the sysroot (i.e. <code class="docutils literal notranslate"><span class="pre">$SYSROOT/usr/lib/$TARGET</span></code> should exist).</p>
<p>Then execute the following snippet to create a toolchain file:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat<span class="w"> </span>-<span class="w"> </span><span class="s">&lt;&lt;EOF &gt; $TARGET-clang.cmake</span>
<span class="s">set(CMAKE_SYSTEM_NAME Linux)</span>
<span class="s">set(CMAKE_SYSROOT &quot;$SYSROOT&quot;)</span>
<span class="s">set(CMAKE_C_COMPILER_TARGET $TARGET)</span>
<span class="s">set(CMAKE_CXX_COMPILER_TARGET $TARGET)</span>
<span class="s">set(CMAKE_C_FLAGS_INIT &quot;$CFLAGS&quot;)</span>
<span class="s">set(CMAKE_CXX_FLAGS_INIT &quot;$CFLAGS&quot;)</span>
<span class="s">set(CMAKE_LINKER_TYPE LLD)</span>
<span class="s">set(CMAKE_C_COMPILER clang)</span>
<span class="s">set(CMAKE_CXX_COMPILER clang++)</span>
<span class="s">set(CMAKE_FIND_ROOT_PATH_MODE_PROGRAM NEVER)</span>
<span class="s">set(CMAKE_FIND_ROOT_PATH_MODE_LIBRARY ONLY)</span>
<span class="s">set(CMAKE_FIND_ROOT_PATH_MODE_INCLUDE ONLY)</span>
<span class="s">set(CMAKE_FIND_ROOT_PATH_MODE_PACKAGE ONLY)</span>
<span class="s">EOF</span>
</pre></div>
</div>
</div></blockquote>
<p>Then configure and build by invoking <code class="docutils literal notranslate"><span class="pre">cmake</span></code>:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>-G<span class="w"> </span>Ninja<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-DLLVM_ENABLE_PROJECTS<span class="o">=</span><span class="s2">&quot;lld;clang&quot;</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-DCMAKE_TOOLCHAIN_FILE<span class="o">=</span><span class="k">$(</span><span class="nb">pwd</span><span class="k">)</span>/<span class="nv">$TARGET</span>-clang.cmake<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-DLLVM_HOST_TRIPLE<span class="o">=</span><span class="nv">$TARGET</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span><span class="nv">$HOME</span>/clang-<span class="nv">$TARGET</span><span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-S<span class="w"> </span>llvm<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>-B<span class="w"> </span>build/<span class="nv">$TARGET</span>
cmake<span class="w"> </span>--build<span class="w"> </span>build/<span class="nv">$TARGET</span>
</pre></div>
</div>
</div></blockquote>
<p>These options from the toolchain file and <code class="docutils literal notranslate"><span class="pre">cmake</span></code> invocation above are
important:</p>
<blockquote>
<div><ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSTEM_NAME</span></code>: Perhaps surprisingly, explicitly setting this
variable <a class="reference external" href="https://cmake.org/cmake/help/latest/variable/CMAKE_CROSSCOMPILING.html#variable:CMAKE_CROSSCOMPILING">causes CMake to set
CMAKE_CROSSCOMPIILING</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_{C,CXX}_COMPILER_TARGET</span></code>: This will be used to set the
<code class="docutils literal notranslate"><span class="pre">--target</span></code> argument to <code class="docutils literal notranslate"><span class="pre">clang</span></code>. The triple should match the triple used
within the sysroot (i.e. <code class="docutils literal notranslate"><span class="pre">$SYSROOT/usr/lib/$TARGET</span></code> should exist).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_FIND_ROOT_PATH_MODE_*</span></code>: These <a class="reference external" href="https://cmake.org/cmake/help/book/mastering-cmake/chapter/Cross%20Compiling%20With%20CMake.html#finding-external-libraries-programs-and-other-files">control the search behaviour for
finding libraries, includes or binaries</a>.
Setting these prevents files for the host being used in the build.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_HOST_TRIPLE</span></code>: Specifies the target triple of the system the built
LLVM will run on, which also implicitly sets other defaults such as
<code class="docutils literal notranslate"><span class="pre">LLVM_DEFAULT_TARGET_TRIPLE</span></code>. For example, if you are using an x86_64
host to compile for RISC-V, this will be a RISC-V triple.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_SYSROOT</span></code>: The path to the sysroot containing libraries and headers
for the target.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>: Setting this avoids installing binaries compiled
for the target system into system directories for the host system. It is
not required unless you are going to use the <code class="docutils literal notranslate"><span class="pre">install</span></code> target.</p></li>
</ul>
</div></blockquote>
<p>See <a class="reference external" href="https://llvm.org/docs/CMake.html#frequently-used-cmake-variables">LLVM’s build documentation</a> for more
guidance on CMake variables (e.g. <code class="docutils literal notranslate"><span class="pre">LLVM_TARGETS_TO_BUILD</span></code> may be useful if
your cross-compiled binaries only need to support compiling for one target).</p>
</section>
<section id="working-around-a-ninja-dependency-issue">
<h2>Working around a ninja dependency issue<a class="headerlink" href="#working-around-a-ninja-dependency-issue" title="Link to this heading">¶</a></h2>
<p>If you followed the instructions above to create a sysroot, you may run into a
<a class="reference external" href="https://github.com/ninja-build/ninja/issues/1330">longstanding problem related to path canonicalization in ninja</a>. GCC canonicalizes system
headers in dependency files, so when ninja reads them it does not need to do
so. Clang does not do this, and unfortunately ninja does not implement the
canonicalization logic at all, meaning for some system headers with symlinks
in the paths, it can incorrectly compute a non-existing path and consider it
as always modified.</p>
<p>If you are suffering from this issue, you will find any attempt at an
incremental build (including the suggested command to build the <code class="docutils literal notranslate"><span class="pre">install</span></code>
target in the next section) results in recompiling everything.  <code class="docutils literal notranslate"><span class="pre">ninja</span> <span class="pre">-C</span>
<span class="pre">build/$TARGET</span> <span class="pre">-t</span> <span class="pre">deps</span></code> shows files in <code class="docutils literal notranslate"><span class="pre">$SYSROOT/include/*</span></code> that
do not exist (as the <code class="docutils literal notranslate"><span class="pre">$SYSROOT/include</span></code> folder does not exist) and you can
further confirm these files are causing <code class="docutils literal notranslate"><span class="pre">ninja</span></code> to determine a rebuild is
necessary with <code class="docutils literal notranslate"><span class="pre">ninja</span> <span class="pre">-C</span> <span class="pre">build/$TARGET</span> <span class="pre">-d</span> <span class="pre">deps</span></code>.</p>
<p>A workaround is to create a symlink so that the incorrect
<code class="docutils literal notranslate"><span class="pre">$SYSROOT/include/*</span></code> dependencies resolve to files within
<code class="docutils literal notranslate"><span class="pre">$SYSROOT/usr/include/*</span></code>. This works in practice for the simple
cross-compilation use case described here, but is not a general solution.</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>sudo<span class="w"> </span>ln<span class="w"> </span>-s<span class="w"> </span>usr/include<span class="w"> </span><span class="nv">$SYSROOT</span>/include
</pre></div>
</div>
</div></blockquote>
</section>
<section id="testing-the-just-built-compiler">
<h2>Testing the just-built compiler<a class="headerlink" href="#testing-the-just-built-compiler" title="Link to this heading">¶</a></h2>
<p>Confirm the <code class="docutils literal notranslate"><span class="pre">clang</span></code> binary was built for the expected target architecture:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>file<span class="w"> </span>-L<span class="w"> </span>./build/aarch64-linux-gnu/bin/clang
./build/aarch64-linux-gnu/bin/clang:<span class="w"> </span>ELF<span class="w"> </span><span class="m">64</span>-bit<span class="w"> </span>LSB<span class="w"> </span>pie<span class="w"> </span>executable,<span class="w"> </span>ARM<span class="w"> </span>aarch64,<span class="w"> </span>version<span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="o">(</span>SYSV<span class="o">)</span>,<span class="w"> </span>dynamically<span class="w"> </span>linked,<span class="w"> </span>interpreter<span class="w"> </span>/lib/ld-linux-aarch64.so.1,<span class="w"> </span><span class="k">for</span><span class="w"> </span>GNU/Linux<span class="w"> </span><span class="m">3</span>.7.0,<span class="w"> </span>BuildID<span class="o">[</span>sha1<span class="o">]=</span>516b8b366a790fcd3563bee4aec0cdfcb90bb1c7,<span class="w"> </span>not<span class="w"> </span>stripped
</pre></div>
</div>
</div></blockquote>
<p>If you have <code class="docutils literal notranslate"><span class="pre">qemu-user</span></code> installed you can test the produced target binary
either by invoking <code class="docutils literal notranslate"><span class="pre">qemu-{target}-static</span></code> directly:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>qemu-aarch64-static<span class="w"> </span>-L<span class="w"> </span><span class="nv">$SYSROOT</span><span class="w"> </span>./build/aarch64-linux-gnu/bin/clang<span class="w"> </span>--version
clang<span class="w"> </span>version<span class="w"> </span><span class="m">21</span>.0.0git<span class="w"> </span><span class="o">(</span>https://github.com/llvm/llvm-project<span class="w"> </span>cedfdc6e889c5c614a953ed1f44bcb45a405f8da<span class="o">)</span>
Target:<span class="w"> </span>aarch64-unknown-linux-gnu
Thread<span class="w"> </span>model:<span class="w"> </span>posix
InstalledDir:<span class="w"> </span>/home/asb/llvm-project/build/aarch64-linux-gnu/bin
</pre></div>
</div>
</div></blockquote>
<p>Or, if binfmt_misc is configured (as was necessary for debootstrap):</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span><span class="nb">export</span><span class="w"> </span><span class="nv">QEMU_LD_PREFIX</span><span class="o">=</span><span class="nv">$SYSROOT</span><span class="p">;</span><span class="w"> </span>./build/aarch64-linux-gnu/bin/clang<span class="w"> </span>--version
clang<span class="w"> </span>version<span class="w"> </span><span class="m">21</span>.0.0git<span class="w"> </span><span class="o">(</span>https://github.com/llvm/llvm-project<span class="w"> </span>cedfdc6e889c5c614a953ed1f44bcb45a405f8da<span class="o">)</span>
Target:<span class="w"> </span>aarch64-unknown-linux-gnu
Thread<span class="w"> </span>model:<span class="w"> </span>posix
InstalledDir:<span class="w"> </span>/home/asb/llvm-project/build/aarch64-linux-gnu/bin
</pre></div>
</div>
</div></blockquote>
</section>
<section id="installing-and-using">
<h2>Installing and using<a class="headerlink" href="#installing-and-using" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Use of the <code class="docutils literal notranslate"><span class="pre">install</span></code> target requires that you have set
<code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code> otherwise it will attempt to install in
directories under <cite>/</cite> on your host.</p>
</div>
<p>If you want to transfer a copy of the built compiler to another machine, you
can first install it to a location on the host via:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cmake<span class="w"> </span>--build<span class="w"> </span>build/<span class="nv">$TARGET</span><span class="w"> </span>--target<span class="o">=</span>install
</pre></div>
</div>
</div></blockquote>
<p>This will install the LLVM/Clang headers, binaries, libraries, and other files
to paths within <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>. Then tar that directory for transfer
to a device that runs the target architecture natively:</p>
<blockquote>
<div><div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>tar<span class="w"> </span>-czvf<span class="w"> </span>clang-<span class="nv">$TARGET</span>.tar.gz<span class="w"> </span>-C<span class="w"> </span><span class="nv">$HOME</span><span class="w"> </span>clang-<span class="nv">$TARGET</span>
</pre></div>
</div>
</div></blockquote>
<p>The generated toolchain is portable, but requires compatible versions of any
shared libraries it links against. This means using a sysroot that is as
similar to your target operating system as possible is desirable. Other <a class="reference external" href="https://llvm.org/docs/CMake.html#frequently-used-cmake-variables">CMake
variables</a>
may be helpful, for instance <code class="docutils literal notranslate"><span class="pre">LLVM_STATIC_LINK_CXX_STDLIB</span></code>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="HowToUpdateDebugInfo.html" title="How to Update Debug Info: A Guide for LLVM Pass Authors"
             >next</a> |</li>
        <li class="right" >
          <a href="HowToCrossCompileBuiltinsOnArm.html" title="How to Cross Compile Compiler-rt Builtins For Arm"
             >previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="UserGuides.html" >User Guides</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">How to cross-compile Clang/LLVM using Clang/LLVM</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2003-2025, LLVM Project.
      Last updated on 2025-08-26.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>