
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>lld 21.1.0 Release Notes &#8212; lld 21.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/llvm.css?v=1cf7c864" />
    <script src="_static/documentation_options.js?v=c54a4614"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Large data sections" href="ELF/large_sections.html" />
    <link rel="prev" title="Partitions" href="Partitions.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
<a href="index.html"><img src="_static/logo.png" alt="LLVM Documentation"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ELF/large_sections.html" title="Large data sections"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             accesskey="P">previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>

        <li class="nav-item nav-item-this"><a href="">lld 21.1.0 Release Notes</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">lld 21.1.0 Release Notes</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release">Non-comprehensive list of changes in this release</a><ul>
<li><a class="reference internal" href="#elf-improvements">ELF Improvements</a></li>
<li><a class="reference internal" href="#breaking-changes">Breaking changes</a></li>
<li><a class="reference internal" href="#coff-improvements">COFF Improvements</a></li>
<li><a class="reference internal" href="#mingw-improvements">MinGW Improvements</a></li>
<li><a class="reference internal" href="#macho-improvements">MachO Improvements</a></li>
<li><a class="reference internal" href="#webassembly-improvements">WebAssembly Improvements</a><ul>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Partitions.html"
                          title="previous chapter">Partitions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ELF/large_sections.html"
                          title="next chapter">Large data sections</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ReleaseNotes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="lld-release-release-notes">
<h1>lld 21.1.0 Release Notes<a class="headerlink" href="#lld-release-release-notes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id11">Introduction</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id12">Non-comprehensive list of changes in this release</a></p>
<ul>
<li><p><a class="reference internal" href="#elf-improvements" id="id13">ELF Improvements</a></p></li>
<li><p><a class="reference internal" href="#breaking-changes" id="id14">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#coff-improvements" id="id15">COFF Improvements</a></p></li>
<li><p><a class="reference internal" href="#mingw-improvements" id="id16">MinGW Improvements</a></p></li>
<li><p><a class="reference internal" href="#macho-improvements" id="id17">MachO Improvements</a></p></li>
<li><p><a class="reference internal" href="#webassembly-improvements" id="id18">WebAssembly Improvements</a></p>
<ul>
<li><p><a class="reference internal" href="#fixes" id="id19">Fixes</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id11" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the lld linker, release 21.1.0.
Here we describe the status of lld, including major improvements
from the previous release. All lld releases may be downloaded
from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h2><a class="toc-backref" href="#id12" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Link to this heading">¶</a></h2>
<section id="elf-improvements">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">ELF Improvements</a><a class="headerlink" href="#elf-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">dynamic-undefined-weak</span></code> to make undefined weak symbols dynamic
when the dynamic symbol table is present.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/143831">#143831</a>)</p></li>
<li><p>For <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">undefs</span></code> (default for <code class="docutils literal notranslate"><span class="pre">-shared</span></code>), relocations referencing undefined
strong symbols now behave like relocations referencing undefined weak symbols.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--why-live=&lt;glob&gt;</span></code> prints for each symbol matching <code class="docutils literal notranslate"><span class="pre">&lt;glob&gt;</span></code> a chain of
items that kept it live during garbage collection. This is inspired by the
Mach-O LLD feature of the same name.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--thinlto-distributor=</span></code> and <code class="docutils literal notranslate"><span class="pre">--thinlto-remote-compiler=</span></code> options are
added to support Integrated Distributed ThinLTO.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/142757">#142757</a>)</p></li>
<li><p>Linker script <code class="docutils literal notranslate"><span class="pre">OVERLAY</span></code> descriptions now support virtual memory regions
(e.g. <code class="docutils literal notranslate"><span class="pre">&gt;region</span></code>) and <code class="docutils literal notranslate"><span class="pre">NOCROSSREFS</span></code>.</p></li>
<li><p>When the last <code class="docutils literal notranslate"><span class="pre">PT_LOAD</span></code> segment is executable and includes BSS sections,
its <code class="docutils literal notranslate"><span class="pre">p_memsz</span></code> member is now correct.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/139207">#139207</a>)</p></li>
<li><p>Spurious <code class="docutils literal notranslate"><span class="pre">ASSERT</span></code> errors before the layout converges are now fixed.</p></li>
<li><p>For ARM and AArch64, <code class="docutils literal notranslate"><span class="pre">--xosegment</span></code> and <code class="docutils literal notranslate"><span class="pre">--no-xosegment</span></code> control whether
to place executable-only and readable-executable sections in the same
segment. The default option is <code class="docutils literal notranslate"><span class="pre">--no-xosegment</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/132412">#132412</a>)</p></li>
<li><p>For AArch64, added support for the <code class="docutils literal notranslate"><span class="pre">SHF_AARCH64_PURECODE</span></code> section flag,
which indicates that the section only contains program code and no data.
An output section will only have this flag set if all input sections also
have it set. (<a class="reference external" href="https://github.com/llvm/llvm-project/pull/125689">#125689</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/pull/134798">#134798</a>)</p></li>
<li><p>For AArch64 and ARM, added <code class="docutils literal notranslate"><span class="pre">-zexecute-only-report</span></code>, which checks for
missing <code class="docutils literal notranslate"><span class="pre">SHF_AARCH64_PURECODE</span></code> and <code class="docutils literal notranslate"><span class="pre">SHF_ARM_PURECODE</span></code> section flags
on executable sections.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/128883">#128883</a>)</p></li>
<li><p>For AArch64, <code class="docutils literal notranslate"><span class="pre">-z</span> <span class="pre">nopac-plt</span></code> has been added.</p></li>
<li><p>For AArch64 and X86_64, added <code class="docutils literal notranslate"><span class="pre">--branch-to-branch</span></code>, which rewrites branches
that point to another branch instruction to instead branch directly to the
target of the second instruction. Enabled by default at <code class="docutils literal notranslate"><span class="pre">-O2</span></code>.</p></li>
<li><p>For AArch64, added support for <code class="docutils literal notranslate"><span class="pre">-zgcs-report-dynamic</span></code>, enabling checks for
GNU GCS Attribute Flags in Dynamic Objects when GCS is enabled. Inherits value
from <code class="docutils literal notranslate"><span class="pre">-zgcs-report</span></code> (capped at <code class="docutils literal notranslate"><span class="pre">warning</span></code> level) unless user-defined,
ensuring compatibility with GNU ld linker.</p></li>
<li><p>The default Hexagon architecture version in ELF object files produced by
lld is changed to v68. This change is only effective when the version is
not provided in the command line by the user and cannot be inferred from
inputs.</p></li>
<li><p>For LoongArch, the initial-exec to local-exec TLS optimization has been implemented.</p></li>
<li><p>For LoongArch, several relaxation optimizations are supported, including relaxation for
<code class="docutils literal notranslate"><span class="pre">R_LARCH_PCALA_HI20/LO12</span></code> and <code class="docutils literal notranslate"><span class="pre">R_LARCH_GOT_PC_HI20/LO12</span></code> relocations, instruction
relaxation for <code class="docutils literal notranslate"><span class="pre">R_LARCH_CALL36</span></code>, TLS local-exec (<code class="docutils literal notranslate"><span class="pre">LE</span></code>)/global dynamic (<code class="docutils literal notranslate"><span class="pre">GD</span></code>)/
local dynamic (<code class="docutils literal notranslate"><span class="pre">LD</span></code>) model relaxation, and TLSDESC code sequence relaxation.</p></li>
<li><p>For RISCV, an oscillation bug due to call relaxation is now fixed.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/142899">#142899</a>)</p></li>
<li><p>For x86-64, the <code class="docutils literal notranslate"><span class="pre">.ltext</span></code> section is now placed before <code class="docutils literal notranslate"><span class="pre">.rodata</span></code>.</p></li>
</ul>
</section>
<section id="breaking-changes">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Breaking changes</a><a class="headerlink" href="#breaking-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Executable-only and readable-executable sections are now allowed to be placed
in the same segment by default. Pass <code class="docutils literal notranslate"><span class="pre">--xosegment</span></code> to lld in order to get
the old behavior back.</p></li>
<li><p>When using <code class="docutils literal notranslate"><span class="pre">--no-pie</span></code> without a <code class="docutils literal notranslate"><span class="pre">SECTIONS</span></code> command, the linker uses the
target’s default image base. If <code class="docutils literal notranslate"><span class="pre">-Ttext=</span></code> or <code class="docutils literal notranslate"><span class="pre">--section-start</span></code> specifies
an output section address below this base, there will now be an error.
<code class="docutils literal notranslate"><span class="pre">--image-base</span></code> can be set at a lower address to fix the error.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/140187">#140187</a>)</p></li>
</ul>
</section>
<section id="coff-improvements">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">COFF Improvements</a><a class="headerlink" href="#coff-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">/thinlto-distributor</span></code> and <code class="docutils literal notranslate"><span class="pre">/thinlto-remote-compiler</span></code> options
added to support Integrated Distributed ThinLTO.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/147265">#147265</a>)</p></li>
</ul>
</section>
<section id="mingw-improvements">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">MinGW Improvements</a><a class="headerlink" href="#mingw-improvements" title="Link to this heading">¶</a></h3>
</section>
<section id="macho-improvements">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">MachO Improvements</a><a class="headerlink" href="#macho-improvements" title="Link to this heading">¶</a></h3>
</section>
<section id="webassembly-improvements">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">WebAssembly Improvements</a><a class="headerlink" href="#webassembly-improvements" title="Link to this heading">¶</a></h3>
<section id="fixes">
<h4><a class="toc-backref" href="#id19" role="doc-backlink">Fixes</a><a class="headerlink" href="#fixes" title="Link to this heading">¶</a></h4>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ELF/large_sections.html" title="Large data sections"
             >next</a> |</li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             >previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>

        <li class="nav-item nav-item-this"><a href="">lld 21.1.0 Release Notes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2011-2025, LLVM Project.
      Last updated on 2025-08-26.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>