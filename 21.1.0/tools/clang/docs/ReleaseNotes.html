<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Clang 21.1.0 Release Notes &#8212; Clang 21.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css?v=e491ac2d" />
    <link rel="stylesheet" type="text/css" href="_static/graphviz.css?v=eafc0fe6" />
    <script src="_static/documentation_options.js?v=c54a4614"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clang Compiler User’s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang 21.1.0 documentation</span></a></h1>
        <h2 class="heading"><span>Clang 21.1.0 Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="clang-release-releasenotestitle">
<h1>Clang 21.1.0 Release Notes<a class="headerlink" href="#clang-release-releasenotestitle" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id266">Introduction</a></p></li>
<li><p><a class="reference internal" href="#potentially-breaking-changes" id="id267">Potentially Breaking Changes</a></p>
<ul>
<li><p><a class="reference internal" href="#c-c-language-potentially-breaking-changes" id="id268">C/C++ Language Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#c-specific-potentially-breaking-changes" id="id269">C++ Specific Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#abi-changes-in-this-version" id="id270">ABI Changes in This Version</a></p></li>
<li><p><a class="reference internal" href="#ast-dumping-potentially-breaking-changes" id="id271">AST Dumping Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#clang-frontend-potentially-breaking-changes" id="id272">Clang Frontend Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#clang-python-bindings-potentially-breaking-changes" id="id273">Clang Python Bindings Potentially Breaking Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-s-new-in-clang-release" id="id274">What’s New in Clang 21.1.0?</a></p>
<ul>
<li><p><a class="reference internal" href="#c-language-changes" id="id275">C++ Language Changes</a></p></li>
<li><p><a class="reference internal" href="#id11" id="id276">C Language Changes</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id277">Non-comprehensive list of changes in this release</a></p></li>
<li><p><a class="reference internal" href="#new-compiler-flags" id="id278">New Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#deprecated-compiler-flags" id="id279">Deprecated Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#modified-compiler-flags" id="id280">Modified Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#removed-compiler-flags" id="id281">Removed Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#attribute-changes-in-clang" id="id282">Attribute Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-s-diagnostics" id="id283">Improvements to Clang’s diagnostics</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-s-time-trace" id="id284">Improvements to Clang’s time-trace</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-coverage-mapping" id="id285">Improvements to Coverage Mapping</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes-in-this-version" id="id286">Bug Fixes in This Version</a></p></li>
<li><p><a class="reference internal" href="#openacc-specific-changes" id="id287">OpenACC Specific Changes</a></p></li>
<li><p><a class="reference internal" href="#target-specific-changes" id="id288">Target Specific Changes</a></p></li>
<li><p><a class="reference internal" href="#dwarf-support-in-clang" id="id289">DWARF Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#floating-point-support-in-clang" id="id290">Floating Point Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#fixed-point-support-in-clang" id="id291">Fixed Point Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#ast-matchers" id="id292">AST Matchers</a></p></li>
<li><p><a class="reference internal" href="#clang-format" id="id293">clang-format</a></p></li>
<li><p><a class="reference internal" href="#clang-refactor" id="id294">clang-refactor</a></p></li>
<li><p><a class="reference internal" href="#libclang" id="id295">libclang</a></p></li>
<li><p><a class="reference internal" href="#code-completion" id="id296">Code Completion</a></p></li>
<li><p><a class="reference internal" href="#static-analyzer" id="id297">Static Analyzer</a></p></li>
<li><p><a class="reference internal" href="#sanitizers" id="id298">Sanitizers</a></p></li>
<li><p><a class="reference internal" href="#python-binding-changes" id="id299">Python Binding Changes</a></p></li>
<li><p><a class="reference internal" href="#openmp-support" id="id300">OpenMP Support</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>Written by the <a class="reference external" href="https://llvm.org/">LLVM Team</a></p>
<section id="introduction">
<h2><a class="toc-backref" href="#id266" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release 21.1.0. Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. For the libc++ release notes,
see <a class="reference external" href="https://libcxx.llvm.org/ReleaseNotes.html">this page</a>. All LLVM releases
may be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="https://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
</section>
<section id="potentially-breaking-changes">
<h2><a class="toc-backref" href="#id267" role="doc-backlink">Potentially Breaking Changes</a><a class="headerlink" href="#potentially-breaking-changes" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>The Objective-C ARC migrator (ARCMigrate) has been removed.</p></li>
<li><p>Fix missing diagnostics for uses of declarations when performing typename access,
such as when performing member access on a <code class="docutils literal notranslate"><span class="pre">[[deprecated]]</span></code> type alias.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58547">#58547</a>)</p></li>
<li><p>For ARM targets when compiling assembly files, the features included in the selected CPU
or Architecture’s FPU are included. If you wish not to use a specific feature,
the relevant <code class="docutils literal notranslate"><span class="pre">+no</span></code> option will need to be amended to the command line option.</p></li>
<li><p>When compiling with branch target enforcement, <code class="docutils literal notranslate"><span class="pre">asm</span> <span class="pre">goto</span></code>
statements will no longer guarantee to place a <code class="docutils literal notranslate"><span class="pre">bti</span></code> or
<code class="docutils literal notranslate"><span class="pre">endbr64</span></code> instruction at the labels named as possible branch
destinations, so it is not safe to use a register-controlled branch
instruction to branch to one. (In line with gcc.)</p></li>
</ul>
<section id="c-c-language-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id268" role="doc-backlink">C/C++ Language Potentially Breaking Changes</a><a class="headerlink" href="#c-c-language-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>New LLVM optimizations have been implemented that optimize pointer arithmetic on
null pointers more aggressively.  As part of this, clang has implemented a special
case for old-style offsetof idioms like <code class="docutils literal notranslate"><span class="pre">((int)(&amp;(((struct</span> <span class="pre">S</span> <span class="pre">*)0)-&gt;field)))</span></code>, to
ensure they are not caught by these optimizations.  It is also possible to use
<code class="docutils literal notranslate"><span class="pre">-fwrapv-pointer</span></code> or   <code class="docutils literal notranslate"><span class="pre">-fno-delete-null-pointer-checks</span></code> to make pointer arithmetic
on null pointers well-defined. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/130734">#130734</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/130952">#130952</a>)</p></li>
</ul>
</section>
<section id="c-specific-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id269" role="doc-backlink">C++ Specific Potentially Breaking Changes</a><a class="headerlink" href="#c-specific-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The type trait builtin <code class="docutils literal notranslate"><span class="pre">__is_referenceable</span></code> has been removed, since it has
very few users and all the type traits that could benefit from it in the
standard library already have their own bespoke builtins.</p></li>
<li><p>A workaround for libstdc++4.7 has been removed. Note that 4.8.3 remains the oldest
supported libstdc++ version.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">!nonnull/!align</span></code> metadata to load of references for better codegen.</p></li>
<li><p>Checking for integer to enum conversions in constant expressions is more
strict; in particular, <code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">E</span> <span class="pre">x</span> <span class="pre">=</span> <span class="pre">(E)-1;</span></code> is not treated as a constant
if it’s out of range. The Boost numeric_conversion library is impacted by
this; it was fixed in Boost 1.81. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143034">#143034</a>)</p></li>
<li><p>Fully implemented <a class="reference external" href="https://wg21.link/CWG400">CWG400 Using-declarations and the `
`”struct hack”</a>. Invalid member using-declaration
whose nested-name-specifier doesn’t refer to a base class such as
<code class="docutils literal notranslate"><span class="pre">using</span> <span class="pre">CurrentClass::Foo;</span></code> is now rejected in C++98 mode.</p></li>
</ul>
</section>
<section id="abi-changes-in-this-version">
<h3><a class="toc-backref" href="#id270" role="doc-backlink">ABI Changes in This Version</a><a class="headerlink" href="#abi-changes-in-this-version" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Return larger CXX records in memory instead of using AVX registers. Code compiled with older clang will be incompatible with newer version of the clang unless -fclang-abi-compat=20 is provided. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/120670">#120670</a>)</p></li>
</ul>
</section>
<section id="ast-dumping-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id271" role="doc-backlink">AST Dumping Potentially Breaking Changes</a><a class="headerlink" href="#ast-dumping-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added support for dumping template arguments of structural value kinds.</p></li>
</ul>
</section>
<section id="clang-frontend-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id272" role="doc-backlink">Clang Frontend Potentially Breaking Changes</a><a class="headerlink" href="#clang-frontend-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Wglobal-constructors</span></code> flag now applies to <code class="docutils literal notranslate"><span class="pre">[[gnu::constructor]]</span></code> and
<code class="docutils literal notranslate"><span class="pre">[[gnu::destructor]]</span></code> attributes.</p></li>
</ul>
</section>
<section id="clang-python-bindings-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id273" role="doc-backlink">Clang Python Bindings Potentially Breaking Changes</a><a class="headerlink" href="#clang-python-bindings-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Cursor.from_location</span></code> now returns <code class="docutils literal notranslate"><span class="pre">None</span></code> instead of a null cursor.
This eliminates the last known source of null cursors.</p></li>
<li><p>Almost all <code class="docutils literal notranslate"><span class="pre">Cursor</span></code> methods now assert that they are called on non-null cursors.
Most of the time null cursors were mapped to <code class="docutils literal notranslate"><span class="pre">None</span></code>,
so no widespread breakages are expected.</p></li>
</ul>
</section>
</section>
<section id="what-s-new-in-clang-release">
<h2><a class="toc-backref" href="#id274" role="doc-backlink">What’s New in Clang 21.1.0?</a><a class="headerlink" href="#what-s-new-in-clang-release" title="Link to this heading">¶</a></h2>
<section id="c-language-changes">
<h3><a class="toc-backref" href="#id275" role="doc-backlink">C++ Language Changes</a><a class="headerlink" href="#c-language-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Added a <a class="reference internal" href="LanguageExtensions.html#builtin-structured-binding-size-doc"><span class="std std-ref">__builtin_structured_binding_size</span></a> (T)
builtin that returns the number of structured bindings that would be produced by destructuring <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p></li>
<li><p>Similarly to GCC, Clang now supports constant expressions in
the strings of a GNU <code class="docutils literal notranslate"><span class="pre">asm</span></code> statement.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span><span class="w"> </span><span class="nf">foo</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">asm</span><span class="p">((</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="p">(</span><span class="s">&quot;nop&quot;</span><span class="p">))</span><span class="w"> </span><span class="o">:::</span><span class="w"> </span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">string_view</span><span class="p">(</span><span class="s">&quot;memory&quot;</span><span class="p">)));</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Clang now implements the changes to overload resolution proposed by section 1 and 2 of
<a class="reference external" href="https://wg21.link/P3606R0">P3606</a>. If a non-template candidate exists in an overload set that is
a perfect match (all conversion sequences are identity conversions) template candidates are not instantiated.
Diagnostics that would have resulted from the instantiation of these template candidates are no longer
produced. This aligns Clang closer to the behavior of GCC, and fixes (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62096">#62096</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/74581">#74581</a>), and (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/74581">#74581</a>).</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2719">P2719R5 Type-aware allocation and deallocation functions</a>
as an extension in all C++ language modes.</p></li>
</ul>
<section id="c-2c-feature-support">
<h4>C++2c Feature Support<a class="headerlink" href="#c-2c-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Implemented <a class="reference external" href="https://wg21.link/P1061R10">P1061R10 Structured Bindings can introduce a Pack</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2786R13">P2786R13 Trivial Relocatability</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P0963R3">P0963R3 Structured binding declaration as a condition</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P3618">P3618R0 Allow attaching main to the global module</a>.</p></li>
</ul>
</section>
<section id="c-23-feature-support">
<h4>C++23 Feature Support<a class="headerlink" href="#c-23-feature-support" title="Link to this heading">¶</a></h4>
</section>
<section id="c-20-feature-support">
<h4>C++20 Feature Support<a class="headerlink" href="#c-20-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed a crash with a defaulted spaceship (<code class="docutils literal notranslate"><span class="pre">&lt;=&gt;</span></code>) operator when the class
contains a member declaration of vector type. Vector types cannot yet be
compared directly, so this causes the operator to be deleted. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/137452">#137452</a>)</p></li>
<li><p>Implement constant evaluation of lambdas that capture structured bindings.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/145956">#145956</a>)</p></li>
</ul>
</section>
<section id="c-17-feature-support">
<h4>C++17 Feature Support<a class="headerlink" href="#c-17-feature-support" title="Link to this heading">¶</a></h4>
</section>
<section id="resolutions-to-c-defect-reports">
<h4>Resolutions to C++ Defect Reports<a class="headerlink" href="#resolutions-to-c-defect-reports" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The flag <cite>-frelaxed-template-template-args</cite>
and its negation have been removed, having been deprecated since the previous
two releases. The improvements to template template parameter matching implemented
in the previous release, as described in P3310 and P3579, made this flag unnecessary.</p></li>
<li><p>Implemented <a class="reference external" href="https://cplusplus.github.io/CWG/issues/2918.html">CWG2918 Consideration of constraints for address of overloaded `
`function</a></p></li>
<li><p>Bumped the <code class="docutils literal notranslate"><span class="pre">__cpp_constexpr</span></code> feature-test macro to <code class="docutils literal notranslate"><span class="pre">202002L</span></code> in C++20 mode as indicated in
<a class="reference external" href="https://wg21.link/P2493R0">P2493R0</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://cplusplus.github.io/CWG/issues/2517.html">CWG2517 Useless restriction on use of parameter in `
`constraint-expression</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/CWG3005">CWG3005 Function parameters should never be name-independent</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/CWG2496">CWG2496 ref-qualifiers and virtual overriding</a>.</p></li>
</ul>
</section>
</section>
<section id="id11">
<h3><a class="toc-backref" href="#id276" role="doc-backlink">C Language Changes</a><a class="headerlink" href="#id11" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Clang now allows an <code class="docutils literal notranslate"><span class="pre">inline</span></code> specifier on a typedef declaration of a
function type in Microsoft compatibility mode. <a class="reference external" href="https://github.com/llvm/llvm-project/issues/124869">#124869</a></p></li>
<li><p>Clang now allows <code class="docutils literal notranslate"><span class="pre">restrict</span></code> qualifier for array types with pointer elements (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/92847">#92847</a>).</p></li>
<li><p>Clang now diagnoses <code class="docutils literal notranslate"><span class="pre">const</span></code>-qualified object definitions without an
initializer. If the object is a variable or field which is zero-initialized,
it will be diagnosed under the new warning <code class="docutils literal notranslate"><span class="pre">-Wdefault-const-init-var</span></code> or
<code class="docutils literal notranslate"><span class="pre">-Wdefault-const-init-field</span></code>, respectively. Similarly, if the variable or
field is not zero-initialized, it will be diagnosed under the new diagnostic
<code class="docutils literal notranslate"><span class="pre">-Wdefault-const-init-var-unsafe</span></code> or <code class="docutils literal notranslate"><span class="pre">-Wdefault-const-init-field-unsafe</span></code>,
respectively. The unsafe diagnostic variants are grouped under a new
diagnostic <code class="docutils literal notranslate"><span class="pre">-Wdefault-const-init-unsafe</span></code>, which itself is grouped under the
new diagnostic <code class="docutils literal notranslate"><span class="pre">-Wdefault-const-init</span></code>. Finally, <code class="docutils literal notranslate"><span class="pre">-Wdefault-const-init</span></code> is
grouped under <code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code> because these constructs are not compatible
with C++. <a class="reference external" href="https://github.com/llvm/llvm-project/issues/19297">#19297</a></p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Wimplicit-void-ptr-cast</span></code>, grouped under <code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code>, which
diagnoses implicit conversion from <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code> to another pointer type as
being incompatible with C++. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/17792">#17792</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Wc++-keyword</span></code>, grouped under <code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code>, which diagnoses when
a C++ keyword is used as an identifier in C. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/21898">#21898</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Wc++-hidden-decl</span></code>, grouped under <code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code>, which diagnoses
use of tag types which are visible in C but not visible in C++ due to scoping
rules. e.g.,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">struct</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="w">  </span><span class="p">}</span><span class="w"> </span><span class="n">t</span><span class="p">;</span>
<span class="p">};</span>
<span class="k">struct</span><span class="w"> </span><span class="nc">T</span><span class="w"> </span><span class="n">t</span><span class="p">;</span><span class="w"> </span><span class="c1">// Invalid C++, valid C, now diagnosed</span>
</pre></div>
</div>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Wimplicit-int-enum-cast</span></code>, grouped under <code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code>, which
diagnoses implicit conversion from integer types to an enumeration type in C,
which is not compatible with C++. <a class="reference external" href="https://github.com/llvm/llvm-project/issues/37027">#37027</a></p></li>
<li><p>Split “implicit conversion from enum type to different enum type” diagnostic
from <code class="docutils literal notranslate"><span class="pre">-Wenum-conversion</span></code> into its own diagnostic group,
<code class="docutils literal notranslate"><span class="pre">-Wimplicit-enum-enum-cast</span></code>, which is grouped under both
<code class="docutils literal notranslate"><span class="pre">-Wenum-conversion</span></code> and <code class="docutils literal notranslate"><span class="pre">-Wimplicit-int-enum-cast</span></code>. This conversion is an
int-to-enum conversion because the enumeration on the right-hand side is
promoted to <code class="docutils literal notranslate"><span class="pre">int</span></code> before the assignment.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Wtentative-definition-compat</span></code>, grouped under <code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code>,
which diagnoses tentative definitions in C with multiple declarations as
being incompatible with C++. e.g.,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// File scope</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span>
<span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">;</span><span class="w"> </span><span class="c1">// Vaild C, invalid C++, now diagnosed</span>
</pre></div>
</div>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Wunterminated-string-initialization</span></code>, grouped under <code class="docutils literal notranslate"><span class="pre">-Wextra</span></code>,
which diagnoses an initialization from a string literal where only the null
terminator cannot be stored. e.g.,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span><span class="w"> </span><span class="n">buf1</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;foo&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// -Wunterminated-string-initialization</span>
<span class="kt">char</span><span class="w"> </span><span class="n">buf2</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;flarp&quot;</span><span class="p">;</span><span class="w"> </span><span class="c1">// -Wexcess-initializers</span>
<span class="kt">char</span><span class="w"> </span><span class="n">buf3</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;fo</span><span class="se">\0</span><span class="s">&quot;</span><span class="p">;</span><span class="w">  </span><span class="c1">// This is fine, no warning.</span>
</pre></div>
</div>
<p>This diagnostic can be suppressed by adding the new <code class="docutils literal notranslate"><span class="pre">nonstring</span></code> attribute
to the field or variable being initialized. <a class="reference external" href="https://github.com/llvm/llvm-project/issues/137705">#137705</a></p>
</li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Wc++-unterminated-string-initialization</span></code>, grouped under
<code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code>, which also diagnoses the same cases as
<code class="docutils literal notranslate"><span class="pre">-Wunterminated-string-initialization</span></code>. However, this diagnostic is not
silenced by the <code class="docutils literal notranslate"><span class="pre">nonstring</span></code> attribute as these initializations are always
incompatible with C++.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-Wjump-misses-init</span></code>, which is off by default and grouped under
<code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code>. It diagnoses when a jump (<code class="docutils literal notranslate"><span class="pre">goto</span></code> to its label, <code class="docutils literal notranslate"><span class="pre">switch</span></code>
to its <code class="docutils literal notranslate"><span class="pre">case</span></code>) will bypass the initialization of a local variable, which is
invalid in C++.</p></li>
<li><p>Added the existing <code class="docutils literal notranslate"><span class="pre">-Wduplicate-decl-specifier</span></code> diagnostic, which is on by
default, to <code class="docutils literal notranslate"><span class="pre">-Wc++-compat</span></code> because duplicated declaration specifiers are
not valid in C++.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">[[clang::assume()]]</span></code> attribute is now correctly recognized in C. The
<code class="docutils literal notranslate"><span class="pre">__attribute__((assume()))</span></code> form has always been supported, so the fix is
specific to the attribute syntax used.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">clang-cl</span></code> driver now recognizes <code class="docutils literal notranslate"><span class="pre">/std:clatest</span></code> and sets the language
mode to C23. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147233">#147233</a>)</p></li>
</ul>
<section id="c2y-feature-support">
<h4>C2y Feature Support<a class="headerlink" href="#c2y-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Implement <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3409.pdf">WG14 N3409</a>
which removes UB around use of <code class="docutils literal notranslate"><span class="pre">void</span></code> expressions. In practice, this means
that <code class="docutils literal notranslate"><span class="pre">_Generic</span></code> selection associations may now have <code class="docutils literal notranslate"><span class="pre">void</span></code> type, but it
also removes UB with code like <code class="docutils literal notranslate"><span class="pre">(void)(void)1;</span></code>.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3411.pdf">WG14 N3411</a>
which allows a source file to not end with a newline character. Note,
<code class="docutils literal notranslate"><span class="pre">-pedantic</span></code> will no longer diagnose this in either C or C++ modes. This
feature was adopted as applying to obsolete versions of C in WG14 and as a
defect report in WG21 (CWG787).</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3353.htm">WG14 N3353</a>
which adds the new <code class="docutils literal notranslate"><span class="pre">0o</span></code> and <code class="docutils literal notranslate"><span class="pre">0O</span></code> ocal literal prefixes and deprecates
octal literals other than <code class="docutils literal notranslate"><span class="pre">0</span></code> which do not start with the new prefix. This
feature is exposed in earlier language modes and in C++ as an extension. The
paper also introduced octal and hexadecimal delimited escape sequences (e.g.,
<code class="docutils literal notranslate"><span class="pre">&quot;\x{12}\o{12}&quot;</span></code>) which are also supported as an extension in older C
language modes.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3369.pdf">WG14 N3369</a>
which introduces the <code class="docutils literal notranslate"><span class="pre">_Lengthof</span></code> operator, and <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3469.htm">WG14 N3469</a>
which renamed <code class="docutils literal notranslate"><span class="pre">_Lengthof</span></code> to <code class="docutils literal notranslate"><span class="pre">_Countof</span></code>. This feature is implemented as
a conforming extension in earlier C language modes, but not in C++ language
modes (<code class="docutils literal notranslate"><span class="pre">std::extent</span></code> and <code class="docutils literal notranslate"><span class="pre">std::size</span></code> already provide the same
functionality but with more granularity). The feature can be tested via
<code class="docutils literal notranslate"><span class="pre">__has_feature(c_countof)</span></code> or <code class="docutils literal notranslate"><span class="pre">__has_extension(c_countof)</span></code>. This also
adds the <code class="docutils literal notranslate"><span class="pre">&lt;stdcountof.h&gt;</span></code> header file which exposes the <code class="docutils literal notranslate"><span class="pre">countof</span></code> macro
which expands to <code class="docutils literal notranslate"><span class="pre">_Countof</span></code>.</p></li>
</ul>
</section>
<section id="c23-feature-support">
<h4>C23 Feature Support<a class="headerlink" href="#c23-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang now accepts <code class="docutils literal notranslate"><span class="pre">-std=iso9899:2024</span></code> as an alias for C23.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">__builtin_c23_va_start()</span></code> for compatibility with GCC and to enable
better diagnostic behavior for the <code class="docutils literal notranslate"><span class="pre">va_start()</span></code> macro in C23 and later.
This also updates the definition of <code class="docutils literal notranslate"><span class="pre">va_start()</span></code> in <code class="docutils literal notranslate"><span class="pre">&lt;stdarg.h&gt;</span></code> to use
the new builtin. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/124031">#124031</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2819.pdf">WG14 N2819</a>
which clarified that a compound literal used within a function prototype is
treated as if the compound literal were within the body rather than at file
scope.</p></li>
<li><p>Fixed a bug where you could not cast a null pointer constant to type
<code class="docutils literal notranslate"><span class="pre">nullptr_t</span></code>. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/133644">#133644</a>.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3037.pdf">WG14 N3037</a>
which allows tag types to be redefined within the same translation unit so
long as both definitions are structurally equivalent (same tag types, same
tag names, same tag members, etc). As a result of this paper, <code class="docutils literal notranslate"><span class="pre">-Wvisibility</span></code>
is no longer diagnosed in C23 if the parameter is a complete tag type (it
does still fire when the parameter is an incomplete tag type as that cannot
be completed).</p></li>
<li><p>Fixed a failed assertion with an invalid parameter to the <code class="docutils literal notranslate"><span class="pre">#embed</span></code>
directive. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/126940">#126940</a>.</p></li>
<li><p>Fixed a crash when a declaration of a <code class="docutils literal notranslate"><span class="pre">constexpr</span></code> variable with an invalid
type. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/140887">#140887</a></p></li>
<li><p>Documented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3006.htm">WG14 N3006</a>
which clarified how Clang is handling underspecified object declarations.</p></li>
<li><p>Clang now accepts single variadic parameter in type-name. It’s a part of
<a class="reference external" href="https://open-std.org/JTC1/SC22/WG14/www/docs/n2975.pdf">WG14 N2975</a></p></li>
<li><p>Fixed a bug with handling the type operand form of <code class="docutils literal notranslate"><span class="pre">typeof</span></code> when it is used
to specify a fixed underlying type for an enumeration. <a class="reference external" href="https://github.com/llvm/llvm-project/issues/146351">#146351</a></p></li>
<li><p>Fixed a rejects-valid bug where Clang would reject an enumeration with an
<code class="docutils literal notranslate"><span class="pre">_Atomic</span></code> underlying type. The underlying type is the non-atomic,
unqualified version of the specified type. Due to the perhaps surprising lack
of atomic behavior, this is diagnosed under
<code class="docutils literal notranslate"><span class="pre">-Wunderlying-atomic-qualifier-ignored</span></code>, which defaults to an error. This
can be downgraded with <code class="docutils literal notranslate"><span class="pre">-Wno-underlying-atomic-qualifier-ignored</span></code> or
<code class="docutils literal notranslate"><span class="pre">-Wno-error=underlying-atomic-qualifier-ignored</span></code>. Clang now also diagnoses
cv-qualifiers as being ignored, but that warning does not default to an error.
It can be controlled by <code class="docutils literal notranslate"><span class="pre">-Wunderlying-cv-qualifier-ignore</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147736">#147736</a>)</p></li>
</ul>
</section>
<section id="c11-feature-support">
<h4>C11 Feature Support<a class="headerlink" href="#c11-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n1285.htm">WG14 N1285</a>
which introduces the notion of objects with a temporary lifetime. When an
expression resulting in an rvalue with structure or union type and that type
contains a member of array type, the expression result is an automatic storage
duration object with temporary lifetime which begins when the expression is
evaluated and ends at the evaluation of the containing full expression. This
functionality is also implemented for earlier C language modes because the
C99 semantics will never be implemented (it would require dynamic allocations
of memory which leaks, which users would not appreciate).</p></li>
</ul>
</section>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h3><a class="toc-backref" href="#id277" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Support parsing the <cite>cc</cite> operand modifier and alias it to the <cite>c</cite> modifier (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/127719">#127719</a>).</p></li>
<li><p>Added <cite>__builtin_elementwise_exp10</cite>.</p></li>
<li><p>For AMDPGU targets, added <cite>__builtin_v_cvt_off_f32_i4</cite> that maps to the <cite>v_cvt_off_f32_i4</cite> instruction.</p></li>
<li><p>Added <cite>__builtin_elementwise_minnum</cite> and <cite>__builtin_elementwise_maxnum</cite>.</p></li>
<li><p>No longer crashing on invalid Objective-C categories and extensions when
dumping the AST as JSON. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/137320">#137320</a>)</p></li>
<li><p>Clang itself now uses split stacks instead of threads for allocating more
stack space when running on Apple AArch64 based platforms. This means that
stack traces of Clang from debuggers, crashes, and profilers may look
different than before.</p></li>
<li><p>Fixed a crash when a VLA with an invalid size expression was used within a
<code class="docutils literal notranslate"><span class="pre">sizeof</span></code> or <code class="docutils literal notranslate"><span class="pre">typeof</span></code> expression. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138444">#138444</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__builtin_invoke</span></code> has been added to improve the compile time of <code class="docutils literal notranslate"><span class="pre">std::invoke</span></code>.</p></li>
<li><p>Deprecation warning is emitted for the deprecated <code class="docutils literal notranslate"><span class="pre">__reference_binds_to_temporary</span></code> intrinsic.
<code class="docutils literal notranslate"><span class="pre">__reference_constructs_from_temporary</span></code> should be used instead. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/44056">#44056</a>)</p></li>
<li><p>Added <cite>__builtin_get_vtable_pointer</cite> to directly load the primary vtable pointer from a
polymorphic object.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">libclang</span></code> receives a family of new bindings to query basic facts about
GCC-style inline assembly blocks, including whether the block is <code class="docutils literal notranslate"><span class="pre">volatile</span></code>
and its template string following the LLVM IR <code class="docutils literal notranslate"><span class="pre">asm</span></code> format. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143424">#143424</a>)</p></li>
<li><p>Clang no longer rejects reinterpret_cast conversions between indirect
ARC-managed pointers and other pointer types. The prior behavior was overly
strict and inconsistent with the ARC specification.</p></li>
<li><p>Use of <code class="docutils literal notranslate"><span class="pre">__has_feature</span></code> to detect the <code class="docutils literal notranslate"><span class="pre">ptrauth_qualifier</span></code> and <code class="docutils literal notranslate"><span class="pre">ptrauth_intrinsics</span></code>
features has been deprecated, and is restricted to the arm64e target only. The
correct method to check for these features is to test for the <code class="docutils literal notranslate"><span class="pre">__PTRAUTH__</span></code>
macro.</p></li>
</ul>
</section>
<section id="new-compiler-flags">
<h3><a class="toc-backref" href="#id278" role="doc-backlink">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>New option <code class="docutils literal notranslate"><span class="pre">-Wundef-true</span></code> added and enabled by default to warn when <cite>true</cite> is used in the C preprocessor without being defined before C23.</p></li>
<li><p>New option <code class="docutils literal notranslate"><span class="pre">-fprofile-continuous</span></code> added to enable continuous profile syncing to file (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/124353">#124353</a>, <a class="reference external" href="https://clang.llvm.org/docs/UsersManual.html#cmdoption-fprofile-continuous">docs</a>).
The feature has <a class="reference external" href="https://clang.llvm.org/docs/SourceBasedCodeCoverage.html#running-the-instrumented-program">existed</a>)
for a while and this is just a user facing option.</p></li>
<li><p>New option <code class="docutils literal notranslate"><span class="pre">-ftime-report-json</span></code> added which outputs the same timing data as <code class="docutils literal notranslate"><span class="pre">-ftime-report</span></code> but formatted as JSON.</p></li>
<li><p>New option <code class="docutils literal notranslate"><span class="pre">-Wnrvo</span></code> added and disabled by default to warn about missed NRVO opportunities.</p></li>
<li><p>New option <code class="docutils literal notranslate"><span class="pre">-ignore-pch</span></code> added to disable precompiled headers. It overrides <code class="docutils literal notranslate"><span class="pre">-emit-pch</span></code> and <code class="docutils literal notranslate"><span class="pre">-include-pch</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/142409">#142409</a>, <a class="reference external" href="https://clang.llvm.org/docs/UsersManual.html#ignoring-a-pch-file">PCHDocs</a>).</p></li>
<li><p>New options <code class="docutils literal notranslate"><span class="pre">-g[no-]key-instructions</span></code> added, disabled by default. Reduces jumpiness of debug stepping for optimized code in some debuggers (not LLDB at this time). Not recommended for use without optimizations. DWARF only. Note both the positive and negative flags imply <code class="docutils literal notranslate"><span class="pre">-g</span></code>.</p></li>
<li><p>New options <code class="docutils literal notranslate"><span class="pre">-fthinlto-distributor=</span></code> and <code class="docutils literal notranslate"><span class="pre">-Xthinlto-distributor=</span></code> added for Integrated Distributed ThinLTO (DTLTO). DTLTO enables the distribution of backend ThinLTO compilations via external distribution systems, such as Incredibuild, during the traditional link step. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147265">#147265</a>, <a class="reference external" href="https://clang.llvm.org/docs/ThinLTO.html#integrated-distributed-thinlto-dtlto">ThinLTODocs</a>).</p></li>
<li><p>A new flag - <cite>-static-libclosure</cite> was introduced to support statically linking
the runtime for the Blocks extension on Windows. This flag currently only
changes the code generation, and even then, only on Windows. This does not
impact the linker behaviour like the other <cite>-static-*</cite> flags.</p></li>
</ul>
</section>
<section id="deprecated-compiler-flags">
<h3><a class="toc-backref" href="#id279" role="doc-backlink">Deprecated Compiler Flags</a><a class="headerlink" href="#deprecated-compiler-flags" title="Link to this heading">¶</a></h3>
</section>
<section id="modified-compiler-flags">
<h3><a class="toc-backref" href="#id280" role="doc-backlink">Modified Compiler Flags</a><a class="headerlink" href="#modified-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The ARM AArch32 <code class="docutils literal notranslate"><span class="pre">-mtp</span></code> option accepts and defaults to <code class="docutils literal notranslate"><span class="pre">auto</span></code>, a value of <code class="docutils literal notranslate"><span class="pre">auto</span></code> uses the best available method of providing the frame pointer supported by the hardware. This matches
the behavior of <code class="docutils literal notranslate"><span class="pre">-mtp</span></code> in gcc. This changes the default behavior for ARM targets that provide the <code class="docutils literal notranslate"><span class="pre">TPIDRURO</span></code> register as this will be used instead of a call to the <code class="docutils literal notranslate"><span class="pre">__aeabi_read_tp</span></code>.
Programs that use <code class="docutils literal notranslate"><span class="pre">__aeabi_read_tp</span></code> but do not use the <code class="docutils literal notranslate"><span class="pre">TPIDRURO</span></code> register must use <code class="docutils literal notranslate"><span class="pre">-mtp=soft</span></code>. Fixes #123864</p></li>
<li><p>The compiler flag <cite>-fbracket-depth</cite> default value is increased from 256 to 2048. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/94728">#94728</a>)</p></li>
<li><p><cite>-Wpadded</cite> option implemented for the <cite>x86_64-windows-msvc</cite> target. Fixes #61702</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-mexecute-only</span></code> and <code class="docutils literal notranslate"><span class="pre">-mpure-code</span></code> flags are now accepted for AArch64 targets. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/125688">#125688</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-fchar8_t</span></code> flag is no longer considered in non-C++ languages modes. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55373">#55373</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-fveclib=libmvec</span></code> option now supports AArch64 targets (requires GLIBC 2.40 or newer).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Og</span></code> optimization flag now sets <code class="docutils literal notranslate"><span class="pre">-fextend-variable-liveness</span></code>,
reducing performance slightly while reducing the number of optimized-out
variables. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/118026">#118026</a>)</p></li>
</ul>
</section>
<section id="removed-compiler-flags">
<h3><a class="toc-backref" href="#id281" role="doc-backlink">Removed Compiler Flags</a><a class="headerlink" href="#removed-compiler-flags" title="Link to this heading">¶</a></h3>
</section>
<section id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id282" role="doc-backlink">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="Link to this heading">¶</a></h3>
<p>Adding [[clang::unsafe_buffer_usage]] attribute to a method definition now turns off all -Wunsafe-buffer-usage
related warnings within the method body.</p>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">no_sanitize</span></code> attribute now accepts both <code class="docutils literal notranslate"><span class="pre">gnu</span></code> and <code class="docutils literal notranslate"><span class="pre">clang</span></code> names.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">ext_vector_type(n)</span></code> attribute can now be used as a generic type attribute.</p></li>
<li><p>Clang now diagnoses use of declaration attributes on void parameters. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/108819">#108819</a>)</p></li>
<li><p>Clang now allows <code class="docutils literal notranslate"><span class="pre">__attribute__((model(&quot;small&quot;)))</span></code> and
<code class="docutils literal notranslate"><span class="pre">__attribute__((model(&quot;large&quot;)))</span></code> on non-TLS globals in x86-64 compilations.
This forces the global to be considered small or large in regards to the
x86-64 code model, regardless of the code model specified for the compilation.</p></li>
<li><p>Clang now emits a warning <code class="docutils literal notranslate"><span class="pre">-Wreserved-init-priority</span></code> instead of a hard error
when <code class="docutils literal notranslate"><span class="pre">__attribute__((init_priority(n)))</span></code> is used with values of n in the
reserved range [0, 100]. The warning will be treated as an error by default.</p></li>
<li><p>There is a new <code class="docutils literal notranslate"><span class="pre">format_matches</span></code> attribute to complement the existing
<code class="docutils literal notranslate"><span class="pre">format</span></code> attribute. <code class="docutils literal notranslate"><span class="pre">format_matches</span></code> allows the compiler to verify that
a format string argument is equivalent to a reference format string: it is
useful when a function accepts a format string without its accompanying
arguments to format. For instance:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">status_code</span><span class="p">;</span>
<span class="k">static</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">status_string</span><span class="p">;</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">print_status</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">fmt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="n">fmt</span><span class="p">,</span><span class="w"> </span><span class="n">status_code</span><span class="p">,</span><span class="w"> </span><span class="n">status_string</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// ^ warning: format string is not a string literal [-Wformat-nonliteral]</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="nf">stuff</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">print_status</span><span class="p">(</span><span class="s">&quot;%s (%#08x)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// order of %s and %x is swapped but there is no diagnostic</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Before the introducion of <code class="docutils literal notranslate"><span class="pre">format_matches</span></code>, this code cannot be verified
at compile-time. <code class="docutils literal notranslate"><span class="pre">format_matches</span></code> plugs that hole:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">__attribute__</span><span class="p">((</span><span class="n">format_matches</span><span class="p">(</span><span class="n">printf</span><span class="p">,</span><span class="w"> </span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;%x %s&quot;</span><span class="p">)))</span>
<span class="kt">void</span><span class="w"> </span><span class="n">print_status</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">fmt</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">fprintf</span><span class="p">(</span><span class="n">stderr</span><span class="p">,</span><span class="w"> </span><span class="n">fmt</span><span class="p">,</span><span class="w"> </span><span class="n">status_code</span><span class="p">,</span><span class="w"> </span><span class="n">status_string</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// ^ `fmt` verified as if it was &quot;%x %s&quot; here; no longer triggers</span>
<span class="w">  </span><span class="c1">//   -Wformat-nonliteral, would warn if arguments did not match &quot;%x %s&quot;</span>
<span class="p">}</span>

<span class="kt">void</span><span class="w"> </span><span class="n">stuff</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">print_status</span><span class="p">(</span><span class="s">&quot;%s (%#08x)</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="c1">// warning: format specifier &#39;s&#39; is incompatible with &#39;x&#39;</span>
<span class="w">  </span><span class="c1">// warning: format specifier &#39;x&#39; is incompatible with &#39;s&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Like with <code class="docutils literal notranslate"><span class="pre">format</span></code>, the first argument is the format string flavor and the
second argument is the index of the format string parameter.
<code class="docutils literal notranslate"><span class="pre">format_matches</span></code> accepts an example valid format string as its third
argument. For more information, see the Clang attributes documentation.</p>
</li>
<li><p>Introduced a new statement attribute <code class="docutils literal notranslate"><span class="pre">[[clang::atomic]]</span></code> that enables
fine-grained control over atomic code generation on a per-statement basis.
Supported options include <code class="docutils literal notranslate"><span class="pre">[no_]remote_memory</span></code>,
<code class="docutils literal notranslate"><span class="pre">[no_]fine_grained_memory</span></code>, and <code class="docutils literal notranslate"><span class="pre">[no_]ignore_denormal_mode</span></code>. These are
particularly relevant for AMDGPU targets, where they map to corresponding IR
metadata.</p></li>
<li><p>Clang now disallows the use of attributes applied before an
<code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">template</span></code> declaration (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/79893">#79893</a>).</p></li>
<li><p>Clang will print the “reason” string argument passed on to
<code class="docutils literal notranslate"><span class="pre">[[clang::warn_unused_result(&quot;reason&quot;)]]</span></code> as part of the warning diagnostic.</p></li>
</ul>
</section>
<section id="improvements-to-clang-s-diagnostics">
<h3><a class="toc-backref" href="#id283" role="doc-backlink">Improvements to Clang’s diagnostics</a><a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Improve the diagnostics for deleted default constructor errors for C++ class
initializer lists that don’t explicitly list a class member and thus attempt
to implicitly default construct that member.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Wunique-object-duplication</span></code> warning has been added to warn about objects
which are supposed to only exist once per program, but may get duplicated when
built into a shared library.</p></li>
<li><p>Fixed a bug where Clang’s Analysis did not correctly model the destructor behavior of <code class="docutils literal notranslate"><span class="pre">union</span></code> members (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/119415">#119415</a>).</p></li>
<li><p>A statement attribute applied to a <code class="docutils literal notranslate"><span class="pre">case</span></code> label no longer suppresses
‘bypassing variable initialization’ diagnostics (#84072).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Wunsafe-buffer-usage</span></code> warning has been updated to warn
about unsafe libc function calls.  Those new warnings are emitted
under the subgroup <code class="docutils literal notranslate"><span class="pre">-Wunsafe-buffer-usage-in-libc-call</span></code>.</p></li>
<li><p>Diagnostics on chained comparisons (<code class="docutils literal notranslate"><span class="pre">a</span> <span class="pre">&lt;</span> <span class="pre">b</span> <span class="pre">&lt;</span> <span class="pre">c</span></code>) are now an error by default. This can be disabled with
<code class="docutils literal notranslate"><span class="pre">-Wno-error=parentheses</span></code>.</p></li>
<li><p>Similarly, fold expressions over a comparison operator are now an error by default.</p></li>
<li><p>Clang now better preserves the sugared types of pointers to member.</p></li>
<li><p>Clang now better preserves the presence of the template keyword with dependent
prefixes.</p></li>
<li><p>Clang now in more cases avoids printing ‘type-parameter-X-X’ instead of the name of
the template parameter.</p></li>
<li><p>Clang now respects the current language mode when printing expressions in
diagnostics. This fixes a bunch of <cite>bool</cite> being printed as <cite>_Bool</cite>, and also
a bunch of HLSL types being printed as their C++ equivalents.</p></li>
<li><p>Clang now consistently quotes expressions in diagnostics.</p></li>
<li><p>When printing types for diagnostics, clang now doesn’t suppress the scopes of
template arguments contained within nested names.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Wshift-bool</span></code> warning has been added to warn about shifting a boolean. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/28334">#28334</a>)</p></li>
<li><p>Fixed diagnostics adding a trailing <code class="docutils literal notranslate"><span class="pre">::</span></code> when printing some source code
constructs, like base classes.</p></li>
<li><p>The <a class="reference internal" href="ThreadSafetyAnalysis.html"><span class="doc">Thread Safety Analysis</span></a> now supports <code class="docutils literal notranslate"><span class="pre">-Wthread-safety-pointer</span></code>,
which enables warning on passing or returning pointers to guarded variables
as function arguments or return value respectively. Note that
<a class="reference internal" href="ThreadSafetyAnalysis.html"><span class="doc">Thread Safety Analysis</span></a> still does not perform alias analysis. The
feature will be default-enabled with <code class="docutils literal notranslate"><span class="pre">-Wthread-safety</span></code> in a future release.</p></li>
<li><p>The <a class="reference internal" href="ThreadSafetyAnalysis.html"><span class="doc">Thread Safety Analysis</span></a> now supports reentrant capabilities.</p></li>
<li><p>Clang will now do a better job producing common nested names, when producing
common types for ternary operator, template argument deduction and multiple return auto deduction.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Wsign-compare</span></code> warning now treats expressions with bitwise not(~) and minus(-) as signed integers
except for the case where the operand is an unsigned integer
and throws warning if they are compared with unsigned integers (##18878).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-Wunnecessary-virtual-specifier</span></code> warning (included in <code class="docutils literal notranslate"><span class="pre">-Wextra</span></code>) has
been added to warn about methods which are marked as virtual inside a
<code class="docutils literal notranslate"><span class="pre">final</span></code> class, and hence can never be overridden.</p></li>
<li><p>Improve the diagnostics for chained comparisons to report actual expressions and operators (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/129069">#129069</a>).</p></li>
<li><p>Improve the diagnostics for shadows template parameter to report correct location (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/129060">#129060</a>).</p></li>
<li><p>Improve the <code class="docutils literal notranslate"><span class="pre">-Wundefined-func-template</span></code> warning when a function template is not instantiated due to being unreachable in modules.</p></li>
<li><p>Fixed an assertion when referencing an out-of-bounds parameter via a function
attribute whose argument list refers to parameters by index and the function
is variadic. e.g.,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">__attribute__</span><span class="w"> </span><span class="p">((</span><span class="n">__format_arg__</span><span class="p">(</span><span class="mi">2</span><span class="p">)))</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="n">test</span><span class="w"> </span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="p">...)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p>Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/61635">#61635</a></p>
</li>
<li><p>Split diagnosing base class qualifiers from the <code class="docutils literal notranslate"><span class="pre">-Wignored-Qualifiers</span></code> diagnostic group into a new <code class="docutils literal notranslate"><span class="pre">-Wignored-base-class-qualifiers</span></code> diagnostic group (which is grouped under <code class="docutils literal notranslate"><span class="pre">-Wignored-qualifiers</span></code>). Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/131935">#131935</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wc++98-compat</span></code> no longer diagnoses use of <code class="docutils literal notranslate"><span class="pre">__auto_type</span></code> or
<code class="docutils literal notranslate"><span class="pre">decltype(auto)</span></code> as though it was the extension for <code class="docutils literal notranslate"><span class="pre">auto</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/47900">#47900</a>)</p></li>
<li><p>Clang now issues a warning for missing return in <code class="docutils literal notranslate"><span class="pre">main</span></code> in C89 mode. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/21650">#21650</a>)</p></li>
<li><p>Now correctly diagnose a tentative definition of an array with static
storage duration in pedantic mode in C. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50661">#50661</a>)</p></li>
<li><p>No longer diagnosing idiomatic function pointer casts on Windows under
<code class="docutils literal notranslate"><span class="pre">-Wcast-function-type-mismatch</span></code> (which is enabled by <code class="docutils literal notranslate"><span class="pre">-Wextra</span></code>). Clang
would previously warn on this construct, but will no longer do so on Windows:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="p">(</span><span class="n">WINAPI</span><span class="w"> </span><span class="o">*</span><span class="n">PGNSI</span><span class="p">)(</span><span class="n">LPSYSTEM_INFO</span><span class="p">);</span>
<span class="n">HMODULE</span><span class="w"> </span><span class="n">Lib</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">LoadLibrary</span><span class="p">(</span><span class="s">&quot;kernel32&quot;</span><span class="p">);</span>
<span class="n">PGNSI</span><span class="w"> </span><span class="n">FnPtr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="n">PGNSI</span><span class="p">)</span><span class="n">GetProcAddress</span><span class="p">(</span><span class="n">Lib</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;GetNativeSystemInfo&quot;</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p>An error is now emitted when a <code class="docutils literal notranslate"><span class="pre">musttail</span></code> call is made to a function marked with the <code class="docutils literal notranslate"><span class="pre">not_tail_called</span></code> attribute. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/133509">#133509</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Whigher-precision-for-complex-divison</span></code> warns when:</p>
<ul class="simple">
<li><p>The divisor is complex.</p></li>
<li><p>When the complex division happens in a higher precision type due to arithmetic promotion.</p></li>
<li><p>When using the divide and assign operator (<code class="docutils literal notranslate"><span class="pre">/=</span></code>).</p></li>
</ul>
<p>Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/131127">#131127</a></p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wuninitialized</span></code> now diagnoses when a class does not declare any
constructors to initialize their non-modifiable members. The diagnostic is
not new; being controlled via a warning group is what’s new. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/41104">#41104</a></p></li>
<li><p>Analysis-based diagnostics (like <code class="docutils literal notranslate"><span class="pre">-Wconsumed</span></code> or <code class="docutils literal notranslate"><span class="pre">-Wunreachable-code</span></code>)
can now be correctly controlled by <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">diagnostic</span></code>. <a class="reference external" href="https://github.com/llvm/llvm-project/issues/42199">#42199</a></p></li>
<li><p>Improved Clang’s error recovery for invalid function calls.</p></li>
<li><p>Improved bit-field diagnostics to consider the type specified by the
<code class="docutils literal notranslate"><span class="pre">preferred_type</span></code> attribute. These diagnostics are controlled by the flags
<code class="docutils literal notranslate"><span class="pre">-Wpreferred-type-bitfield-enum-conversion</span></code> and
<code class="docutils literal notranslate"><span class="pre">-Wpreferred-type-bitfield-width</span></code>. These warnings are on by default as they
they’re only triggered if the authors are already making the choice to use
<code class="docutils literal notranslate"><span class="pre">preferred_type</span></code> attribute.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Winitializer-overrides</span></code> and <code class="docutils literal notranslate"><span class="pre">-Wreorder-init-list</span></code> are now grouped under
the <code class="docutils literal notranslate"><span class="pre">-Wc99-designator</span></code> diagnostic group, as they also are about the
behavior of the C99 feature as it was introduced into C++20. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/47037">#47037</a></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wreserved-identifier</span></code> now fires on reserved parameter names in a function
declaration which is not a definition.</p></li>
<li><p>Clang now prints the namespace for an attribute, if any,
when emitting an unknown attribute diagnostic.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wvolatile</span></code> now warns about volatile-qualified class return types
as well as volatile-qualified scalar return types. Fixes <a class="reference external" href="https://github.com/llvm/llvm-project/issues/133380">#133380</a></p></li>
<li><p>Several compatibility diagnostics that were incorrectly being grouped under
<code class="docutils literal notranslate"><span class="pre">-Wpre-c++20-compat</span></code> are now part of <code class="docutils literal notranslate"><span class="pre">-Wc++20-compat</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138775">#138775</a>)</p></li>
<li><p>Improved the <code class="docutils literal notranslate"><span class="pre">-Wtautological-overlap-compare</span></code> diagnostics to warn about overlapping and non-overlapping ranges involving character literals and floating-point literals.
The warning message for non-overlapping cases has also been improved (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/13473">#13473</a>).</p></li>
<li><p>Fixed a duplicate diagnostic when performing typo correction on function template
calls with explicit template arguments. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139226">#139226</a>)</p></li>
<li><p>Explanatory note is printed when <code class="docutils literal notranslate"><span class="pre">assert</span></code> fails during evaluation of a
constant expression. Prior to this, the error inaccurately implied that assert
could not be used at all in a constant expression (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/130458">#130458</a>)</p></li>
<li><p>A new off-by-default warning <code class="docutils literal notranslate"><span class="pre">-Wms-bitfield-padding</span></code> has been added to alert to cases where bit-field
packing may differ under the MS struct ABI (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/117428">#117428</a>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Watomic-access</span></code> no longer fires on unreachable code. e.g.,</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">_Atomic</span><span class="w"> </span><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">a</span><span class="p">;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">s</span><span class="p">;</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">if</span><span class="w"> </span><span class="p">(</span><span class="mi">0</span><span class="p">)</span>
<span class="w">    </span><span class="n">s</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"> </span><span class="c1">// Previously diagnosed with -Watomic-access, now silenced</span>
<span class="w">  </span><span class="n">s</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"> </span><span class="c1">// Still diagnosed with -Watomic-access</span>
<span class="w">  </span><span class="k">return</span><span class="p">;</span>
<span class="w">  </span><span class="n">s</span><span class="p">.</span><span class="n">a</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span><span class="w"> </span><span class="c1">// Previously diagnosed, now silenced</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>A new <code class="docutils literal notranslate"><span class="pre">-Wcharacter-conversion</span></code> warns where comparing or implicitly converting
between different Unicode character types (<code class="docutils literal notranslate"><span class="pre">char8_t</span></code>, <code class="docutils literal notranslate"><span class="pre">char16_t</span></code>, <code class="docutils literal notranslate"><span class="pre">char32_t</span></code>).
This warning only triggers in C++ as these types are aliases in C. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138526">#138526</a>)</p></li>
<li><p>Fixed a crash when checking a <code class="docutils literal notranslate"><span class="pre">__thread</span></code>-specified variable declaration
with a dependent type in C++. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/140509">#140509</a>)</p></li>
<li><p>Clang now suggests corrections for unknown attribute names.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wswitch</span></code> will now diagnose unhandled enumerators in switches also when
the enumerator is deprecated. Warnings about using deprecated enumerators in
switch cases have moved behind a new <code class="docutils literal notranslate"><span class="pre">-Wdeprecated-declarations-switch-case</span></code>
flag.</p>
<p>For example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">Red</span><span class="p">,</span>
<span class="w">  </span><span class="n">Green</span><span class="p">,</span>
<span class="w">  </span><span class="n">Blue</span><span class="w"> </span><span class="p">[[</span><span class="n">deprecated</span><span class="p">]]</span>
<span class="p">};</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">example</span><span class="p">(</span><span class="k">enum</span><span class="w"> </span><span class="n">E</span><span class="w"> </span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">switch</span><span class="w"> </span><span class="p">(</span><span class="n">e</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="no">Red</span><span class="p">:</span><span class="w">   </span><span class="c1">// stuff...</span>
<span class="w">  </span><span class="k">case</span><span class="w"> </span><span class="no">Green</span><span class="p">:</span><span class="w"> </span><span class="c1">// stuff...</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
<p>will result in a warning about <code class="docutils literal notranslate"><span class="pre">Blue</span></code> not being handled in the switch.</p>
<p>The warning can be fixed either by adding a <code class="docutils literal notranslate"><span class="pre">default:</span></code>, or by adding
<code class="docutils literal notranslate"><span class="pre">case</span> <span class="pre">Blue:</span></code>. Since the enumerator is deprecated, the latter approach will
trigger a <code class="docutils literal notranslate"><span class="pre">'Blue'</span> <span class="pre">is</span> <span class="pre">deprecated</span></code> warning, which can be turned off with
<code class="docutils literal notranslate"><span class="pre">-Wno-deprecated-declarations-switch-case</span></code>.</p>
</li>
<li><p>Split diagnosis of implicit integer comparison on negation to a new
diagnostic group <code class="docutils literal notranslate"><span class="pre">-Wimplicit-int-comparison-on-negation</span></code>, grouped under
<code class="docutils literal notranslate"><span class="pre">-Wimplicit-int-conversion</span></code>, so user can turn it off independently.</p></li>
<li><p>Improved the FixIts for unused lambda captures.</p></li>
<li><p>Delayed typo correction was removed from the compiler; immediate typo
correction behavior remains the same. Delayed typo correction facilities were
fragile and unmaintained, and the removal closed the following issues:
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/142457">#142457</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/139913">#139913</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/138850">#138850</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/137867">#137867</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/137860">#137860</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/107840">#107840</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/93308">#93308</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/69470">#69470</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/59391">#59391</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/58172">#58172</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/46215">#46215</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/45915">#45915</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/45891">#45891</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/44490">#44490</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/36703">#36703</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/32903">#32903</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/23312">#23312</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/69874">#69874</a>.</p></li>
<li><p>Clang no longer emits a spurious -Wdangling-gsl warning in C++23 when
iterating over an element of a temporary container in a range-based
for loop.(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/109793">#109793</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/145164">#145164</a>)</p></li>
<li><p>Fixed false positives in <code class="docutils literal notranslate"><span class="pre">-Wformat-truncation</span></code> and <code class="docutils literal notranslate"><span class="pre">-Wformat-overflow</span></code>
diagnostics when floating-point numbers had both width field and plus or space
prefix specified. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143951">#143951</a>)</p></li>
<li><p>A warning is now emitted when <code class="docutils literal notranslate"><span class="pre">main</span></code> is attached to a named module,
which can be turned off with <code class="docutils literal notranslate"><span class="pre">-Wno-main-attached-to-named-module</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/146247">#146247</a>)</p></li>
<li><p>Clang now avoids issuing <cite>-Wreturn-type</cite> warnings in some cases where
the final statement of a non-void function is a <cite>throw</cite> expression, or
a call to a function that is trivially known to always throw (i.e., its
body consists solely of a <cite>throw</cite> statement). This avoids certain
false positives in exception-heavy code, though only simple patterns
are currently recognized.</p></li>
<li><p>Clang now accepts <code class="docutils literal notranslate"><span class="pre">&#64;tparam</span></code> comments on variable template partial
specializations. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/144775">#144775</a>)</p></li>
<li><p>Fixed a bug that caused diagnostic line wrapping to not function correctly on
some systems. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139499">#139499</a>)</p></li>
<li><p>Clang now tries to avoid printing file paths that contain <code class="docutils literal notranslate"><span class="pre">..</span></code>, instead preferring
the canonical file path if it ends up being shorter.</p></li>
<li><p>Improve the diagnostics for placement new expression when const-qualified
object was passed as the storage argument. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143708">#143708</a>)</p></li>
<li><p>Clang now does not issue a warning about returning from a function declared with
the <code class="docutils literal notranslate"><span class="pre">[[noreturn]]</span></code> attribute when the function body is ended with a call via
pointer, provided it can be proven that the pointer only points to
<code class="docutils literal notranslate"><span class="pre">[[noreturn]]</span></code> functions.</p></li>
</ul>
</section>
<section id="improvements-to-clang-s-time-trace">
<h3><a class="toc-backref" href="#id284" role="doc-backlink">Improvements to Clang’s time-trace</a><a class="headerlink" href="#improvements-to-clang-s-time-trace" title="Link to this heading">¶</a></h3>
</section>
<section id="improvements-to-coverage-mapping">
<h3><a class="toc-backref" href="#id285" role="doc-backlink">Improvements to Coverage Mapping</a><a class="headerlink" href="#improvements-to-coverage-mapping" title="Link to this heading">¶</a></h3>
</section>
<section id="bug-fixes-in-this-version">
<h3><a class="toc-backref" href="#id286" role="doc-backlink">Bug Fixes in This Version</a><a class="headerlink" href="#bug-fixes-in-this-version" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Clang now outputs correct values when #embed data contains bytes with negative
signed char values (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/102798">#102798</a>).</p></li>
<li><p>Fixed a crash when merging named enumerations in modules (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/114240">#114240</a>).</p></li>
<li><p>Fixed rejects-valid problem when #embed appears in std::initializer_list or
when it can affect template argument deduction (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/122306">#122306</a>).</p></li>
<li><p>Fix crash on code completion of function calls involving partial order of function templates
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/125500">#125500</a>).</p></li>
<li><p>Fixed clang crash when #embed data does not fit into an array
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/128987">#128987</a>).</p></li>
<li><p>Non-local variable and non-variable declarations in the first clause of a <code class="docutils literal notranslate"><span class="pre">for</span></code> loop in C are no longer incorrectly
considered an error in C23 mode and are allowed as an extension in earlier language modes.</p></li>
<li><p>Remove the <code class="docutils literal notranslate"><span class="pre">static</span></code> specifier for the value of <code class="docutils literal notranslate"><span class="pre">_FUNCTION_</span></code> for static functions, in MSVC compatibility mode.</p></li>
<li><p>Fixed a modules crash where exception specifications were not propagated properly (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/121245">#121245</a>, relanded in <a class="reference external" href="https://github.com/llvm/llvm-project/issues/129982">#129982</a>)</p></li>
<li><p>Fixed a problematic case with recursive deserialization within <code class="docutils literal notranslate"><span class="pre">FinishedDeserializing()</span></code> where
<code class="docutils literal notranslate"><span class="pre">PassInterestingDeclsToConsumer()</span></code> was called before the declarations were safe to be passed. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/129982">#129982</a>)</p></li>
<li><p>Fixed a modules crash where an explicit Constructor was deserialized. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132794">#132794</a>)</p></li>
<li><p>Defining an integer literal suffix (e.g., <code class="docutils literal notranslate"><span class="pre">LL</span></code>) before including
<code class="docutils literal notranslate"><span class="pre">&lt;stdint.h&gt;</span></code> in a freestanding build no longer causes invalid token pasting
when using the <code class="docutils literal notranslate"><span class="pre">INTn_C</span></code> macros. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/85995">#85995</a>)</p></li>
<li><p>Fixed an assertion failure in the expansion of builtin macros like <code class="docutils literal notranslate"><span class="pre">__has_embed()</span></code> with line breaks before the
closing paren. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/133574">#133574</a>)</p></li>
<li><p>Fixed a crash in error recovery for expressions resolving to templates. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/135621">#135621</a>)</p></li>
<li><p>Clang no longer accepts invalid integer constants which are too large to fit
into any (standard or extended) integer type when the constant is unevaluated.
Merely forming the token is sufficient to render the program invalid. Code
like this was previously accepted and is now rejected (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/134658">#134658</a>):
.. code-block:: c</p>
<blockquote>
<div><p>#if 1 ? 1 : 999999999999999999999
#endif</p>
</div></blockquote>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">#embed</span></code> directive now diagnoses use of a non-character file (device file)
such as <code class="docutils literal notranslate"><span class="pre">/dev/urandom</span></code> as an error. This restriction may be relaxed in the
future. See (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/126629">#126629</a>).</p></li>
<li><p>Fixed a clang 20 regression where diagnostics attached to some calls to member functions
using C++23 “deducing this” did not have a diagnostic location (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/135522">#135522</a>)</p></li>
<li><p>Fixed a crash when a <code class="docutils literal notranslate"><span class="pre">friend</span></code> function is redefined as deleted. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/135506">#135506</a>)</p></li>
<li><p>Fixed a crash when <code class="docutils literal notranslate"><span class="pre">#embed</span></code> appears as a part of a failed constant
evaluation. The crashes were happening during diagnostics emission due to
unimplemented statement printer. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132641">#132641</a>)</p></li>
<li><p>Fixed visibility calculation for template functions. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/103477">#103477</a>)</p></li>
<li><p>Fixed a bug where an attribute before a <code class="docutils literal notranslate"><span class="pre">pragma</span> <span class="pre">clang</span> <span class="pre">attribute</span></code> or
<code class="docutils literal notranslate"><span class="pre">pragma</span> <span class="pre">clang</span> <span class="pre">__debug</span></code> would cause an assertion. Instead, this now diagnoses
the invalid attribute location appropriately. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/137861">#137861</a>)</p></li>
<li><p>Fixed a crash when a malformed <code class="docutils literal notranslate"><span class="pre">_Pragma</span></code> directive appears as part of an
<code class="docutils literal notranslate"><span class="pre">#include</span></code> directive. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138094">#138094</a>)</p></li>
<li><p>Fixed a crash during constant evaluation involving invalid lambda captures
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138832">#138832</a>)</p></li>
<li><p>Fixed compound literal is not constant expression inside initializer list
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/87867">#87867</a>)</p></li>
<li><p>Fixed a crash when instantiating an invalid dependent friend template specialization.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139052">#139052</a>)</p></li>
<li><p>Fixed a crash with an invalid member function parameter list with a default
argument which contains a pragma. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/113722">#113722</a>)</p></li>
<li><p>Fixed assertion failures when generating name lookup table in modules. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61065">#61065</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/134739">#134739</a>)</p></li>
<li><p>Fixed an assertion failure in constant compound literal statements. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139160">#139160</a>)</p></li>
<li><p>Fix crash due to unknown references and pointer implementation and handling of
base classes. (GH139452)</p></li>
<li><p>Fixed an assertion failure in serialization of constexpr structs containing unions. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/140130">#140130</a>)</p></li>
<li><p>Fixed duplicate entries in TableGen that caused the wrong attribute to be selected. (GH#140701)</p></li>
<li><p>Fixed type mismatch error when ‘builtin-elementwise-math’ arguments have different qualifiers, this should be well-formed. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/141397">#141397</a>)</p></li>
<li><p>Constant evaluation now correctly runs the destructor of a variable declared in
the second clause of a C-style <code class="docutils literal notranslate"><span class="pre">for</span></code> loop. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139818">#139818</a>)</p></li>
<li><p>Fixed a bug with constexpr evaluation for structs containing unions in case of C++ modules. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143168">#143168</a>)</p></li>
<li><p>Fixed incorrect token location when emitting diagnostics for tokens expanded from macros. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143216">#143216</a>)</p></li>
<li><p>Fixed an infinite recursion when checking constexpr destructors. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/141789">#141789</a>)</p></li>
<li><p>Fixed a crash when a malformed using declaration appears in a <code class="docutils literal notranslate"><span class="pre">constexpr</span></code> function. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/144264">#144264</a>)</p></li>
<li><p>Fixed a bug when use unicode character name in macro concatenation. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/145240">#145240</a>)</p></li>
<li><p>Clang doesn’t erroneously inject a <code class="docutils literal notranslate"><span class="pre">static_assert</span></code> macro in ms-compatibility and
-std=c99 mode. This resulted in deletion of <code class="docutils literal notranslate"><span class="pre">-W/Wno-microsoft-static-assert</span></code>
flag and diagnostic because the macro injection was used to emit this warning.
Unfortunately there is no other good way to diagnose usage of <code class="docutils literal notranslate"><span class="pre">static_assert</span></code>
macro without inclusion of <code class="docutils literal notranslate"><span class="pre">&lt;assert.h&gt;</span></code>.</p></li>
<li><p>In C23, something like <code class="docutils literal notranslate"><span class="pre">[[/*possible</span> <span class="pre">attributes*/]];</span></code> is an attribute
declaration, not a statement. So it is not allowed by the syntax in places
where a statement is required, specifically as the secondary block of a
selection or iteration statement. This differs from C++, since C++ allows
declaration statements. Clang now emits a warning for these patterns. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/141659">#141659</a>)</p></li>
<li><p>Fixed false positives for redeclaration errors of using enum in
nested scopes. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147495">#147495</a>)</p></li>
<li><p>Fixed a crash in <cite>clang-scan-deps</cite> when a module with the same name is found
in different locations (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/134404">#134404</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/146976">#146976</a>).</p></li>
</ul>
<section id="bug-fixes-to-compiler-builtins">
<h4>Bug Fixes to Compiler Builtins<a class="headerlink" href="#bug-fixes-to-compiler-builtins" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The behaviour of <code class="docutils literal notranslate"><span class="pre">__add_pointer</span></code> and <code class="docutils literal notranslate"><span class="pre">__remove_pointer</span></code> for Objective-C++’s <code class="docutils literal notranslate"><span class="pre">id</span></code> and interfaces has been fixed.</p></li>
<li><p>The signature for <code class="docutils literal notranslate"><span class="pre">__builtin___clear_cache</span></code> was changed from
<code class="docutils literal notranslate"><span class="pre">void(char</span> <span class="pre">*,</span> <span class="pre">char</span> <span class="pre">*)</span></code> to <code class="docutils literal notranslate"><span class="pre">void(void</span> <span class="pre">*,</span> <span class="pre">void</span> <span class="pre">*)</span></code> to match GCC’s signature
for the same builtin. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/47833">#47833</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__has_unique_object_representations(Incomplete[])</span></code> is no longer accepted, per
<a class="reference external" href="https://cplusplus.github.io/LWG/issue4113">LWG4113</a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__builtin_is_cpp_trivially_relocatable</span></code>, <code class="docutils literal notranslate"><span class="pre">__builtin_is_replaceable</span></code> and
<code class="docutils literal notranslate"><span class="pre">__builtin_trivially_relocate</span></code> have been added to support standard C++26 relocation.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__is_trivially_relocatable</span></code> has been deprecated, and uses should be replaced by
<code class="docutils literal notranslate"><span class="pre">__builtin_is_cpp_trivially_relocatable</span></code>.
Note that, it is generally unsafe to <code class="docutils literal notranslate"><span class="pre">memcpy</span></code> non-trivially copyable types that
are <code class="docutils literal notranslate"><span class="pre">__builtin_is_cpp_trivially_relocatable</span></code>. It is recommended to use
<code class="docutils literal notranslate"><span class="pre">__builtin_trivially_relocate</span></code> instead.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__reference_binds_to_temporary</span></code>, <code class="docutils literal notranslate"><span class="pre">__reference_constructs_from_temporary</span></code>
and <code class="docutils literal notranslate"><span class="pre">__reference_converts_from_temporary</span></code> intrinsics no longer consider
function references can bind to temporary objects. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/114344">#114344</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__reference_constructs_from_temporary</span></code> and
<code class="docutils literal notranslate"><span class="pre">__reference_converts_from_temporary</span></code> intrinsics detect reference binding
to prvalue instead of xvalue now if the second operand is an object type, per
<a class="reference external" href="https://cplusplus.github.io/LWG/issue3819">LWG3819</a>.</p></li>
</ul>
</section>
<section id="bug-fixes-to-attribute-support">
<h4>Bug Fixes to Attribute Support<a class="headerlink" href="#bug-fixes-to-attribute-support" title="Link to this heading">¶</a></h4>
<blockquote>
<div><ul class="simple">
<li><p>Fixed crash when a parameter to the <code class="docutils literal notranslate"><span class="pre">clang::annotate</span></code> attribute evaluates to <code class="docutils literal notranslate"><span class="pre">void</span></code>. See <a class="reference external" href="https://github.com/llvm/llvm-project/issues/119125">#119125</a></p></li>
</ul>
</div></blockquote>
<ul class="simple">
<li><p>Clang now emits a warning instead of an error when using the one or two
argument form of GCC 11’s <code class="docutils literal notranslate"><span class="pre">__attribute__((malloc(deallocator)))</span></code>
or <code class="docutils literal notranslate"><span class="pre">__attribute__((malloc(deallocator,</span> <span class="pre">ptr-index)))</span></code>
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51607">#51607</a>).</p></li>
<li><p>Corrected the diagnostic for the <code class="docutils literal notranslate"><span class="pre">callback</span></code> attribute when passing too many
or too few attribute argument indicies for the specified callback function.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/47451">#47451</a>)</p></li>
<li><p>No longer crashing on <code class="docutils literal notranslate"><span class="pre">__attribute__((align_value(N)))</span></code> during template
instantiation when the function parameter type is not a pointer or reference.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/26612">#26612</a>)</p></li>
<li><p>Now allowing the <code class="docutils literal notranslate"><span class="pre">[[deprecated]]</span></code>, <code class="docutils literal notranslate"><span class="pre">[[maybe_unused]]</span></code>, and
<code class="docutils literal notranslate"><span class="pre">[[nodiscard]]</span></code> to be applied to a redeclaration after a definition in both
C and C++ mode for the standard spellings (other spellings, such as
<code class="docutils literal notranslate"><span class="pre">__attribute__((unused))</span></code> are still ignored after the definition, though
this behavior may be relaxed in the future). (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/135481">#135481</a>)</p></li>
<li><p>Clang will warn if a complete type specializes a deprecated partial specialization.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/44496">#44496</a>)</p></li>
</ul>
</section>
<section id="bug-fixes-to-c-support">
<h4>Bug Fixes to C++ Support<a class="headerlink" href="#bug-fixes-to-c-support" title="Link to this heading">¶</a></h4>
<ul>
<li><p>Clang now supports implicitly defined comparison operators for friend declarations. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132249">#132249</a>)</p></li>
<li><p>Clang now diagnoses copy constructors taking the class by value in template instantiations. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/130866">#130866</a>)</p></li>
<li><p>Clang is now better at keeping track of friend function template instance contexts. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55509">#55509</a>)</p></li>
<li><p>Clang now prints the correct instantiation context for diagnostics suppressed
by template argument deduction.</p></li>
<li><p>Errors that occur during evaluation of certain type traits and builtins are
no longer incorrectly emitted when they are used in an SFINAE context. The
type traits are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__is_constructible</span></code> and variants,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__is_convertible</span></code> and variants,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__is_assignable</span></code> and variants,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__reference_binds_to_temporary</span></code>,
<code class="docutils literal notranslate"><span class="pre">__reference_constructs_from_temporary</span></code>,
<code class="docutils literal notranslate"><span class="pre">__reference_converts_from_temporary</span></code>,</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__is_trivially_equality_comparable</span></code>.</p></li>
</ul>
<p>The builtin is <code class="docutils literal notranslate"><span class="pre">__builtin_common_type</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132044">#132044</a>)</p>
</li>
<li><p>Clang is now better at instantiating the function definition after its use inside
of a constexpr lambda. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/125747">#125747</a>)</p></li>
<li><p>Fixed a local class member function instantiation bug inside dependent lambdas. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59734">#59734</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132208">#132208</a>)</p></li>
<li><p>Clang no longer crashes when trying to unify the types of arrays with
certain differences in qualifiers (this could happen during template argument
deduction or when building a ternary operator). (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/97005">#97005</a>)</p></li>
<li><p>Fixed type alias CTAD issues involving default template arguments. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/133132">#133132</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/134471">#134471</a>)</p></li>
<li><p>Fixed CTAD issues when initializing anonymous fields with designated initializers. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/67173">#67173</a>)</p></li>
<li><p>The initialization kind of elements of structured bindings
direct-list-initialized from an array is corrected to direct-initialization.</p></li>
<li><p>Clang no longer crashes when a coroutine is declared <code class="docutils literal notranslate"><span class="pre">[[noreturn]]</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/127327">#127327</a>)</p></li>
<li><p>Clang now uses the parameter location for abbreviated function templates in <code class="docutils literal notranslate"><span class="pre">extern</span> <span class="pre">&quot;C&quot;</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/46386">#46386</a>)</p></li>
<li><p>Clang will emit an error instead of crash when use co_await or co_yield in
C++26 braced-init-list template parameter initialization. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/78426">#78426</a>)</p></li>
<li><p>Improved fix for an issue with pack expansions of type constraints, where this
now also works if the constraint has non-type or template template parameters.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/131798">#131798</a>)</p></li>
<li><p>Fixes to partial ordering of non-type template parameter packs. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132562">#132562</a>)</p></li>
<li><p>Fix crash when evaluating the trailing requires clause of generic lambdas which are part of
a pack expansion.</p></li>
<li><p>Fixes matching of nested template template parameters. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/130362">#130362</a>)</p></li>
<li><p>Correctly diagnoses template template parameters which have a pack parameter
not in the last position.</p></li>
<li><p>Disallow overloading on struct vs class on dependent types, which is IFNDR, as
this makes the problem diagnosable.</p></li>
<li><p>Improved preservation of the presence or absence of typename specifier when
printing types in diagnostics.</p></li>
<li><p>Clang now correctly parses <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">constexpr</span></code> expressions in immediate function context. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/123524">#123524</a>)</p></li>
<li><p>Fixed an assertion failure affecting code that uses C++23 “deducing this”. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/130272">#130272</a>)</p></li>
<li><p>Clang now properly instantiates destructors for initialized members within non-delegating constructors. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/93251">#93251</a>)</p></li>
<li><p>Correctly diagnoses if unresolved using declarations shadows template parameters (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/129411">#129411</a>)</p></li>
<li><p>Fixed C++20 aggregate initialization rules being incorrectly applied in certain contexts. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/131320">#131320</a>)</p></li>
<li><p>Clang was previously coalescing volatile writes to members of volatile base class subobjects.
The issue has been addressed by propagating qualifiers during derived-to-base conversions in the AST. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/127824">#127824</a>)</p></li>
<li><p>Correctly propagates the instantiated array type to the <code class="docutils literal notranslate"><span class="pre">DeclRefExpr</span></code> that refers to it. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/79750">#79750</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/113936">#113936</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/133047">#133047</a>)</p></li>
<li><p>Fixed a Clang regression in C++20 mode where unresolved dependent call expressions were created inside non-dependent contexts (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/122892">#122892</a>)</p></li>
<li><p>Clang now emits the <code class="docutils literal notranslate"><span class="pre">-Wunused-variable</span></code> warning when some structured bindings are unused
and the <code class="docutils literal notranslate"><span class="pre">[[maybe_unused]]</span></code> attribute is not applied. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/125810">#125810</a>)</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">static_cast</span></code> not performing access or ambiguity checks when converting to an rvalue reference to a base class. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/121429">#121429</a>)</p></li>
<li><p>Declarations using class template argument deduction with redundant
parentheses around the declarator are no longer rejected. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/39811">#39811</a>)</p></li>
<li><p>Fixed a crash caused by invalid declarations of <code class="docutils literal notranslate"><span class="pre">std::initializer_list</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132256">#132256</a>)</p></li>
<li><p>Clang no longer crashes when establishing subsumption between some constraint expressions. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/122581">#122581</a>)</p></li>
<li><p>Clang now issues an error when placement new is used to modify a const-qualified variable
in a <code class="docutils literal notranslate"><span class="pre">constexpr</span></code> function. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/131432">#131432</a>)</p></li>
<li><p>Fixed an incorrect TreeTransform for calls to <code class="docutils literal notranslate"><span class="pre">consteval</span></code> functions if a conversion template is present. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/137885">#137885</a>)</p></li>
<li><p>Clang now emits a warning when class template argument deduction for alias templates is used in C++17. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/133806">#133806</a>)</p></li>
<li><p>Fixed a missed initializer instantiation bug for variable templates. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/134526">#134526</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138122">#138122</a>)</p></li>
<li><p>Fix a crash when checking the template template parameters of a dependent lambda appearing in an alias declaration.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/136432">#136432</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/137014">#137014</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138018">#138018</a>)</p></li>
<li><p>Fixed an assertion when trying to constant-fold various builtins when the argument
referred to a reference to an incomplete type. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/129397">#129397</a>)</p></li>
<li><p>Fixed a crash when a cast involved a parenthesized aggregate initialization in dependent context. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/72880">#72880</a>)</p></li>
<li><p>No longer crashes when instantiating invalid variable template specialization
whose type depends on itself. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51347">#51347</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55872">#55872</a>)</p></li>
<li><p>Improved parser recovery of invalid requirement expressions. In turn, this
fixes crashes from follow-on processing of the invalid requirement. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138820">#138820</a>)</p></li>
<li><p>Fixed the handling of pack indexing types in the constraints of a member function redeclaration. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138255">#138255</a>)</p></li>
<li><p>Clang now correctly parses arbitrary order of <code class="docutils literal notranslate"><span class="pre">[[]]</span></code>, <code class="docutils literal notranslate"><span class="pre">__attribute__</span></code> and <code class="docutils literal notranslate"><span class="pre">alignas</span></code> attributes for declarations (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/133107">#133107</a>)</p></li>
<li><p>Fixed a crash when forming an invalid function type in a dependent context. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138657">#138657</a>) (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/115725">#115725</a>) (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/68852">#68852</a>)</p></li>
<li><p>Fixed a function declaration mismatch that caused inconsistencies between concepts and variable template declarations. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139476">#139476</a>)</p></li>
<li><p>Fixed an out-of-line declaration mismatch involving nested template parameters. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/145521">#145521</a>)</p></li>
<li><p>Clang no longer segfaults when there is a configuration mismatch between modules and their users (<a class="reference external" href="http://crbug.com/400353616">http://crbug.com/400353616</a>).</p></li>
<li><p>Fix an incorrect deduction when calling an explicit object member function template through an overload set address.</p></li>
<li><p>Fixed bug in constant evaluation that would allow using the value of a
reference in its own initializer in C++23 mode (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/131330">#131330</a>).</p></li>
<li><p>Clang could incorrectly instantiate functions in discarded contexts (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/140449">#140449</a>)</p></li>
<li><p>Fix instantiation of default-initialized variable template specialization. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/140632">#140632</a>) (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/140622">#140622</a>)</p></li>
<li><p>Clang modules now allow a module and its user to differ on TrivialAutoVarInit*</p></li>
<li><p>Fixed an access checking bug when initializing non-aggregates in default arguments (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62444">#62444</a>), (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/83608">#83608</a>)</p></li>
<li><p>Fixed a pack substitution bug in deducing class template partial specializations. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53609">#53609</a>)</p></li>
<li><p>Fixed a crash when constant evaluating some explicit object member assignment operators. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/142835">#142835</a>)</p></li>
<li><p>Fix a bug where private access specifier of overloaded function not respected. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/107629">#107629</a>)</p></li>
<li><p>Correctly handles calling an explicit object member function template overload set
through its address (<code class="docutils literal notranslate"><span class="pre">(&amp;Foo::bar&lt;baz&gt;)()</span></code>).</p></li>
<li><p>Fix a crash when using an explicit object parameter in a non-member function. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/113185">#113185</a>)</p></li>
<li><p>Fix a crash when forming an invalid call to an operator with an explicit object member. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147121">#147121</a>)</p></li>
<li><p>Correctly handle allocations in the condition of a <code class="docutils literal notranslate"><span class="pre">if</span> <span class="pre">constexpr</span></code>.(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/120197">#120197</a>) (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/134820">#134820</a>)</p></li>
<li><p>Fixed a crash when handling invalid member using-declaration in C++20+ mode. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63254">#63254</a>)</p></li>
<li><p>Fixed parsing of lambda expressions that appear after <code class="docutils literal notranslate"><span class="pre">*</span></code> or <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> in contexts where a declaration can appear. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63880">#63880</a>)</p></li>
<li><p>Fix name lookup in lambda appearing in the body of a requires expression. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147650">#147650</a>)</p></li>
<li><p>Fix a crash when trying to instantiate an ambiguous specialization. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/51866">#51866</a>)</p></li>
<li><p>Improved handling of variables with <code class="docutils literal notranslate"><span class="pre">consteval</span></code> constructors, to
consistently treat the initializer as manifestly constant-evaluated.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/135281">#135281</a>)</p></li>
<li><p>Fix a crash in the presence of invalid base classes. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147186">#147186</a>)</p></li>
<li><p>Fix a crash with NTTP when instantiating local class.</p></li>
<li><p>Fixed a crash involving list-initialization of an empty class with a
non-empty initializer list. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147949">#147949</a>)</p></li>
<li><p>Fixed constant evaluation of equality comparisons of constexpr-unknown references. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147663">#147663</a>)</p></li>
</ul>
</section>
<section id="bug-fixes-to-ast-handling">
<h4>Bug Fixes to AST Handling<a class="headerlink" href="#bug-fixes-to-ast-handling" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed type checking when a statement expression ends in an l-value of atomic type. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/106576">#106576</a>)</p></li>
<li><p>Fixed uninitialized use check in a lambda within CXXOperatorCallExpr. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/129198">#129198</a>)</p></li>
<li><p>Fixed a malformed printout of <code class="docutils literal notranslate"><span class="pre">CXXParenListInitExpr</span></code> in certain contexts.</p></li>
<li><p>Fixed a malformed printout of certain calling convention function attributes. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143160">#143160</a>)</p></li>
<li><p>Fixed dependency calculation for TypedefTypes (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/89774">#89774</a>)</p></li>
<li><p>The ODR checker now correctly hashes the names of conversion operators. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143152">#143152</a>)</p></li>
<li><p>Fixed the right parenthesis source location of <code class="docutils literal notranslate"><span class="pre">CXXTemporaryObjectExpr</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/143711">#143711</a>)</p></li>
<li><p>Fixed a crash when performing an <code class="docutils literal notranslate"><span class="pre">IgnoreUnlessSpelledInSource</span></code> traversal of ASTs containing <code class="docutils literal notranslate"><span class="pre">catch(...)</span></code> statements. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/146103">#146103</a>)</p></li>
</ul>
</section>
<section id="miscellaneous-bug-fixes">
<h4>Miscellaneous Bug Fixes<a class="headerlink" href="#miscellaneous-bug-fixes" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>HTML tags in comments that span multiple lines are now parsed correctly by Clang’s comment parser. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/120843">#120843</a>)</p></li>
</ul>
</section>
<section id="miscellaneous-clang-crashes-fixed">
<h4>Miscellaneous Clang Crashes Fixed<a class="headerlink" href="#miscellaneous-clang-crashes-fixed" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed crash when <code class="docutils literal notranslate"><span class="pre">-print-stats</span></code> is enabled in compiling IR files. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/131608">#131608</a>)</p></li>
<li><p>Fix code completion crash involving PCH serialized templates. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139019">#139019</a>)</p></li>
</ul>
</section>
</section>
<section id="openacc-specific-changes">
<h3><a class="toc-backref" href="#id287" role="doc-backlink">OpenACC Specific Changes</a><a class="headerlink" href="#openacc-specific-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>OpenACC support, enabled via <cite>-fopenacc</cite> has reached a level of completeness
to finally be at least notionally usable. Currently, the OpenACC 3.4
specification has been completely implemented for Sema and AST creation, so
nodes will show up in the AST after having been properly checked. Lowering is
currently a work in progress, with compute, loop, and combined constructs
partially implemented, plus a handful of data and executable constructs
implemented. Lowering will only work in Clang-IR mode (so only with a compiler
built with Clang-IR enabled, and with <cite>-fclangir</cite> used on the command line).
However, note that the Clang-IR implementation status is also quite partial,
so frequent ‘not yet implemented’ diagnostics should be expected.  Also, the
ACC MLIR dialect does not currently implement any lowering to LLVM-IR, so no
code generation is possible for OpenACC.</p></li>
</ul>
</section>
<section id="target-specific-changes">
<h3><a class="toc-backref" href="#id288" role="doc-backlink">Target Specific Changes</a><a class="headerlink" href="#target-specific-changes" title="Link to this heading">¶</a></h3>
<section id="amdgpu-support">
<h4>AMDGPU Support<a class="headerlink" href="#amdgpu-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Bump the default code object version to 6. ROCm 6.3 is required to run any program compiled with COV6.</p></li>
</ul>
</section>
<section id="nvptx-support">
<h4>NVPTX Support<a class="headerlink" href="#nvptx-support" title="Link to this heading">¶</a></h4>
</section>
<section id="hexagon-support">
<h4>Hexagon Support<a class="headerlink" href="#hexagon-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The default compilation target has been changed from V60 to V68.</p></li>
</ul>
</section>
<section id="x86-support">
<h4>X86 Support<a class="headerlink" href="#x86-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The 256-bit maximum vector register size control was removed from
<cite>AVX10 whitepaper &lt;https://cdrdv2.intel.com/v1/dl/getContent/784343&gt;_</cite>.
* Re-target <code class="docutils literal notranslate"><span class="pre">m[no-]avx10.1</span></code> to enable AVX10.1 with 512-bit maximum vector register size.
* Emit warning for <code class="docutils literal notranslate"><span class="pre">mavx10.x-256</span></code>, noting AVX10/256 is not supported.
* Emit warning for <code class="docutils literal notranslate"><span class="pre">mavx10.x-512</span></code>, noting to use <code class="docutils literal notranslate"><span class="pre">m[no-]avx10.x</span></code> instead.
* Emit warning for <code class="docutils literal notranslate"><span class="pre">m[no-]evex512</span></code>, noting AVX10/256 is not supported.
* The features avx10.x-256/512 keep unchanged and will be removed in the next release.</p></li>
</ul>
</section>
<section id="arm-and-aarch64-support">
<h4>Arm and AArch64 Support<a class="headerlink" href="#arm-and-aarch64-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Implementation of modal 8-bit floating point intrinsics in accordance with
the Arm C Language Extensions (ACLE)
<a class="reference external" href="https://github.com/ARM-software/acle/blob/main/main/acle.md#modal-8-bit-floating-point-extensions">as specified here</a>
is now available.</p></li>
<li><p>Support has been added for the following processors (command-line identifiers in parentheses):</p>
<ul>
<li><p>Arm Cortex-A320 (<code class="docutils literal notranslate"><span class="pre">cortex-a320</span></code>)</p></li>
</ul>
</li>
<li><p>For ARM targets, cc1as now considers the FPU’s features for the selected CPU or Architecture.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">+nosimd</span></code> attribute is now fully supported for ARM. Previously, this had no effect when being used with
ARM targets, however this will now disable NEON instructions being generated. The <code class="docutils literal notranslate"><span class="pre">simd</span></code> option is
also now printed when the <code class="docutils literal notranslate"><span class="pre">--print-supported-extensions</span></code> option is used.</p></li>
<li><p>When a feature that depends on NEON (<code class="docutils literal notranslate"><span class="pre">simd</span></code>) is used, NEON is now automatically enabled.</p></li>
<li><p>When NEON is disabled (<code class="docutils literal notranslate"><span class="pre">+nosimd</span></code>), all features that depend on NEON will now be disabled.</p></li>
<li><p>Pointer authentication</p>
<ul>
<li><p>Support for __ptrauth type qualifier has been added.</p></li>
<li><p>Objective-C adoption of pointer authentication</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">isa</span></code> and <code class="docutils literal notranslate"><span class="pre">super</span></code> pointers are protected with address diversity and separate
usage specific discriminators.</p></li>
<li><p>methodlist pointers and content are protected with address diversity and methodlist
pointers have a usage specific discriminator.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">class_ro_t</span></code> pointers are protected with address diversity and usage specific
discriminators.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">SEL</span></code> typed ivars are protected with address diversity and usage specific
discriminators.</p></li>
</ul>
</li>
</ul>
</li>
<li><p>For AArch64, added support for generating executable-only code sections by using the
<code class="docutils literal notranslate"><span class="pre">-mexecute-only</span></code> or <code class="docutils literal notranslate"><span class="pre">-mpure-code</span></code> compiler flags. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/125688">#125688</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-msve-streaming-vector-bits=</span></code> flag, which allows specifying the
SVE vector width in streaming mode.</p></li>
</ul>
</section>
<section id="android-support">
<h4>Android Support<a class="headerlink" href="#android-support" title="Link to this heading">¶</a></h4>
</section>
<section id="windows-support">
<h4>Windows Support<a class="headerlink" href="#windows-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang now defines <code class="docutils literal notranslate"><span class="pre">_CRT_USE_BUILTIN_OFFSETOF</span></code> macro in MSVC-compatible mode,
which makes <code class="docutils literal notranslate"><span class="pre">offsetof</span></code> provided by Microsoft’s <code class="docutils literal notranslate"><span class="pre">&lt;stddef.h&gt;</span></code> to be defined
correctly. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59689">#59689</a>)</p></li>
<li><p>Clang now can process the <cite>i128</cite> and <cite>ui128</cite> integral suffixes when MSVC
extensions are enabled. This allows for properly processing <code class="docutils literal notranslate"><span class="pre">intsafe.h</span></code> in
the Windows SDK.</p></li>
<li><p>Clang now supports <cite>mipsel-windows-gnu</cite> and <cite>mipsel-windows-msvc</cite> targets.</p></li>
</ul>
</section>
<section id="loongarch-support">
<h4>LoongArch Support<a class="headerlink" href="#loongarch-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Add support for OHOS on loongarch64.</p></li>
<li><p>Add target attribute support for function. Supported formats include:
* <cite>arch=&lt;arch&gt;</cite> strings - specifies architecture features for a function (equivalent to <cite>-march=&lt;arch&gt;</cite>).
* <cite>tune=&lt;cpu&gt;</cite> strings - specifies the tune CPU for a function (equivalent to <cite>-mtune</cite>).
* <cite>&lt;feature&gt;</cite>/<cite>no-&lt;feature&gt;</cite> - enables/disables specific features.</p></li>
<li><p>Add support for the <cite>_Float16</cite> type. And fix incorrect ABI lowering of <cite>_Float16</cite>
in the case of structs containing fp16 that are eligible for passing via <cite>GPR+FPR</cite>
or <cite>FPR+FPR</cite>. Also fix <cite>int16</cite> -&gt; <cite>__fp16</cite> conversion code gen, which uses generic LLVM
IR rather than <cite>llvm.convert.to.fp16</cite> intrinsics.</p></li>
<li><p>Add support for the <cite>__bf16</cite> type.</p></li>
<li><p>Fix incorrect _BitInt(N&gt;64) alignment. Now consistently uses 16-byte alignment for all
<cite>_BitInt(N)</cite> where N &gt; 64.</p></li>
</ul>
</section>
<section id="risc-v-support">
<h4>RISC-V Support<a class="headerlink" href="#risc-v-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Add support for <cite>-mtune=generic-ooo</cite> (a generic out-of-order model).</p></li>
<li><p>Adds support for <cite>__attribute__((interrupt(“SiFive-CLIC-preemptible”)))</cite> and
<cite>__attribute__((interrupt(“SiFive-CLIC-stack-swap”)))</cite>. The former
automatically saves some interrupt CSRs before re-enabling interrupts in the
function prolog, the latter swaps <cite>sp</cite> with the value in a CSR before it is
used or modified. These two can also be combined, and can be combined with
<cite>interrupt(“machine”)</cite>.</p></li>
<li><p>Adds support for <cite>__attribute__((interrupt(“qci-nest”)))</cite> and
<cite>__attribute__((interrupt(“qci-nonest”)))</cite>. These use instructions from
Qualcomm’s <cite>Xqciint</cite> extension to save and restore some GPRs in interrupt
service routines.</p></li>
<li><p><cite>Zicsr</cite> / <cite>Zifencei</cite> are allowed to be duplicated in the presence of <cite>g</cite> in <cite>-march</cite>.</p></li>
<li><p>Add support for the <cite>__builtin_riscv_pause()</cite> intrinsic from the <cite>Zihintpause</cite> extension.</p></li>
</ul>
</section>
<section id="cuda-hip-language-changes">
<h4>CUDA/HIP Language Changes<a class="headerlink" href="#cuda-hip-language-changes" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Provide a __device__ version of std::__glibcxx_assert_fail() in a header wrapper.</p></li>
</ul>
</section>
<section id="cuda-support">
<h4>CUDA Support<a class="headerlink" href="#cuda-support" title="Link to this heading">¶</a></h4>
</section>
<section id="powerpc-support">
<h4>PowerPC Support<a class="headerlink" href="#powerpc-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Add <cite>__dmr1024</cite> type for Dense Math Facility.</p></li>
<li><p>Add prototype for Dense Math Facility integer calculation builtins.</p></li>
</ul>
</section>
<section id="aix-support">
<h4>AIX Support<a class="headerlink" href="#aix-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed <cite>-print-runtime-dir</cite> to fallback to the target subdirectory (rather than OS subdirectory) if the runtime path is not found.</p></li>
<li><p>Fixed <cite>-print-runtime-dir</cite> to find the correct runtime path if the triple has “unknown” as the environment component.</p></li>
<li><p>Changed AIX targets to use the per-target runtime directories for compiler runtimes (i.e. <cite>lib/clang/20/lib/aix</cite> became <cite>lib/clang/21/lib/powerpc-ibm-aix</cite> and <cite>clang/21/lib/powerpc64-ibm-aix</cite>).</p></li>
</ul>
</section>
<section id="netbsd-support">
<h4>NetBSD Support<a class="headerlink" href="#netbsd-support" title="Link to this heading">¶</a></h4>
</section>
<section id="webassembly-support">
<h4>WebAssembly Support<a class="headerlink" href="#webassembly-support" title="Link to this heading">¶</a></h4>
</section>
<section id="avr-support">
<h4>AVR Support<a class="headerlink" href="#avr-support" title="Link to this heading">¶</a></h4>
</section>
</section>
<section id="dwarf-support-in-clang">
<h3><a class="toc-backref" href="#id289" role="doc-backlink">DWARF Support in Clang</a><a class="headerlink" href="#dwarf-support-in-clang" title="Link to this heading">¶</a></h3>
</section>
<section id="floating-point-support-in-clang">
<h3><a class="toc-backref" href="#id290" role="doc-backlink">Floating Point Support in Clang</a><a class="headerlink" href="#floating-point-support-in-clang" title="Link to this heading">¶</a></h3>
</section>
<section id="fixed-point-support-in-clang">
<h3><a class="toc-backref" href="#id291" role="doc-backlink">Fixed Point Support in Clang</a><a class="headerlink" href="#fixed-point-support-in-clang" title="Link to this heading">¶</a></h3>
</section>
<section id="ast-matchers">
<h3><a class="toc-backref" href="#id292" role="doc-backlink">AST Matchers</a><a class="headerlink" href="#ast-matchers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Ensure <code class="docutils literal notranslate"><span class="pre">isDerivedFrom</span></code> matches the correct base in case more than one alias exists.</p></li>
<li><p>Extend <code class="docutils literal notranslate"><span class="pre">templateArgumentCountIs</span></code> to support function and variable template
specialization.</p></li>
</ul>
</section>
<section id="clang-format">
<h3><a class="toc-backref" href="#id293" role="doc-backlink">clang-format</a><a class="headerlink" href="#clang-format" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">BreakBeforeTemplateCloser</span></code> option.</p></li>
<li><p>Adds <code class="docutils literal notranslate"><span class="pre">BinPackLongBracedList</span></code> option to override bin packing options in
long (20 item or more) braced list initializer lists.</p></li>
<li><p>Add the C language instead of treating it like C++.</p></li>
<li><p>Allow specifying the language (C, C++, or Objective-C) for a <code class="docutils literal notranslate"><span class="pre">.h</span></code> file by
adding a special comment (e.g. <code class="docutils literal notranslate"><span class="pre">//</span> <span class="pre">clang-format</span> <span class="pre">Language:</span> <span class="pre">ObjC</span></code>) near the
top of the file.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">EnumTrailingComma</span></code> option for inserting/removing commas at the end of
<code class="docutils literal notranslate"><span class="pre">enum</span></code> enumerator lists.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">OneLineFormatOffRegex</span></code> option for turning formatting off for one line.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">SpaceAfterOperatorKeyword</span></code> option.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">MacrosSkippedByRemoveParentheses</span></code> option so that their invocations are
skipped by <code class="docutils literal notranslate"><span class="pre">RemoveParentheses</span></code>.</p></li>
</ul>
</section>
<section id="clang-refactor">
<h3><a class="toc-backref" href="#id294" role="doc-backlink">clang-refactor</a><a class="headerlink" href="#clang-refactor" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Reject <cite>0</cite> as column or line number in 1-based command-line source locations.
Fixes crash caused by <cite>0</cite> input in <cite>-selection=&lt;file&gt;:&lt;line&gt;:&lt;column&gt;[-&lt;line&gt;:&lt;column&gt;]</cite>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139457">#139457</a>)</p></li>
</ul>
</section>
<section id="libclang">
<h3><a class="toc-backref" href="#id295" role="doc-backlink">libclang</a><a class="headerlink" href="#libclang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed a bug in <code class="docutils literal notranslate"><span class="pre">clang_File_isEqual</span></code> that sometimes led to different
in-memory files to be considered as equal.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">clang_visitCXXMethods</span></code>, which allows visiting the methods
of a class.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">clang_getFullyQualifiedName</span></code>, which provides fully qualified type names as
instructed by a PrintingPolicy.</p></li>
<li><p>Fixed a buffer overflow in <code class="docutils literal notranslate"><span class="pre">CXString</span></code> implementation. The fix may result in
increased memory allocation.</p></li>
<li><p>Deprecate <code class="docutils literal notranslate"><span class="pre">clang_Cursor_GetBinaryOpcode</span></code> and <code class="docutils literal notranslate"><span class="pre">clang_Cursor_getBinaryOpcodeStr</span></code>
implementations, which are duplicates of <code class="docutils literal notranslate"><span class="pre">clang_getCursorBinaryOperatorKind</span></code>
and <code class="docutils literal notranslate"><span class="pre">clang_getBinaryOperatorKindSpelling</span></code> respectively.</p></li>
</ul>
</section>
<section id="code-completion">
<h3><a class="toc-backref" href="#id296" role="doc-backlink">Code Completion</a><a class="headerlink" href="#code-completion" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Reject <cite>0</cite> as column or line number in 1-based command-line source locations.
Fixes crash caused by <cite>0</cite> input in <cite>-code-completion-at=&lt;file&gt;:&lt;line&gt;:&lt;column&gt;</cite>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139457">#139457</a>)</p></li>
</ul>
</section>
<section id="static-analyzer">
<h3><a class="toc-backref" href="#id297" role="doc-backlink">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="Link to this heading">¶</a></h3>
<section id="new-features">
<h4>New features<a class="headerlink" href="#new-features" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">[[clang::assume(cond)]]</span></code> attribute, treating it as
<code class="docutils literal notranslate"><span class="pre">__builtin_assume(cond)</span></code> for better static analysis. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/129234">#129234</a>)</p></li>
<li><p>Introduced per-entry-point statistics to provide more detailed analysis metrics.
Documentation: <a class="reference internal" href="analyzer/developer-docs/Statistics.html"><span class="doc">Analysis Statistics</span></a> (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/131175">#131175</a>)</p></li>
<li><p>Added time-trace scopes for high-level analyzer steps to improve performance
debugging. Documentation: <a class="reference internal" href="analyzer/developer-docs/PerformanceInvestigation.html"><span class="doc">Performance Investigation</span></a>
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/125508">#125508</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/125884">#125884</a>)</p></li>
<li><p>Enhanced the <code class="docutils literal notranslate"><span class="pre">check::BlockEntrance</span></code> checker callback to provide more granular
control over block-level analysis.
<a class="reference external" href="https://clang.llvm.org/doxygen/CheckerDocumentation_8cpp_source.html">Documentation (check::BlockEntrance)</a>
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/140924">#140924</a>)</p></li>
<li><p>Added a new checker <code class="docutils literal notranslate"><span class="pre">core.FixedAddressDereference</span></code> to detect dereferences
of fixed addresses, which can be useful for finding hard-coded memory
accesses. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/127191">#127191</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/132404">#132404</a>)</p></li>
</ul>
</section>
<section id="crash-and-bug-fixes">
<h4>Crash and bug fixes<a class="headerlink" href="#crash-and-bug-fixes" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed a crash when C++20 parenthesized initializer lists are used.
This affected a crash of the well-known lambda overloaded pattern.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/136041">#136041</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/135665">#135665</a>)</p></li>
<li><p>Dropped an unjustified assertion, that was triggered in <code class="docutils literal notranslate"><span class="pre">BugReporterVisitors.cpp</span></code>
for variable initialization detection. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/125044">#125044</a>)</p></li>
<li><p>Fixed a crash in <code class="docutils literal notranslate"><span class="pre">unix.API</span></code> and <code class="docutils literal notranslate"><span class="pre">unix.Malloc</span></code> when analyzing
code with non-standard <code class="docutils literal notranslate"><span class="pre">getline</span></code> or <code class="docutils literal notranslate"><span class="pre">getdelim</span></code> function signatures. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/144884">#144884</a>)</p></li>
<li><p>Fixed crashes involving <code class="docutils literal notranslate"><span class="pre">__builtin_bit_cast</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139188">#139188</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__datasizeof</span></code> (C++) and <code class="docutils literal notranslate"><span class="pre">_Countof</span></code> (C) no longer cause a failed assertion
when given an operand of VLA type. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/151711">#151711</a>)</p></li>
<li><p>Fixed a crash in <code class="docutils literal notranslate"><span class="pre">alpha.core.CastSize</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/134387">#134387</a>)</p></li>
<li><p>Some <code class="docutils literal notranslate"><span class="pre">cplusplus.PlacementNew</span></code> false positives were fixed. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/150161">#150161</a>)</p></li>
</ul>
</section>
<section id="improvements">
<h4>Improvements<a class="headerlink" href="#improvements" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added option to assume at least one iteration in loops to reduce false positives.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/125494">#125494</a>)</p></li>
<li><p>The checker option <code class="docutils literal notranslate"><span class="pre">optin.cplusplus.VirtualCall:PureOnly</span></code> was removed,
because it had been deprecated since 2019. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/131823">#131823</a>)</p></li>
<li><p>Enhanced the <code class="docutils literal notranslate"><span class="pre">core.StackAddressEscape</span></code> to detect more cases of stack address
escapes, including return values for child stack frames. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/126620">#126620</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/126986">#126986</a>)</p></li>
<li><p>Improved the <code class="docutils literal notranslate"><span class="pre">unix.BlockInCriticalSection</span></code> to recognize <code class="docutils literal notranslate"><span class="pre">O_NONBLOCK</span></code>
streams and suppress reports in those cases. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/127049">#127049</a>)</p></li>
<li><p>Better support for lambda-converted function pointers in analysis. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/144906">#144906</a>)</p></li>
<li><p>Improved modeling of <code class="docutils literal notranslate"><span class="pre">getcwd</span></code> function in <code class="docutils literal notranslate"><span class="pre">unix.StdCLibraryFunctions</span></code> checker.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/141076">#141076</a>)</p></li>
<li><p>Enhanced the <code class="docutils literal notranslate"><span class="pre">optin.core.EnumCastOutOfRange</span></code> checker to ignore <code class="docutils literal notranslate"><span class="pre">[[clang::flag_enum]]</span></code>
enums. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/141232">#141232</a>)</p></li>
<li><p>Improved handling of structured bindings captured by lambdas. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132579">#132579</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/91835">#91835</a>)</p></li>
<li><p>Fixed unnamed bitfield handling in <code class="docutils literal notranslate"><span class="pre">optin.cplusplus.UninitializedObject</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132427">#132427</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/132001">#132001</a>)</p></li>
<li><p>Enhanced iterator checker modeling for <code class="docutils literal notranslate"><span class="pre">insert</span></code> operations. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132596">#132596</a>)</p></li>
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">format</span></code> attribute handling in <code class="docutils literal notranslate"><span class="pre">optin.taint.GenericTaint</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/132765">#132765</a>)</p></li>
<li><p>Added support for <code class="docutils literal notranslate"><span class="pre">consteval</span></code> in <code class="docutils literal notranslate"><span class="pre">ConditionBRVisitor::VisitTerminator</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/146859">#146859</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/139130">#139130</a>)</p></li>
<li><p>C standard streams are no longer invalidated by all C library function calls.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/147766">#147766</a>)</p></li>
<li><p>Enhanced store management with region-store-binding-limit to improve performance.
See <a class="reference external" href="https://clang.llvm.org/docs/analyzer/user-docs/Options.html#region-store-max-binding-fanout">region-store-max-binding-fanout</a>
config option. Overriding these options are discouraged, unless you know what you do.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/127602">#127602</a>)</p></li>
<li><p>Updated undefined assignment checker (<code class="docutils literal notranslate"><span class="pre">core.uninitialized.Assign</span></code>) diagnostics
to avoid using the term <code class="docutils literal notranslate"><span class="pre">garbage</span></code>. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/126596">#126596</a>)</p></li>
<li><p>Fixed false memory leak reports involving placement new. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/144341">#144341</a>)</p></li>
<li><p>Avoided unnecessary super region invalidation in <code class="docutils literal notranslate"><span class="pre">unix.cstring.*</span></code> checkers.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/146212">#146212</a>, <a class="reference external" href="https://github.com/llvm/llvm-project/issues/143807">#143807</a>)</p></li>
<li><p>Enhanced handling of tainted division-by-zero error paths in the
<code class="docutils literal notranslate"><span class="pre">optin.taint.TaintedDiv</span></code> checker. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/144491">#144491</a>)</p></li>
</ul>
</section>
<section id="moved-checkers">
<h4>Moved checkers<a class="headerlink" href="#moved-checkers" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>After lots of improvements, the checker <code class="docutils literal notranslate"><span class="pre">alpha.security.ArrayBoundV2</span></code> was
renamed to <code class="docutils literal notranslate"><span class="pre">security.ArrayBound</span></code>. As this checker is stable now, the old
checker <code class="docutils literal notranslate"><span class="pre">alpha.security.ArrayBound</span></code> was removed.</p></li>
</ul>
</section>
</section>
<section id="sanitizers">
<span id="release-notes-sanitizers"></span><h3><a class="toc-backref" href="#id298" role="doc-backlink">Sanitizers</a><a class="headerlink" href="#sanitizers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-fsanitize=vptr</span></code> is no longer a part of <code class="docutils literal notranslate"><span class="pre">-fsanitize=undefined</span></code>.</p></li>
<li><p>Sanitizer ignorelists now support the syntax <code class="docutils literal notranslate"><span class="pre">src:*=sanitize</span></code>,
<code class="docutils literal notranslate"><span class="pre">type:*=sanitize</span></code>, <code class="docutils literal notranslate"><span class="pre">fun:*=sanitize</span></code>, <code class="docutils literal notranslate"><span class="pre">global:*=sanitize</span></code>,
and <code class="docutils literal notranslate"><span class="pre">mainfile:*=sanitize</span></code>.</p></li>
</ul>
</section>
<section id="python-binding-changes">
<h3><a class="toc-backref" href="#id299" role="doc-backlink">Python Binding Changes</a><a class="headerlink" href="#python-binding-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Made <code class="docutils literal notranslate"><span class="pre">Cursor</span></code> hashable.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Cursor.has_attrs</span></code>, a binding for <code class="docutils literal notranslate"><span class="pre">clang_Cursor_hasAttrs</span></code>, to check
whether a cursor has any attributes.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Cursor.specialized_template</span></code>, a binding for
<code class="docutils literal notranslate"><span class="pre">clang_getSpecializedCursorTemplate</span></code>, to retrieve the primary template that
the cursor is a specialization of.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Type.get_methods</span></code>, a binding for <code class="docutils literal notranslate"><span class="pre">clang_visitCXXMethods</span></code>, which
allows visiting the methods of a class.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">Type.get_fully_qualified_name</span></code>, which provides fully qualified type names as
instructed by a PrintingPolicy.</p></li>
<li><p>Add equality comparison operators for <code class="docutils literal notranslate"><span class="pre">File</span></code> type</p></li>
</ul>
</section>
<section id="openmp-support">
<h3><a class="toc-backref" href="#id300" role="doc-backlink">OpenMP Support</a><a class="headerlink" href="#openmp-support" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added support ‘no_openmp_constructs’ assumption clause.</p></li>
<li><p>Added support for ‘self_maps’ in map and requirement clause.</p></li>
<li><p>Added support for ‘omp stripe’ directive.</p></li>
<li><p>Fixed a crashing bug with <code class="docutils literal notranslate"><span class="pre">omp</span> <span class="pre">unroll</span> <span class="pre">partial</span></code> if the argument to
<code class="docutils literal notranslate"><span class="pre">partial</span></code> was an invalid expression. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139267">#139267</a>)</p></li>
<li><p>Fixed a crashing bug with <code class="docutils literal notranslate"><span class="pre">omp</span> <span class="pre">tile</span> <span class="pre">sizes</span></code> if the argument to <code class="docutils literal notranslate"><span class="pre">sizes</span></code> was
an invalid expression. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139073">#139073</a>)</p></li>
<li><p>Fixed a crashing bug with <code class="docutils literal notranslate"><span class="pre">omp</span> <span class="pre">simd</span> <span class="pre">collapse</span></code> if the argument to
<code class="docutils literal notranslate"><span class="pre">collapse</span></code> was an invalid expression. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/138493">#138493</a>)</p></li>
<li><p>Fixed a crashing bug with a malformed <code class="docutils literal notranslate"><span class="pre">cancel</span></code> directive. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139360">#139360</a>)</p></li>
<li><p>Fixed a crashing bug with <code class="docutils literal notranslate"><span class="pre">omp</span> <span class="pre">distribute</span> <span class="pre">dist_schedule</span></code> if the argument to
<code class="docutils literal notranslate"><span class="pre">dist_schedule</span></code> was not strictly positive. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139266">#139266</a>)</p></li>
<li><p>Fixed two crashing bugs with a malformed <code class="docutils literal notranslate"><span class="pre">metadirective</span></code> directive. One was
a crash if the next token after <code class="docutils literal notranslate"><span class="pre">metadirective</span></code> was a paren, bracket, or
brace. The other was if the next token after the meta directive was not an
open parenthesis. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/139665">#139665</a>)</p></li>
<li><p>An error is now emitted when OpenMP <code class="docutils literal notranslate"><span class="pre">collapse</span></code> and <code class="docutils literal notranslate"><span class="pre">ordered</span></code> clauses have
an argument larger than what can fit within a 64-bit integer.</p></li>
<li><p>Added support for private variable reduction.</p></li>
<li><p>Fixed mapping of arrays of structs containing nested structs with user defined
mappers, by using compiler-generated default mappers for the outer structs for
such maps.</p></li>
<li><p>Deprecation warning has been emitted for deprecated delimited form of <code class="docutils literal notranslate"><span class="pre">declare</span> <span class="pre">target</span></code>.</p></li>
</ul>
<section id="id265">
<h4>Improvements<a class="headerlink" href="#id265" title="Link to this heading">¶</a></h4>
<p>Additional Information</p>
<hr class="docutils" />
<p>A wide variety of additional information is available on the <a class="reference external" href="https://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Git version of
the source code. You can access versions of these documents specific to
this release by going into the “<code class="docutils literal notranslate"><span class="pre">clang/docs/</span></code>” directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us on the <a class="reference external" href="https://discourse.llvm.org/c/clang/6">Discourse forums (Clang Frontend category)</a>.</p>
</section>
</section>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2007-2025, The Clang Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>