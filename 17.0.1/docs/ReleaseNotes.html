
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>LLVM 17.0.1 Release Notes &#8212; LLVM 17.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b849a4e9" />
    <link rel="stylesheet" type="text/css" href="_static/llvm-theme.css?v=be84393e" />
    <script src="_static/documentation_options.js?v=08e2baec"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to start LLVM Social in your town" href="MeetupGuidelines.html" />
    <link rel="prev" title="How To Add Your Build Configuration To LLVM Buildbot Infrastructure" href="HowToAddABuilder.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="MeetupGuidelines.html" title="How to start LLVM Social in your town"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="HowToAddABuilder.html" title="How To Add Your Build Configuration To LLVM Buildbot Infrastructure"
             accesskey="P">previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingInvolved.html" accesskey="U">Getting Involved</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LLVM 17.0.1 Release Notes</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="https://llvm.org/docs/UserGuides.html">User Guides</a></li>
    <li><a href="https://llvm.org/docs/Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/Contributing.html">Contributing to LLVM</a></li>
    <li><a href="https://llvm.org/docs/HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#irc">IRC</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/FAQ.html">FAQ</a></li>
    <li><a href="https://llvm.org/docs/Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project/">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ReleaseNotes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="llvm-release-release-notes">
<h1>LLVM 17.0.1 Release Notes<a class="headerlink" href="#llvm-release-release-notes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id3">Non-comprehensive list of changes in this release</a></p>
<ul>
<li><p><a class="reference internal" href="#update-on-required-toolchains-to-build-llvm" id="id4">Update on required toolchains to build LLVM</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-llvm-ir" id="id5">Changes to the LLVM IR</a></p></li>
<li><p><a class="reference internal" href="#changes-to-llvm-infrastructure" id="id6">Changes to LLVM infrastructure</a></p></li>
<li><p><a class="reference internal" href="#changes-to-building-llvm" id="id7">Changes to building LLVM</a></p></li>
<li><p><a class="reference internal" href="#changes-to-tablegen" id="id8">Changes to TableGen</a></p></li>
<li><p><a class="reference internal" href="#changes-to-optimizations" id="id9">Changes to Optimizations</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-aarch64-backend" id="id10">Changes to the AArch64 Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-amdgpu-backend" id="id11">Changes to the AMDGPU Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-arm-backend" id="id12">Changes to the ARM Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-avr-backend" id="id13">Changes to the AVR Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-directx-backend" id="id14">Changes to the DirectX Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-hexagon-backend" id="id15">Changes to the Hexagon Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-loongarch-backend" id="id16">Changes to the LoongArch Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-mips-backend" id="id17">Changes to the MIPS Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-powerpc-backend" id="id18">Changes to the PowerPC Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-risc-v-backend" id="id19">Changes to the RISC-V Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-webassembly-backend" id="id20">Changes to the WebAssembly Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-windows-target" id="id21">Changes to the Windows Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-x86-backend" id="id22">Changes to the X86 Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-ocaml-bindings" id="id23">Changes to the OCaml bindings</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-python-bindings" id="id24">Changes to the Python bindings</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-c-api" id="id25">Changes to the C API</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-codegen-infrastructure" id="id26">Changes to the CodeGen infrastructure</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-metadata-info" id="id27">Changes to the Metadata Info</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-debug-info" id="id28">Changes to the Debug Info</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-llvm-tools" id="id29">Changes to the LLVM tools</a></p></li>
<li><p><a class="reference internal" href="#changes-to-lldb" id="id30">Changes to LLDB</a></p></li>
<li><p><a class="reference internal" href="#changes-to-sanitizers" id="id31">Changes to Sanitizers</a></p></li>
<li><p><a class="reference internal" href="#changes-to-bolt" id="id32">Changes to BOLT</a></p></li>
<li><p><a class="reference internal" href="#other-changes" id="id33">Other Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#external-open-source-projects-using-llvm-15" id="id34">External Open Source Projects Using LLVM 15</a></p></li>
<li><p><a class="reference internal" href="#additional-information" id="id35">Additional Information</a></p></li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the LLVM Compiler Infrastructure,
release 17.0.1.  Here we describe the status of LLVM, including major improvements
from the previous release, improvements in various subprojects of LLVM, and
some of the current users of the code.  All LLVM releases may be downloaded
from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
<p>For more information about LLVM, including information about the latest
release, please check out the <a class="reference external" href="https://llvm.org/">main LLVM web site</a>.  If you
have questions or comments, the <a class="reference external" href="https://discourse.llvm.org">Discourse forums</a> is a good place to ask
them.</p>
<p>Note that if you are reading this file from a Git checkout or the main
LLVM web page, this document applies to the <em>next</em> release, not the current
one.  To see the release notes for a specific release, please see the <a class="reference external" href="https://llvm.org/releases/">releases
page</a>.</p>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>…</p></li>
</ul>
<section id="update-on-required-toolchains-to-build-llvm">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Update on required toolchains to build LLVM</a><a class="headerlink" href="#update-on-required-toolchains-to-build-llvm" title="Link to this heading">¶</a></h3>
<p>With LLVM 17.x we raised the version requirement of CMake used to build LLVM.
The new requirements are as follows:</p>
<ul class="simple">
<li><p>CMake &gt;= 3.20.0</p></li>
</ul>
</section>
<section id="changes-to-the-llvm-ir">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Changes to the LLVM IR</a><a class="headerlink" href="#changes-to-the-llvm-ir" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Typed pointers are no longer supported and the <code class="docutils literal notranslate"><span class="pre">-opaque-pointers</span></code> option
has been removed. See the <a class="reference external" href="OpaquePointers.html">opaque pointers</a>
documentation for migration instructions.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">nofpclass</span></code> attribute was introduced. This allows more
optimizations around special floating point value comparisons.</p></li>
<li><p>Introduced new <code class="docutils literal notranslate"><span class="pre">llvm.ldexp</span></code> and <code class="docutils literal notranslate"><span class="pre">llvm.experimental.constrained.ldexp</span></code> intrinsics.</p></li>
<li><p>Introduced new <code class="docutils literal notranslate"><span class="pre">llvm.frexp</span></code> intrinsic.</p></li>
<li><p>The constant expression variants of the following instructions have been
removed:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">select</span></code></p></li>
</ul>
</li>
<li><p>Introduced a set of experimental <a class="reference external" href="ConvergentOperations.html">convergence control intrinsics</a> to explicitly define the semantics of convergent
operations.</p></li>
</ul>
</section>
<section id="changes-to-llvm-infrastructure">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Changes to LLVM infrastructure</a><a class="headerlink" href="#changes-to-llvm-infrastructure" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The legacy optimization pipeline (<code class="docutils literal notranslate"><span class="pre">PassManagerBuilder.h</span></code>) has been removed.
See the <a class="reference external" href="https://llvm.org/docs/NewPassManager.html">new pass manager docs</a>
for how to use the new pass manager APIs.</p></li>
<li><p>Alloca merging in the inliner has been removed, since it only worked with the
legacy inliner pass. Backend stack coloring should handle cases alloca
merging initially set out to handle.</p></li>
<li><p>InstructionSimplify APIs now require instructions be inserted into a
parent function.</p></li>
<li><p>A new FatLTO pipeline was added to support generating object files that have
both machine code and LTO compatible bitcode. See the <a class="reference internal" href="FatLTO.html"><span class="doc">FatLTO</span></a>
documentation and the original
<a class="reference external" href="https://discourse.llvm.org/t/rfc-ffat-lto-objects-support/63977">RFC</a>
for more details.</p></li>
</ul>
</section>
<section id="changes-to-building-llvm">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Changes to building LLVM</a><a class="headerlink" href="#changes-to-building-llvm" title="Link to this heading">¶</a></h3>
</section>
<section id="changes-to-tablegen">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Changes to TableGen</a><a class="headerlink" href="#changes-to-tablegen" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Named arguments are supported. Arguments can be specified in the form of
<code class="docutils literal notranslate"><span class="pre">name=value</span></code>.</p></li>
</ul>
</section>
<section id="changes-to-optimizations">
<h3><a class="toc-backref" href="#id9" role="doc-backlink">Changes to Optimizations</a><a class="headerlink" href="#changes-to-optimizations" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><a class="reference internal" href="LangRef.html#int-assume"><span class="std std-ref">llvm.assume</span></a> now recognizes certain
floating-point tests. e.g. <code class="docutils literal notranslate"><span class="pre">__builtin_assume(!isnan(x))</span></code></p></li>
</ul>
</section>
<section id="changes-to-the-aarch64-backend">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Changes to the AArch64 Backend</a><a class="headerlink" href="#changes-to-the-aarch64-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added Assembly Support for the 2022 A-profile extensions FEAT_GCS (Guarded
Control Stacks), FEAT_CHK (Check Feature Status), and FEAT_ATS1A.</p></li>
<li><p>Support for preserve_all calling convention is added.</p></li>
<li><p>Added support for missing arch extensions in the assembly directives
<code class="docutils literal notranslate"><span class="pre">.arch</span> <span class="pre">&lt;level&gt;+&lt;ext&gt;</span></code> and <code class="docutils literal notranslate"><span class="pre">.arch_extension</span></code>.</p></li>
<li><p>Fixed handling of <code class="docutils literal notranslate"><span class="pre">.arch</span> <span class="pre">&lt;level&gt;</span></code> in assembly, without using any <code class="docutils literal notranslate"><span class="pre">+&lt;ext&gt;</span></code>
suffix. Previously this had no effect at all if no extensions were supplied.
Now <code class="docutils literal notranslate"><span class="pre">.arch</span> <span class="pre">&lt;level&gt;</span></code> can be used to enable all the extensions that are
included in a higher level than what is specified on the command line,
or for disabling unwanted extensions if setting it to a lower level.
This fixes <cite>PR32873 &lt;https://github.com/llvm/llvm-project/issues/32220&gt;</cite>.</p></li>
</ul>
</section>
<section id="changes-to-the-amdgpu-backend">
<h3><a class="toc-backref" href="#id11" role="doc-backlink">Changes to the AMDGPU Backend</a><a class="headerlink" href="#changes-to-the-amdgpu-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>More fine-grained synchronization around barriers for newer architectures
(gfx90a+, gfx10+). The AMDGPU backend now omits previously automatically
generated waitcnt instructions before barriers, allowing for more precise
control. Users must now use memory fences to implement fine-grained
synchronization strategies around barriers. Refer to <a class="reference external" href="AMDGPUUsage.html#memory-model">AMDGPU memory model</a>.</p></li>
<li><p>Address space 7, used for <em>buffer fat pointers</em> has been added.
It is non-integral and has 160-bit pointers (a 128-bit raw buffer resource and a
32-bit offset) and 32-bit indices. This is part of ongoing work to improve
the usability of buffer operations. Refer to <a class="reference external" href="AMDGPUUsage.html#address-spaces">AMDGPU address spaces</a>.</p></li>
<li><p>Address space 8, used for <em>buffer resources</em> has been added.
It is non-integral and has 128-bit pointers, which correspond to buffer
resources in the underlying hardware. These pointers should not be used with
<cite>getelementptr</cite> or other LLVM memory instructions, and can be created with
the <cite>llvm.amdgcn.make.buffer.rsrc</cite> intrinsic. Refer to <a class="reference external" href="AMDGPUUsage.html#address_spaces">AMDGPU address spaces</a>.</p></li>
<li><p>New versions of the intrinsics for working with buffer resources have been added.
These <cite>llvm.amdgcn.*.ptr.[t]buffer.*</cite> intrinsics have the same semantics as
the old <cite>llvm.amdgcn.*.[t]buffer.*</cite> intrinsics, except that their <cite>rsrc</cite>
arguments are represented by a <cite>ptr addrspace(8)</cite> instead of a <cite>&lt;4 x i32&gt;</cite>. This
improves the interaction between AMDGPU buffer operations and the LLVM memory
model, and so the non <cite>.ptr</cite> intrinsics are deprecated.</p></li>
<li><p>Backend now performs range merging of “amdgpu-waves-per-eu” attribute based on
known callers.</p></li>
<li><p>Certain <a class="reference internal" href="LangRef.html#i-atomicrmw"><span class="std std-ref">atomicrmw</span></a> operations are now optimized by
performing a wave reduction if the access is uniform by default.</p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">llvm.amdgcn.atomic.inc</span></code> and <code class="docutils literal notranslate"><span class="pre">llvm.amdgcn.atomic.dec</span></code>
intrinsics. <a class="reference internal" href="LangRef.html#i-atomicrmw"><span class="std std-ref">atomicrmw</span></a> should be used instead
with <code class="docutils literal notranslate"><span class="pre">uinc_wrap</span></code> and <code class="docutils literal notranslate"><span class="pre">udec_wrap</span></code>.</p></li>
<li><p>Added llvm.amdgcn.log.f32 intrinsic. This provides direct access to
v_log_f32.</p></li>
<li><p>Added llvm.amdgcn.exp2.f32 intrinsic. This provides direct access to
v_exp_f32.</p></li>
<li><p>llvm.log2.f32, llvm.log10.f32, and llvm.log.f32 are now lowered
accurately. Use llvm.amdgcn.log.f32 to access the old behavior for
llvm.log2.f32.</p></li>
<li><p>llvm.exp2.f32 and llvm.exp.f32 are now lowered accurately. Use
llvm.amdgcn.exp2.f32 to access the old behavior for llvm.exp2.f32.</p></li>
<li><p>Implemented new 1ulp IEEE lowering strategy for float reciprocal
which saves 2 instructions. This is used by default for OpenCL on
gfx9+. With <code class="docutils literal notranslate"><span class="pre">contract</span></code> flags, this will fold into a 1 ulp rsqrt.</p></li>
<li><p>Implemented new 2ulp IEEE lowering strategy for float
reciprocal. This is used by default for OpenCL on gfx9+.</p></li>
<li><p><cite>llvm.sqrt.f64</cite> is now lowered correctly. Use <cite>llvm.amdgcn.sqrt.f64</cite>
for raw instruction access.</p></li>
<li><p>Deprecate <cite>llvm.amdgcn.ldexp</cite> intrinsic. <a class="reference internal" href="LangRef.html#int-ldexp"><span class="std std-ref">llvm.ldexp</span></a>
should be used instead.</p></li>
</ul>
</section>
<section id="changes-to-the-arm-backend">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Changes to the ARM Backend</a><a class="headerlink" href="#changes-to-the-arm-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The hard-float ABI is now available in Armv8.1-M configurations that
have integer MVE instructions (and therefore have FP registers) but
no scalar or vector floating point computation.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">.arm</span></code> directive now aligns code to the next 4-byte boundary, and
the <code class="docutils literal notranslate"><span class="pre">.thumb</span></code> directive aligns code to the next 2-byte boundary.</p></li>
</ul>
</section>
<section id="changes-to-the-avr-backend">
<h3><a class="toc-backref" href="#id13" role="doc-backlink">Changes to the AVR Backend</a><a class="headerlink" href="#changes-to-the-avr-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
<section id="changes-to-the-directx-backend">
<h3><a class="toc-backref" href="#id14" role="doc-backlink">Changes to the DirectX Backend</a><a class="headerlink" href="#changes-to-the-directx-backend" title="Link to this heading">¶</a></h3>
</section>
<section id="changes-to-the-hexagon-backend">
<h3><a class="toc-backref" href="#id15" role="doc-backlink">Changes to the Hexagon Backend</a><a class="headerlink" href="#changes-to-the-hexagon-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
<section id="changes-to-the-loongarch-backend">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Changes to the LoongArch Backend</a><a class="headerlink" href="#changes-to-the-loongarch-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Adds assembler/disassembler support for the LSX, LASX, LVZ and LBT ISA extensions.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">lp64s</span></code> ABI is supported now and has been tested on Rust bare-matal target.</p></li>
<li><p>A target feature <code class="docutils literal notranslate"><span class="pre">ual</span></code> is introduced to allow unaligned memory accesses and
this feature is enabled by default for generic 64-bit processors.</p></li>
<li><p>Adds support for the <code class="docutils literal notranslate"><span class="pre">large</span></code> code model, which is equivalent to GCC’s <code class="docutils literal notranslate"><span class="pre">extreme</span></code> one.</p></li>
<li><p>Assorted codegen improvements.</p></li>
<li><p>llvm-objcopy now supports processing LoongArch objects.</p></li>
</ul>
</section>
<section id="changes-to-the-mips-backend">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Changes to the MIPS Backend</a><a class="headerlink" href="#changes-to-the-mips-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</section>
<section id="changes-to-the-powerpc-backend">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Changes to the PowerPC Backend</a><a class="headerlink" href="#changes-to-the-powerpc-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Improved code sequence of materializing 64-bit immediate numbers, expanding
<code class="docutils literal notranslate"><span class="pre">is.fpclass</span></code> intrinsic and forwarding stores.</p></li>
<li><p>Implemented DFP instructions (for use via inline asm).</p></li>
<li><p>Improved code gen for vector add.</p></li>
<li><p>Added ability to show statistics of number of entries in the TOC.</p></li>
<li><p>Added Binary Coded Decimal Assist instructions (for use via inline asm).</p></li>
<li><p>Added basic support for vector functions in GlobalISel.</p></li>
<li><p>Added additional X-Form load and store instruction generation for TLS accesses.</p></li>
<li><p>PPC64LE backend is added to JITLink.</p></li>
<li><p>Added various bug fixes and optimizations.</p></li>
<li><p>Added function pointer alignment to the DataLayout for Power, which lets us
make more informed choices about what this alignment defaults to for various
purposes (e.g., C++ pointers to member). If the target ABI uses function
descriptor objects, this is the alignment we would emit the descriptor with.
Otherwise, a function pointer points to a global entry point, so this is at
least the alignment for code on Power (i.e., 4-bytes).</p></li>
</ul>
<p>AIX Support/improvements:</p>
<ul class="simple">
<li><p>A new option <code class="docutils literal notranslate"><span class="pre">-mxcoff-roptr</span></code> is added to <code class="docutils literal notranslate"><span class="pre">clang</span></code> and <code class="docutils literal notranslate"><span class="pre">llc</span></code>. When this
option is present, constant objects with relocatable address values are put
into the RO data section. This option should be used with the
<code class="docutils literal notranslate"><span class="pre">-fdata-sections</span></code> option, and is not supported with <code class="docutils literal notranslate"><span class="pre">-fno-data-sections</span></code>.</p></li>
<li><p>Taught the profile runtime to check for a build-id string. Build-id strings
can be created via the <code class="docutils literal notranslate"><span class="pre">-mxcoff-build-id</span></code> option.</p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">-ppc-quadword-atomics</span></code> which only affected lock-free quadword
atomics on AIX. Now backend generates lock-free quadword atomics code on AIX
by default. To support lock-free quadword atomics in libatomic, the OS level
must be at least AIX 7.2 TL5 SP3 with libc++.rte of version 17.1.1 or above
installed.</p></li>
<li><p>Integrated assembler is enabled by default on AIX.</p></li>
<li><p>System assembler is always used to compile assembly files on AIX.</p></li>
<li><p>Added support for local-exec TLS.</p></li>
<li><p>Added a new option, <code class="docutils literal notranslate"><span class="pre">--traceback-table</span></code>, to <code class="docutils literal notranslate"><span class="pre">llvm-objdump</span></code> to print out
the traceback table information for XCOFF object files.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">llvm-ar</span></code> object mode options <code class="docutils literal notranslate"><span class="pre">-X32</span></code>, <code class="docutils literal notranslate"><span class="pre">-X64</span></code>, <code class="docutils literal notranslate"><span class="pre">-X32-64</span></code>,
and <code class="docutils literal notranslate"><span class="pre">-Xany</span></code>.</p></li>
<li><p>Changed the default name of the text-section csect to be an empty string
instead of <code class="docutils literal notranslate"><span class="pre">.text</span></code>. This change does not affect the behaviour
of the program.</p></li>
<li><p>Fixed a problem when the personality routine for the legacy AIX <code class="docutils literal notranslate"><span class="pre">xlclang++</span></code>
compiler uses the stack slot to pass the exception object to the landing pad.
Runtime routine <code class="docutils literal notranslate"><span class="pre">__xlc_exception_handle()</span></code> invoked by the landing pad to
retrieve the exception object now skips frames not associated with functions
that are C++ EH-aware because the compiler sometimes generates a wrapper of
<code class="docutils literal notranslate"><span class="pre">__xlc_exception_handle()</span></code> for optimization purposes.</p></li>
</ul>
</section>
<section id="changes-to-the-risc-v-backend">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">Changes to the RISC-V Backend</a><a class="headerlink" href="#changes-to-the-risc-v-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Assembler support for version 1.0.1 of the Zcb extension was added.</p></li>
<li><p>Zca, Zcf, and Zcd extensions were upgraded to version 1.0.1.</p></li>
<li><p>vsetvli intrinsics no longer have side effects. They may now be combined,
moved, deleted, etc. by optimizations.</p></li>
<li><p>Adds support for the vendor-defined XTHeadBa (address-generation) extension.</p></li>
<li><p>Adds support for the vendor-defined XTHeadBb (basic bit-manipulation) extension.</p></li>
<li><p>Adds support for the vendor-defined XTHeadBs (single-bit) extension.</p></li>
<li><p>Adds support for the vendor-defined XTHeadCondMov (conditional move) extension.</p></li>
<li><p>Adds support for the vendor-defined XTHeadMac (multiply-accumulate instructions) extension.</p></li>
<li><p>Added support for the vendor-defined XTHeadMemPair (two-GPR memory operations)
extension disassembler/assembler.</p></li>
<li><p>Added support for the vendor-defined XTHeadMemIdx (indexed memory operations)
extension disassembler/assembler.</p></li>
<li><p>Added support for the vendor-defined Xsfvcp (SiFive VCIX) extension
disassembler/assembler.</p></li>
<li><p>Added support for the vendor-defined Xsfcie (SiFive CIE) extension
disassembler/assembler.</p></li>
<li><p>Support for the now-ratified Zawrs extension is no longer experimental.</p></li>
<li><p>Adds support for the vendor-defined XTHeadCmo (cache management operations) extension.</p></li>
<li><p>Adds support for the vendor-defined XTHeadSync (multi-core synchronization instructions) extension.</p></li>
<li><p>Added support for the vendor-defined XTHeadFMemIdx (indexed memory operations for floating point) extension.</p></li>
<li><p>Assembler support for RV64E was added.</p></li>
<li><p>Assembler support was added for the experimental Zicond (integer conditional
operations) extension.</p></li>
<li><p>I, F, D, and A extension versions have been update to the 20191214 spec versions.
New version I2.1, F2.2, D2.2, A2.1. This should not impact code generation.
Immpacts versions accepted in <code class="docutils literal notranslate"><span class="pre">-march</span></code> and reported in ELF attributes.</p></li>
<li><p>Changed the ShadowCallStack register from <code class="docutils literal notranslate"><span class="pre">x18</span></code> (<code class="docutils literal notranslate"><span class="pre">s2</span></code>) to <code class="docutils literal notranslate"><span class="pre">x3</span></code>
(<code class="docutils literal notranslate"><span class="pre">gp</span></code>). Note this breaks the existing non-standard ABI for ShadowCallStack
on RISC-V, but conforms with the new “platform register” defined in the
RISC-V psABI (for more details see the
<a class="reference external" href="https://github.com/riscv-non-isa/riscv-elf-psabi-doc/issues/370">psABI discussion</a>).</p></li>
<li><p>Added support for Zfa extension version 0.2.</p></li>
<li><p>Updated support experimental vector crypto extensions to version 0.5.1 of
the specification.</p></li>
<li><p>Removed N extension (User-Level Interrupts) CSR names in the assembler.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">RISCV::parseCPUKind</span></code> and <code class="docutils literal notranslate"><span class="pre">RISCV::checkCPUKind</span></code> were merged into a single
<code class="docutils literal notranslate"><span class="pre">RISCV::parseCPU</span></code>. The <code class="docutils literal notranslate"><span class="pre">CPUKind</span></code> enum is no longer part of the
RISCVTargetParser.h interface. Similar for <code class="docutils literal notranslate"><span class="pre">parseTuneCPUkind</span></code> and
<code class="docutils literal notranslate"><span class="pre">checkTuneCPUKind</span></code>.</p></li>
<li><p>Add sifive-x280 processor.</p></li>
<li><p>Zve32f is no longer allowed with Zfinx. Zve64d is no longer allowed with
Zdinx.</p></li>
<li><p>Assembly support was added for the experimental Zfbfmin (scalar BF16
conversions), Zvfbfmin (vector BF16 conversions), and Zvfbfwma (vector BF16
widening mul-add) extensions.</p></li>
<li><p>Added assembler/disassembler support for the experimental Zacas (atomic
compare-and-swap) extension.</p></li>
<li><p>Zvfh extension version was upgraded to 1.0 and is no longer experimental.</p></li>
</ul>
</section>
<section id="changes-to-the-webassembly-backend">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Changes to the WebAssembly Backend</a><a class="headerlink" href="#changes-to-the-webassembly-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Function annotations (<code class="docutils literal notranslate"><span class="pre">__attribute__((annotate(&lt;name&gt;)))</span></code>)
now generate custom sections in the Wasm output file. A custom section
for each unique name will be created that contains each function
index the annotation applies to.</p></li>
</ul>
</section>
<section id="changes-to-the-windows-target">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Changes to the Windows Target</a><a class="headerlink" href="#changes-to-the-windows-target" title="Link to this heading">¶</a></h3>
</section>
<section id="changes-to-the-x86-backend">
<h3><a class="toc-backref" href="#id22" role="doc-backlink">Changes to the X86 Backend</a><a class="headerlink" href="#changes-to-the-x86-backend" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">__builtin_unpredictable</span></code> (unpredictable metadata in LLVM IR), is handled by X86 Backend.
<code class="docutils literal notranslate"><span class="pre">X86CmovConversion</span></code> pass now respects this builtin and does not convert CMOVs to branches.</p></li>
<li><p>Add support for the <code class="docutils literal notranslate"><span class="pre">PBNDKB</span></code> instruction.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">SHA512</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">SM3</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">SM4</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">AVX-VNNI-INT16</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-mcpu=graniterapids-d</span></code> is now supported.</p></li>
</ul>
</section>
<section id="changes-to-the-ocaml-bindings">
<h3><a class="toc-backref" href="#id23" role="doc-backlink">Changes to the OCaml bindings</a><a class="headerlink" href="#changes-to-the-ocaml-bindings" title="Link to this heading">¶</a></h3>
</section>
<section id="changes-to-the-python-bindings">
<h3><a class="toc-backref" href="#id24" role="doc-backlink">Changes to the Python bindings</a><a class="headerlink" href="#changes-to-the-python-bindings" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The python bindings have been removed.</p></li>
</ul>
</section>
<section id="changes-to-the-c-api">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Changes to the C API</a><a class="headerlink" href="#changes-to-the-c-api" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">LLVMContextSetOpaquePointers</span></code>, a temporary API to pin to legacy typed
pointer, has been removed.</p></li>
<li><p>Functions for adding legacy passes like <code class="docutils literal notranslate"><span class="pre">LLVMAddInstructionCombiningPass</span></code>
have been removed.</p></li>
<li><p>Removed <code class="docutils literal notranslate"><span class="pre">LLVMPassManagerBuilderRef</span></code> and functions interacting with it.
These belonged to the no longer supported legacy pass manager.</p></li>
<li><p>Functions for initializing legacy passes like <code class="docutils literal notranslate"><span class="pre">LLVMInitializeInstCombine</span></code>
have been removed. Calls to such functions can simply be dropped, as they are
no longer necessary.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVMPassRegistryRef</span></code> and <code class="docutils literal notranslate"><span class="pre">LLVMGetGlobalPassRegistry</span></code>, which were only
useful in conjunction with initialization functions, have been removed.</p></li>
<li><p>As part of the opaque pointer transition, <code class="docutils literal notranslate"><span class="pre">LLVMGetElementType</span></code> no longer
gives the pointee type of a pointer type.</p></li>
<li><p>The following functions for creating constant expressions have been removed,
because the underlying constant expressions are no longer supported. Instead,
an instruction should be created using the <code class="docutils literal notranslate"><span class="pre">LLVMBuildXYZ</span></code> APIs, which will
constant fold the operands if possible and create an instruction otherwise:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVMConstSelect</span></code></p></li>
</ul>
</li>
</ul>
</section>
<section id="changes-to-the-codegen-infrastructure">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">Changes to the CodeGen infrastructure</a><a class="headerlink" href="#changes-to-the-codegen-infrastructure" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">llvm.memcpy</span></code>, <code class="docutils literal notranslate"><span class="pre">llvm.memmove</span></code> and <code class="docutils literal notranslate"><span class="pre">llvm.memset</span></code> are now
expanded into loops by default for targets which do not report the
corresponding library function is available.</p></li>
</ul>
</section>
<section id="changes-to-the-metadata-info">
<h3><a class="toc-backref" href="#id27" role="doc-backlink">Changes to the Metadata Info</a><a class="headerlink" href="#changes-to-the-metadata-info" title="Link to this heading">¶</a></h3>
</section>
<section id="changes-to-the-debug-info">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">Changes to the Debug Info</a><a class="headerlink" href="#changes-to-the-debug-info" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The DWARFv5 feature of attaching <code class="docutils literal notranslate"><span class="pre">DW_AT_default_value</span></code> to defaulted template
parameters will now be available in any non-strict DWARF mode and in a wider
range of cases than previously.
(<a class="reference external" href="https://reviews.llvm.org/D139953">D139953</a>,
<a class="reference external" href="https://reviews.llvm.org/D139988">D139988</a>)</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">DW_AT_name</span></code> on <code class="docutils literal notranslate"><span class="pre">DW_AT_typedef</span></code>s for alias templates will now omit
defaulted template parameters. (<a class="reference external" href="https://reviews.llvm.org/D142268">D142268</a>)</p></li>
<li><p>The experimental <code class="docutils literal notranslate"><span class="pre">&#64;llvm.dbg.addr</span></code> intrinsic has been removed (<a class="reference external" href="https://reviews.llvm.org/D144801">D144801</a>). IR inputs with this intrinsic are
auto-upgraded to <code class="docutils literal notranslate"><span class="pre">&#64;llvm.dbg.value</span></code> with <code class="docutils literal notranslate"><span class="pre">DW_OP_deref</span></code> appended to the
<code class="docutils literal notranslate"><span class="pre">DIExpression</span></code> (<a class="reference external" href="https://reviews.llvm.org/D144793">D144793</a>).</p></li>
<li><p>When a template class annotated with the <code class="docutils literal notranslate"><span class="pre">[[clang::preferred_name]]</span></code> attribute
were to appear in a <code class="docutils literal notranslate"><span class="pre">DW_AT_type</span></code>, the type will now be that of the preferred_name
instead. This change is only enabled when compiling with <cite>-glldb</cite>.
(<a class="reference external" href="https://reviews.llvm.org/D145803">D145803</a>)</p></li>
</ul>
</section>
<section id="changes-to-the-llvm-tools">
<h3><a class="toc-backref" href="#id29" role="doc-backlink">Changes to the LLVM tools</a><a class="headerlink" href="#changes-to-the-llvm-tools" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>llvm-lib now supports the /def option for generating a Windows import library from a definition file.</p></li>
<li><p>Made significant changes to JSON output format of <cite>llvm-readobj</cite>/<cite>llvm-readelf</cite>
to improve correctness and clarity.</p></li>
</ul>
</section>
<section id="changes-to-lldb">
<h3><a class="toc-backref" href="#id30" role="doc-backlink">Changes to LLDB</a><a class="headerlink" href="#changes-to-lldb" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>In the results of commands such as <code class="docutils literal notranslate"><span class="pre">expr</span></code> and <code class="docutils literal notranslate"><span class="pre">frame</span> <span class="pre">var</span></code>, type summaries will now
omit defaulted template parameters. The full template parameter list can still be
viewed with <code class="docutils literal notranslate"><span class="pre">expr</span> <span class="pre">--raw-output</span></code>/<code class="docutils literal notranslate"><span class="pre">frame</span> <span class="pre">var</span> <span class="pre">--raw-output</span></code>. (<a class="reference external" href="https://reviews.llvm.org/D141828">D141828</a>)</p></li>
<li><p>LLDB is now able to show the subtype of signals found in a core file. For example
memory tagging specific segfaults such as <code class="docutils literal notranslate"><span class="pre">SIGSEGV:</span> <span class="pre">sync</span> <span class="pre">tag</span> <span class="pre">check</span> <span class="pre">fault</span></code>.</p></li>
<li><p>LLDB can now display register fields if they are described in target XML sent
by a debug server such as <code class="docutils literal notranslate"><span class="pre">gdbserver</span></code> (<code class="docutils literal notranslate"><span class="pre">lldb-server</span></code> does not currently produce
this information). Fields are only printed when reading named registers, for
example <code class="docutils literal notranslate"><span class="pre">register</span> <span class="pre">read</span> <span class="pre">cpsr</span></code>. They are not shown when reading a register set,
<code class="docutils literal notranslate"><span class="pre">register</span> <span class="pre">read</span> <span class="pre">-s</span> <span class="pre">0</span></code>.</p></li>
<li><p>A new command <code class="docutils literal notranslate"><span class="pre">register</span> <span class="pre">info</span></code> was added. This command will tell you everything that
LLDB knows about a register. Based on what LLDB already knows and what the debug
server tells it. Including but not limited to, the size, where it is read from and
the fields that the register contains.</p></li>
<li><p>AArch64 Linux targets now provide access to the Thread Local Storage
register <code class="docutils literal notranslate"><span class="pre">tpidr</span></code>.</p></li>
</ul>
</section>
<section id="changes-to-sanitizers">
<h3><a class="toc-backref" href="#id31" role="doc-backlink">Changes to Sanitizers</a><a class="headerlink" href="#changes-to-sanitizers" title="Link to this heading">¶</a></h3>
<ul>
<li><p>For Darwin users that override weak symbols, note that the dynamic linker will
only consider symbols in other mach-o modules which themselves contain at
least one weak symbol. A consequence is that if your program or dylib contains
an intended override of a weak symbol, then it must contain at least one weak
symbol as well for the override to take effect.</p>
<p>Example:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// Add this to make sure your override takes effect</span>
<span class="n">__attribute__</span><span class="p">((</span><span class="n">weak</span><span class="p">,</span><span class="n">unused</span><span class="p">))</span><span class="w"> </span><span class="kt">unsigned</span><span class="w"> </span><span class="n">__enableOverrides</span><span class="p">;</span>

<span class="c1">// Example override</span>
<span class="k">extern</span><span class="w"> </span><span class="s">&quot;C&quot;</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="w"> </span><span class="o">*</span><span class="n">__asan_default_options</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="p">...</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
</li>
</ul>
</section>
<section id="changes-to-bolt">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Changes to BOLT</a><a class="headerlink" href="#changes-to-bolt" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Initial RISC-V (RV64GC) target support was added.</p></li>
<li><p>DWARFRewriter got new mechanism for more flexible handling of debug
information. It raises debug information to IR level before performing
updates, and IR is written out to the binary after updates are applied.</p></li>
<li><p>Stale profile matching was added under a flag <cite>–infer-stale-profile</cite>.
It requires the use of a YAML profile, produced by perf2bolt using <cite>-w</cite>
flag, or with <cite>–profile-format=yaml</cite>.</p></li>
</ul>
</section>
<section id="other-changes">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Other Changes</a><a class="headerlink" href="#other-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">llvm::demangle</span></code> now takes a <code class="docutils literal notranslate"><span class="pre">std::string_view</span></code> rather than a
<code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">std::string&amp;</span></code>. Be careful passing temporaries into
<code class="docutils literal notranslate"><span class="pre">llvm::demangle</span></code> that don’t outlive the expression using
<code class="docutils literal notranslate"><span class="pre">llvm::demangle</span></code>.</p></li>
</ul>
</section>
</section>
<section id="external-open-source-projects-using-llvm-15">
<h2><a class="toc-backref" href="#id34" role="doc-backlink">External Open Source Projects Using LLVM 15</a><a class="headerlink" href="#external-open-source-projects-using-llvm-15" title="Link to this heading">¶</a></h2>
<ul class="simple">
<li><p>A project…</p></li>
</ul>
</section>
<section id="additional-information">
<h2><a class="toc-backref" href="#id35" role="doc-backlink">Additional Information</a><a class="headerlink" href="#additional-information" title="Link to this heading">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="https://llvm.org/">LLVM web page</a>, in particular in the <a class="reference external" href="https://llvm.org/docs/">documentation</a> section.  The web page also contains versions of the
API documentation which is up-to-date with the Git version of the source
code.  You can access versions of these documents specific to this release by
going into the <code class="docutils literal notranslate"><span class="pre">llvm/docs/</span></code> directory in the LLVM tree.</p>
<p>If you have any questions or comments about LLVM, please feel free to contact
us via the <a class="reference external" href="https://discourse.llvm.org">Discourse forums</a>.</p>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="MeetupGuidelines.html" title="How to start LLVM Social in your town"
             >next</a> |</li>
        <li class="right" >
          <a href="HowToAddABuilder.html" title="How To Add Your Build Configuration To LLVM Buildbot Infrastructure"
             >previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingInvolved.html" >Getting Involved</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LLVM 17.0.1 Release Notes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2003-2023, LLVM Project.
      Last updated on 2023-09-19.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>