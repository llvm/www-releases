<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

    <title>Clang 17.0.1 Release Notes &#8212; Clang 17.0.1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b849a4e9" />
    <link rel="stylesheet" type="text/css" href="_static/haiku.css?v=e491ac2d" />
    <script src="_static/documentation_options.js?v=08e2baec"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clang Compiler User’s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang 17.0.1 documentation</span></a></h1>
        <h2 class="heading"><span>Clang 17.0.1 Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="clang-release-releasenotestitle">
<h1>Clang 17.0.1 Release Notes<a class="headerlink" href="#clang-release-releasenotestitle" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id141">Introduction</a></p></li>
<li><p><a class="reference internal" href="#potentially-breaking-changes" id="id142">Potentially Breaking Changes</a></p>
<ul>
<li><p><a class="reference internal" href="#c-c-language-potentially-breaking-changes" id="id143">C/C++ Language Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#c-specific-potentially-breaking-changes" id="id144">C++ Specific Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#abi-changes-in-this-version" id="id145">ABI Changes in This Version</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#what-s-new-in-clang-release" id="id146">What’s New in Clang 17.0.1?</a></p>
<ul>
<li><p><a class="reference internal" href="#c-language-changes" id="id147">C++ Language Changes</a></p></li>
<li><p><a class="reference internal" href="#id8" id="id148">C Language Changes</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id149">Non-comprehensive list of changes in this release</a></p></li>
<li><p><a class="reference internal" href="#new-compiler-flags" id="id150">New Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#deprecated-compiler-flags" id="id151">Deprecated Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#modified-compiler-flags" id="id152">Modified Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#removed-compiler-flags" id="id153">Removed Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#attribute-changes-in-clang" id="id154">Attribute Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#improvements-to-clang-s-diagnostics" id="id155">Improvements to Clang’s diagnostics</a></p></li>
<li><p><a class="reference internal" href="#bug-fixes-in-this-version" id="id156">Bug Fixes in This Version</a></p></li>
<li><p><a class="reference internal" href="#target-specific-changes" id="id157">Target Specific Changes</a></p></li>
<li><p><a class="reference internal" href="#dwarf-support-in-clang" id="id158">DWARF Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#floating-point-support-in-clang" id="id159">Floating Point Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#ast-matchers" id="id160">AST Matchers</a></p></li>
<li><p><a class="reference internal" href="#clang-format" id="id161">clang-format</a></p></li>
<li><p><a class="reference internal" href="#libclang" id="id162">libclang</a></p></li>
<li><p><a class="reference internal" href="#static-analyzer" id="id163">Static Analyzer</a></p></li>
<li><p><a class="reference internal" href="#sanitizers" id="id164">Sanitizers</a></p></li>
<li><p><a class="reference internal" href="#python-binding-changes" id="id165">Python Binding Changes</a></p></li>
<li><p><a class="reference internal" href="#configurable-multilib" id="id166">Configurable Multilib</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#additional-information" id="id167">Additional Information</a></p></li>
</ul>
</nav>
<p>Written by the <a class="reference external" href="https://llvm.org/">LLVM Team</a></p>
<section id="introduction">
<h2><a class="toc-backref" href="#id141" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release 17.0.1. Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. For the libc++ release notes,
see <a class="reference external" href="https://libcxx.llvm.org/ReleaseNotes.html">this page</a>. All LLVM releases
may be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="https://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
</section>
<section id="potentially-breaking-changes">
<h2><a class="toc-backref" href="#id142" role="doc-backlink">Potentially Breaking Changes</a><a class="headerlink" href="#potentially-breaking-changes" title="Link to this heading">¶</a></h2>
<p>These changes are ones which we think may surprise users when upgrading to
Clang 17.0.1 because of the opportunity they pose for disruption to existing
code bases.</p>
<section id="c-c-language-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id143" role="doc-backlink">C/C++ Language Potentially Breaking Changes</a><a class="headerlink" href="#c-c-language-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Indirect edges of asm goto statements under certain circumstances may now be
split. In previous releases of clang, that means for the following code the
two inputs may have compared equal in the inline assembly.  This is no longer
guaranteed (and necessary to support outputs along indirect edges, which is
now supported as of this release). This change is more consistent with the
behavior of GCC.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="nl">foo</span><span class="p">:</span><span class="w"> </span><span class="k">asm</span><span class="w"> </span><span class="k">goto</span><span class="w"> </span><span class="p">(</span><span class="s">&quot;# %0 %1&quot;</span><span class="o">::</span><span class="s">&quot;i&quot;</span><span class="p">(</span><span class="o">&amp;&amp;</span><span class="n">foo</span><span class="p">)</span><span class="o">::</span><span class="n">foo</span><span class="p">);</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">__builtin_object_size</span></code> and <code class="docutils literal notranslate"><span class="pre">__builtin_dynamic_object_size</span></code> now add the
<code class="docutils literal notranslate"><span class="pre">sizeof</span></code> the elements specified in designated initializers of flexible
array members for structs that contain them. This change is more consistent
with the behavior of GCC.</p></li>
</ul>
</section>
<section id="c-specific-potentially-breaking-changes">
<h3><a class="toc-backref" href="#id144" role="doc-backlink">C++ Specific Potentially Breaking Changes</a><a class="headerlink" href="#c-specific-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Clang won’t search for coroutine_traits in std::experimental namespace any more.
Clang will only search for std::coroutine_traits for coroutines then.</p></li>
<li><p>Clang no longer allows dereferencing of a <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span></code> as an extension. Clang 16
converted this to a default-error as <code class="docutils literal notranslate"><span class="pre">-Wvoid-ptr-dereference</span></code>, as well as a
SFINAE error. This flag is still valid however, as it disables the equivalent
warning in C.</p></li>
</ul>
</section>
<section id="abi-changes-in-this-version">
<h3><a class="toc-backref" href="#id145" role="doc-backlink">ABI Changes in This Version</a><a class="headerlink" href="#abi-changes-in-this-version" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>A bug in evaluating the ineligibility of some special member functions has been fixed. This can
make some classes trivially copyable that were not trivially copyable before. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62555">#62555</a>)</p></li>
</ul>
</section>
</section>
<section id="what-s-new-in-clang-release">
<h2><a class="toc-backref" href="#id146" role="doc-backlink">What’s New in Clang 17.0.1?</a><a class="headerlink" href="#what-s-new-in-clang-release" title="Link to this heading">¶</a></h2>
<p>Some of the major new features and improvements to Clang are listed
here. Generic improvements to Clang as a whole or to its underlying
infrastructure are described first, followed by language-specific
sections with improvements to Clang’s support for those languages.</p>
<section id="c-language-changes">
<h3><a class="toc-backref" href="#id147" role="doc-backlink">C++ Language Changes</a><a class="headerlink" href="#c-language-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Improved <code class="docutils literal notranslate"><span class="pre">-O0</span></code> code generation for calls to <code class="docutils literal notranslate"><span class="pre">std::forward_like</span></code>. Similarly to
<code class="docutils literal notranslate"><span class="pre">std::move,</span> <span class="pre">std::forward</span></code> et al. it is now treated as a compiler builtin and implemented
directly rather than instantiating the definition from the standard library.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/CWG2518">CWG2518</a> which allows <code class="docutils literal notranslate"><span class="pre">static_assert(false)</span></code>
to not be ill-formed when its condition is evaluated in the context of a template definition.</p></li>
<li><p>Declaring namespace std to be an inline namespace is now prohibited, <cite>[namespace.std]p7</cite>.</p></li>
<li><p>Improved code generation for <code class="docutils literal notranslate"><span class="pre">dynamic_cast</span></code> to a <code class="docutils literal notranslate"><span class="pre">final</span></code> type. Instead of
dispatching to the runtime library to compare the RTTI data, Clang now
generates a direct comparison of the vtable pointer in cases where the ABI
requires the vtable for a class to be unique. This optimization can be
disabled with <code class="docutils literal notranslate"><span class="pre">-fno-assume-unique-vtables</span></code>. This optimization is not yet
implemented for the MS C++ ABI.</p></li>
</ul>
<section id="c-20-feature-support">
<h4>C++20 Feature Support<a class="headerlink" href="#c-20-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Implemented the rule introduced by <a class="reference external" href="https://wg21.link/P2103R0">CA104</a>  for comparison of
constraint-expressions. Improved support for out-of-line definitions of constrained templates.
This fixes:
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/49620">#49620</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60231">#60231</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61414">#61414</a>,
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61809">#61809</a>.</p></li>
<li><p>Lambda templates with a requires clause directly after the template parameters now parse
correctly if the requires clause consists of a variable with a dependent type.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61278">#61278</a>)</p></li>
<li><p>Announced C++20 Coroutines is fully supported on all targets except Windows, which
still has some stability and ABI issues.</p></li>
<li><p>Downgraded use of a reserved identifier in a module export declaration from
an error to a warning under the <code class="docutils literal notranslate"><span class="pre">-Wreserved-module-identifier</span></code> warning
group. This warning is enabled by default. This addresses <a class="reference external" href="https://github.com/llvm/llvm-project/issues/61446">#61446</a> and allows easier
building of standard modules. This diagnostic may be strengthened into an
error again in the future once there is a less fragile way to mark a module
as being part of the implementation rather than a user module.</p></li>
<li><p>Clang now implements <cite>[temp.deduct]p9</cite>. Substitution failures inside lambdas from
unevaluated contexts will be surfaced as errors. They were previously handled as
SFINAE.</p></li>
<li><p>Clang now supports <cite>requires cplusplus20</cite> for module maps.</p></li>
<li><p>Implemented missing parts of <a class="reference external" href="https://wg21.link/P2002R1">P2002R1: Consistent comparison operators</a></p></li>
<li><p>Clang now defines <cite>__cpp_consteval</cite> macro.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/p1816r0">P1816R0:</a> and <a class="reference external" href="https://wg21.link/p2082r1">P2082R1:</a>,
which allows CTAD for aggregates.</p></li>
</ul>
</section>
<section id="c-23-feature-support">
<h4>C++23 Feature Support<a class="headerlink" href="#c-23-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2036R3">P2036R3: Change scope of lambda trailing-return-type</a>
and <a class="reference external" href="https://wg21.link/P2579R0">P2579R0 Mitigation strategies for P2036</a>.
These proposals modify how variables captured in lambdas can appear in trailing return type
expressions and how their types are deduced therein, in all C++ language versions.</p></li>
<li><p>Implemented partial support for <a class="reference external" href="https://wg21.link/p2448r2">P2448R2: Relaxing some constexpr restrictions</a>
Explicitly defaulted functions no longer have to be constexpr-compatible but merely constexpr suitable.
We do not support outside of defaulted special memeber functions the change that constexpr functions no
longer have to be constexpr compatible but rather support a less restricted requirements for constexpr
functions. Which include allowing non-literal types as return values and parameters, allow calling of
non-constexpr functions and constructors.</p></li>
<li><p>Clang now supports <cite>requires cplusplus23</cite> for module maps.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2564R3">P2564R3: consteval needs to propagate up</a>.</p></li>
</ul>
</section>
<section id="c-2c-feature-support">
<h4>C++2c Feature Support<a class="headerlink" href="#c-2c-feature-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Compiler flags <code class="docutils literal notranslate"><span class="pre">-std=c++2c</span></code> and <code class="docutils literal notranslate"><span class="pre">-std=gnu++2c</span></code> have been added for experimental C++2c implementation work.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2738R1">P2738R1: constexpr cast from void*</a>.</p></li>
<li><p>Partially implemented <a class="reference external" href="https://wg21.link/P2361R6">P2361R6: Unevaluated strings</a>.
The changes to attributes declarations are not part of this release.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/P2741R3">P2741R3: user-generated static_assert messages</a>.</p></li>
</ul>
</section>
<section id="resolutions-to-c-defect-reports">
<h4>Resolutions to C++ Defect Reports<a class="headerlink" href="#resolutions-to-c-defect-reports" title="Link to this heading">¶</a></h4>
<ul>
<li><p>Implemented <a class="reference external" href="https://wg21.link/CWG2397">DR2397</a> which allows <code class="docutils literal notranslate"><span class="pre">auto</span></code> specifier for pointers
and reference to arrays.</p></li>
<li><p>Implemented <a class="reference external" href="https://wg21.link/CWG2521">CWG2521</a> which reserves using <code class="docutils literal notranslate"><span class="pre">__</span></code> in user-defined
literal suffixes and deprecates literal operator function declarations using an identifier.
Taught <code class="docutils literal notranslate"><span class="pre">-Wuser-defined-literals</span></code> for the former, on by default, and added
<code class="docutils literal notranslate"><span class="pre">-Wdeprecated-literal-operator</span></code> for the latter, off by default for now.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// What follows is warned by -Wuser-defined-literals</span>
<span class="c1">// albeit &quot;ill-formed, no diagnostic required&quot;.</span>
<span class="c1">// Its behavior is undefined, [reserved.names.general]p2.</span>
<span class="n">string</span><span class="w"> </span><span class="k">operator</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="n">__i18n</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">);</span>

<span class="c1">// Assume this declaration is not in the global namespace.</span>
<span class="c1">// -Wdeprecated-literal-operator diagnoses the extra space.</span>
<span class="n">string</span><span class="w"> </span><span class="k">operator</span><span class="w"> </span><span class="s">&quot;&quot;</span><span class="w"> </span><span class="n">_i18n</span><span class="p">(</span><span class="k">const</span><span class="w"> </span><span class="kt">char</span><span class="o">*</span><span class="p">,</span><span class="w"> </span><span class="n">std</span><span class="o">::</span><span class="kt">size_t</span><span class="p">);</span>
<span class="c1">//                ^ an extra space</span>
</pre></div>
</div>
</li>
</ul>
</section>
</section>
<section id="id8">
<h3><a class="toc-backref" href="#id148" role="doc-backlink">C Language Changes</a><a class="headerlink" href="#id8" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Support for outputs from asm goto statements along indirect edges has been
added. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/53562">#53562</a>)</p></li>
<li><p>Fixed a bug that prevented initialization of an <code class="docutils literal notranslate"><span class="pre">_Atomic</span></code>-qualified pointer
from a null pointer constant.</p></li>
<li><p>Fixed a bug that prevented casting to an <code class="docutils literal notranslate"><span class="pre">_Atomic</span></code>-qualified type.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/39596">#39596</a>)</p></li>
<li><p>Added an extension to <code class="docutils literal notranslate"><span class="pre">_Generic</span></code> which allows the first operand to be a
type rather than an expression. The type does not undergo any conversions,
which makes this feature suitable for matching qualified types, incomplete
types, and function or array types.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">i</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">12</span><span class="p">;</span>
<span class="k">_Generic</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Warns about unreachable code, the</span>
<span class="w">                                     </span><span class="c1">// result is 0, not 1.</span>
<span class="k">_Generic</span><span class="p">(</span><span class="n">typeof</span><span class="p">(</span><span class="n">i</span><span class="p">),</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">0</span><span class="p">,</span><span class="w"> </span><span class="k">const</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="mi">1</span><span class="p">);</span><span class="w"> </span><span class="c1">// Result is 1, not 0.</span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">structs</span></code>, <code class="docutils literal notranslate"><span class="pre">unions</span></code>, and <code class="docutils literal notranslate"><span class="pre">arrays</span></code> that are const may now be used as
constant expressions.  This change is more consistent with the behavior of
GCC.</p></li>
</ul>
<section id="c2x-feature-support">
<h4>C2x Feature Support<a class="headerlink" href="#c2x-feature-support" title="Link to this heading">¶</a></h4>
<ul>
<li><p>Implemented the <code class="docutils literal notranslate"><span class="pre">unreachable</span></code> macro in freestanding <code class="docutils literal notranslate"><span class="pre">&lt;stddef.h&gt;</span></code> for
<a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2826.pdf">WG14 N2826</a></p></li>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">ATOMIC_VAR_INIT</span></code> macro in C2x and later standards modes, which
implements <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2886.htm">WG14 N2886</a></p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2934.pdf">WG14 N2934</a>
which introduces the <code class="docutils literal notranslate"><span class="pre">bool</span></code>, <code class="docutils literal notranslate"><span class="pre">static_assert</span></code>, <code class="docutils literal notranslate"><span class="pre">alignas</span></code>, <code class="docutils literal notranslate"><span class="pre">alignof</span></code>,
and <code class="docutils literal notranslate"><span class="pre">thread_local</span></code> keywords in C2x.</p></li>
<li><p>Implemented <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n2900.htm">WG14 N2900</a>
and <a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3011.htm">WG14 N3011</a>
which allows for empty braced initialization in C.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="nc">S</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">x</span><span class="p">,</span><span class="w"> </span><span class="n">y</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="n">s</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">{};</span><span class="w"> </span><span class="c1">// Initializes s.x and s.y to 0</span>
</pre></div>
</div>
<p>As part of this change, the <code class="docutils literal notranslate"><span class="pre">-Wgnu-empty-initializer</span></code> warning group was
removed, as this is no longer a GNU extension but a C2x extension. You can
use <code class="docutils literal notranslate"><span class="pre">-Wno-c2x-extensions</span></code> to silence the extension warning instead.</p>
</li>
<li><p>Updated the implementation of
<a class="reference external" href="https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3042.htm">WG14 N3042</a>
based on decisions reached during the WG14 CD Ballot Resolution meetings held
in Jan and Feb 2023. This should complete the implementation of <code class="docutils literal notranslate"><span class="pre">nullptr</span></code>
and <code class="docutils literal notranslate"><span class="pre">nullptr_t</span></code> in C. The specific changes are:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="n">nullptr_t</span><span class="p">);</span>
<span class="n">func</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Previously required to be rejected, is now accepted.</span>
<span class="n">func</span><span class="p">((</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="p">);</span><span class="w"> </span><span class="c1">// Previously required to be rejected, is now accepted.</span>

<span class="n">nullptr_t</span><span class="w"> </span><span class="n">val</span><span class="p">;</span>
<span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Previously required to be rejected, is now accepted.</span>
<span class="n">val</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="p">(</span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="p">)</span><span class="mi">0</span><span class="p">;</span><span class="w"> </span><span class="c1">// Previously required to be rejected, is now accepted.</span>

<span class="kt">bool</span><span class="w"> </span><span class="n">b</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">nullptr</span><span class="p">;</span><span class="w"> </span><span class="c1">// Was incorrectly rejected by Clang, is now accepted.</span>
</pre></div>
</div>
</li>
<li><p>Implemented <cite>WG14 N3124 &lt;https://www.open-std.org/jtc1/sc22/wg14/www/docs/n3124.pdf&gt;_</cite>,
which allows any universal character name to appear in character and string literals.</p></li>
</ul>
</section>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h3><a class="toc-backref" href="#id149" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Clang now saves the address of ABI-indirect function parameters on the stack,
improving the debug information available in programs compiled without
optimizations.</p></li>
<li><p>Clang now supports <code class="docutils literal notranslate"><span class="pre">__builtin_nondeterministic_value</span></code> that returns a
nondeterministic value of the same type as the provided argument.</p></li>
<li><p>Clang now supports <code class="docutils literal notranslate"><span class="pre">__builtin_FILE_NAME()</span></code> which returns the same
information as the <code class="docutils literal notranslate"><span class="pre">__FILE_NAME__</span></code> macro (the presumed file name
from the invocation point, with no path components included).</p></li>
<li><p>Clang now supports <code class="docutils literal notranslate"><span class="pre">__builtin_assume_separate_storage</span></code> that indicates that
its arguments point to objects in separate storage allocations.</p></li>
<li><p>Clang now supports expressions in <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">__debug</span> <span class="pre">dump</span></code>.</p></li>
<li><p>Clang now supports declaration of multi-dimensional arrays with
<code class="docutils literal notranslate"><span class="pre">__declspec(property)</span></code>.</p></li>
<li><p>A new builtin type trait <code class="docutils literal notranslate"><span class="pre">__is_trivially_equality_comparable</span></code> has been added,
which checks whether comparing two instances of a type is equivalent to
<code class="docutils literal notranslate"><span class="pre">memcmp(&amp;lhs,</span> <span class="pre">&amp;rhs,</span> <span class="pre">sizeof(T))</span> <span class="pre">==</span> <span class="pre">0</span></code>.</p></li>
<li><p>Clang now ignores null directives outside of the include guard when deciding
whether a file can be enabled for the multiple-include optimization.</p></li>
<li><p>Clang now support <code class="docutils literal notranslate"><span class="pre">__builtin_FUNCSIG()</span></code> which returns the same information
as the <code class="docutils literal notranslate"><span class="pre">__FUNCSIG__</span></code> macro (available only with <code class="docutils literal notranslate"><span class="pre">-fms-extensions</span></code> flag).
This fixes (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58951">#58951</a>).</p></li>
<li><p>Clang now supports the <a class="reference external" href="https://no-color.org/">NO_COLOR</a> environment
variable as a way to disable color diagnostics.</p></li>
<li><p>Clang now supports <code class="docutils literal notranslate"><span class="pre">__builtin_isfpclass</span></code>, which checks if the specified
floating-point value falls into any of the specified data classes.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_round</span></code> for  builtin for floating
point types. This allows access to <code class="docutils literal notranslate"><span class="pre">llvm.round</span></code> for
arbitrary floating-point and vector of floating-point types.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_rint</span></code> for floating point types. This
allows access to <code class="docutils literal notranslate"><span class="pre">llvm.rint</span></code> for arbitrary floating-point and
vector of floating-point types.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_nearbyint</span></code> for floating point
types. This allows access to <code class="docutils literal notranslate"><span class="pre">llvm.nearbyint</span></code> for arbitrary
floating-point and vector of floating-point types.</p></li>
<li><p>Clang AST matcher now matches concept declarations with <cite>conceptDecl</cite>.</p></li>
<li><p>Clang now supports more GCC stdio builtins: <code class="docutils literal notranslate"><span class="pre">__builtin_vprintf</span></code>, <code class="docutils literal notranslate"><span class="pre">__builtin_vfprintf</span></code>,
<code class="docutils literal notranslate"><span class="pre">__builtin_fscanf</span></code>, <code class="docutils literal notranslate"><span class="pre">__builtin_scanf</span></code>, <code class="docutils literal notranslate"><span class="pre">__builtin_sscanf</span></code>, <code class="docutils literal notranslate"><span class="pre">__builtin_vfscanf</span></code>,
<code class="docutils literal notranslate"><span class="pre">__builtin_vscanf</span></code>, <code class="docutils literal notranslate"><span class="pre">__builtin_vsscanf</span></code>.</p></li>
</ul>
</section>
<section id="new-compiler-flags">
<h3><a class="toc-backref" href="#id150" role="doc-backlink">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The flag <code class="docutils literal notranslate"><span class="pre">-std=c++23</span></code> has been added. This behaves the same as the existing
flag <code class="docutils literal notranslate"><span class="pre">-std=c++2b</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-dumpdir</span></code> has been implemented to specify auxiliary and dump output
filenames for features like <code class="docutils literal notranslate"><span class="pre">-gsplit-dwarf</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fcaret-diagnostics-max-lines=</span></code> has been added as a driver options, which
lets users control the maximum number of source lines printed for a
caret diagnostic.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fkeep-persistent-storage-variables</span></code> has been implemented to keep all
variables that have a persistent storage duration—including global, static
and thread-local variables—to guarantee that they can be directly addressed.
Since this inhibits the merging of the affected variables, the number of
individual relocations in the program will generally increase.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-f[no-]assume-unique-vtables</span></code> controls whether Clang assumes that each
class has a unique vtable address, when that is required by the ABI.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-print-multi-flags-experimental</span></code> prints the flags used for multilib
selection. See <a class="reference external" href="https://clang.llvm.org/docs/Multilib.html">the multilib docs</a>
for more details.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-maix32</span></code> and <code class="docutils literal notranslate"><span class="pre">-maix64</span></code> are new GCC compatibility flags that select the
bitmode to target on AIX.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-p</span></code> is a new GCC compatibility flag for AIX and Linux which works
similarly to <code class="docutils literal notranslate"><span class="pre">-pg</span></code> by writing profile information, but targets the <code class="docutils literal notranslate"><span class="pre">prof</span></code>
tool as opposed to the <code class="docutils literal notranslate"><span class="pre">gprof</span></code> tool.</p></li>
</ul>
</section>
<section id="deprecated-compiler-flags">
<h3><a class="toc-backref" href="#id151" role="doc-backlink">Deprecated Compiler Flags</a><a class="headerlink" href="#deprecated-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-fdouble-square-bracket-attributes</span></code> has been deprecated. It is ignored now
and will be removed in Clang 18.</p></li>
</ul>
</section>
<section id="modified-compiler-flags">
<h3><a class="toc-backref" href="#id152" role="doc-backlink">Modified Compiler Flags</a><a class="headerlink" href="#modified-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">clang</span> <span class="pre">-g</span> <span class="pre">-gsplit-dwarf</span> <span class="pre">a.c</span> <span class="pre">-o</span> <span class="pre">obj/x</span></code> (compile and link) now generates the
<code class="docutils literal notranslate"><span class="pre">.dwo</span></code> file at <code class="docutils literal notranslate"><span class="pre">obj/x-a.dwo</span></code>, instead of a file in the temporary
directory (<code class="docutils literal notranslate"><span class="pre">/tmp</span></code> on *NIX systems, if none of the environment variables
TMPDIR, TMP, and TEMP are specified).</p></li>
</ul>
</section>
<section id="removed-compiler-flags">
<h3><a class="toc-backref" href="#id153" role="doc-backlink">Removed Compiler Flags</a><a class="headerlink" href="#removed-compiler-flags" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The deprecated flag <cite>-fmodules-ts</cite> is removed. Please use <code class="docutils literal notranslate"><span class="pre">-std=c++20</span></code>
or higher to use standard C++ modules instead.</p></li>
<li><p>The deprecated flag <cite>-fcoroutines-ts</cite> is removed. Please use <code class="docutils literal notranslate"><span class="pre">-std=c++20</span></code>
or higher to use standard C++ coroutines instead.</p></li>
<li><p>The CodeGen flag <cite>-lower-global-dtors-via-cxa-atexit</cite> which affects how global
destructors are lowered for MachO is removed without replacement. The default
of <cite>-lower-global-dtors-via-cxa-atexit=true</cite> is now the only supported way.</p></li>
<li><p>The cc1 flag <code class="docutils literal notranslate"><span class="pre">-no-opaque-pointers</span></code> has been removed.</p></li>
</ul>
</section>
<section id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id154" role="doc-backlink">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Introduced a new function attribute <code class="docutils literal notranslate"><span class="pre">__attribute__((unsafe_buffer_usage))</span></code>
to be worn by functions containing buffer operations that could cause out of
bounds memory accesses. It emits warnings at call sites to such functions when
the flag <code class="docutils literal notranslate"><span class="pre">-Wunsafe-buffer-usage</span></code> is enabled.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__declspec</span></code> attributes can now be used together with the using keyword. Before
the attributes on <code class="docutils literal notranslate"><span class="pre">__declspec</span></code> was ignored, while now it will be forwarded to the
point where the alias is used. Note, some incorrect uses of <code class="docutils literal notranslate"><span class="pre">__declspec</span></code> on a
<code class="docutils literal notranslate"><span class="pre">using</span></code> declaration were being silently ignored and will now be appropriately
diagnosed as ignoring the attribute.</p></li>
<li><p>Introduced a new <code class="docutils literal notranslate"><span class="pre">USR</span></code> (unified symbol resolution) clause inside of the
existing <code class="docutils literal notranslate"><span class="pre">__attribute__((external_source_symbol))</span></code> attribute. Clang’s indexer
uses the optional USR value when indexing Clang’s AST. This value is expected
to be generated by an external compiler when generating C++ bindings during
the compilation of the foreign language sources (e.g. Swift).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">__has_attribute</span></code>, <code class="docutils literal notranslate"><span class="pre">__has_c_attribute</span></code> and <code class="docutils literal notranslate"><span class="pre">__has_cpp_attribute</span></code>
preprocessor operators now return 1 also for attributes defined by plugins.</p></li>
<li><p>Improve the AST fidelity of <code class="docutils literal notranslate"><span class="pre">alignas</span></code> and <code class="docutils literal notranslate"><span class="pre">_Alignas</span></code> attribute. Before, we
model <code class="docutils literal notranslate"><span class="pre">alignas(type-id)</span></code> as though the user wrote <code class="docutils literal notranslate"><span class="pre">alignas(alignof(type-id))</span></code>,
now we directly use <code class="docutils literal notranslate"><span class="pre">alignas(type-id)</span></code>.</p></li>
</ul>
</section>
<section id="improvements-to-clang-s-diagnostics">
<h3><a class="toc-backref" href="#id155" role="doc-backlink">Improvements to Clang’s diagnostics</a><a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="Link to this heading">¶</a></h3>
<ul>
<li><p>We now generate a diagnostic for signed integer overflow due to unary minus
in a non-constant expression context.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/31643">#31643</a>)</p></li>
<li><p>Clang now warns by default for C++20 and later about deprecated capture of
<code class="docutils literal notranslate"><span class="pre">this</span></code> with a capture default of <code class="docutils literal notranslate"><span class="pre">=</span></code>. This warning can be disabled with
<code class="docutils literal notranslate"><span class="pre">-Wno-deprecated-this-capture</span></code>.</p></li>
<li><p>Clang had failed to emit some <code class="docutils literal notranslate"><span class="pre">-Wundefined-internal</span></code> for members of a local
class if that class was first introduced with a forward declaration.</p></li>
<li><p>Diagnostic notes and fix-its are now generated for <code class="docutils literal notranslate"><span class="pre">ifunc</span></code>/<code class="docutils literal notranslate"><span class="pre">alias</span></code> attributes
which point to functions whose names are mangled.</p></li>
<li><p>Diagnostics relating to macros on the command line of a preprocessed assembly
file or precompiled header are now reported as coming from the file
<code class="docutils literal notranslate"><span class="pre">&lt;command</span> <span class="pre">line&gt;</span></code> instead of <code class="docutils literal notranslate"><span class="pre">&lt;built-in&gt;</span></code>.</p></li>
<li><p>Clang constexpr evaluator now provides a more concise diagnostic when calling
function pointer that is known to be null.</p></li>
<li><p>Clang now avoids duplicate warnings on unreachable <code class="docutils literal notranslate"><span class="pre">[[fallthrough]];</span></code> statements
previously issued from <code class="docutils literal notranslate"><span class="pre">-Wunreachable-code</span></code> and <code class="docutils literal notranslate"><span class="pre">-Wunreachable-code-fallthrough</span></code>
by prioritizing <code class="docutils literal notranslate"><span class="pre">-Wunreachable-code-fallthrough</span></code>.</p></li>
<li><p>Clang now correctly diagnoses statement attributes <code class="docutils literal notranslate"><span class="pre">[[clang::always_inline]]</span></code> and
<code class="docutils literal notranslate"><span class="pre">[[clang::noinline]]</span></code> when used on a statement with dependent call expressions.</p></li>
<li><p>Clang now checks for completeness of the second and third arguments in the
conditional operator.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59718">#59718</a>)</p></li>
<li><p>There were some cases in which the diagnostic for the unavailable attribute
might not be issued, this fixes those cases.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61815">61815</a>)</p></li>
<li><p>Clang now avoids unnecessary diagnostic warnings for obvious expressions in
the case of binary operators with logical OR operations.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57906">#57906</a>)</p></li>
<li><p>Clang’s “static assertion failed” diagnostic now points to the static assertion
expression instead of pointing to the <code class="docutils literal notranslate"><span class="pre">static_assert</span></code> token.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61951">#61951</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wformat</span></code> now recognizes <code class="docutils literal notranslate"><span class="pre">%lb</span></code> for the <code class="docutils literal notranslate"><span class="pre">printf</span></code>/<code class="docutils literal notranslate"><span class="pre">scanf</span></code> family of
functions.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62247">#62247:</a>).</p></li>
<li><p>Clang now diagnoses shadowing of lambda’s template parameter by a capture.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61105">#61105:</a>).</p></li>
<li><p>Address a false positive in <code class="docutils literal notranslate"><span class="pre">-Wpacked</span></code> when applied to a non-pod type using
Clang ABI &gt;= 15.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62353">#62353:</a>,
fallout from the non-POD packing ABI fix in LLVM 15).</p></li>
<li><p>Clang constexpr evaluator now prints subobject’s name instead of its type in notes
when a constexpr variable has uninitialized subobjects after its constructor call.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58601">#58601</a>)</p></li>
<li><p>Clang’s <cite>-Wshadow</cite> warning now warns about shadowings by static local variables
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62850">#62850:</a>).</p></li>
<li><p>Clang now warns when any predefined macro is undefined or redefined, instead
of only some of them.</p></li>
<li><p>Clang now correctly diagnoses when the argument to <code class="docutils literal notranslate"><span class="pre">alignas</span></code> or <code class="docutils literal notranslate"><span class="pre">_Alignas</span></code>
is an incomplete type.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55175">#55175:</a>, and fixes an
incorrect mention of <code class="docutils literal notranslate"><span class="pre">alignof</span></code> in a diagnostic about <code class="docutils literal notranslate"><span class="pre">alignas</span></code>).</p></li>
<li><p>Clang will now show a margin with line numbers to the left of each line
of code it prints for diagnostics. This can be disabled using
<code class="docutils literal notranslate"><span class="pre">-fno-diagnostics-show-line-numbers</span></code>. At the same time, the maximum
number of code lines it prints has been increased from 1 to 16. This
can be controlled using <code class="docutils literal notranslate"><span class="pre">-fcaret-diagnostics-max-lines=</span></code>.</p></li>
<li><p>Clang no longer emits <code class="docutils literal notranslate"><span class="pre">-Wunused-variable</span></code> warnings for variables declared
with <code class="docutils literal notranslate"><span class="pre">__attribute__((cleanup(...)))</span></code> to match GCC’s behavior.</p></li>
<li><p>Clang now issues expected warnings for situations of comparing with NULL pointers.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/42992">#42992:</a>)</p></li>
<li><p>Clang now diagnoses unused const-qualified variable template as
“unused variable template” rather than “unused variable”.</p></li>
<li><p>When diagnosing a constant expression where an enum without a fixed underlying
type is set to a value outside the range of the enum’s values, clang will now
print the name of the enum in question.</p></li>
<li><p>Clang no longer diagnoses a read of an empty structure as use of an
uninitialized variable.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/26842">#26842:</a>)</p></li>
<li><p>The Fix-It emitted for unused labels used to expand to the next line, which caused
visual oddities now that Clang shows more than one line of code snippet. This has
been fixed and the Fix-It now only spans to the end of the <code class="docutils literal notranslate"><span class="pre">:</span></code>.</p></li>
<li><p>Clang now underlines the parameter list of function declaration when emitting
a note about the mismatch in the number of arguments.</p></li>
<li><p>Clang now diagnoses unexpected tokens after a
<code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">clang|GCC</span> <span class="pre">diagnostic</span> <span class="pre">push|pop</span></code> directive.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/13920">#13920:</a>)</p></li>
<li><p>Clang now does not try to analyze cast validity on variables with dependent alignment (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63007">#63007:</a>).</p></li>
<li><p>Clang constexpr evaluator now displays member function calls more precisely
by making use of the syntactical structure of function calls. This avoids display
of syntactically invalid codes in diagnostics.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57081">#57081:</a>)</p></li>
<li><p>Clang no longer emits inappropriate notes about the loss of <code class="docutils literal notranslate"><span class="pre">__unaligned</span></code> qualifier
on overload resolution, when the actual reason for the failure is loss of other qualifiers.</p></li>
<li><p>The note emitted when an <code class="docutils literal notranslate"><span class="pre">operator==</span></code> was defaulted as deleted used to refer to
the lack of a data member’s “three-way comparison operator”. It now refers correctly
to the data member’s <code class="docutils literal notranslate"><span class="pre">operator==</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63960">#63960:</a>)</p></li>
<li><p>Clang’s notes about unconvertible types in overload resolution failure now covers
the source range of parameter declaration of the candidate function declaration.</p>
<p><em>Example Code</em>:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span><span class="w"> </span><span class="nf">func</span><span class="p">(</span><span class="kt">int</span><span class="w"> </span><span class="n">aa</span><span class="p">,</span><span class="w"> </span><span class="kt">int</span><span class="w"> </span><span class="n">bb</span><span class="p">);</span>
<span class="kt">void</span><span class="w"> </span><span class="nf">test</span><span class="p">()</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">func</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;two&quot;</span><span class="p">);</span><span class="w"> </span><span class="p">}</span>
</pre></div>
</div>
<p><em>BEFORE</em>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>source:2:15: error: no matching function for call to &#39;func&#39;
void test() { func(1, &quot;two&quot;);  }
              ^~~~
source:1:6: note: candidate function not viable: no known conversion from &#39;const char[4]&#39; to &#39;int&#39; for 2nd argument
void func(int aa, int bb);
     ^
</pre></div>
</div>
<p><em>AFTER</em>:</p>
<div class="highlight-text notranslate"><div class="highlight"><pre><span></span>source:2:15: error: no matching function for call to &#39;func&#39;
void test() { func(1, &quot;two&quot;);  }
              ^~~~
source:1:6: note: candidate function not viable: no known conversion from &#39;const char[4]&#39; to &#39;int&#39; for 2nd argument
void func(int aa, int bb);
     ^            ~~~~~~
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wformat</span></code> cast fix-its will now suggest <code class="docutils literal notranslate"><span class="pre">static_cast</span></code> instead of C-style casts
for C++ code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wformat</span></code> will no longer suggest a no-op fix-it for fixing scoped enum format
warnings. Instead, it will suggest casting the enum object to the type specified
in the format string.</p></li>
<li><p>Clang contexpr evaluator now displays notes as well as an error when a constructor
of a base class is not called in the constructor of its derived class.</p></li>
</ul>
</section>
<section id="bug-fixes-in-this-version">
<h3><a class="toc-backref" href="#id156" role="doc-backlink">Bug Fixes in This Version</a><a class="headerlink" href="#bug-fixes-in-this-version" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Fixed an issue where a class template specialization whose declaration is
instantiated in one module and whose definition is instantiated in another
module may end up with members associated with the wrong declaration of the
class, which can result in miscompiles in some cases.</p></li>
<li><p>Added a new diagnostic warning group
<code class="docutils literal notranslate"><span class="pre">-Wdeprecated-redundant-constexpr-static-def</span></code>, under the existing
<code class="docutils literal notranslate"><span class="pre">-Wdeprecated</span></code> group. This controls warnings about out-of-line definitions
of ‘static constexpr’ data members that are unnecessary from C++17 onwards.</p></li>
<li><p>Fix segfault while running clang-rename on a non existing file.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/36471">#36471</a>)</p></li>
<li><p>Fix crash when diagnosing incorrect usage of <code class="docutils literal notranslate"><span class="pre">_Nullable</span></code> involving alias
templates.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60344">#60344</a>)</p></li>
<li><p>Fix confusing warning message when <code class="docutils literal notranslate"><span class="pre">/clang:-x</span></code> is passed in <code class="docutils literal notranslate"><span class="pre">clang-cl</span></code>
driver mode and emit an error which suggests using <code class="docutils literal notranslate"><span class="pre">/TC</span></code> or <code class="docutils literal notranslate"><span class="pre">/TP</span></code>
<code class="docutils literal notranslate"><span class="pre">clang-cl</span></code> options instead.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59307">#59307</a>)</p></li>
<li><p>Fix assert that fails when the expression causing the this pointer to be
captured by a block is part of a constexpr if statement’s branch and
instantiation of the enclosing method causes the branch to be discarded.</p></li>
<li><p>Fix __VA_OPT__ implementation so that it treats the concatenation of a
non-placemaker token and placemaker token as a non-placemaker token.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60268">#60268</a>)</p></li>
<li><p>Fix crash when taking the address of a consteval lambda call operator.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57682">#57682</a>)</p></li>
<li><p>Clang now support export declarations in the language linkage.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60405">#60405</a>)</p></li>
<li><p>Fix aggregate initialization inside lambda constexpr.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60936">#60936</a>)</p></li>
<li><p>No longer issue a false positive diagnostic about a catch handler that cannot
be reached despite being reachable. This fixes
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61177">#61177</a> in anticipation
of <cite>CWG2699 &lt;https://wg21.link/CWG2699&gt;_</cite> being accepted by WG21.</p></li>
<li><p>Fix crash when parsing fold expression containing a delayed typo correction.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61326">#61326</a>)</p></li>
<li><p>Fix crash when dealing with some member accesses outside of class or member
function context.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/37792">#37792</a>) and
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/48405">#48405</a>)</p></li>
<li><p>Fix crash when using <code class="docutils literal notranslate"><span class="pre">[[clang::always_inline]]</span></code> or <code class="docutils literal notranslate"><span class="pre">[[clang::noinline]]</span></code>
statement attributes on a call to a template function in the body of a
template function.</p></li>
<li><p>Fix coroutines issue where <code class="docutils literal notranslate"><span class="pre">get_return_object()</span></code> result was always eagerly
converted to the return type. Eager initialization (allowing RVO) is now only
performed when these types match, otherwise deferred initialization is used,
enabling short-circuiting coroutines use cases. This fixes
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/56532">#56532</a>) in
anticipation of <cite>CWG2563 &lt;https://cplusplus.github.io/CWG/issues/2563.html&gt;_</cite>.</p></li>
<li><p>Fix highlighting issue with <code class="docutils literal notranslate"><span class="pre">_Complex</span></code> and initialization list with more than
2 items. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61518">#61518</a>)</p></li>
<li><p>Fix  <code class="docutils literal notranslate"><span class="pre">getSourceRange</span></code> on  <code class="docutils literal notranslate"><span class="pre">VarTemplateSpecializationDecl</span></code> and
<code class="docutils literal notranslate"><span class="pre">VarTemplatePartialSpecializationDecl</span></code>, which represents variable with
the initializer, so it behaves consistently with other <code class="docutils literal notranslate"><span class="pre">VarDecls</span></code> and ends
on the last token of initializer, instead of right angle bracket of
the template argument list.</p></li>
<li><p>Fix false-positive diagnostic issued for consteval initializers of temporary
objects.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60286">#60286</a>)</p></li>
<li><p>Correct restriction of trailing requirements clauses on a templated function.
Previously we only rejected non-‘templated’ things, but the restrictions ALSO need
to limit non-defined/non-member functions as well. Additionally, we now diagnose
requires on lambdas when not allowed, which we previously missed.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61748">#61748</a>)</p></li>
<li><p>Fix confusing diagnostic for incorrect use of qualified concepts names.</p></li>
<li><p>Fix handling of comments in function like macros so they are ignored in -CC
mode.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60887">#60887</a>)</p></li>
<li><p>Fix incorrect merging of lambdas across modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60985">#60985</a>)</p></li>
<li><p>Fix crash when handling nested immediate invocations in initializers of global
variables.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58207">#58207</a>)</p></li>
<li><p>Fix crash when generating code coverage information for <cite>PseudoObjectExpr</cite> in
Clang AST.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/45481">#45481</a>)</p></li>
<li><p>Fix the assertion hit when a template consteval function appears in a nested
consteval/constexpr call chain.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61142">#61142</a>)</p></li>
<li><p>Clang now better diagnose placeholder types constrained with a concept that is
not a type concept.</p></li>
<li><p>Fix crash when a doc comment contains a line splicing.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62054">#62054</a>)</p></li>
<li><p>Work around with a clang coverage crash which happens when visiting
expressions/statements with invalid source locations in non-assert builds.
Assert builds may still see assertions triggered from this.</p></li>
<li><p>Fix a failed assertion due to an invalid source location when trying to form
a coverage report for an unresolved constructor expression.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62105">#62105</a>)</p></li>
<li><p>Fix defaulted equality operator so that it does not attempt to compare unnamed
bit-fields. This fixes:
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61335">#61355</a>) and
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61417">#61417</a>)</p></li>
<li><p>Fix crash after suggesting typo correction to constexpr if condition.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61885">#61885</a>)</p></li>
<li><p>Clang constexpr evaluator now treats comparison of [[gnu::weak]]-attributed
member pointer as an invalid expression.</p></li>
<li><p>Fix crash when member function contains invalid default argument.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62122">#62122</a>)</p></li>
<li><p>Fix crash when handling undefined template partial specialization
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61356">#61356</a>)</p></li>
<li><p>Fix premature substitution into the constraints of an inherited constructor.</p></li>
<li><p>Fix crash when attempting to perform parenthesized initialization of an
aggregate with a base class with only non-public constructors.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62296">#62296</a>)</p></li>
<li><p>Fix crash when handling initialization candidates for invalid deduction guide.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62408">#62408</a>)</p></li>
<li><p>Fix crash when redefining a variable with an invalid type again with an
invalid type. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62447">#62447</a>)</p></li>
<li><p>Fix a stack overflow issue when evaluating <code class="docutils literal notranslate"><span class="pre">consteval</span></code> default arguments.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60082">#60082</a>)</p></li>
<li><p>Fix the assertion hit when generating code for global variable initializer of
_BitInt(1) type.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62207">#62207</a>)</p></li>
<li><p>Fix lambdas and other anonymous function names not respecting <code class="docutils literal notranslate"><span class="pre">-fdebug-prefix-map</span></code>
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62192">#62192</a>)</p></li>
<li><p>Fix crash when attempting to pass a non-pointer type as first argument of
<code class="docutils literal notranslate"><span class="pre">__builtin_assume_aligned</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62305">#62305</a>)</p></li>
<li><p>A default argument for a non-type template parameter is evaluated and checked
at the point where it is required. This fixes:
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62224">#62224</a>) and
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62596">#62596</a>)</p></li>
<li><p>Fix an assertion when instantiating the body of a Class Template Specialization
when it had been instantiated from a partial template specialization with different
template arguments on the containing class. This fixes:
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60778">#60778</a>).</p></li>
<li><p>Fix a crash when an enum constant has a dependent-type recovery expression for
C.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62446">#62446</a>).</p></li>
<li><p>Propagate the value-dependent bit for VAArgExpr. Fixes a crash where a
__builtin_va_arg call has invalid arguments.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62711">#62711</a>).</p></li>
<li><p>Fix crash on attempt to initialize union with flexible array member.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61746">#61746</a>).</p></li>
<li><p>Clang <cite>TextNodeDumper</cite> enabled through <cite>-ast-dump</cite> flag no longer evaluates the
initializer of constexpr <cite>VarDecl</cite> if the declaration has a dependent type.</p></li>
<li><p>Match GCC’s behavior for <code class="docutils literal notranslate"><span class="pre">__builtin_object_size</span></code> and
<code class="docutils literal notranslate"><span class="pre">__builtin_dynamic_object_size</span></code> on structs containing flexible array
members.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62789">#62789</a>).</p></li>
<li><p>Fix a crash when instantiating a non-type template argument in a dependent scope.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62533">#62533</a>).</p></li>
<li><p>Fix crash when diagnosing default comparison method.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62791">#62791</a>) and
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62102">#62102</a>).</p></li>
<li><p>Fix crash when passing a braced initializer list to a parentehsized aggregate
initialization expression.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63008">#63008</a>).</p></li>
<li><p>Reject increment of bool value in unevaluated contexts after C++17.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/47517">#47517</a>).</p></li>
<li><p>Fix assertion and quality of diagnostic messages in a for loop
containing multiple declarations and a range specifier
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63010">#63010</a>).</p></li>
<li><p>Fix rejects-valid when consteval operator appears inside of a template.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62886">#62886</a>).</p></li>
<li><p>Fix crash for code using <code class="docutils literal notranslate"><span class="pre">_Atomic</span></code> types in C++
(<a class="reference external" href="https://reviews.llvm.org/D152303">See patch</a>).</p></li>
<li><p>Fix crash when passing a value larger then 64 bits to the aligned attribute.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50534">#50534</a>).</p></li>
<li><p>CallExpr built for C error-recovery now is always type-dependent. Fixes a
crash when we encounter a unresolved TypoExpr during diagnostic emission.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50244">#50244</a>).</p></li>
<li><p>Apply <code class="docutils literal notranslate"><span class="pre">-fmacro-prefix-map</span></code> to anonymous tags in template arguments
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63219">#63219</a>).</p></li>
<li><p>Clang now properly diagnoses format string mismatches involving scoped
enumeration types. A scoped enumeration type is not promoted to an integer
type by the default argument promotions, and thus this is UB. Clang’s
behavior now matches GCC’s behavior in C++.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/38717">#38717</a>).</p></li>
<li><p>Fixed a failing assertion when implicitly defining a function within a GNU
statement expression that appears outside of a function block scope. The
assertion was benign outside of asserts builds and would only fire in C.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/48579">#48579</a>).</p></li>
<li><p>Fixed a failing assertion when applying an attribute to an anonymous union.
The assertion was benign outside of asserts builds and would only fire in C++.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/48512">#48512</a>).</p></li>
<li><p>Fixed a failing assertion when parsing incomplete destructor.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63503">#63503</a>)</p></li>
<li><p>Fix C++17 mode assert when parsing malformed code and the compiler is
attempting to see if it could be type template for class template argument
deduction. This fixes
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/57495">Issue 57495</a>)</p></li>
<li><p>Fix missing destructor calls and therefore memory leaks in generated code
when an immediate invocation appears as a part of an expression that produces
temporaries.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60709">#60709</a>).</p></li>
<li><p>Fixed a missed integer overflow warning with temporary values.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63629">#63629</a>)</p></li>
<li><p>Fixed parsing of elaborated type specifier inside of a new expression.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/34341">#34341</a>)</p></li>
<li><p>Clang now correctly evaluates <code class="docutils literal notranslate"><span class="pre">__has_extension</span> <span class="pre">(cxx_defaulted_functions)</span></code>
and <code class="docutils literal notranslate"><span class="pre">__has_extension</span> <span class="pre">(cxx_default_function_template_args)</span></code> to 1.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61758">#61758</a>)</p></li>
<li><p>Stop evaluating a constant expression if the condition expression which in
switch statement contains errors.
(<cite>#63453 &lt;https://github.com/llvm/llvm-project/issues/63453&gt;_</cite>)</p></li>
<li><p>Fixed false positive error diagnostic when pack expansion appears in template
parameters of a member expression.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/48731">#48731</a>)</p></li>
<li><p>Fix the contains-errors bit not being set for DeclRefExpr that refers to a
VarDecl with invalid initializer. This fixes:
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50236">#50236</a>),
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50243">#50243</a>),
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/48636">#48636</a>),
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50320">#50320</a>).</p></li>
<li><p>Fix an assertion when using <code class="docutils literal notranslate"><span class="pre">\u0024</span></code> (<code class="docutils literal notranslate"><span class="pre">$</span></code>) as an identifier, by disallowing
that construct (<cite>#62133 &lt;https://github.com/llvm/llvm-project/issues/38717&gt;_</cite>).</p></li>
<li><p>Fix crash caused by PseudoObjectExprBitfields: NumSubExprs overflow.
(<cite>#63169 &lt;https://github.com/llvm/llvm-project/issues/63169&gt;_</cite>)</p></li>
<li><p>Fix crash when casting an object to an array type.
(<cite>#63758 &lt;https://github.com/llvm/llvm-project/issues/63758&gt;_</cite>)</p></li>
<li><p>Fixed false positive error diagnostic observed from mixing <code class="docutils literal notranslate"><span class="pre">asm</span> <span class="pre">goto</span></code> with
<code class="docutils literal notranslate"><span class="pre">__attribute__((cleanup()))</span></code> variables falsely warning that jumps to
non-targets would skip cleanup.</p></li>
<li><p>Correcly diagnose jumps into statement expressions.
This ensures the behavior of Clang is consistent with GCC.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63682">#63682</a>)</p></li>
<li><p>Invalidate BlockDecl with implicit return type, in case any of the return
value exprs is invalid. Propagating the error info up by replacing BlockExpr
with a RecoveryExpr. This fixes:
(<cite>#63863 &lt;https://github.com/llvm/llvm-project/issues/63863&gt;_</cite>)</p></li>
<li><p>Invalidate BlockDecl with invalid ParmVarDecl. Remove redundant dump of
BlockDecl’s ParmVarDecl
(<cite>#64005 &lt;https://github.com/llvm/llvm-project/issues/64005&gt;_</cite>)</p></li>
<li><p>Fix crash on nested templated class with template function call.
(<cite>#61159 &lt;https://github.com/llvm/llvm-project/issues/61159&gt;_</cite>)</p></li>
<li><p>Fix a hang on valid C code passing a function type as an argument to
<code class="docutils literal notranslate"><span class="pre">typeof</span></code> to form a function declaration.
(<cite>#64713 &lt;https://github.com/llvm/llvm-project/issues/64713&gt;_</cite>)</p></li>
<li><p>Clang now correctly diagnoses <code class="docutils literal notranslate"><span class="pre">function_needs_feature</span></code> when always_inline
callee has incompatible target features with caller.</p></li>
<li><p>Removed the linking of libraries when <code class="docutils literal notranslate"><span class="pre">-r</span></code> is passed to the driver on AIX.</p></li>
<li><p>Fixed an Itanium ABI bug where we force exactly two-byte alignment on member
functions to reserve a bit in function pointers for identifying pointers to
virtual member functions even if the target required a greater function
alignment and/or did not have function pointers which point to function entry
points (i.e., uses function descriptor objects instead).</p></li>
</ul>
<section id="bug-fixes-to-compiler-builtins">
<h4>Bug Fixes to Compiler Builtins<a class="headerlink" href="#bug-fixes-to-compiler-builtins" title="Link to this heading">¶</a></h4>
</section>
<section id="bug-fixes-to-attribute-support">
<h4>Bug Fixes to Attribute Support<a class="headerlink" href="#bug-fixes-to-attribute-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fixed a bug where attribute annotations on type specifiers (enums, classes,
structs, unions, and scoped enums) were not properly ignored, resulting in
misleading warning messages. Now, such attribute annotations are correctly
ignored. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61660">#61660</a>)</p></li>
<li><p>GNU attributes preceding C++ style attributes on templates were not properly
handled, resulting in compilation error. This has been corrected to match the
behavior exhibited by GCC, which permits mixed ordering of GNU and C++
attributes.</p></li>
</ul>
</section>
<section id="bug-fixes-to-c-support">
<h4>Bug Fixes to C++ Support<a class="headerlink" href="#bug-fixes-to-c-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Fix crash on invalid code when looking up a destructor in a templated class
inside a namespace.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/59446">#59446</a>)</p></li>
<li><p>Fix crash when evaluating consteval constructor of derived class whose base
has more than one field.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60166">#60166</a>)</p></li>
<li><p>Fix an issue about <code class="docutils literal notranslate"><span class="pre">decltype</span></code> in the members of class templates derived from
templates with related parameters.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58674">#58674</a>)</p></li>
<li><p>Fix incorrect deletion of the default constructor of unions in some
cases. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/48416">#48416</a>)</p></li>
<li><p>No longer issue a pre-C++23 compatibility warning in <code class="docutils literal notranslate"><span class="pre">-pedantic</span></code> mode
regarding overloaded <cite>operator[]</cite> with more than one parameter or for static
lambdas. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61582">#61582</a>)</p></li>
<li><p>Stop stripping CV qualifiers from the type of <code class="docutils literal notranslate"><span class="pre">this</span></code> when capturing it by value in
a lambda.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/50866">#50866</a>)</p></li>
<li><p>Fix ordering of function templates by constraints when they have template
template parameters with different nested constraints.</p></li>
<li><p>Fix type equivalence comparison between auto types to take constraints into
account.</p></li>
<li><p>Fix bug in the computation of the <code class="docutils literal notranslate"><span class="pre">__has_unique_object_representations</span></code>
builtin for types with unnamed bitfields.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61336">#61336</a>)</p></li>
<li><p>Fix default member initializers sometimes being ignored when performing
parenthesized aggregate initialization of templated types.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62266">#62266</a>)</p></li>
<li><p>Fix overly aggressive lifetime checks for parenthesized aggregate
initialization.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61567">#61567</a>)</p></li>
<li><p>Fix a crash when expanding a pack as the index of a subscript expression.</p></li>
<li><p>Fix handling of constexpr dynamic memory allocations in template
arguments. (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62462">#62462</a>)</p></li>
<li><p>Some predefined expressions are now treated as string literals in MSVC
compatibility mode.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/114">#114</a>)</p></li>
<li><p>Fix parsing of <cite>auto(x)</cite>, when it is surrounded by parentheses.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62494">#62494</a>)</p></li>
<li><p>Fix handling of generic lambda used as template arguments.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62611">#62611</a>)</p></li>
<li><p>Allow omitting <code class="docutils literal notranslate"><span class="pre">typename</span></code> in the parameter declaration of a friend
constructor declaration.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63119">#63119</a>)</p></li>
<li><p>Fix access of a friend class declared in a local class. Clang previously
emitted an error when a friend of a local class tried to access it’s
private data members.</p></li>
<li><p>Allow abstract parameter and return types in functions that are
either deleted or not defined.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63012">#63012</a>)</p></li>
<li><p>Fix handling of using-declarations in the init statements of for
loop declarations.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63627">#63627</a>)</p></li>
<li><p>Fix crash when emitting diagnostic for out of order designated initializers
in C++.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63605">#63605</a>)</p></li>
<li><p>Fix crash when using standard C++ modules with OpenMP.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62359">#62359</a>)</p></li>
<li><p>Fix crash when using consteval non static data member initialization in
standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60275">#60275</a>)</p></li>
<li><p>Fix handling of ADL for dependent expressions in standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60488">#60488</a>)</p></li>
<li><p>Fix crash when combining <cite>-ftime-trace</cite> within standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60544">#60544</a>)</p></li>
<li><p>Don’t generate template specializations when importing standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60693">#60693</a>)</p></li>
<li><p>Fix the visibility of <cite>initializer list</cite> in the importer of standard C++
modules. This addresses
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60775">#60775</a>)</p></li>
<li><p>Allow the use of constrained friend in standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60890">#60890</a>)</p></li>
<li><p>Don’t evaluate initializer of used variables in every importer of standard
C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61040">#61040</a>)</p></li>
<li><p>Fix the issue that the default <cite>operator==</cite> in standard C++ modules will
cause duplicate symbol linker error.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61067">#61067</a>)</p></li>
<li><p>Fix the false positive ODR check for template names. This addresses the issue
that we can’t include <cite>&lt;ranges&gt;</cite> in multiple module units.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61317">#61317</a>)</p></li>
<li><p>Fix crash for inconsistent exported declarations in standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61321">#61321</a>)</p></li>
<li><p>Fix ignoring <cite>#pragma comment</cite> and <cite>#pragma detect_mismatch</cite> directives in
standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61733">#61733</a>)</p></li>
<li><p>Don’t generate virtual tables if the class is defined in another module units
for Itanium ABI.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61940">#61940</a>)</p></li>
<li><p>Fix false postive check for constrained satisfaction in standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62589">#62589</a>)</p></li>
<li><p>Serialize the evaluated constant values for variable declarations in standard
C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/62796">#62796</a>)</p></li>
<li><p>Merge lambdas in require expressions in standard C++ modules.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63544">#63544</a>)</p></li>
<li><p>Fix location of default member initialization in parenthesized aggregate
initialization.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63903">#63903</a>)</p></li>
<li><p>Fix constraint checking of non-generic lambdas.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/63181">#63181</a>)</p></li>
<li><p>Update <code class="docutils literal notranslate"><span class="pre">FunctionDeclBitfields.NumFunctionDeclBits</span></code>. This fixes:
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/64171">#64171</a>).</p></li>
<li><p>Fix a crash caused by substitution failure in expression requirements.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/64172">#64172</a>) and
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/64723">#64723</a>).</p></li>
</ul>
</section>
<section id="bug-fixes-to-ast-handling">
<h4>Bug Fixes to AST Handling<a class="headerlink" href="#bug-fixes-to-ast-handling" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Preserve <code class="docutils literal notranslate"><span class="pre">namespace</span></code> definitions that follow malformed declarations.</p></li>
</ul>
</section>
<section id="miscellaneous-bug-fixes">
<h4>Miscellaneous Bug Fixes<a class="headerlink" href="#miscellaneous-bug-fixes" title="Link to this heading">¶</a></h4>
</section>
<section id="miscellaneous-clang-crashes-fixed">
<h4>Miscellaneous Clang Crashes Fixed<a class="headerlink" href="#miscellaneous-clang-crashes-fixed" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Dumping the AST to JSON no longer causes a failed assertion when targetting
the Microsoft ABI and the AST to be dumped contains dependent names that
would not typically be mangled.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/61440">#61440</a>)</p></li>
</ul>
</section>
</section>
<section id="target-specific-changes">
<h3><a class="toc-backref" href="#id157" role="doc-backlink">Target Specific Changes</a><a class="headerlink" href="#target-specific-changes" title="Link to this heading">¶</a></h3>
<section id="amdgpu-support">
<h4>AMDGPU Support<a class="headerlink" href="#amdgpu-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Linking for AMDGPU now uses <code class="docutils literal notranslate"><span class="pre">--no-undefined</span></code> by default. This causes
undefined symbols in the created module to be a linker error. To prevent this,
pass <code class="docutils literal notranslate"><span class="pre">-Wl,--undefined</span></code> if compiling directly, or <code class="docutils literal notranslate"><span class="pre">-Xoffload-linker</span>
<span class="pre">--undefined</span></code> if using an offloading language.</p></li>
<li><p>The deprecated <code class="docutils literal notranslate"><span class="pre">-mcode-object-v3</span></code> and <code class="docutils literal notranslate"><span class="pre">-mno-code-object-v3</span></code> command-line
options have been removed.</p></li>
<li><p>A new option <code class="docutils literal notranslate"><span class="pre">-mprintf-kind</span></code> has been introduced that controls printf lowering
scheme. It is currently supported only for HIP and takes following values,
<code class="docutils literal notranslate"><span class="pre">hostcall</span></code> - printing happens during kernel execution via series of hostcalls,
The scheme requires the system to support pcie atomics.(default)
<code class="docutils literal notranslate"><span class="pre">buffered</span></code> - Scheme uses a debug buffer to populate printf varargs, does not
rely on pcie atomics support.</p></li>
</ul>
</section>
<section id="x86-support">
<h4>X86 Support<a class="headerlink" href="#x86-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Add ISA of <code class="docutils literal notranslate"><span class="pre">AMX-COMPLEX</span></code> which supports <code class="docutils literal notranslate"><span class="pre">tcmmimfp16ps</span></code> and
<code class="docutils literal notranslate"><span class="pre">tcmmrlfp16ps</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">SHA512</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm256_sha512msg1_epi64</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm256_sha512msg2_epi64</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm256_sha512rnds2_epi64</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">SM3</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm_sm3msg1_epi32</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm_sm3msg2_epi32</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm_sm3rnds2_epi32</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">SM4</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_sm4key4_epi32</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_sm4rnds4_epi32</span></code>.</p></li>
<li><p>Support ISA of <code class="docutils literal notranslate"><span class="pre">AVX-VNNI-INT16</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_dpwsud(s)_epi32</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_dpwusd(s)_epi32</span></code>.
* Support intrinsic of <code class="docutils literal notranslate"><span class="pre">_mm(256)_dpwuud(s)_epi32</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-march=graniterapids-d</span></code> is now supported.</p></li>
</ul>
</section>
<section id="arm-and-aarch64-support">
<h4>Arm and AArch64 Support<a class="headerlink" href="#arm-and-aarch64-support" title="Link to this heading">¶</a></h4>
<ul>
<li><p>The hard-float ABI is now available in Armv8.1-M configurations that
have integer MVE instructions (and therefore have FP registers) but
no scalar or vector floating point computation. Previously, trying
to select the hard-float ABI on such a target (via
<code class="docutils literal notranslate"><span class="pre">-mfloat-abi=hard</span></code> or a triple ending in <code class="docutils literal notranslate"><span class="pre">hf</span></code>) would silently
use the soft-float ABI instead.</p></li>
<li><p>Clang now emits <code class="docutils literal notranslate"><span class="pre">-Wunsupported-abi</span></code> if the hard-float ABI is specified
and the selected processor lacks floating point registers.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55755">#55755</a>)</p></li>
<li><p>Clang builtin <code class="docutils literal notranslate"><span class="pre">__arithmetic_fence</span></code> and the command line option <code class="docutils literal notranslate"><span class="pre">-fprotect-parens</span></code>
are now enabled for AArch64.</p></li>
<li><p>Clang supports flag output operands by which conditions in the NZCV could be outputs
of inline assembly for AArch64. This change is more consistent with the behavior of
GCC.</p>
<blockquote>
<div><div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// int a = foo(); int* b = bar();</span>
<span class="k">asm</span><span class="p">(</span><span class="s">&quot;ands %w[a], %w[a], #3&quot;</span><span class="w"> </span><span class="o">:</span><span class="w"> </span><span class="p">[</span><span class="n">a</span><span class="p">]</span><span class="w"> </span><span class="s">&quot;+r&quot;</span><span class="p">(</span><span class="n">a</span><span class="p">),</span><span class="w"> </span><span class="s">&quot;=@cceq&quot;</span><span class="p">(</span><span class="o">*</span><span class="n">b</span><span class="p">));</span>
</pre></div>
</div>
</div></blockquote>
</li>
<li><p>Fix a crash when <code class="docutils literal notranslate"><span class="pre">preserve_all</span></code> calling convention is used on AArch64.
<a class="reference external" href="https://github.com/llvm/llvm-project/issues/58145">Issue 58145</a></p></li>
<li><p>Clang now warns if invalid target triples <code class="docutils literal notranslate"><span class="pre">--target=aarch64-*-eabi</span></code> or
<code class="docutils literal notranslate"><span class="pre">--target=arm-*-elf</span></code> are specified.</p></li>
</ul>
</section>
<section id="windows-support">
<h4>Windows Support<a class="headerlink" href="#windows-support" title="Link to this heading">¶</a></h4>
</section>
<section id="loongarch-support">
<h4>LoongArch Support<a class="headerlink" href="#loongarch-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Patchable function entry (<code class="docutils literal notranslate"><span class="pre">-fpatchable-function-entry</span></code>) is now supported
on LoongArch.</p></li>
<li><p>An ABI mismatch between GCC and Clang related to the handling of empty structs
in C++ parameter passing under <code class="docutils literal notranslate"><span class="pre">lp64d</span></code> ABI was fixed.</p></li>
<li><p>Unaligned memory accesses can be toggled by <code class="docutils literal notranslate"><span class="pre">-m[no-]unaligned-access</span></code> or the
aliases <code class="docutils literal notranslate"><span class="pre">-m[no-]strict-align</span></code>.</p></li>
<li><p>Non <code class="docutils literal notranslate"><span class="pre">$</span></code>-prefixed GPR names (e.g. <code class="docutils literal notranslate"><span class="pre">r4</span></code> and <code class="docutils literal notranslate"><span class="pre">a0</span></code>) are allowed in inlineasm
like GCC does.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">-march=native</span></code> <code class="docutils literal notranslate"><span class="pre">-mtune=</span></code> options and <code class="docutils literal notranslate"><span class="pre">__loongarch_{arch,tune}</span></code>
macros are now supported.</p></li>
</ul>
</section>
<section id="risc-v-support">
<h4>RISC-V Support<a class="headerlink" href="#risc-v-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-mrvv-vector-bits=</span></code> option to give an upper and lower bound on vector
length. Valid values are powers of 2 between 64 and 65536. A value of 32
should eventually be supported. We also accept “zvl” to use the Zvl*b
extension from <code class="docutils literal notranslate"><span class="pre">-march</span></code> or <code class="docutils literal notranslate"><span class="pre">-mcpu</span></code> to the be the upper and lower bound.</p></li>
<li><p>Fixed incorrect ABI lowering of <code class="docutils literal notranslate"><span class="pre">_Float16</span></code> in the case of structs
containing <code class="docutils literal notranslate"><span class="pre">_Float16</span></code> that are eligible for passing via GPR+FPR or
FPR+FPR.</p></li>
<li><p>Removed support for <code class="docutils literal notranslate"><span class="pre">__attribute__((interrupt(&quot;user&quot;)))</span></code>. User-level
interrupts are not in version 1.12 of the privileged specification.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">attribute(riscv_rvv_vector_bits(__riscv_v_fixed_vlen))</span></code> to allow
the size of a RVV (RISC-V Vector) scalable type to be specified. This allows
RVV scalable vector types to be used in structs or in global variables.</p></li>
<li><p>The rules for ordering of extensions in <code class="docutils literal notranslate"><span class="pre">-march</span></code> strings were relaxed. A
canonical ordering is no longer enforced on <code class="docutils literal notranslate"><span class="pre">z*</span></code>, <code class="docutils literal notranslate"><span class="pre">s*</span></code>, and <code class="docutils literal notranslate"><span class="pre">x*</span></code>
prefixed extensions.</p></li>
<li><p>An ABI mismatch between GCC and Clang related to the handling of empty
structs in C++ parameter passing under the hard floating point calling
conventions was fixed.</p></li>
<li><p>Support the RVV intrinsics v0.12. Please checkout <a class="reference external" href="https://github.com/riscv-non-isa/rvv-intrinsic-doc/releases/tag/v0.12.0">the RVV C intrinsics
specification</a>.
It is expected there won’t be any incompatibility from this v0.12 to the
specifications planned for v1.0.</p>
<ul>
<li><p>Added vector intrinsics that models control to the rounding mode
(<code class="docutils literal notranslate"><span class="pre">frm</span></code> and <code class="docutils literal notranslate"><span class="pre">vxrm</span></code>) for the floating-point instruction intrinsics and the
fixed-point instruction intrinsics.</p></li>
<li><p>Added intrinsics for reinterpret cast between vector boolean and vector
integer <code class="docutils literal notranslate"><span class="pre">m1</span></code> value</p></li>
<li><p>Removed the <code class="docutils literal notranslate"><span class="pre">vread_csr</span></code> and <code class="docutils literal notranslate"><span class="pre">vwrite_csr</span></code> intrinsics</p></li>
</ul>
</li>
<li><p>Default <code class="docutils literal notranslate"><span class="pre">-fdebug-dwarf-version=</span></code> is downgraded to 4 to work around
incorrect DWARF related to ULEB128 and linker compatibility before
<code class="docutils literal notranslate"><span class="pre">R_RISCV_SET_ULEB128</span></code> becomes more widely supported.
(<a class="reference external" href="https://reviews.llvm.org/D157663">D157663</a>).</p></li>
</ul>
</section>
<section id="cuda-hip-language-changes">
<h4>CUDA/HIP Language Changes<a class="headerlink" href="#cuda-hip-language-changes" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang has been updated to align its default language standard for CUDA/HIP with
that of C++. The standard has now been enhanced to gnu++17, supplanting the
previously used c++14.</p></li>
</ul>
</section>
<section id="cuda-support">
<h4>CUDA Support<a class="headerlink" href="#cuda-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang now supports CUDA SDK up to 12.1</p></li>
</ul>
</section>
<section id="aix-support">
<h4>AIX Support<a class="headerlink" href="#aix-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Enabled ThinLTO support. Minimum OS requirement is AIX 7.2 TL5 SP7 or
the upcoming AIX 7.3 TL2.</p></li>
<li><p>Enabled integrated assembler (<code class="docutils literal notranslate"><span class="pre">-f[no-]integrated-as</span></code>) for LTO. LTO now
defaults to the integrated assembler.</p></li>
<li><p>Enabled Clang-based instrumented profiling
(<code class="docutils literal notranslate"><span class="pre">-fprofile-instr-[generate|use]</span></code>).</p></li>
<li><p>Added an AIX-only link-time option, <code class="docutils literal notranslate"><span class="pre">-mxcoff-build-id=0xHEXSTRING</span></code>, to allow
users to embed a hex id in their binary such that it’s readable by the program
itself. This option is an alternative to the <code class="docutils literal notranslate"><span class="pre">--build-id=0xHEXSTRING</span></code> GNU
linker option, which is currently not supported by the AIX linker.</p></li>
<li><p>Introduced the <code class="docutils literal notranslate"><span class="pre">-mxcoff-roptr</span></code> option to place constant objects with
relocatable address values in the read-only data section. This option should
be used with the <code class="docutils literal notranslate"><span class="pre">-fdata-sections</span></code> option, and is not supported with
<code class="docutils literal notranslate"><span class="pre">-fno-data-sections</span></code>. When <code class="docutils literal notranslate"><span class="pre">-mxcoff-roptr</span></code> is in effect at link time,
read-only data sections with relocatable address values that resolve to
imported symbols are made writable.</p></li>
<li><p>Implemented the <code class="docutils literal notranslate"><span class="pre">-frecord-command-line</span></code> option on AIX, which saves the
command-line options used from compiling a source file to the corresponding
object file or binary file.</p></li>
<li><p>Added a new linker option, <code class="docutils literal notranslate"><span class="pre">-K</span></code>, that is used to align the header, text,
data, and loader sections of the output file so that each section begins on
a page boundary.</p></li>
</ul>
</section>
<section id="webassembly-support">
<h4>WebAssembly Support<a class="headerlink" href="#webassembly-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Shared library support (and PIC code generation) for WebAssembly is no longer
limited to the Emscripten target OS and now works with other targets such as
wasm32-wasi.  Note that the <a class="reference external" href="https://github.com/WebAssembly/tool-conventions/blob/main/DynamicLinking.md">format</a>
is not yet stable and may change between LLVM versions.  Also, WASI does not
yet have facilities to load dynamic libraries.</p></li>
</ul>
</section>
<section id="avr-support">
<h4>AVR Support<a class="headerlink" href="#avr-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>The definition of <code class="docutils literal notranslate"><span class="pre">USHRT_MAX</span></code> in the freestanding <code class="docutils literal notranslate"><span class="pre">&lt;limits.h&gt;</span></code> no longer
overflows on AVR (where <code class="docutils literal notranslate"><span class="pre">sizeof(int)</span> <span class="pre">==</span> <span class="pre">sizeof(unsigned</span> <span class="pre">short)</span></code>).  The type
of <code class="docutils literal notranslate"><span class="pre">USHRT_MAX</span></code> is now <code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span></code> instead of <code class="docutils literal notranslate"><span class="pre">int</span></code>, as required by
the C standard.</p></li>
</ul>
</section>
<section id="powerpc-support">
<h4>PowerPC Support<a class="headerlink" href="#powerpc-support" title="Link to this heading">¶</a></h4>
<ul class="simple">
<li><p>Clang now emits errors when it detects incompatible target features for
PowerPC builtins.</p></li>
</ul>
</section>
</section>
<section id="dwarf-support-in-clang">
<h3><a class="toc-backref" href="#id158" role="doc-backlink">DWARF Support in Clang</a><a class="headerlink" href="#dwarf-support-in-clang" title="Link to this heading">¶</a></h3>
</section>
<section id="floating-point-support-in-clang">
<h3><a class="toc-backref" href="#id159" role="doc-backlink">Floating Point Support in Clang</a><a class="headerlink" href="#floating-point-support-in-clang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_log</span></code> builtin for floating point types only.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_log10</span></code> builtin for floating point types only.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_log2</span></code> builtin for floating point types only.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_exp</span></code> builtin for floating point types only.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_exp2</span></code> builtin for floating point types only.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_set_flt_rounds</span></code> builtin for X86, x86_64, Arm and AArch64 only.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">__builtin_elementwise_pow</span></code> builtin for floating point types only.</p></li>
</ul>
</section>
<section id="ast-matchers">
<h3><a class="toc-backref" href="#id160" role="doc-backlink">AST Matchers</a><a class="headerlink" href="#ast-matchers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">coroutineBodyStmt</span></code> matcher.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">hasBody</span></code> matcher now matches coroutine body nodes in
<code class="docutils literal notranslate"><span class="pre">CoroutineBodyStmts</span></code>.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">arrayInitIndexExpr</span></code> and <code class="docutils literal notranslate"><span class="pre">arrayInitLoopExpr</span></code> matchers.</p></li>
</ul>
</section>
<section id="clang-format">
<h3><a class="toc-backref" href="#id161" role="doc-backlink">clang-format</a><a class="headerlink" href="#clang-format" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Add <code class="docutils literal notranslate"><span class="pre">NextLineOnly</span></code> style to option <code class="docutils literal notranslate"><span class="pre">PackConstructorInitializers</span></code>.
Compared to <code class="docutils literal notranslate"><span class="pre">NextLine</span></code> style, <code class="docutils literal notranslate"><span class="pre">NextLineOnly</span></code> style will not try to
put the initializers on the current line first, instead, it will try to
put the initializers on the next line only.</p></li>
<li><p>Add additional Qualifier Ordering support for special cases such
as templates, requires clauses, long qualified names.</p></li>
<li><p>Fix all known issues associated with <code class="docutils literal notranslate"><span class="pre">LambdaBodyIndentation:</span> <span class="pre">OuterScope</span></code>.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">BracedInitializerIndentWidth</span></code> which can be used to configure
the indentation level of the contents of braced init lists.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">KeepEmptyLinesAtEOF</span></code> to keep empty lines at end of file.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">RemoveParentheses</span></code> to remove redundant parentheses.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">TypeNames</span></code> to treat listed non-keyword identifiers as type names.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">AlignConsecutiveShortCaseStatements</span></code> which can be used to align case
labels in conjunction with <code class="docutils literal notranslate"><span class="pre">AllowShortCaseLabelsOnASingleLine</span></code>.</p></li>
<li><p>Add <code class="docutils literal notranslate"><span class="pre">SpacesInParens</span></code> style with <code class="docutils literal notranslate"><span class="pre">SpacesInParensOptions</span></code> to replace
<code class="docutils literal notranslate"><span class="pre">SpacesInConditionalStatement</span></code>, <code class="docutils literal notranslate"><span class="pre">SpacesInCStyleCastParentheses</span></code>,
<code class="docutils literal notranslate"><span class="pre">SpaceInEmptyParentheses</span></code>, and <code class="docutils literal notranslate"><span class="pre">SpacesInParentheses</span></code>.</p></li>
</ul>
</section>
<section id="libclang">
<h3><a class="toc-backref" href="#id162" role="doc-backlink">libclang</a><a class="headerlink" href="#libclang" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Introduced the new function <code class="docutils literal notranslate"><span class="pre">clang_CXXMethod_isExplicit</span></code>,
which identifies whether a constructor or conversion function cursor
was marked with the explicit identifier.</p></li>
<li><p>Introduced the new <code class="docutils literal notranslate"><span class="pre">CXIndex</span></code> constructor function
<code class="docutils literal notranslate"><span class="pre">clang_createIndexWithOptions</span></code>, which allows storing precompiled preambles
in memory or overriding the precompiled preamble storage path.</p></li>
<li><p>Deprecated two functions <code class="docutils literal notranslate"><span class="pre">clang_CXIndex_setGlobalOptions</span></code> and
<code class="docutils literal notranslate"><span class="pre">clang_CXIndex_setInvocationEmissionPathOption</span></code> in favor of the new
function <code class="docutils literal notranslate"><span class="pre">clang_createIndexWithOptions</span></code> in order to improve thread safety.</p></li>
<li><p>Added check in <code class="docutils literal notranslate"><span class="pre">clang_getFieldDeclBitWidth</span></code> for whether a bit-field
has an evaluable bit width. Fixes undefined behavior when called on a
bit-field whose width depends on a template parameter.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">CXBinaryOperatorKind</span></code> and <code class="docutils literal notranslate"><span class="pre">CXUnaryOperatorKind</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/29138">#29138</a>)</p></li>
</ul>
</section>
<section id="static-analyzer">
<h3><a class="toc-backref" href="#id163" role="doc-backlink">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="Link to this heading">¶</a></h3>
<ul>
<li><p>Fix incorrect alignment attribute on the this parameter of certain
non-complete destructors when using the Microsoft ABI.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/60465">#60465</a>)</p></li>
<li><p>Removed the deprecated
<code class="docutils literal notranslate"><span class="pre">consider-single-element-arrays-as-flexible-array-members</span></code> analyzer option.
Any use of this flag will result in an error.
Use <a class="reference external" href="https://clang.llvm.org/docs/ClangCommandLineReference.html#cmdoption-clang-fstrict-flex-arrays">-fstrict-flex-arrays=&lt;n&gt;</a></p></li>
<li><p>Better modeling of lifetime-extended memory regions. As a result, the
<code class="docutils literal notranslate"><span class="pre">MoveChecker</span></code> raises more true-positive reports.</p></li>
<li><p>Fixed some bugs (including crashes) around the handling of constant global
arrays and their initializer expressions.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">CStringChecker</span></code> will invalidate less if the copy operation is
inferable to be bounded. For example, if the arguments of <code class="docutils literal notranslate"><span class="pre">strcpy</span></code> are
known to be of certain lengths and that are in-bounds.</p>
<blockquote>
<div><div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="kt">void</span><span class="w"> </span><span class="o">*</span><span class="n">ptr</span><span class="p">;</span>
<span class="w">  </span><span class="kt">char</span><span class="w"> </span><span class="n">arr</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
<span class="p">}</span><span class="w"> </span><span class="n">x</span><span class="p">;</span>
<span class="n">x</span><span class="p">.</span><span class="n">ptr</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">malloc</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="c1">// extent of &#39;arr&#39; is 4, and writing &quot;hi\n&quot; (4 characters),</span>
<span class="c1">// thus no buffer overflow can happen</span>
<span class="n">strcpy</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">arr</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;hi</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="n">free</span><span class="p">(</span><span class="n">x</span><span class="p">.</span><span class="n">ptr</span><span class="p">);</span><span class="w"> </span><span class="c1">// no longer reports memory leak here</span>
</pre></div>
</div>
</div></blockquote>
<p>Similarly, functions like <code class="docutils literal notranslate"><span class="pre">strsep</span></code> now won’t invalidate the object
containing the destination buffer, because it can never overflow.
Note that, <code class="docutils literal notranslate"><span class="pre">std::copy</span></code> is still not modeled, and as such, it will still
invalidate the enclosing object on call.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/55019">#55019</a>)</p>
</li>
<li><p>Implement <code class="docutils literal notranslate"><span class="pre">BufferOverlap</span></code> check for <code class="docutils literal notranslate"><span class="pre">sprint</span></code>/<code class="docutils literal notranslate"><span class="pre">snprintf</span></code>
The <code class="docutils literal notranslate"><span class="pre">CStringChecker</span></code> checks for buffer overlaps for <code class="docutils literal notranslate"><span class="pre">sprintf</span></code> and
<code class="docutils literal notranslate"><span class="pre">snprintf</span></code>.</p></li>
<li><p>Objective-C support was improved around checking <code class="docutils literal notranslate"><span class="pre">_Nonnull</span></code> and
<code class="docutils literal notranslate"><span class="pre">_Nullable</span></code> including block pointers and literal objects.</p></li>
<li><p>Let the <code class="docutils literal notranslate"><span class="pre">StreamChecker</span></code> detect <code class="docutils literal notranslate"><span class="pre">NULL</span></code> streams instead of by
<code class="docutils literal notranslate"><span class="pre">StdCLibraryFunctions</span></code>.
<code class="docutils literal notranslate"><span class="pre">StreamChecker</span></code> improved on the <code class="docutils literal notranslate"><span class="pre">fseek</span></code> modeling for the <code class="docutils literal notranslate"><span class="pre">SEEK_SET</span></code>,
<code class="docutils literal notranslate"><span class="pre">SEEK_END</span></code>, <code class="docutils literal notranslate"><span class="pre">SEEK_CUR</span></code> arguments.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">StdCLibraryFunctionArgs</span></code> was merged into the <code class="docutils literal notranslate"><span class="pre">StdCLibraryFunctions</span></code>.
The diagnostics of the <code class="docutils literal notranslate"><span class="pre">StdCLibraryFunctions</span></code> was improved.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">QTimer::singleShot</span></code> now doesn’t raise false-positives for memory leaks by
the <code class="docutils literal notranslate"><span class="pre">MallocChecker</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/39713">#39713</a>)</p></li>
<li><p>Fixed the infamous unsigned index false-positives in the
<code class="docutils literal notranslate"><span class="pre">ArrayBoundCheckerV2</span></code> checker.
(<a class="reference external" href="https://github.com/llvm/llvm-project/issues/44493">#44493</a>)</p></li>
<li><p>Now, taint propagations are tracked further back until the real taint source.
This improves all taint-related diagnostics.</p></li>
<li><p>Fixed a null-pointer dereference crash inside the <code class="docutils literal notranslate"><span class="pre">MoveChecker</span></code>.</p></li>
</ul>
</section>
<section id="sanitizers">
<span id="release-notes-sanitizers"></span><h3><a class="toc-backref" href="#id164" role="doc-backlink">Sanitizers</a><a class="headerlink" href="#sanitizers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Several more sanitizers are now ported to LoongArch: MSan, DFsan, Profile, XRay and libFuzzer.</p></li>
</ul>
</section>
<section id="python-binding-changes">
<h3><a class="toc-backref" href="#id165" role="doc-backlink">Python Binding Changes</a><a class="headerlink" href="#python-binding-changes" title="Link to this heading">¶</a></h3>
<p>The following methods have been added:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">clang_Location_isInSystemHeader</span></code> exposed via the <code class="docutils literal notranslate"><span class="pre">is_in_system_header</span></code>
property of the <cite>Location</cite> class.</p></li>
</ul>
</section>
<section id="configurable-multilib">
<h3><a class="toc-backref" href="#id166" role="doc-backlink">Configurable Multilib</a><a class="headerlink" href="#configurable-multilib" title="Link to this heading">¶</a></h3>
<p>The BareMetal toolchain for AArch64 &amp; ARM now supports multilib, configurable
via <code class="docutils literal notranslate"><span class="pre">multilib.yaml</span></code>. See <a class="reference external" href="https://clang.llvm.org/docs/Multilib.html">the multilib docs</a>
for more details.</p>
</section>
</section>
<section id="additional-information">
<h2><a class="toc-backref" href="#id167" role="doc-backlink">Additional Information</a><a class="headerlink" href="#additional-information" title="Link to this heading">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="https://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Git version of
the source code. You can access versions of these documents specific to
this release by going into the “<code class="docutils literal notranslate"><span class="pre">clang/docs/</span></code>” directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us on the <a class="reference external" href="https://discourse.llvm.org/c/clang/6">Discourse forums (Clang Frontend category)</a>.</p>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2007-2023, The Clang Team.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.5.
    </div>
  </body>
</html>