
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>1. Available Checkers &#8212; Clang 12 documentation</title>
    <link rel="stylesheet" href="../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="2. User Docs" href="user-docs.html" />
    <link rel="prev" title="Clang Static Analyzer" href="../ClangStaticAnalyzer.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>Clang 12 documentation</span></a></h1>
        <h2 class="heading"><span>1. Available Checkers</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="../ClangStaticAnalyzer.html">Clang Static Analyzer</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="user-docs.html">2. User Docs</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="available-checkers">
<h1><a class="toc-backref" href="#id34">1. Available Checkers</a><a class="headerlink" href="#available-checkers" title="Permalink to this headline">¶</a></h1>
<p>The analyzer performs checks that are categorized into families or “checkers”.</p>
<p>The default set of checkers covers a variety of checks targeted at finding security and API usage bugs,
dead code, and other logic errors. See the <a class="reference internal" href="#default-checkers"><span class="std std-ref">Default Checkers</span></a> checkers list below.</p>
<p>In addition to these, the analyzer contains a number of <a class="reference internal" href="#alpha-checkers"><span class="std std-ref">Experimental Checkers</span></a> (aka <em>alpha</em> checkers).
These checkers are under development and are switched off by default. They may crash or emit a higher number of false positives.</p>
<p>The <a class="reference internal" href="#id19"><span class="std std-ref">debug</span></a> package contains checkers for analyzer developers for debugging purposes.</p>
<div class="contents topic" id="table-of-contents">
<p class="topic-title first">Table of Contents</p>
<ul class="simple">
<li><p><a class="reference internal" href="#available-checkers" id="id34">Available Checkers</a></p>
<ul>
<li><p><a class="reference internal" href="#default-checkers" id="id35">Default Checkers</a></p>
<ul>
<li><p><a class="reference internal" href="#core" id="id36">core</a></p>
<ul>
<li><p><a class="reference internal" href="#core-callandmessage-c-c-objc" id="id37">core.CallAndMessage (C, C++, ObjC)</a></p></li>
<li><p><a class="reference internal" href="#core-dividezero-c-c-objc" id="id38">core.DivideZero (C, C++, ObjC)</a></p></li>
<li><p><a class="reference internal" href="#core-nonnullparamchecker-c-c-objc" id="id39">core.NonNullParamChecker (C, C++, ObjC)</a></p></li>
<li><p><a class="reference internal" href="#core-nulldereference-c-c-objc" id="id40">core.NullDereference (C, C++, ObjC)</a></p></li>
<li><p><a class="reference internal" href="#core-stackaddressescape-c" id="id41">core.StackAddressEscape (C)</a></p></li>
<li><p><a class="reference internal" href="#core-undefinedbinaryoperatorresult-c" id="id42">core.UndefinedBinaryOperatorResult (C)</a></p></li>
<li><p><a class="reference internal" href="#core-vlasize-c" id="id43">core.VLASize (C)</a></p></li>
<li><p><a class="reference internal" href="#core-uninitialized-arraysubscript-c" id="id44">core.uninitialized.ArraySubscript (C)</a></p></li>
<li><p><a class="reference internal" href="#core-uninitialized-assign-c" id="id45">core.uninitialized.Assign (C)</a></p></li>
<li><p><a class="reference internal" href="#core-uninitialized-branch-c" id="id46">core.uninitialized.Branch (C)</a></p></li>
<li><p><a class="reference internal" href="#core-uninitialized-capturedblockvariable-c" id="id47">core.uninitialized.CapturedBlockVariable (C)</a></p></li>
<li><p><a class="reference internal" href="#core-uninitialized-undefreturn-c" id="id48">core.uninitialized.UndefReturn (C)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#cplusplus" id="id49">cplusplus</a></p>
<ul>
<li><p><a class="reference internal" href="#cplusplus-innerpointer-c" id="id50">cplusplus.InnerPointer (C++)</a></p></li>
<li><p><a class="reference internal" href="#cplusplus-newdelete-c" id="id51">cplusplus.NewDelete (C++)</a></p></li>
<li><p><a class="reference internal" href="#cplusplus-newdeleteleaks-c" id="id52">cplusplus.NewDeleteLeaks (C++)</a></p></li>
<li><p><a class="reference internal" href="#cplusplus-placementnewchecker-c" id="id53">cplusplus.PlacementNewChecker (C++)</a></p></li>
<li><p><a class="reference internal" href="#cplusplus-selfassignment-c" id="id54">cplusplus.SelfAssignment (C++)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#deadcode" id="id55">deadcode</a></p>
<ul>
<li><p><a class="reference internal" href="#deadcode-deadstores-c" id="id56">deadcode.DeadStores (C)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#nullability" id="id57">nullability</a></p>
<ul>
<li><p><a class="reference internal" href="#nullability-nullpassedtononnull-objc" id="id58">nullability.NullPassedToNonnull (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#nullability-nullreturnedfromnonnull-objc" id="id59">nullability.NullReturnedFromNonnull (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#nullability-nullabledereferenced-objc" id="id60">nullability.NullableDereferenced (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#nullability-nullablepassedtononnull-objc" id="id61">nullability.NullablePassedToNonnull (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#nullability-nullablereturnedfromnonnull-objc" id="id62">nullability.NullableReturnedFromNonnull (ObjC)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#optin" id="id63">optin</a></p>
<ul>
<li><p><a class="reference internal" href="#optin-cplusplus-uninitializedobject-c" id="id64">optin.cplusplus.UninitializedObject (C++)</a></p></li>
<li><p><a class="reference internal" href="#optin-cplusplus-virtualcall-c" id="id65">optin.cplusplus.VirtualCall (C++)</a></p></li>
<li><p><a class="reference internal" href="#optin-mpi-mpi-checker-c" id="id66">optin.mpi.MPI-Checker (C)</a></p></li>
<li><p><a class="reference internal" href="#optin-osx-cocoa-localizability-emptylocalizationcontextchecker-objc" id="id67">optin.osx.cocoa.localizability.EmptyLocalizationContextChecker (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#optin-osx-cocoa-localizability-nonlocalizedstringchecker-objc" id="id68">optin.osx.cocoa.localizability.NonLocalizedStringChecker (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#optin-performance-gcdantipattern" id="id69">optin.performance.GCDAntipattern</a></p></li>
<li><p><a class="reference internal" href="#optin-performance-padding" id="id70">optin.performance.Padding</a></p></li>
<li><p><a class="reference internal" href="#optin-portability-unixapi" id="id71">optin.portability.UnixAPI</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#security" id="id72">security</a></p>
<ul>
<li><p><a class="reference internal" href="#security-floatloopcounter-c" id="id73">security.FloatLoopCounter (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-uncheckedreturn-c" id="id74">security.insecureAPI.UncheckedReturn (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-bcmp-c" id="id75">security.insecureAPI.bcmp (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-bcopy-c" id="id76">security.insecureAPI.bcopy (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-bzero-c" id="id77">security.insecureAPI.bzero (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-getpw-c" id="id78">security.insecureAPI.getpw (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-gets-c" id="id79">security.insecureAPI.gets (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-mkstemp-c" id="id80">security.insecureAPI.mkstemp (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-mktemp-c" id="id81">security.insecureAPI.mktemp (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-rand-c" id="id82">security.insecureAPI.rand (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-strcpy-c" id="id83">security.insecureAPI.strcpy (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-vfork-c" id="id84">security.insecureAPI.vfork (C)</a></p></li>
<li><p><a class="reference internal" href="#security-insecureapi-deprecatedorunsafebufferhandling-c" id="id85">security.insecureAPI.DeprecatedOrUnsafeBufferHandling (C)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#unix" id="id86">unix</a></p>
<ul>
<li><p><a class="reference internal" href="#unix-api-c" id="id87">unix.API (C)</a></p></li>
<li><p><a class="reference internal" href="#unix-malloc-c" id="id88">unix.Malloc (C)</a></p></li>
<li><p><a class="reference internal" href="#unix-mallocsizeof-c" id="id89">unix.MallocSizeof (C)</a></p></li>
<li><p><a class="reference internal" href="#unix-mismatcheddeallocator-c-c" id="id90">unix.MismatchedDeallocator (C, C++)</a></p></li>
<li><p><a class="reference internal" href="#unix-vfork-c" id="id91">unix.Vfork (C)</a></p></li>
<li><p><a class="reference internal" href="#unix-cstring-badsizearg-c" id="id92">unix.cstring.BadSizeArg (C)</a></p></li>
<li><p><a class="reference internal" href="#unix-cstrisng-nullarg-c" id="id93">unix.cstrisng.NullArg (C)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#osx" id="id94">osx</a></p>
<ul>
<li><p><a class="reference internal" href="#osx-api-c" id="id95">osx.API (C)</a></p></li>
<li><p><a class="reference internal" href="#osx-numberobjectconversion-c-c-objc" id="id96">osx.NumberObjectConversion (C, C++, ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-objcproperty-objc" id="id97">osx.ObjCProperty (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-seckeychainapi-c" id="id98">osx.SecKeychainAPI (C)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-atsync-objc" id="id99">osx.cocoa.AtSync (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-autoreleasewrite" id="id100">osx.cocoa.AutoreleaseWrite</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-classrelease-objc" id="id101">osx.cocoa.ClassRelease (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-dealloc-objc" id="id102">osx.cocoa.Dealloc (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-incompatiblemethodtypes-objc" id="id103">osx.cocoa.IncompatibleMethodTypes (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-loops" id="id104">osx.cocoa.Loops</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-missingsupercall-objc" id="id105">osx.cocoa.MissingSuperCall (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-nsautoreleasepool-objc" id="id106">osx.cocoa.NSAutoreleasePool (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-nserror-objc" id="id107">osx.cocoa.NSError (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-nilarg-objc" id="id108">osx.cocoa.NilArg (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-nonnilreturnvalue" id="id109">osx.cocoa.NonNilReturnValue</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-objcgenerics-objc" id="id110">osx.cocoa.ObjCGenerics (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-retaincount-objc" id="id111">osx.cocoa.RetainCount (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-runloopautoreleaseleak" id="id112">osx.cocoa.RunLoopAutoreleaseLeak</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-selfinit-objc" id="id113">osx.cocoa.SelfInit (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-superdealloc-objc" id="id114">osx.cocoa.SuperDealloc (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-unusedivars-objc" id="id115">osx.cocoa.UnusedIvars (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-cocoa-variadicmethodtypes-objc" id="id116">osx.cocoa.VariadicMethodTypes (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#osx-corefoundation-cferror-c" id="id117">osx.coreFoundation.CFError (C)</a></p></li>
<li><p><a class="reference internal" href="#osx-corefoundation-cfnumber-c" id="id118">osx.coreFoundation.CFNumber (C)</a></p></li>
<li><p><a class="reference internal" href="#osx-corefoundation-cfretainrelease-c" id="id119">osx.coreFoundation.CFRetainRelease (C)</a></p></li>
<li><p><a class="reference internal" href="#osx-corefoundation-containers-outofbounds-c" id="id120">osx.coreFoundation.containers.OutOfBounds (C)</a></p></li>
<li><p><a class="reference internal" href="#osx-corefoundation-containers-pointersizedvalues-c" id="id121">osx.coreFoundation.containers.PointerSizedValues (C)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#fuchsia" id="id122">Fuchsia</a></p>
<ul>
<li><p><a class="reference internal" href="#fuchsia-handlechecker" id="id123">fuchsia.HandleChecker</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#webkit" id="id124">WebKit</a></p>
<ul>
<li><p><a class="reference internal" href="#webkit-refcntblbasevirtualdtor" id="id125">webkit.RefCntblBaseVirtualDtor</a></p></li>
<li><p><a class="reference internal" href="#webkit-nouncountedmemberchecker" id="id126">webkit.NoUncountedMemberChecker</a></p></li>
<li><p><a class="reference internal" href="#webkit-uncountedlambdacaptureschecker" id="id127">webkit.UncountedLambdaCapturesChecker</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#experimental-checkers" id="id128">Experimental Checkers</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-clone" id="id129">alpha.clone</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-clone-clonechecker-c-c-objc" id="id130">alpha.clone.CloneChecker (C, C++, ObjC)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-boolassignment-objc" id="id131">alpha.core.BoolAssignment (ObjC)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-core" id="id132">alpha.core</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-core-c11lock" id="id133">alpha.core.C11Lock</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-callandmessageuninitrefarg-c-c-objc" id="id134">alpha.core.CallAndMessageUnInitRefArg (C,C++, ObjC)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-castsize-c" id="id135">alpha.core.CastSize (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-casttostruct-c-c" id="id136">alpha.core.CastToStruct (C, C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-conversion-c-c-objc" id="id137">alpha.core.Conversion (C, C++, ObjC)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-dynamictypechecker-objc" id="id138">alpha.core.DynamicTypeChecker (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-fixedaddr-c" id="id139">alpha.core.FixedAddr (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-identicalexpr-c-c" id="id140">alpha.core.IdenticalExpr (C, C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-pointerarithm-c" id="id141">alpha.core.PointerArithm (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-pointersub-c" id="id142">alpha.core.PointerSub (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-sizeofptr-c" id="id143">alpha.core.SizeofPtr (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-stackaddressasyncescape-c" id="id144">alpha.core.StackAddressAsyncEscape (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-core-testafterdivzero-c" id="id145">alpha.core.TestAfterDivZero (C)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-cplusplus" id="id146">alpha.cplusplus</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-cplusplus-deletewithnonvirtualdtor-c" id="id147">alpha.cplusplus.DeleteWithNonVirtualDtor (C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-cplusplus-enumcastoutofrange-c" id="id148">alpha.cplusplus.EnumCastOutOfRange (C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-cplusplus-invalidatediterator-c" id="id149">alpha.cplusplus.InvalidatedIterator (C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-cplusplus-iteratorrange-c" id="id150">alpha.cplusplus.IteratorRange (C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-cplusplus-mismatchediterator-c" id="id151">alpha.cplusplus.MismatchedIterator (C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-cplusplus-misusedmovedobject-c" id="id152">alpha.cplusplus.MisusedMovedObject (C++)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-deadcode" id="id153">alpha.deadcode</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-deadcode-unreachablecode-c-c" id="id154">alpha.deadcode.UnreachableCode (C, C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-cplusplus-smartptr-c" id="id155">alpha.cplusplus.SmartPtr (C++)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-fuchsia" id="id156">alpha.fuchsia</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-fuchsia-lock" id="id157">alpha.fuchsia.Lock</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-llvm" id="id158">alpha.llvm</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-llvm-conventions" id="id159">alpha.llvm.Conventions</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-osx" id="id160">alpha.osx</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-osx-cocoa-directivarassignment-objc" id="id161">alpha.osx.cocoa.DirectIvarAssignment (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#alpha-osx-cocoa-directivarassignmentforannotatedfunctions-objc" id="id162">alpha.osx.cocoa.DirectIvarAssignmentForAnnotatedFunctions (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#alpha-osx-cocoa-instancevariableinvalidation-objc" id="id163">alpha.osx.cocoa.InstanceVariableInvalidation (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#alpha-osx-cocoa-missinginvalidationmethod-objc" id="id164">alpha.osx.cocoa.MissingInvalidationMethod (ObjC)</a></p></li>
<li><p><a class="reference internal" href="#alpha-osx-cocoa-localizability-pluralmisusechecker-objc" id="id165">alpha.osx.cocoa.localizability.PluralMisuseChecker (ObjC)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-security" id="id166">alpha.security</a></p></li>
<li><p><a class="reference internal" href="#alpha-security-cert" id="id167">alpha.security.cert</a></p></li>
<li><p><a class="reference internal" href="#alpha-security-cert-pos" id="id168">alpha.security.cert.pos</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-security-cert-pos-34c" id="id169">alpha.security.cert.pos.34c</a></p></li>
<li><p><a class="reference internal" href="#alpha-security-arraybound-c" id="id170">alpha.security.ArrayBound (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-security-arrayboundv2-c" id="id171">alpha.security.ArrayBoundV2 (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-security-mallocoverflow-c" id="id172">alpha.security.MallocOverflow (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-security-mmapwriteexec-c" id="id173">alpha.security.MmapWriteExec (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-security-returnptrrange-c" id="id174">alpha.security.ReturnPtrRange (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-security-taint-taintpropagation-c-c" id="id175">alpha.security.taint.TaintPropagation (C, C++)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-unix" id="id176">alpha.unix</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-unix-blockincriticalsection-c" id="id177">alpha.unix.BlockInCriticalSection (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-unix-chroot-c" id="id178">alpha.unix.Chroot (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-unix-pthreadlock-c" id="id179">alpha.unix.PthreadLock (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-unix-simplestream-c" id="id180">alpha.unix.SimpleStream (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-unix-stream-c" id="id181">alpha.unix.Stream (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-unix-cstring-bufferoverlap-c" id="id182">alpha.unix.cstring.BufferOverlap (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-unix-cstring-notnullterminated-c" id="id183">alpha.unix.cstring.NotNullTerminated (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-unix-cstring-outofbounds-c" id="id184">alpha.unix.cstring.OutOfBounds (C)</a></p></li>
<li><p><a class="reference internal" href="#alpha-nondeterminism-pointeriteration-c" id="id185">alpha.nondeterminism.PointerIteration (C++)</a></p></li>
<li><p><a class="reference internal" href="#alpha-nondeterminism-pointersorting-c" id="id186">alpha.nondeterminism.PointerSorting (C++)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#alpha-webkit" id="id187">alpha.WebKit</a></p>
<ul>
<li><p><a class="reference internal" href="#alpha-webkit-uncountedcallargschecker" id="id188">alpha.webkit.UncountedCallArgsChecker</a></p></li>
<li><p><a class="reference internal" href="#alpha-webkit-uncountedlocalvarschecker" id="id189">alpha.webkit.UncountedLocalVarsChecker</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#debug-checkers" id="id190">Debug Checkers</a></p>
<ul>
<li><p><a class="reference internal" href="#debug" id="id191">debug</a></p>
<ul>
<li><p><a class="reference internal" href="#debug-analysisorder" id="id192">debug.AnalysisOrder</a></p></li>
<li><p><a class="reference internal" href="#debug-configdumper" id="id193">debug.ConfigDumper</a></p></li>
<li><p><a class="reference internal" href="#debug-dumpcfg-display" id="id194">debug.DumpCFG Display</a></p></li>
<li><p><a class="reference internal" href="#debug-dumpcallgraph" id="id195">debug.DumpCallGraph</a></p></li>
<li><p><a class="reference internal" href="#debug-dumpcalls" id="id196">debug.DumpCalls</a></p></li>
<li><p><a class="reference internal" href="#debug-dumpdominators" id="id197">debug.DumpDominators</a></p></li>
<li><p><a class="reference internal" href="#debug-dumplivevars" id="id198">debug.DumpLiveVars</a></p></li>
<li><p><a class="reference internal" href="#debug-dumptraversal" id="id199">debug.DumpTraversal</a></p></li>
<li><p><a class="reference internal" href="#debug-exprinspection" id="id200">debug.ExprInspection</a></p></li>
<li><p><a class="reference internal" href="#debug-stats" id="id201">debug.Stats</a></p></li>
<li><p><a class="reference internal" href="#debug-tainttest" id="id202">debug.TaintTest</a></p></li>
<li><p><a class="reference internal" href="#debug-viewcfg" id="id203">debug.ViewCFG</a></p></li>
<li><p><a class="reference internal" href="#debug-viewcallgraph" id="id204">debug.ViewCallGraph</a></p></li>
<li><p><a class="reference internal" href="#debug-viewexplodedgraph" id="id205">debug.ViewExplodedGraph</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="section" id="default-checkers">
<span id="id1"></span><h2><a class="toc-backref" href="#id35">1.1. Default Checkers</a><a class="headerlink" href="#default-checkers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="core">
<span id="core-checkers"></span><h3><a class="toc-backref" href="#id36">1.1.1. core</a><a class="headerlink" href="#core" title="Permalink to this headline">¶</a></h3>
<p>Models core language features and contains general-purpose checkers such as division by zero,
null pointer dereference, usage of uninitialized values, etc.
<em>These checkers must be always switched on as other checker rely on them.</em></p>
<div class="section" id="core-callandmessage-c-c-objc">
<span id="core-callandmessage"></span><h4><a class="toc-backref" href="#id37">1.1.1.1. core.CallAndMessage (C, C++, ObjC)</a><a class="headerlink" href="#core-callandmessage-c-c-objc" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Check for logical errors for function calls and Objective-C message expressions (e.g., uninitialized arguments, null function pointers).</p>
</div></blockquote>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="c1">//C</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
   <span class="kt">void</span> <span class="p">(</span><span class="o">*</span><span class="n">foo</span><span class="p">)(</span><span class="kt">void</span><span class="p">);</span>
   <span class="n">foo</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">foo</span><span class="p">();</span> <span class="c1">// warn: function pointer is null</span>
 <span class="p">}</span>

 <span class="c1">// C++</span>
 <span class="k">class</span> <span class="n">C</span> <span class="p">{</span>
 <span class="nl">public</span><span class="p">:</span>
   <span class="kt">void</span> <span class="n">f</span><span class="p">();</span>
 <span class="p">};</span>

 <span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">C</span> <span class="o">*</span><span class="n">pc</span><span class="p">;</span>
   <span class="n">pc</span><span class="o">-&gt;</span><span class="n">f</span><span class="p">();</span> <span class="c1">// warn: object pointer is uninitialized</span>
 <span class="p">}</span>

 <span class="c1">// C++</span>
 <span class="k">class</span> <span class="n">C</span> <span class="p">{</span>
 <span class="nl">public</span><span class="p">:</span>
   <span class="kt">void</span> <span class="n">f</span><span class="p">();</span>
 <span class="p">};</span>

 <span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
   <span class="n">C</span> <span class="o">*</span><span class="n">pc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
   <span class="n">pc</span><span class="o">-&gt;</span><span class="n">f</span><span class="p">();</span> <span class="c1">// warn: object pointer is null</span>
 <span class="p">}</span>

 <span class="c1">// Objective-C</span>
 <span class="k">@interface</span> <span class="bp">MyClass</span> : <span class="bp">NSObject</span>
 <span class="k">@property</span> <span class="p">(</span><span class="k">readwrite</span><span class="p">,</span><span class="k">assign</span><span class="p">)</span> <span class="kt">id</span> <span class="n">x</span><span class="p">;</span>
 <span class="o">-</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">double</span><span class="p">)</span><span class="n">longDoubleM</span><span class="p">;</span>
 <span class="k">@end</span>

 <span class="kt">void</span> <span class="n">test</span><span class="p">()</span> <span class="p">{</span>
   <span class="bp">MyClass</span> <span class="o">*</span><span class="n">obj1</span><span class="p">;</span>
   <span class="kt">long</span> <span class="kt">double</span> <span class="n">ld1</span> <span class="o">=</span> <span class="p">[</span><span class="n">obj1</span> <span class="n">longDoubleM</span><span class="p">];</span>
     <span class="c1">// warn: receiver is uninitialized</span>
 <span class="p">}</span>

 <span class="c1">// Objective-C</span>
 <span class="k">@interface</span> <span class="bp">MyClass</span> : <span class="bp">NSObject</span>
 <span class="k">@property</span> <span class="p">(</span><span class="k">readwrite</span><span class="p">,</span><span class="k">assign</span><span class="p">)</span> <span class="kt">id</span> <span class="n">x</span><span class="p">;</span>
 <span class="o">-</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">double</span><span class="p">)</span><span class="n">longDoubleM</span><span class="p">;</span>
 <span class="k">@end</span>

 <span class="kt">void</span> <span class="n">test</span><span class="p">()</span> <span class="p">{</span>
   <span class="bp">MyClass</span> <span class="o">*</span><span class="n">obj1</span><span class="p">;</span>
   <span class="kt">id</span> <span class="n">i</span> <span class="o">=</span> <span class="n">obj1</span><span class="p">.</span><span class="n">x</span><span class="p">;</span> <span class="c1">// warn: uninitialized object pointer</span>
 <span class="p">}</span>

 <span class="c1">// Objective-C</span>
 <span class="k">@interface</span> <span class="nc">Subscriptable</span> : <span class="bp">NSObject</span>
 <span class="o">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nl">objectAtIndexedSubscript</span><span class="p">:(</span><span class="kt">unsigned</span> <span class="kt">int</span><span class="p">)</span><span class="n">index</span><span class="p">;</span>
 <span class="k">@end</span>

 <span class="k">@interface</span> <span class="bp">MyClass</span> : <span class="nc">Subscriptable</span>
 <span class="k">@property</span> <span class="p">(</span><span class="k">readwrite</span><span class="p">,</span><span class="k">assign</span><span class="p">)</span> <span class="kt">id</span> <span class="n">x</span><span class="p">;</span>
 <span class="o">-</span> <span class="p">(</span><span class="kt">long</span> <span class="kt">double</span><span class="p">)</span><span class="n">longDoubleM</span><span class="p">;</span>
 <span class="k">@end</span>

 <span class="kt">void</span> <span class="n">test</span><span class="p">()</span> <span class="p">{</span>
   <span class="bp">MyClass</span> <span class="o">*</span><span class="n">obj1</span><span class="p">;</span>
   <span class="kt">id</span> <span class="n">i</span> <span class="o">=</span> <span class="n">obj1</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="c1">// warn: uninitialized object pointer</span>
 <span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-dividezero-c-c-objc">
<span id="core-dividezero"></span><h4><a class="toc-backref" href="#id38">1.1.1.2. core.DivideZero (C, C++, ObjC)</a><a class="headerlink" href="#core-dividezero-c-c-objc" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Check for division by zero.</p>
</div></blockquote>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="n">z</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">z</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span> <span class="o">/</span> <span class="n">z</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">%</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-nonnullparamchecker-c-c-objc">
<span id="core-nonnullparamchecker"></span><h4><a class="toc-backref" href="#id39">1.1.1.3. core.NonNullParamChecker (C, C++, ObjC)</a><a class="headerlink" href="#core-nonnullparamchecker-c-c-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for null pointers passed as arguments to a function whose arguments are references or marked with the ‘nonnull’ attribute.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="n">__attribute__</span><span class="p">((</span><span class="n">nonnull</span><span class="p">));</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">)</span>
    <span class="n">f</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-nulldereference-c-c-objc">
<span id="core-nulldereference"></span><h4><a class="toc-backref" href="#id40">1.1.1.4. core.NullDereference (C, C++, ObjC)</a><a class="headerlink" href="#core-nulldereference-c-c-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for dereferences of null pointers.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="c1">// C</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">return</span><span class="p">;</span>

  <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// C</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">)</span>
    <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// C++</span>
<span class="k">class</span> <span class="n">C</span> <span class="p">{</span>
<span class="nl">public</span><span class="p">:</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">C</span> <span class="o">*</span><span class="n">pc</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">k</span> <span class="o">=</span> <span class="n">pc</span><span class="o">-&gt;</span><span class="n">x</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// Objective-C</span>
<span class="k">@interface</span> <span class="bp">MyClass</span> <span class="p">{</span>
<span class="k">@public</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="kt">void</span> <span class="n">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="bp">MyClass</span> <span class="o">*</span><span class="n">obj</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">obj</span><span class="o">-&gt;</span><span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-stackaddressescape-c">
<span id="core-stackaddressescape"></span><h4><a class="toc-backref" href="#id41">1.1.1.5. core.StackAddressEscape (C)</a><a class="headerlink" href="#core-stackaddressescape-c" title="Permalink to this headline">¶</a></h4>
<p>Check that addresses to stack memory do not escape the function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">char</span> <span class="k">const</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="k">const</span> <span class="n">str</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;string&quot;</span><span class="p">;</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">str</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span><span class="o">*</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
   <span class="k">return</span> <span class="n">__builtin_alloca</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">static</span> <span class="kt">int</span> <span class="o">*</span><span class="n">x</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">y</span><span class="p">;</span>
  <span class="n">x</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">y</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-undefinedbinaryoperatorresult-c">
<span id="core-undefinedbinaryoperatorresult"></span><h4><a class="toc-backref" href="#id42">1.1.1.6. core.UndefinedBinaryOperatorResult (C)</a><a class="headerlink" href="#core-undefinedbinaryoperatorresult-c" title="Permalink to this headline">¶</a></h4>
<p>Check for undefined results of binary operators.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// warn: left operand is garbage</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-vlasize-c">
<span id="core-vlasize"></span><h4><a class="toc-backref" href="#id43">1.1.1.7. core.VLASize (C)</a><a class="headerlink" href="#core-vlasize-c" title="Permalink to this headline">¶</a></h4>
<p>Check for declarations of Variable Length Arrays of undefined or zero size.</p>
<blockquote>
<div><p>Check for declarations of VLA of undefined or zero size.</p>
</div></blockquote>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">vla1</span><span class="p">[</span><span class="n">x</span><span class="p">];</span> <span class="c1">// warn: garbage as size</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">vla2</span><span class="p">[</span><span class="n">x</span><span class="p">];</span> <span class="c1">// warn: zero size</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-uninitialized-arraysubscript-c">
<span id="core-uninitialized-arraysubscript"></span><h4><a class="toc-backref" href="#id44">1.1.1.8. core.uninitialized.ArraySubscript (C)</a><a class="headerlink" href="#core-uninitialized-arraysubscript-c" title="Permalink to this headline">¶</a></h4>
<p>Check for uninitialized values used as array subscripts.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">,</span> <span class="n">a</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
  <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">a</span><span class="p">[</span><span class="n">i</span><span class="p">];</span> <span class="c1">// warn: array subscript is undefined</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-uninitialized-assign-c">
<span id="core-uninitialized-assign"></span><h4><a class="toc-backref" href="#id45">1.1.1.9. core.uninitialized.Assign (C)</a><a class="headerlink" href="#core-uninitialized-assign-c" title="Permalink to this headline">¶</a></h4>
<p>Check for assigning uninitialized values.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">x</span> <span class="o">|=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// warn: left expression is uninitialized</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-uninitialized-branch-c">
<span id="core-uninitialized-branch"></span><h4><a class="toc-backref" href="#id46">1.1.1.10. core.uninitialized.Branch (C)</a><a class="headerlink" href="#core-uninitialized-branch-c" title="Permalink to this headline">¶</a></h4>
<p>Check for uninitialized values used as branch conditions.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="c1">// warn</span>
    <span class="k">return</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-uninitialized-capturedblockvariable-c">
<span id="core-uninitialized-capturedblockvariable"></span><h4><a class="toc-backref" href="#id47">1.1.1.11. core.uninitialized.CapturedBlockVariable (C)</a><a class="headerlink" href="#core-uninitialized-capturedblockvariable-c" title="Permalink to this headline">¶</a></h4>
<p>Check for blocks that capture uninitialized values.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="o">^</span><span class="p">{</span> <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span> <span class="p">}();</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="core-uninitialized-undefreturn-c">
<span id="core-uninitialized-undefreturn"></span><h4><a class="toc-backref" href="#id48">1.1.1.12. core.uninitialized.UndefReturn (C)</a><a class="headerlink" href="#core-uninitialized-undefreturn-c" title="Permalink to this headline">¶</a></h4>
<p>Check for uninitialized values being returned to the caller.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="cplusplus">
<span id="cplusplus-checkers"></span><h3><a class="toc-backref" href="#id49">1.1.2. cplusplus</a><a class="headerlink" href="#cplusplus" title="Permalink to this headline">¶</a></h3>
<p>C++ Checkers.</p>
<div class="section" id="cplusplus-innerpointer-c">
<span id="cplusplus-innerpointer"></span><h4><a class="toc-backref" href="#id50">1.1.2.1. cplusplus.InnerPointer (C++)</a><a class="headerlink" href="#cplusplus-innerpointer-c" title="Permalink to this headline">¶</a></h4>
<p>Check for inner pointers of C++ containers used after re/deallocation.</p>
<p>Many container methods in the C++ standard library are known to invalidate
“references” (including actual references, iterators and raw pointers) to
elements of the container. Using such references after they are invalidated
causes undefined behavior, which is a common source of memory errors in C++ that
this checker is capable of finding.</p>
<p>The checker is currently limited to <code class="docutils literal notranslate"><span class="pre">std::string</span></code> objects and doesn’t
recognize some of the more sophisticated approaches to passing unowned pointers
around, such as <code class="docutils literal notranslate"><span class="pre">std::string_view</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">deref_after_assignment</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">string</span> <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;llvm&quot;</span><span class="p">;</span>
  <span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">c</span> <span class="o">=</span> <span class="n">s</span><span class="p">.</span><span class="n">data</span><span class="p">();</span> <span class="c1">// note: pointer to inner buffer of &#39;std::string&#39; obtained here</span>
  <span class="n">s</span> <span class="o">=</span> <span class="s">&quot;clang&quot;</span><span class="p">;</span> <span class="c1">// note: inner buffer of &#39;std::string&#39; reallocated by call to &#39;operator=&#39;</span>
  <span class="n">consume</span><span class="p">(</span><span class="n">c</span><span class="p">);</span> <span class="c1">// warn: inner pointer of container used after re/deallocation</span>
<span class="p">}</span>

<span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="nf">return_temp</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">std</span><span class="o">::</span><span class="n">to_string</span><span class="p">(</span><span class="n">x</span><span class="p">).</span><span class="n">c_str</span><span class="p">();</span> <span class="c1">// warn: inner pointer of container used after re/deallocation</span>
  <span class="c1">// note: pointer to inner buffer of &#39;std::string&#39; obtained here</span>
  <span class="c1">// note: inner buffer of &#39;std::string&#39; deallocated by call to destructor</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cplusplus-newdelete-c">
<span id="cplusplus-newdelete"></span><h4><a class="toc-backref" href="#id51">1.1.2.2. cplusplus.NewDelete (C++)</a><a class="headerlink" href="#cplusplus-newdelete-c" title="Permalink to this headline">¶</a></h4>
<p>Check for double-free and use-after-free problems. Traces memory managed by new/delete.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">f</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">testUseMiddleArgAfterDelete</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
  <span class="n">f</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn: use after free</span>
<span class="p">}</span>

<span class="k">class</span> <span class="nc">SomeClass</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="kt">void</span> <span class="n">f</span><span class="p">();</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">SomeClass</span> <span class="o">*</span><span class="n">c</span> <span class="o">=</span> <span class="k">new</span> <span class="n">SomeClass</span><span class="p">;</span>
  <span class="k">delete</span> <span class="n">c</span><span class="p">;</span>
  <span class="n">c</span><span class="o">-&gt;</span><span class="n">f</span><span class="p">();</span> <span class="c1">// warn: use after free</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">__builtin_alloca</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
  <span class="k">delete</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// warn: deleting memory allocated by alloca</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">;</span>
  <span class="k">delete</span> <span class="n">p</span><span class="p">;</span>
  <span class="k">delete</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// warn: attempt to free released</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span><span class="p">;</span>
  <span class="k">delete</span> <span class="o">&amp;</span><span class="n">i</span><span class="p">;</span> <span class="c1">// warn: delete address of local</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="k">delete</span><span class="p">[]</span> <span class="p">(</span><span class="o">++</span><span class="n">p</span><span class="p">);</span>
    <span class="c1">// warn: argument to &#39;delete[]&#39; is offset by 4 bytes</span>
    <span class="c1">// from the start of memory allocated by &#39;new[]&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cplusplus-newdeleteleaks-c">
<span id="cplusplus-newdeleteleaks"></span><h4><a class="toc-backref" href="#id52">1.1.2.3. cplusplus.NewDeleteLeaks (C++)</a><a class="headerlink" href="#cplusplus-newdeleteleaks-c" title="Permalink to this headline">¶</a></h4>
<p>Check for memory leaks. Traces memory managed by new/delete.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="k">new</span> <span class="kt">int</span><span class="p">;</span>
<span class="p">}</span> <span class="c1">// warn</span>
</pre></div>
</div>
</div>
<div class="section" id="cplusplus-placementnewchecker-c">
<span id="cplusplus-placementnewchecker"></span><h4><a class="toc-backref" href="#id53">1.1.2.4. cplusplus.PlacementNewChecker (C++)</a><a class="headerlink" href="#cplusplus-placementnewchecker-c" title="Permalink to this headline">¶</a></h4>
<p>Check if default placement new is provided with pointers to sufficient storage capacity.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span> <span class="cpf">&lt;new&gt;</span><span class="cp"></span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">short</span> <span class="n">s</span><span class="p">;</span>
  <span class="kt">long</span> <span class="o">*</span><span class="n">lp</span> <span class="o">=</span> <span class="o">::</span><span class="k">new</span> <span class="p">(</span><span class="o">&amp;</span><span class="n">s</span><span class="p">)</span> <span class="kt">long</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="cplusplus-selfassignment-c">
<span id="cplusplus-selfassignment"></span><h4><a class="toc-backref" href="#id54">1.1.2.5. cplusplus.SelfAssignment (C++)</a><a class="headerlink" href="#cplusplus-selfassignment-c" title="Permalink to this headline">¶</a></h4>
<p>Checks C++ copy and move assignment operators for self assignment.</p>
</div>
</div>
<div class="section" id="deadcode">
<span id="deadcode-checkers"></span><h3><a class="toc-backref" href="#id55">1.1.3. deadcode</a><a class="headerlink" href="#deadcode" title="Permalink to this headline">¶</a></h3>
<p>Dead Code Checkers.</p>
<div class="section" id="deadcode-deadstores-c">
<span id="deadcode-deadstores"></span><h4><a class="toc-backref" href="#id56">1.1.3.1. deadcode.DeadStores (C)</a><a class="headerlink" href="#deadcode-deadstores-c" title="Permalink to this headline">¶</a></h4>
<p>Check for values stored to variables that are never read afterwards.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">WarnForDeadNestedAssignments</span></code> option enables the checker to emit
warnings for nested dead assignments. You can disable with the
<code class="docutils literal notranslate"><span class="pre">-analyzer-config</span> <span class="pre">deadcode.DeadStores:WarnForDeadNestedAssignments=false</span></code>.
<em>Defaults to true</em>.</p>
<p>Would warn for this e.g.:
if ((y = make_int())) {
}</p>
</div>
</div>
<div class="section" id="nullability">
<span id="nullability-checkers"></span><h3><a class="toc-backref" href="#id57">1.1.4. nullability</a><a class="headerlink" href="#nullability" title="Permalink to this headline">¶</a></h3>
<p>Objective C checkers that warn for null pointer passing and dereferencing errors.</p>
<div class="section" id="nullability-nullpassedtononnull-objc">
<span id="nullability-nullpassedtononnull"></span><h4><a class="toc-backref" href="#id58">1.1.4.1. nullability.NullPassedToNonnull (ObjC)</a><a class="headerlink" href="#nullability-nullpassedtononnull-objc" title="Permalink to this headline">¶</a></h4>
<p>Warns when a null pointer is passed to a pointer which has a _Nonnull type.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">if</span> <span class="p">(</span><span class="n">name</span> <span class="o">!=</span> <span class="nb">nil</span><span class="p">)</span>
  <span class="k">return</span><span class="p">;</span>
<span class="c1">// Warning: nil passed to a callee that requires a non-null 1st parameter</span>
<span class="bp">NSString</span> <span class="o">*</span><span class="n">greeting</span> <span class="o">=</span> <span class="p">[</span><span class="s">@&quot;Hello &quot;</span> <span class="nl">stringByAppendingString</span><span class="p">:</span><span class="n">name</span><span class="p">];</span>
</pre></div>
</div>
</div>
<div class="section" id="nullability-nullreturnedfromnonnull-objc">
<span id="nullability-nullreturnedfromnonnull"></span><h4><a class="toc-backref" href="#id59">1.1.4.2. nullability.NullReturnedFromNonnull (ObjC)</a><a class="headerlink" href="#nullability-nullreturnedfromnonnull-objc" title="Permalink to this headline">¶</a></h4>
<p>Warns when a null pointer is returned from a function that has _Nonnull return type.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="n">nonnull</span> <span class="kt">id</span><span class="p">)</span><span class="nf">firstChild</span> <span class="p">{</span>
  <span class="kt">id</span> <span class="n">result</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">([</span><span class="n">_children</span> <span class="n">count</span><span class="p">]</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span>
    <span class="n">result</span> <span class="o">=</span> <span class="n">_children</span><span class="p">[</span><span class="mi">0</span><span class="p">];</span>

  <span class="c1">// Warning: nil returned from a method that is expected</span>
  <span class="c1">// to return a non-null value</span>
  <span class="k">return</span> <span class="n">result</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="nullability-nullabledereferenced-objc">
<span id="nullability-nullabledereferenced"></span><h4><a class="toc-backref" href="#id60">1.1.4.3. nullability.NullableDereferenced (ObjC)</a><a class="headerlink" href="#nullability-nullabledereferenced-objc" title="Permalink to this headline">¶</a></h4>
<p>Warns when a nullable pointer is dereferenced.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">LinkedList</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">data</span><span class="p">;</span>
  <span class="k">struct</span> <span class="n">LinkedList</span> <span class="o">*</span><span class="n">next</span><span class="p">;</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">LinkedList</span> <span class="o">*</span> <span class="n">_Nullable</span> <span class="nf">getNext</span><span class="p">(</span><span class="k">struct</span> <span class="n">LinkedList</span> <span class="o">*</span><span class="n">l</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">updateNextData</span><span class="p">(</span><span class="k">struct</span> <span class="n">LinkedList</span> <span class="o">*</span><span class="n">list</span><span class="p">,</span> <span class="kt">int</span> <span class="n">newData</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="n">LinkedList</span> <span class="o">*</span><span class="n">next</span> <span class="o">=</span> <span class="n">getNext</span><span class="p">(</span><span class="n">list</span><span class="p">);</span>
  <span class="c1">// Warning: Nullable pointer is dereferenced</span>
  <span class="n">next</span><span class="o">-&gt;</span><span class="n">data</span> <span class="o">=</span> <span class="mi">7</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="nullability-nullablepassedtononnull-objc">
<span id="nullability-nullablepassedtononnull"></span><h4><a class="toc-backref" href="#id61">1.1.4.4. nullability.NullablePassedToNonnull (ObjC)</a><a class="headerlink" href="#nullability-nullablepassedtononnull-objc" title="Permalink to this headline">¶</a></h4>
<p>Warns when a nullable pointer is passed to a pointer which has a _Nonnull type.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">typedef</span> <span class="k">struct</span> <span class="n">Dummy</span> <span class="p">{</span> <span class="kt">int</span> <span class="n">val</span><span class="p">;</span> <span class="p">}</span> <span class="n">Dummy</span><span class="p">;</span>
<span class="n">Dummy</span> <span class="o">*</span><span class="n">_Nullable</span> <span class="nf">returnsNullable</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">takesNonnull</span><span class="p">(</span><span class="n">Dummy</span> <span class="o">*</span><span class="n">_Nonnull</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">Dummy</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">returnsNullable</span><span class="p">();</span>
  <span class="n">takesNonnull</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="nullability-nullablereturnedfromnonnull-objc">
<span id="nullability-nullablereturnedfromnonnull"></span><h4><a class="toc-backref" href="#id62">1.1.4.5. nullability.NullableReturnedFromNonnull (ObjC)</a><a class="headerlink" href="#nullability-nullablereturnedfromnonnull-objc" title="Permalink to this headline">¶</a></h4>
<p>Warns when a nullable pointer is returned from a function that has _Nonnull return type.</p>
</div>
</div>
<div class="section" id="optin">
<span id="optin-checkers"></span><h3><a class="toc-backref" href="#id63">1.1.5. optin</a><a class="headerlink" href="#optin" title="Permalink to this headline">¶</a></h3>
<p>Checkers for portability, performance or coding style specific rules.</p>
<div class="section" id="optin-cplusplus-uninitializedobject-c">
<span id="optin-cplusplus-uninitializedobject"></span><h4><a class="toc-backref" href="#id64">1.1.5.1. optin.cplusplus.UninitializedObject (C++)</a><a class="headerlink" href="#optin-cplusplus-uninitializedobject-c" title="Permalink to this headline">¶</a></h4>
<p>This checker reports uninitialized fields in objects created after a constructor
call. It doesn’t only find direct uninitialized fields, but rather makes a deep
inspection of the object, analyzing all of it’s fields subfields.
The checker regards inherited fields as direct fields, so one will receive
warnings for uninitialized inherited data members as well.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// With Pedantic and CheckPointeeInitialization set to true</span>

<span class="k">struct</span> <span class="n">A</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// note: uninitialized field &#39;this-&gt;b.x&#39;</span>
    <span class="c1">// note: uninitialized field &#39;this-&gt;bptr-&gt;x&#39;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="p">;</span> <span class="c1">// note: uninitialized field &#39;this-&gt;b.y&#39;</span>
    <span class="c1">// note: uninitialized field &#39;this-&gt;bptr-&gt;y&#39;</span>
  <span class="p">};</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">iptr</span><span class="p">;</span> <span class="c1">// note: uninitialized pointer &#39;this-&gt;iptr&#39;</span>
  <span class="n">B</span> <span class="n">b</span><span class="p">;</span>
  <span class="n">B</span> <span class="o">*</span><span class="n">bptr</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">cptr</span><span class="p">;</span> <span class="c1">// note: uninitialized pointee &#39;this-&gt;cptr&#39;</span>

  <span class="n">A</span> <span class="p">(</span><span class="n">B</span> <span class="o">*</span><span class="n">bptr</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cptr</span><span class="p">)</span> <span class="o">:</span> <span class="n">bptr</span><span class="p">(</span><span class="n">bptr</span><span class="p">),</span> <span class="n">cptr</span><span class="p">(</span><span class="n">cptr</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">A</span><span class="o">::</span><span class="n">B</span> <span class="n">b</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
  <span class="n">A</span> <span class="n">a</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">);</span> <span class="c1">// warning: 6 uninitialized fields</span>
 <span class="c1">//          after the constructor call</span>
<span class="p">}</span>

<span class="c1">// With Pedantic set to false and</span>
<span class="c1">// CheckPointeeInitialization set to true</span>
<span class="c1">// (every field is uninitialized)</span>

<span class="k">struct</span> <span class="n">A</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">iptr</span><span class="p">;</span>
  <span class="n">B</span> <span class="n">b</span><span class="p">;</span>
  <span class="n">B</span> <span class="o">*</span><span class="n">bptr</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">cptr</span><span class="p">;</span>

  <span class="n">A</span> <span class="p">(</span><span class="n">B</span> <span class="o">*</span><span class="n">bptr</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cptr</span><span class="p">)</span> <span class="o">:</span> <span class="n">bptr</span><span class="p">(</span><span class="n">bptr</span><span class="p">),</span> <span class="n">cptr</span><span class="p">(</span><span class="n">cptr</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">A</span><span class="o">::</span><span class="n">B</span> <span class="n">b</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
  <span class="n">A</span> <span class="n">a</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">);</span> <span class="c1">// no warning</span>
<span class="p">}</span>

<span class="c1">// With Pedantic set to true and</span>
<span class="c1">// CheckPointeeInitialization set to false</span>
<span class="c1">// (pointees are regarded as initialized)</span>

<span class="k">struct</span> <span class="n">A</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="n">B</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// note: uninitialized field &#39;this-&gt;b.x&#39;</span>
    <span class="kt">int</span> <span class="n">y</span><span class="p">;</span> <span class="c1">// note: uninitialized field &#39;this-&gt;b.y&#39;</span>
  <span class="p">};</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">iptr</span><span class="p">;</span> <span class="c1">// note: uninitialized pointer &#39;this-&gt;iptr&#39;</span>
  <span class="n">B</span> <span class="n">b</span><span class="p">;</span>
  <span class="n">B</span> <span class="o">*</span><span class="n">bptr</span><span class="p">;</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">cptr</span><span class="p">;</span>

  <span class="n">A</span> <span class="p">(</span><span class="n">B</span> <span class="o">*</span><span class="n">bptr</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">cptr</span><span class="p">)</span> <span class="o">:</span> <span class="n">bptr</span><span class="p">(</span><span class="n">bptr</span><span class="p">),</span> <span class="n">cptr</span><span class="p">(</span><span class="n">cptr</span><span class="p">)</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">A</span><span class="o">::</span><span class="n">B</span> <span class="n">b</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span><span class="p">;</span>
  <span class="n">A</span> <span class="n">a</span><span class="p">(</span><span class="o">&amp;</span><span class="n">b</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">c</span><span class="p">);</span> <span class="c1">// warning: 3 uninitialized fields</span>
 <span class="c1">//          after the constructor call</span>
<span class="p">}</span>
</pre></div>
</div>
<p><strong>Options</strong></p>
<p>This checker has several options which can be set from command line (e.g.
<code class="docutils literal notranslate"><span class="pre">-analyzer-config</span> <span class="pre">optin.cplusplus.UninitializedObject:Pedantic=true</span></code>):</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Pedantic</span></code> (boolean). If to false, the checker won’t emit warnings for
objects that don’t have at least one initialized field. Defaults to false.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">NotesAsWarnings</span></code>  (boolean). If set to true, the checker will emit a
warning for each uninitialized field, as opposed to emitting one warning per
constructor call, and listing the uninitialized fields that belongs to it in
notes. <em>Defaults to false</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CheckPointeeInitialization</span></code> (boolean). If set to false, the checker will
not analyze the pointee of pointer/reference fields, and will only check
whether the object itself is initialized. <em>Defaults to false</em>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">IgnoreRecordsWithField</span></code> (string). If supplied, the checker will not analyze
structures that have a field with a name or type name that matches  the given
pattern. <em>Defaults to “”</em>.</p></li>
</ul>
</div>
<div class="section" id="optin-cplusplus-virtualcall-c">
<span id="optin-cplusplus-virtualcall"></span><h4><a class="toc-backref" href="#id65">1.1.5.2. optin.cplusplus.VirtualCall (C++)</a><a class="headerlink" href="#optin-cplusplus-virtualcall-c" title="Permalink to this headline">¶</a></h4>
<p>Check virtual function calls during construction or destruction.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">class</span> <span class="nc">A</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="n">A</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">f</span><span class="p">();</span> <span class="c1">// warn</span>
  <span class="p">}</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">f</span><span class="p">();</span>
<span class="p">};</span>

<span class="k">class</span> <span class="nc">A</span> <span class="p">{</span>
<span class="k">public</span><span class="o">:</span>
  <span class="o">~</span><span class="n">A</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="o">-&gt;</span><span class="n">f</span><span class="p">();</span> <span class="c1">// warn</span>
  <span class="p">}</span>
  <span class="k">virtual</span> <span class="kt">void</span> <span class="n">f</span><span class="p">();</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="optin-mpi-mpi-checker-c">
<span id="optin-mpi-mpi-checker"></span><h4><a class="toc-backref" href="#id66">1.1.5.3. optin.mpi.MPI-Checker (C)</a><a class="headerlink" href="#optin-mpi-mpi-checker-c" title="Permalink to this headline">¶</a></h4>
<p>Checks MPI code.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">double</span> <span class="n">buf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">MPI_Request</span> <span class="n">sendReq1</span><span class="p">;</span>
  <span class="n">MPI_Ireduce</span><span class="p">(</span><span class="n">MPI_IN_PLACE</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MPI_DOUBLE</span><span class="p">,</span> <span class="n">MPI_SUM</span><span class="p">,</span>
      <span class="mi">0</span><span class="p">,</span> <span class="n">MPI_COMM_WORLD</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sendReq1</span><span class="p">);</span>
<span class="p">}</span> <span class="c1">// warn: request &#39;sendReq1&#39; has no matching wait.</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">double</span> <span class="n">buf</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">MPI_Request</span> <span class="n">sendReq</span><span class="p">;</span>
  <span class="n">MPI_Isend</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MPI_DOUBLE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MPI_COMM_WORLD</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sendReq</span><span class="p">);</span>
  <span class="n">MPI_Irecv</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MPI_DOUBLE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MPI_COMM_WORLD</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sendReq</span><span class="p">);</span> <span class="c1">// warn</span>
  <span class="n">MPI_Isend</span><span class="p">(</span><span class="o">&amp;</span><span class="n">buf</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">MPI_DOUBLE</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">MPI_COMM_WORLD</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sendReq</span><span class="p">);</span> <span class="c1">// warn</span>
  <span class="n">MPI_Wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sendReq</span><span class="p">,</span> <span class="n">MPI_STATUS_IGNORE</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">missingNonBlocking</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">rank</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">MPI_Comm_rank</span><span class="p">(</span><span class="n">MPI_COMM_WORLD</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">rank</span><span class="p">);</span>
  <span class="n">MPI_Request</span> <span class="n">sendReq1</span><span class="p">[</span><span class="mi">10</span><span class="p">][</span><span class="mi">10</span><span class="p">][</span><span class="mi">10</span><span class="p">];</span>
  <span class="n">MPI_Wait</span><span class="p">(</span><span class="o">&amp;</span><span class="n">sendReq1</span><span class="p">[</span><span class="mi">1</span><span class="p">][</span><span class="mi">7</span><span class="p">][</span><span class="mi">9</span><span class="p">],</span> <span class="n">MPI_STATUS_IGNORE</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="optin-osx-cocoa-localizability-emptylocalizationcontextchecker-objc">
<span id="optin-osx-cocoa-localizability-emptylocalizationcontextchecker"></span><h4><a class="toc-backref" href="#id67">1.1.5.4. optin.osx.cocoa.localizability.EmptyLocalizationContextChecker (ObjC)</a><a class="headerlink" href="#optin-osx-cocoa-localizability-emptylocalizationcontextchecker-objc" title="Permalink to this headline">¶</a></h4>
<p>Check that NSLocalizedString macros include a comment for context.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">test</span> <span class="p">{</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">string</span> <span class="o">=</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;LocalizedString&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">);</span> <span class="c1">// warn</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">string2</span> <span class="o">=</span> <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;LocalizedString&quot;</span><span class="p">,</span> <span class="s">@&quot; &quot;</span><span class="p">);</span> <span class="c1">// warn</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">string3</span> <span class="o">=</span> <span class="n">NSLocalizedStringWithDefaultValue</span><span class="p">(</span>
    <span class="s">@&quot;LocalizedString&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">,</span> <span class="p">[[</span><span class="bp">NSBundle</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">],</span> <span class="nb">nil</span><span class="p">,</span><span class="s">@&quot;&quot;</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="optin-osx-cocoa-localizability-nonlocalizedstringchecker-objc">
<span id="optin-osx-cocoa-localizability-nonlocalizedstringchecker"></span><h4><a class="toc-backref" href="#id68">1.1.5.5. optin.osx.cocoa.localizability.NonLocalizedStringChecker (ObjC)</a><a class="headerlink" href="#optin-osx-cocoa-localizability-nonlocalizedstringchecker-objc" title="Permalink to this headline">¶</a></h4>
<p>Warns about uses of non-localized NSStrings passed to UI methods expecting localized NSStrings.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="bp">NSString</span> <span class="o">*</span><span class="n">alarmText</span> <span class="o">=</span>
  <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;Enabled&quot;</span><span class="p">,</span> <span class="s">@&quot;Indicates alarm is turned on&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">isEnabled</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">alarmText</span> <span class="o">=</span> <span class="s">@&quot;Disabled&quot;</span><span class="p">;</span>
<span class="p">}</span>
<span class="bp">UILabel</span> <span class="o">*</span><span class="n">alarmStateLabel</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">UILabel</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>

<span class="c1">// Warning: User-facing text should use localized string macro</span>
<span class="p">[</span><span class="n">alarmStateLabel</span> <span class="nl">setText</span><span class="p">:</span><span class="n">alarmText</span><span class="p">];</span>
</pre></div>
</div>
</div>
<div class="section" id="optin-performance-gcdantipattern">
<span id="id2"></span><h4><a class="toc-backref" href="#id69">1.1.5.6. optin.performance.GCDAntipattern</a><a class="headerlink" href="#optin-performance-gcdantipattern" title="Permalink to this headline">¶</a></h4>
<p>Check for performance anti-patterns when using Grand Central Dispatch.</p>
</div>
<div class="section" id="optin-performance-padding">
<span id="id3"></span><h4><a class="toc-backref" href="#id70">1.1.5.7. optin.performance.Padding</a><a class="headerlink" href="#optin-performance-padding" title="Permalink to this headline">¶</a></h4>
<p>Check for excessively padded structs.</p>
</div>
<div class="section" id="optin-portability-unixapi">
<span id="id4"></span><h4><a class="toc-backref" href="#id71">1.1.5.8. optin.portability.UnixAPI</a><a class="headerlink" href="#optin-portability-unixapi" title="Permalink to this headline">¶</a></h4>
<p>Finds implementation-defined behavior in UNIX/Posix functions.</p>
</div>
</div>
<div class="section" id="security">
<span id="security-checkers"></span><h3><a class="toc-backref" href="#id72">1.1.6. security</a><a class="headerlink" href="#security" title="Permalink to this headline">¶</a></h3>
<p>Security related checkers.</p>
<div class="section" id="security-floatloopcounter-c">
<span id="security-floatloopcounter"></span><h4><a class="toc-backref" href="#id73">1.1.6.1. security.FloatLoopCounter (C)</a><a class="headerlink" href="#security-floatloopcounter-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on using a floating point value as a loop counter (CERT: FLP30-C, FLP30-CPP).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">float</span> <span class="n">x</span> <span class="o">=</span> <span class="mf">0.1f</span><span class="p">;</span> <span class="n">x</span> <span class="o">&lt;=</span> <span class="mf">1.0f</span><span class="p">;</span> <span class="n">x</span> <span class="o">+=</span> <span class="mf">0.1f</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-uncheckedreturn-c">
<span id="security-insecureapi-uncheckedreturn"></span><h4><a class="toc-backref" href="#id74">1.1.6.2. security.insecureAPI.UncheckedReturn (C)</a><a class="headerlink" href="#security-insecureapi-uncheckedreturn-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of functions whose return values must be always checked.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">setuid</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-bcmp-c">
<span id="security-insecureapi-bcmp"></span><h4><a class="toc-backref" href="#id75">1.1.6.3. security.insecureAPI.bcmp (C)</a><a class="headerlink" href="#security-insecureapi-bcmp-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of the ‘bcmp’ function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">bcmp</span><span class="p">(</span><span class="n">ptr0</span><span class="p">,</span> <span class="n">ptr1</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-bcopy-c">
<span id="security-insecureapi-bcopy"></span><h4><a class="toc-backref" href="#id76">1.1.6.4. security.insecureAPI.bcopy (C)</a><a class="headerlink" href="#security-insecureapi-bcopy-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of the ‘bcopy’ function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">bcopy</span><span class="p">(</span><span class="n">src</span><span class="p">,</span> <span class="n">dst</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-bzero-c">
<span id="security-insecureapi-bzero"></span><h4><a class="toc-backref" href="#id77">1.1.6.5. security.insecureAPI.bzero (C)</a><a class="headerlink" href="#security-insecureapi-bzero-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of the ‘bzero’ function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">bzero</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span> <span class="n">n</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-getpw-c">
<span id="security-insecureapi-getpw"></span><h4><a class="toc-backref" href="#id78">1.1.6.6. security.insecureAPI.getpw (C)</a><a class="headerlink" href="#security-insecureapi-getpw-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of the ‘getpw’ function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">buff</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
  <span class="n">getpw</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">buff</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-gets-c">
<span id="security-insecureapi-gets"></span><h4><a class="toc-backref" href="#id79">1.1.6.7. security.insecureAPI.gets (C)</a><a class="headerlink" href="#security-insecureapi-gets-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of the ‘gets’ function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">buff</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
  <span class="n">gets</span><span class="p">(</span><span class="n">buff</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-mkstemp-c">
<span id="security-insecureapi-mkstemp"></span><h4><a class="toc-backref" href="#id80">1.1.6.8. security.insecureAPI.mkstemp (C)</a><a class="headerlink" href="#security-insecureapi-mkstemp-c" title="Permalink to this headline">¶</a></h4>
<p>Warn when ‘mkstemp’ is passed fewer than 6 X’s in the format string.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">mkstemp</span><span class="p">(</span><span class="s">&quot;XX&quot;</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-mktemp-c">
<span id="security-insecureapi-mktemp"></span><h4><a class="toc-backref" href="#id81">1.1.6.9. security.insecureAPI.mktemp (C)</a><a class="headerlink" href="#security-insecureapi-mktemp-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of the <code class="docutils literal notranslate"><span class="pre">mktemp</span></code> function.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="n">mktemp</span><span class="p">(</span><span class="s">&quot;/tmp/zxcv&quot;</span><span class="p">);</span> <span class="c1">// warn: insecure, use mkstemp</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-rand-c">
<span id="security-insecureapi-rand"></span><h4><a class="toc-backref" href="#id82">1.1.6.10. security.insecureAPI.rand (C)</a><a class="headerlink" href="#security-insecureapi-rand-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of inferior random number generating functions (only if arc4random function is available):
<code class="docutils literal notranslate"><span class="pre">drand48,</span> <span class="pre">erand48,</span> <span class="pre">jrand48,</span> <span class="pre">lcong48,</span> <span class="pre">lrand48,</span> <span class="pre">mrand48,</span> <span class="pre">nrand48,</span> <span class="pre">random,</span> <span class="pre">rand_r</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">random</span><span class="p">();</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-strcpy-c">
<span id="security-insecureapi-strcpy"></span><h4><a class="toc-backref" href="#id83">1.1.6.11. security.insecureAPI.strcpy (C)</a><a class="headerlink" href="#security-insecureapi-strcpy-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on uses of the <code class="docutils literal notranslate"><span class="pre">strcpy</span></code> and <code class="docutils literal notranslate"><span class="pre">strcat</span></code> functions.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">x</span><span class="p">[</span><span class="mi">4</span><span class="p">];</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">y</span> <span class="o">=</span> <span class="s">&quot;abcd&quot;</span><span class="p">;</span>

  <span class="n">strcpy</span><span class="p">(</span><span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-vfork-c">
<span id="security-insecureapi-vfork"></span><h4><a class="toc-backref" href="#id84">1.1.6.12. security.insecureAPI.vfork (C)</a><a class="headerlink" href="#security-insecureapi-vfork-c" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Warn on uses of the ‘vfork’ function.</p>
</div></blockquote>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">vfork</span><span class="p">();</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="security-insecureapi-deprecatedorunsafebufferhandling-c">
<span id="security-insecureapi-deprecatedorunsafebufferhandling"></span><h4><a class="toc-backref" href="#id85">1.1.6.13. security.insecureAPI.DeprecatedOrUnsafeBufferHandling (C)</a><a class="headerlink" href="#security-insecureapi-deprecatedorunsafebufferhandling-c" title="Permalink to this headline">¶</a></h4>
<blockquote>
<div><p>Warn on occurrences of unsafe or deprecated buffer handling functions, which now have a secure variant: <code class="docutils literal notranslate"><span class="pre">sprintf,</span> <span class="pre">vsprintf,</span> <span class="pre">scanf,</span> <span class="pre">wscanf,</span> <span class="pre">fscanf,</span> <span class="pre">fwscanf,</span> <span class="pre">vscanf,</span> <span class="pre">vwscanf,</span> <span class="pre">vfscanf,</span> <span class="pre">vfwscanf,</span> <span class="pre">sscanf,</span> <span class="pre">swscanf,</span> <span class="pre">vsscanf,</span> <span class="pre">vswscanf,</span> <span class="pre">swprintf,</span> <span class="pre">snprintf,</span> <span class="pre">vswprintf,</span> <span class="pre">vsnprintf,</span> <span class="pre">memcpy,</span> <span class="pre">memmove,</span> <span class="pre">strncpy,</span> <span class="pre">strncat,</span> <span class="pre">memset</span></code></p>
</div></blockquote>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">buf</span> <span class="p">[</span><span class="mi">5</span><span class="p">];</span>
  <span class="n">strncpy</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="s">&quot;a&quot;</span><span class="p">,</span> <span class="mi">1</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="unix">
<span id="unix-checkers"></span><h3><a class="toc-backref" href="#id86">1.1.7. unix</a><a class="headerlink" href="#unix" title="Permalink to this headline">¶</a></h3>
<p>POSIX/Unix checkers.</p>
<div class="section" id="unix-api-c">
<span id="unix-api"></span><h4><a class="toc-backref" href="#id87">1.1.7.1. unix.API (C)</a><a class="headerlink" href="#unix-api-c" title="Permalink to this headline">¶</a></h4>
<p>Check calls to various UNIX/Posix functions: <code class="docutils literal notranslate"><span class="pre">open,</span> <span class="pre">pthread_once,</span> <span class="pre">calloc,</span> <span class="pre">malloc,</span> <span class="pre">realloc,</span> <span class="pre">alloca</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span>
<span class="c1">// Currently the check is performed for apple targets only.</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">path</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">fd</span> <span class="o">=</span> <span class="n">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">O_CREAT</span><span class="p">);</span>
    <span class="c1">// warn: call to &#39;open&#39; requires a third argument when the</span>
    <span class="c1">// &#39;O_CREAT&#39; flag is set</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">();</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">pthread_once_t</span> <span class="n">pred</span> <span class="o">=</span> <span class="p">{</span><span class="mh">0x30B1BCBA</span><span class="p">,</span> <span class="p">{</span><span class="mi">0</span><span class="p">}};</span>
  <span class="n">pthread_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pred</span><span class="p">,</span> <span class="n">f</span><span class="p">);</span>
    <span class="c1">// warn: call to &#39;pthread_once&#39; uses the local variable</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// warn: allocation size of 0 bytes</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">calloc</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">42</span><span class="p">);</span> <span class="c1">// warn: allocation size of 0 bytes</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">realloc</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// warn: allocation size of 0 bytes</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">alloca</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// warn: allocation size of 0 bytes</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">valloc</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// warn: allocation size of 0 bytes</span>
<span class="p">}</span>

</pre></div>
</div>
</div>
<div class="section" id="unix-malloc-c">
<span id="unix-malloc"></span><h4><a class="toc-backref" href="#id88">1.1.7.2. unix.Malloc (C)</a><a class="headerlink" href="#unix-malloc-c" title="Permalink to this headline">¶</a></h4>
<p>Check for memory leaks, double free, and use-after-free problems. Traces memory managed by malloc()/free().</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="n">free</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
  <span class="n">free</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn: attempt to free released memory</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
  <span class="n">free</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
  <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// warn: use after free</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">return</span><span class="p">;</span> <span class="c1">// warn: memory is never released</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">};</span>
  <span class="n">free</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="c1">// warn: argument is not allocated by malloc</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">char</span><span class="p">));</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
  <span class="n">free</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn: argument to free() is offset by -4 bytes</span>
<span class="p">}</span>

</pre></div>
</div>
</div>
<div class="section" id="unix-mallocsizeof-c">
<span id="unix-mallocsizeof"></span><h4><a class="toc-backref" href="#id89">1.1.7.3. unix.MallocSizeof (C)</a><a class="headerlink" href="#unix-mallocsizeof-c" title="Permalink to this headline">¶</a></h4>
<p>Check for dubious <code class="docutils literal notranslate"><span class="pre">malloc</span></code> arguments involving <code class="docutils literal notranslate"><span class="pre">sizeof</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">long</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">short</span><span class="p">));</span>
    <span class="c1">// warn: result is converted to &#39;long *&#39;, which is</span>
    <span class="c1">// incompatible with operand type &#39;short&#39;</span>
  <span class="n">free</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="unix-mismatcheddeallocator-c-c">
<span id="unix-mismatcheddeallocator"></span><h4><a class="toc-backref" href="#id90">1.1.7.4. unix.MismatchedDeallocator (C, C++)</a><a class="headerlink" href="#unix-mismatcheddeallocator-c-c" title="Permalink to this headline">¶</a></h4>
<p>Check for mismatched deallocators.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="c1">// C, C++</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
  <span class="n">delete</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// C, C++</span>
<span class="kt">void</span> <span class="nf">__attribute</span><span class="p">((</span><span class="n">ownership_returns</span><span class="p">(</span><span class="n">malloc</span><span class="p">)))</span> <span class="o">*</span><span class="n">user_malloc</span><span class="p">(</span><span class="kt">size_t</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">user_malloc</span><span class="p">(</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
  <span class="n">delete</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// C, C++</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">int</span><span class="p">;</span>
  <span class="n">free</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// C, C++</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">int</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span>
  <span class="n">realloc</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">long</span><span class="p">));</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// C, C++</span>
<span class="n">template</span> <span class="o">&lt;</span><span class="kr">typename</span> <span class="n">T</span><span class="o">&gt;</span>
<span class="k">struct</span> <span class="n">SimpleSmartPointer</span> <span class="p">{</span>
  <span class="n">T</span> <span class="o">*</span><span class="n">ptr</span><span class="p">;</span>

  <span class="n">explicit</span> <span class="nf">SimpleSmartPointer</span><span class="p">(</span><span class="n">T</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="mi">0</span><span class="p">)</span> <span class="o">:</span> <span class="n">ptr</span><span class="p">(</span><span class="n">p</span><span class="p">)</span> <span class="p">{}</span>
  <span class="o">~</span><span class="n">SimpleSmartPointer</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">delete</span> <span class="n">ptr</span><span class="p">;</span> <span class="c1">// warn</span>
  <span class="p">}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">SimpleSmartPointer</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">a</span><span class="p">((</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="mi">4</span><span class="p">));</span>
<span class="p">}</span>

<span class="c1">// C++</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">operator</span> <span class="n">new</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span>
  <span class="n">delete</span><span class="p">[]</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// Objective-C, C++</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="n">NSUInteger</span> <span class="n">dataLength</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">new</span> <span class="kt">int</span><span class="p">;</span>
  <span class="n">NSData</span> <span class="o">*</span><span class="n">d</span> <span class="o">=</span> <span class="p">[</span><span class="n">NSData</span> <span class="nl">dataWithBytesNoCopy</span><span class="p">:</span><span class="n">p</span>
               <span class="nl">length</span><span class="p">:</span><span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">)</span> <span class="nl">freeWhenDone</span><span class="p">:</span><span class="mi">1</span><span class="p">];</span>
    <span class="c1">// warn +dataWithBytesNoCopy:length:freeWhenDone: cannot take</span>
    <span class="c1">// ownership of memory allocated by &#39;new&#39;</span>
<span class="p">}</span>

</pre></div>
</div>
</div>
<div class="section" id="unix-vfork-c">
<span id="unix-vfork"></span><h4><a class="toc-backref" href="#id91">1.1.7.5. unix.Vfork (C)</a><a class="headerlink" href="#unix-vfork-c" title="Permalink to this headline">¶</a></h4>
<p>Check for proper usage of <code class="docutils literal notranslate"><span class="pre">vfork</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">pid_t</span> <span class="n">pid</span> <span class="o">=</span> <span class="n">vfork</span><span class="p">();</span> <span class="c1">// warn</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">pid</span> <span class="o">!=</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>

  <span class="k">switch</span> <span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">case</span> <span class="mi">0</span><span class="o">:</span>
    <span class="n">pid</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
    <span class="n">execl</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
    <span class="n">_exit</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">1</span><span class="o">:</span>
    <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn: this assignment is prohibited</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">case</span> <span class="mi">2</span><span class="o">:</span>
    <span class="n">foo</span><span class="p">();</span> <span class="c1">// warn: this function call is prohibited</span>
    <span class="k">break</span><span class="p">;</span>
  <span class="k">default</span><span class="o">:</span>
    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn: return is prohibited</span>
  <span class="p">}</span>

  <span class="k">while</span><span class="p">(</span><span class="mi">1</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="unix-cstring-badsizearg-c">
<span id="unix-cstring-badsizearg"></span><h4><a class="toc-backref" href="#id92">1.1.7.6. unix.cstring.BadSizeArg (C)</a><a class="headerlink" href="#unix-cstring-badsizearg-c" title="Permalink to this headline">¶</a></h4>
<p>Check the size argument passed into C string functions for common erroneous patterns. Use <code class="docutils literal notranslate"><span class="pre">-Wno-strncat-size</span></code> compiler option to mute other <code class="docutils literal notranslate"><span class="pre">strncat</span></code>-related compiler warnings.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">dest</span><span class="p">[</span><span class="mi">3</span><span class="p">];</span>
  <span class="n">strncat</span><span class="p">(</span><span class="n">dest</span><span class="p">,</span> <span class="s">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;*&quot;</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">dest</span><span class="p">));</span>
    <span class="c1">// warn: potential buffer overflow</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="unix-cstrisng-nullarg-c">
<span id="unix-cstrisng-nullarg"></span><h4><a class="toc-backref" href="#id93">1.1.7.7. unix.cstrisng.NullArg (C)</a><a class="headerlink" href="#unix-cstrisng-nullarg-c" title="Permalink to this headline">¶</a></h4>
<p>Check for null pointers being passed as arguments to C string functions:
<code class="docutils literal notranslate"><span class="pre">strlen,</span> <span class="pre">strnlen,</span> <span class="pre">strcpy,</span> <span class="pre">strncpy,</span> <span class="pre">strcat,</span> <span class="pre">strncat,</span> <span class="pre">strcmp,</span> <span class="pre">strncmp,</span> <span class="pre">strcasecmp,</span> <span class="pre">strncasecmp</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">strlen</span><span class="p">(</span><span class="mi">0</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="osx">
<span id="osx-checkers"></span><h3><a class="toc-backref" href="#id94">1.1.8. osx</a><a class="headerlink" href="#osx" title="Permalink to this headline">¶</a></h3>
<p>macOS checkers.</p>
<div class="section" id="osx-api-c">
<span id="osx-api"></span><h4><a class="toc-backref" href="#id95">1.1.8.1. osx.API (C)</a><a class="headerlink" href="#osx-api-c" title="Permalink to this headline">¶</a></h4>
<p>Check for proper uses of various Apple APIs.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">dispatch_once_t</span> <span class="n">pred</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">dispatch_once</span><span class="p">(</span><span class="o">&amp;</span><span class="n">pred</span><span class="p">,</span> <span class="o">^</span><span class="p">(){});</span> <span class="c1">// warn: dispatch_once uses local</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-numberobjectconversion-c-c-objc">
<span id="osx-numberobjectconversion"></span><h4><a class="toc-backref" href="#id96">1.1.8.2. osx.NumberObjectConversion (C, C++, ObjC)</a><a class="headerlink" href="#osx-numberobjectconversion-c-c-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for erroneous conversions of objects representing numbers into numbers.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="bp">NSNumber</span> <span class="o">*</span><span class="n">photoCount</span> <span class="o">=</span> <span class="p">[</span><span class="n">albumDescriptor</span> <span class="nl">objectForKey</span><span class="p">:</span><span class="s">@&quot;PhotoCount&quot;</span><span class="p">];</span>
<span class="c1">// Warning: Comparing a pointer value of type &#39;NSNumber *&#39;</span>
<span class="c1">// to a scalar integer value</span>
<span class="k">if</span> <span class="p">(</span><span class="n">photoCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">[</span><span class="nb">self</span> <span class="n">displayPhotos</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-objcproperty-objc">
<span id="osx-objcproperty"></span><h4><a class="toc-backref" href="#id97">1.1.8.3. osx.ObjCProperty (ObjC)</a><a class="headerlink" href="#osx-objcproperty-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for proper uses of Objective-C properties.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="bp">NSNumber</span> <span class="o">*</span><span class="n">photoCount</span> <span class="o">=</span> <span class="p">[</span><span class="n">albumDescriptor</span> <span class="nl">objectForKey</span><span class="p">:</span><span class="s">@&quot;PhotoCount&quot;</span><span class="p">];</span>
<span class="c1">// Warning: Comparing a pointer value of type &#39;NSNumber *&#39;</span>
<span class="c1">// to a scalar integer value</span>
<span class="k">if</span> <span class="p">(</span><span class="n">photoCount</span> <span class="o">&gt;</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">[</span><span class="nb">self</span> <span class="n">displayPhotos</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-seckeychainapi-c">
<span id="osx-seckeychainapi"></span><h4><a class="toc-backref" href="#id98">1.1.8.4. osx.SecKeychainAPI (C)</a><a class="headerlink" href="#osx-seckeychainapi-c" title="Permalink to this headline">¶</a></h4>
<p>Check for proper uses of Secure Keychain APIs.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">UInt32</span> <span class="n">length</span><span class="p">;</span>

  <span class="n">SecKeychainItemFreeContent</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">length</span><span class="p">);</span>
    <span class="c1">// warn: trying to free data which has not been allocated</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">UInt32</span> <span class="o">*</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">outData</span><span class="p">;</span>

  <span class="n">OSStatus</span> <span class="n">st</span> <span class="o">=</span>
    <span class="n">SecKeychainItemCopyContent</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="n">outData</span><span class="p">);</span>
    <span class="c1">// warn: data is not released</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">UInt32</span> <span class="o">*</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">outData</span><span class="p">;</span>

  <span class="n">OSStatus</span> <span class="n">st</span> <span class="o">=</span>
    <span class="n">SecKeychainItemCopyContent</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outData</span><span class="p">);</span>

  <span class="n">SecKeychainItemFreeContent</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span> <span class="n">outData</span><span class="p">);</span>
    <span class="c1">// warn: only call free if a non-NULL buffer was returned</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">unsigned</span> <span class="kt">int</span> <span class="o">*</span><span class="n">ptr</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">UInt32</span> <span class="o">*</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">outData</span><span class="p">;</span>

  <span class="n">OSStatus</span> <span class="n">st</span> <span class="o">=</span>
    <span class="n">SecKeychainItemCopyContent</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outData</span><span class="p">);</span>

  <span class="n">st</span> <span class="o">=</span> <span class="n">SecKeychainItemCopyContent</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">ptr</span><span class="p">,</span> <span class="n">length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outData</span><span class="p">);</span>
    <span class="c1">// warn: release data before another call to the allocator</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">st</span> <span class="o">==</span> <span class="n">noErr</span><span class="p">)</span>
    <span class="n">SecKeychainItemFreeContent</span><span class="p">(</span><span class="n">ptr</span><span class="p">,</span> <span class="n">outData</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">SecKeychainItemRef</span> <span class="n">itemRef</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">SecKeychainAttributeInfo</span> <span class="o">*</span><span class="n">info</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">SecItemClass</span> <span class="o">*</span><span class="n">itemClass</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="n">SecKeychainAttributeList</span> <span class="o">*</span><span class="n">attrList</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">UInt32</span> <span class="o">*</span><span class="n">length</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">outData</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>

  <span class="n">OSStatus</span> <span class="n">st</span> <span class="o">=</span>
    <span class="n">SecKeychainItemCopyAttributesAndData</span><span class="p">(</span><span class="n">itemRef</span><span class="p">,</span> <span class="n">info</span><span class="p">,</span>
                                         <span class="n">itemClass</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">attrList</span><span class="p">,</span>
                                         <span class="n">length</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">outData</span><span class="p">);</span>

  <span class="n">SecKeychainItemFreeContent</span><span class="p">(</span><span class="n">attrList</span><span class="p">,</span> <span class="n">outData</span><span class="p">);</span>
    <span class="c1">// warn: deallocator doesn&#39;t match the allocator</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-atsync-objc">
<span id="osx-cocoa-atsync"></span><h4><a class="toc-backref" href="#id99">1.1.8.5. osx.cocoa.AtSync (ObjC)</a><a class="headerlink" href="#osx-cocoa-atsync-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for nil pointers used as mutexes for &#64;synchronized.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">id</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">x</span><span class="p">)</span>
    <span class="k">@synchronized</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// warn: nil value used as mutex</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">id</span> <span class="n">y</span><span class="p">;</span>
  <span class="k">@synchronized</span><span class="p">(</span><span class="n">y</span><span class="p">)</span> <span class="p">{}</span> <span class="c1">// warn: uninitialized value used as mutex</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-autoreleasewrite">
<span id="id5"></span><h4><a class="toc-backref" href="#id100">1.1.8.6. osx.cocoa.AutoreleaseWrite</a><a class="headerlink" href="#osx-cocoa-autoreleasewrite" title="Permalink to this headline">¶</a></h4>
<p>Warn about potentially crashing writes to autoreleasing objects from different autoreleasing pools in Objective-C.</p>
</div>
<div class="section" id="osx-cocoa-classrelease-objc">
<span id="osx-cocoa-classrelease"></span><h4><a class="toc-backref" href="#id101">1.1.8.7. osx.cocoa.ClassRelease (ObjC)</a><a class="headerlink" href="#osx-cocoa-classrelease-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for sending ‘retain’, ‘release’, or ‘autorelease’ directly to a Class.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="bp">MyClass</span> : <span class="bp">NSObject</span>
<span class="k">@end</span>

<span class="kt">void</span> <span class="n">test</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">[</span><span class="bp">MyClass</span> <span class="k">release</span><span class="p">];</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-dealloc-objc">
<span id="osx-cocoa-dealloc"></span><h4><a class="toc-backref" href="#id102">1.1.8.8. osx.cocoa.Dealloc (ObjC)</a><a class="headerlink" href="#osx-cocoa-dealloc-objc" title="Permalink to this headline">¶</a></h4>
<p>Warn about Objective-C classes that lack a correct implementation of -dealloc</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">MyObject</span> : <span class="bp">NSObject</span> <span class="p">{</span>
  <span class="kt">id</span> <span class="n">_myproperty</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyObject</span> <span class="c1">// warn: lacks &#39;dealloc&#39;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MyObject</span> : <span class="bp">NSObject</span> <span class="p">{}</span>
<span class="k">@property</span><span class="p">(</span><span class="k">assign</span><span class="p">)</span> <span class="kt">id</span> <span class="n">myproperty</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyObject</span> <span class="c1">// warn: does not send &#39;dealloc&#39; to super</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dealloc</span> <span class="p">{</span>
  <span class="nb">self</span><span class="p">.</span><span class="n">myproperty</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MyObject</span> : <span class="bp">NSObject</span> <span class="p">{</span>
  <span class="kt">id</span> <span class="n">_myproperty</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@property</span><span class="p">(</span><span class="k">retain</span><span class="p">)</span> <span class="kt">id</span> <span class="n">myproperty</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyObject</span>
<span class="k">@synthesize</span> <span class="n">myproperty</span> <span class="o">=</span> <span class="n">_myproperty</span><span class="p">;</span>
  <span class="c1">// warn: var was retained but wasn&#39;t released</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dealloc</span> <span class="p">{</span>
  <span class="p">[</span><span class="nb">super</span> <span class="n">dealloc</span><span class="p">];</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MyObject</span> : <span class="bp">NSObject</span> <span class="p">{</span>
  <span class="kt">id</span> <span class="n">_myproperty</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@property</span><span class="p">(</span><span class="k">assign</span><span class="p">)</span> <span class="kt">id</span> <span class="n">myproperty</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyObject</span>
<span class="k">@synthesize</span> <span class="n">myproperty</span> <span class="o">=</span> <span class="n">_myproperty</span><span class="p">;</span>
  <span class="c1">// warn: var wasn&#39;t retained but was released</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dealloc</span> <span class="p">{</span>
  <span class="p">[</span><span class="n">_myproperty</span> <span class="k">release</span><span class="p">];</span>
  <span class="p">[</span><span class="nb">super</span> <span class="n">dealloc</span><span class="p">];</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-incompatiblemethodtypes-objc">
<span id="osx-cocoa-incompatiblemethodtypes"></span><h4><a class="toc-backref" href="#id103">1.1.8.9. osx.cocoa.IncompatibleMethodTypes (ObjC)</a><a class="headerlink" href="#osx-cocoa-incompatiblemethodtypes-objc" title="Permalink to this headline">¶</a></h4>
<p>Warn about Objective-C method signatures with type incompatibilities.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">MyClass1</span> : <span class="bp">NSObject</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">foo</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyClass1</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">int</span><span class="p">)</span><span class="nf">foo</span> <span class="p">{</span> <span class="k">return</span> <span class="mi">1</span><span class="p">;</span> <span class="p">}</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MyClass2</span> : <span class="nc">MyClass1</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="nf">foo</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyClass2</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">float</span><span class="p">)</span><span class="nf">foo</span> <span class="p">{</span> <span class="k">return</span> <span class="mf">1.0</span><span class="p">;</span> <span class="p">}</span> <span class="c1">// warn</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-loops">
<span id="id6"></span><h4><a class="toc-backref" href="#id104">1.1.8.10. osx.cocoa.Loops</a><a class="headerlink" href="#osx-cocoa-loops" title="Permalink to this headline">¶</a></h4>
<p>Improved modeling of loops using Cocoa collection types.</p>
</div>
<div class="section" id="osx-cocoa-missingsupercall-objc">
<span id="osx-cocoa-missingsupercall"></span><h4><a class="toc-backref" href="#id105">1.1.8.11. osx.cocoa.MissingSuperCall (ObjC)</a><a class="headerlink" href="#osx-cocoa-missingsupercall-objc" title="Permalink to this headline">¶</a></h4>
<p>Warn about Objective-C methods that lack a necessary call to super.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">Test</span> : <span class="bp">UIViewController</span>
<span class="k">@end</span>
<span class="k">@implementation</span> <span class="nc">test</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">viewDidLoad</span> <span class="p">{}</span> <span class="c1">// warn</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-nsautoreleasepool-objc">
<span id="osx-cocoa-nsautoreleasepool"></span><h4><a class="toc-backref" href="#id106">1.1.8.12. osx.cocoa.NSAutoreleasePool (ObjC)</a><a class="headerlink" href="#osx-cocoa-nsautoreleasepool-objc" title="Permalink to this headline">¶</a></h4>
<p>Warn for suboptimal uses of NSAutoreleasePool in Objective-C GC mode.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="bp">NSAutoreleasePool</span> <span class="o">*</span><span class="n">pool</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSAutoreleasePool</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span>
  <span class="p">[</span><span class="n">pool</span> <span class="k">release</span><span class="p">];</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-nserror-objc">
<span id="osx-cocoa-nserror"></span><h4><a class="toc-backref" href="#id107">1.1.8.13. osx.cocoa.NSError (ObjC)</a><a class="headerlink" href="#osx-cocoa-nserror-objc" title="Permalink to this headline">¶</a></h4>
<p>Check usage of NSError parameters.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">A</span> : <span class="bp">NSObject</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo:</span><span class="p">(</span><span class="bp">NSError</span> <span class="s">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="p">)</span><span class="nv">error</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">A</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">foo:</span><span class="p">(</span><span class="bp">NSError</span> <span class="s">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="p">)</span><span class="nv">error</span> <span class="p">{</span>
  <span class="c1">// warn: method accepting NSError&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot; should have a non-void</span>
  <span class="c1">// return value</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">A</span> : <span class="bp">NSObject</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">foo:</span><span class="p">(</span><span class="bp">NSError</span> <span class="s">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="p">)</span><span class="nv">error</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">A</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">BOOL</span><span class="p">)</span><span class="nf">foo:</span><span class="p">(</span><span class="bp">NSError</span> <span class="s">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="p">)</span><span class="nv">error</span> <span class="p">{</span>
  <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn: potential null dereference</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-nilarg-objc">
<span id="osx-cocoa-nilarg"></span><h4><a class="toc-backref" href="#id108">1.1.8.14. osx.cocoa.NilArg (ObjC)</a><a class="headerlink" href="#osx-cocoa-nilarg-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for prohibited nil arguments to ObjC method calls.</p>
<blockquote>
<div><ul class="simple">
<li><p>caseInsensitiveCompare:</p></li>
<li><p>compare:</p></li>
<li><p>compare:options:</p></li>
<li><p>compare:options:range:</p></li>
<li><p>compare:options:range:locale:</p></li>
<li><p>componentsSeparatedByCharactersInSet:</p></li>
<li><p>initWithFormat:</p></li>
</ul>
</div></blockquote>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="n">NSComparisonResult</span> <span class="nf">test</span><span class="p">(</span><span class="bp">NSString</span> <span class="o">*</span><span class="n">s</span><span class="p">)</span> <span class="p">{</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">aString</span> <span class="o">=</span> <span class="nb">nil</span><span class="p">;</span>
  <span class="k">return</span> <span class="p">[</span><span class="n">s</span> <span class="nl">caseInsensitiveCompare</span><span class="p">:</span><span class="n">aString</span><span class="p">];</span>
    <span class="c1">// warn: argument to &#39;NSString&#39; method</span>
    <span class="c1">// &#39;caseInsensitiveCompare:&#39; cannot be nil</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-nonnilreturnvalue">
<span id="id7"></span><h4><a class="toc-backref" href="#id109">1.1.8.15. osx.cocoa.NonNilReturnValue</a><a class="headerlink" href="#osx-cocoa-nonnilreturnvalue" title="Permalink to this headline">¶</a></h4>
<p>Models the APIs that are guaranteed to return a non-nil value.</p>
</div>
<div class="section" id="osx-cocoa-objcgenerics-objc">
<span id="osx-cocoa-objcgenerics"></span><h4><a class="toc-backref" href="#id110">1.1.8.16. osx.cocoa.ObjCGenerics (ObjC)</a><a class="headerlink" href="#osx-cocoa-objcgenerics-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for type errors when using Objective-C generics.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="bp">NSMutableArray</span> <span class="o">*</span><span class="n">names</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSMutableArray</span> <span class="n">array</span><span class="p">];</span>
<span class="bp">NSMutableArray</span> <span class="o">*</span><span class="n">birthDates</span> <span class="o">=</span> <span class="n">names</span><span class="p">;</span>

<span class="c1">// Warning: Conversion from value of type &#39;NSDate *&#39;</span>
<span class="c1">// to incompatible type &#39;NSString *&#39;</span>
<span class="p">[</span><span class="n">birthDates</span> <span class="nl">addObject</span><span class="p">:</span> <span class="p">[</span><span class="bp">NSDate</span> <span class="n">date</span><span class="p">]];</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-retaincount-objc">
<span id="osx-cocoa-retaincount"></span><h4><a class="toc-backref" href="#id111">1.1.8.17. osx.cocoa.RetainCount (ObjC)</a><a class="headerlink" href="#osx-cocoa-retaincount-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for leaks and improper reference count management</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="bp">NSString</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="p">[[</span><span class="bp">NSString</span> <span class="n">alloc</span><span class="p">]</span> <span class="n">init</span><span class="p">];</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="n">CFStringRef</span> <span class="nf">test</span><span class="p">(</span><span class="kt">char</span> <span class="o">*</span><span class="n">bytes</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">CFStringCreateWithCStringNoCopy</span><span class="p">(</span>
           <span class="mi">0</span><span class="p">,</span> <span class="n">bytes</span><span class="p">,</span> <span class="n">NSNEXTSTEPStringEncoding</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-runloopautoreleaseleak">
<span id="id8"></span><h4><a class="toc-backref" href="#id112">1.1.8.18. osx.cocoa.RunLoopAutoreleaseLeak</a><a class="headerlink" href="#osx-cocoa-runloopautoreleaseleak" title="Permalink to this headline">¶</a></h4>
<p>Check for leaked memory in autorelease pools that will never be drained.</p>
</div>
<div class="section" id="osx-cocoa-selfinit-objc">
<span id="osx-cocoa-selfinit"></span><h4><a class="toc-backref" href="#id113">1.1.8.19. osx.cocoa.SelfInit (ObjC)</a><a class="headerlink" href="#osx-cocoa-selfinit-objc" title="Permalink to this headline">¶</a></h4>
<p>Check that ‘self’ is properly initialized inside an initializer method.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">MyObj</span> : <span class="bp">NSObject</span> <span class="p">{</span>
  <span class="kt">id</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyObj</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span> <span class="p">{</span>
  <span class="p">[</span><span class="nb">super</span> <span class="n">init</span><span class="p">];</span>
  <span class="n">x</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn: instance variable used while &#39;self&#39; is not</span>
         <span class="c1">// initialized</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MyObj</span> : <span class="bp">NSObject</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyObj</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">id</span><span class="p">)</span><span class="nf">init</span> <span class="p">{</span>
  <span class="p">[</span><span class="nb">super</span> <span class="n">init</span><span class="p">];</span>
  <span class="k">return</span> <span class="nb">self</span><span class="p">;</span> <span class="c1">// warn: returning uninitialized &#39;self&#39;</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-superdealloc-objc">
<span id="osx-cocoa-superdealloc"></span><h4><a class="toc-backref" href="#id114">1.1.8.20. osx.cocoa.SuperDealloc (ObjC)</a><a class="headerlink" href="#osx-cocoa-superdealloc-objc" title="Permalink to this headline">¶</a></h4>
<p>Warn about improper use of ‘[super dealloc]’ in Objective-C.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">SuperDeallocThenReleaseIvarClass</span> : <span class="bp">NSObject</span> <span class="p">{</span>
  <span class="bp">NSObject</span> <span class="o">*</span><span class="n">_ivar</span><span class="p">;</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">SuperDeallocThenReleaseIvarClass</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">dealloc</span> <span class="p">{</span>
  <span class="p">[</span><span class="nb">super</span> <span class="n">dealloc</span><span class="p">];</span>
  <span class="p">[</span><span class="n">_ivar</span> <span class="k">release</span><span class="p">];</span> <span class="c1">// warn</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-unusedivars-objc">
<span id="osx-cocoa-unusedivars"></span><h4><a class="toc-backref" href="#id115">1.1.8.21. osx.cocoa.UnusedIvars (ObjC)</a><a class="headerlink" href="#osx-cocoa-unusedivars-objc" title="Permalink to this headline">¶</a></h4>
<p>Warn about private ivars that are never used.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="nc">MyObj</span> : <span class="bp">NSObject</span> <span class="p">{</span>
<span class="k">@private</span>
  <span class="kt">id</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MyObj</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-cocoa-variadicmethodtypes-objc">
<span id="osx-cocoa-variadicmethodtypes"></span><h4><a class="toc-backref" href="#id116">1.1.8.22. osx.cocoa.VariadicMethodTypes (ObjC)</a><a class="headerlink" href="#osx-cocoa-variadicmethodtypes-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for passing non-Objective-C types to variadic collection
initialization methods that expect only Objective-C types.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="p">[</span><span class="bp">NSSet</span> <span class="nl">setWithObjects</span><span class="p">:</span><span class="s">@&quot;Foo&quot;</span><span class="p">,</span> <span class="s">&quot;Bar&quot;</span><span class="p">,</span> <span class="nb">nil</span><span class="p">];</span>
    <span class="c1">// warn: argument should be an ObjC pointer type, not &#39;char *&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-corefoundation-cferror-c">
<span id="osx-corefoundation-cferror"></span><h4><a class="toc-backref" href="#id117">1.1.8.23. osx.coreFoundation.CFError (C)</a><a class="headerlink" href="#osx-corefoundation-cferror-c" title="Permalink to this headline">¶</a></h4>
<p>Check usage of CFErrorRef* parameters</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="n">CFErrorRef</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// warn: function accepting CFErrorRef* should have a</span>
  <span class="c1">// non-void return</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">foo</span><span class="p">(</span><span class="n">CFErrorRef</span> <span class="o">*</span><span class="n">error</span><span class="p">)</span> <span class="p">{</span>
  <span class="o">*</span><span class="n">error</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn: potential null dereference</span>
  <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-corefoundation-cfnumber-c">
<span id="osx-corefoundation-cfnumber"></span><h4><a class="toc-backref" href="#id118">1.1.8.24. osx.coreFoundation.CFNumber (C)</a><a class="headerlink" href="#osx-corefoundation-cfnumber-c" title="Permalink to this headline">¶</a></h4>
<p>Check for proper uses of CFNumber APIs.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">CFNumberRef</span> <span class="nf">test</span><span class="p">(</span><span class="kt">unsigned</span> <span class="kt">char</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="n">CFNumberCreate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">kCFNumberSInt16Type</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">);</span>
   <span class="c1">// warn: 8 bit integer is used to initialize a 16 bit integer</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-corefoundation-cfretainrelease-c">
<span id="osx-corefoundation-cfretainrelease"></span><h4><a class="toc-backref" href="#id119">1.1.8.25. osx.coreFoundation.CFRetainRelease (C)</a><a class="headerlink" href="#osx-corefoundation-cfretainrelease-c" title="Permalink to this headline">¶</a></h4>
<p>Check for null arguments to CFRetain/CFRelease/CFMakeCollectable.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="n">CFTypeRef</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="o">!</span><span class="n">p</span><span class="p">)</span>
    <span class="n">CFRetain</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">CFTypeRef</span> <span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="k">return</span><span class="p">;</span>

  <span class="n">CFRelease</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-corefoundation-containers-outofbounds-c">
<span id="osx-corefoundation-containers-outofbounds"></span><h4><a class="toc-backref" href="#id120">1.1.8.26. osx.coreFoundation.containers.OutOfBounds (C)</a><a class="headerlink" href="#osx-corefoundation-containers-outofbounds-c" title="Permalink to this headline">¶</a></h4>
<p>Checks for index out-of-bounds when using ‘CFArray’ API.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">CFArrayRef</span> <span class="n">A</span> <span class="o">=</span> <span class="n">CFArrayCreate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">kCFTypeArrayCallBacks</span><span class="p">);</span>
  <span class="n">CFArrayGetValueAtIndex</span><span class="p">(</span><span class="n">A</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="osx-corefoundation-containers-pointersizedvalues-c">
<span id="osx-corefoundation-containers-pointersizedvalues"></span><h4><a class="toc-backref" href="#id121">1.1.8.27. osx.coreFoundation.containers.PointerSizedValues (C)</a><a class="headerlink" href="#osx-corefoundation-containers-pointersizedvalues-c" title="Permalink to this headline">¶</a></h4>
<p>Warns if ‘CFArray’, ‘CFDictionary’, ‘CFSet’ are created with non-pointer-size values.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">[]</span> <span class="o">=</span> <span class="p">{</span> <span class="mi">1</span> <span class="p">};</span>
  <span class="n">CFArrayRef</span> <span class="n">A</span> <span class="o">=</span> <span class="n">CFArrayCreate</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="p">(</span><span class="k">const</span> <span class="kt">void</span> <span class="s">&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;</span><span class="p">)</span><span class="n">x</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span>
                               <span class="o">&amp;</span><span class="n">kCFTypeArrayCallBacks</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="fuchsia">
<h3><a class="toc-backref" href="#id122">1.1.9. Fuchsia</a><a class="headerlink" href="#fuchsia" title="Permalink to this headline">¶</a></h3>
<p>Fuchsia is an open source capability-based operating system currently being
developed by Google. This section describes checkers that can find various
misuses of Fuchsia APIs.</p>
<div class="section" id="fuchsia-handlechecker">
<span id="id9"></span><h4><a class="toc-backref" href="#id123">1.1.9.1. fuchsia.HandleChecker</a><a class="headerlink" href="#fuchsia-handlechecker" title="Permalink to this headline">¶</a></h4>
<p>Handles identify resources. Similar to pointers they can be leaked,
double freed, or use after freed. This check attempts to find such problems.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">checkLeak08</span><span class="p">(</span><span class="kt">int</span> <span class="n">tag</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">zx_handle_t</span> <span class="n">sa</span><span class="p">,</span> <span class="n">sb</span><span class="p">;</span>
  <span class="n">zx_channel_create</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sa</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">sb</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">tag</span><span class="p">)</span>
    <span class="n">zx_handle_close</span><span class="p">(</span><span class="n">sa</span><span class="p">);</span>
  <span class="n">use</span><span class="p">(</span><span class="n">sb</span><span class="p">);</span> <span class="c1">// Warn: Potential leak of handle</span>
  <span class="n">zx_handle_close</span><span class="p">(</span><span class="n">sb</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="webkit">
<h3><a class="toc-backref" href="#id124">1.1.10. WebKit</a><a class="headerlink" href="#webkit" title="Permalink to this headline">¶</a></h3>
<p>WebKit is an open-source web browser engine available for macOS, iOS and Linux.
This section describes checkers that can find issues in WebKit codebase.</p>
<p>Most of the checkers focus on memory management for which WebKit uses custom implementation of reference counted smartpointers.</p>
<dl class="simple">
<dt>Checkers are formulated in terms related to ref-counting:</dt><dd><ul class="simple">
<li><p><em>Ref-counted type</em> is either <code class="docutils literal notranslate"><span class="pre">Ref&lt;T&gt;</span></code> or <code class="docutils literal notranslate"><span class="pre">RefPtr&lt;T&gt;</span></code>.</p></li>
<li><p><em>Ref-countable type</em> is any type that implements <code class="docutils literal notranslate"><span class="pre">ref()</span></code> and <code class="docutils literal notranslate"><span class="pre">deref()</span></code> methods as <code class="docutils literal notranslate"><span class="pre">RefPtr&lt;&gt;</span></code> is a template (i. e. relies on duck typing).</p></li>
<li><p><em>Uncounted type</em> is ref-countable but not ref-counted type.</p></li>
</ul>
</dd>
</dl>
<div class="section" id="webkit-refcntblbasevirtualdtor">
<span id="id10"></span><h4><a class="toc-backref" href="#id125">1.1.10.1. webkit.RefCntblBaseVirtualDtor</a><a class="headerlink" href="#webkit-refcntblbasevirtualdtor" title="Permalink to this headline">¶</a></h4>
<p>All uncounted types used as base classes must have a virtual destructor.</p>
<p>Ref-counted types hold their ref-countable data by a raw pointer and allow implicit upcasting from ref-counted pointer to derived type to ref-counted pointer to base type. This might lead to an object of (dynamic) derived type being deleted via pointer to the base class type which C++ standard defines as UB in case the base class doesn’t have virtual destructor <code class="docutils literal notranslate"><span class="pre">[expr.delete]</span></code>.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">RefCntblBase</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">ref</span><span class="p">()</span> <span class="p">{}</span>
  <span class="kt">void</span> <span class="n">deref</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="nl">Derived</span> <span class="p">:</span> <span class="n">RefCntblBase</span> <span class="p">{</span> <span class="p">};</span> <span class="c1">// warn</span>
</pre></div>
</div>
</div>
<div class="section" id="webkit-nouncountedmemberchecker">
<span id="id11"></span><h4><a class="toc-backref" href="#id126">1.1.10.2. webkit.NoUncountedMemberChecker</a><a class="headerlink" href="#webkit-nouncountedmemberchecker" title="Permalink to this headline">¶</a></h4>
<p>Raw pointers and references to uncounted types can’t be used as class members. Only ref-counted types are allowed.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">RefCntbl</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">ref</span><span class="p">()</span> <span class="p">{}</span>
  <span class="kt">void</span> <span class="n">deref</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span>
  <span class="n">RefCntbl</span> <span class="o">*</span> <span class="n">ptr</span><span class="p">;</span> <span class="c1">// warn</span>
  <span class="n">RefCntbl</span> <span class="o">&amp;</span> <span class="n">ptr</span><span class="p">;</span> <span class="c1">// warn</span>
  <span class="c1">// ...</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
<div class="section" id="webkit-uncountedlambdacaptureschecker">
<span id="id12"></span><h4><a class="toc-backref" href="#id127">1.1.10.3. webkit.UncountedLambdaCapturesChecker</a><a class="headerlink" href="#webkit-uncountedlambdacaptureschecker" title="Permalink to this headline">¶</a></h4>
<p>Raw pointers and references to uncounted types can’t be captured in lambdas. Only ref-counted types are allowed.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">RefCntbl</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">ref</span><span class="p">()</span> <span class="p">{}</span>
  <span class="kt">void</span> <span class="n">deref</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="n">RefCntbl</span><span class="o">*</span> <span class="n">a</span><span class="p">,</span> <span class="n">RefCntbl</span><span class="o">&amp;</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="p">[</span><span class="o">&amp;</span><span class="p">,</span> <span class="n">a</span><span class="p">](){</span> <span class="c1">// warn about &#39;a&#39;</span>
    <span class="n">do_something</span><span class="p">(</span><span class="n">b</span><span class="p">);</span> <span class="c1">// warn about &#39;b&#39;</span>
  <span class="p">};</span>
<span class="p">};</span>
</pre></div>
</div>
</div>
</div>
</div>
<div class="section" id="experimental-checkers">
<span id="alpha-checkers"></span><h2><a class="toc-backref" href="#id128">1.2. Experimental Checkers</a><a class="headerlink" href="#experimental-checkers" title="Permalink to this headline">¶</a></h2>
<p><em>These are checkers with known issues or limitations that keep them from being on by default. They are likely to have false positives. Bug reports and especially patches are welcome.</em></p>
<div class="section" id="alpha-clone">
<h3><a class="toc-backref" href="#id129">1.2.1. alpha.clone</a><a class="headerlink" href="#alpha-clone" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-clone-clonechecker-c-c-objc">
<span id="alpha-clone-clonechecker"></span><h4><a class="toc-backref" href="#id130">1.2.1.1. alpha.clone.CloneChecker (C, C++, ObjC)</a><a class="headerlink" href="#alpha-clone-clonechecker-c-c-objc" title="Permalink to this headline">¶</a></h4>
<p>Reports similar pieces of code.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">log</span><span class="p">();</span>

<span class="kt">int</span> <span class="nf">max</span><span class="p">(</span><span class="kt">int</span> <span class="n">a</span><span class="p">,</span> <span class="kt">int</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// warn</span>
  <span class="n">log</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="n">b</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">a</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">b</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">maxClone</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">y</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// similar code here</span>
  <span class="n">log</span><span class="p">();</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">&gt;</span> <span class="n">y</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">y</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-boolassignment-objc">
<span id="alpha-core-boolassignment"></span><h4><a class="toc-backref" href="#id131">1.2.1.2. alpha.core.BoolAssignment (ObjC)</a><a class="headerlink" href="#alpha-core-boolassignment-objc" title="Permalink to this headline">¶</a></h4>
<p>Warn about assigning non-{0,1} values to boolean variables.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">BOOL</span> <span class="n">b</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="alpha-core">
<h3><a class="toc-backref" href="#id132">1.2.2. alpha.core</a><a class="headerlink" href="#alpha-core" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-core-c11lock">
<span id="id13"></span><h4><a class="toc-backref" href="#id133">1.2.2.1. alpha.core.C11Lock</a><a class="headerlink" href="#alpha-core-c11lock" title="Permalink to this headline">¶</a></h4>
<p>Similarly to <a class="reference internal" href="#alpha-unix-pthreadlock"><span class="std std-ref">alpha.unix.PthreadLock</span></a>, checks for
the locking/unlocking of <code class="docutils literal notranslate"><span class="pre">mtx_t</span></code> mutexes.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">mtx_t</span> <span class="n">mtx1</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">bad1</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">mtx_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mtx1</span><span class="p">);</span>
  <span class="n">mtx_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mtx1</span><span class="p">);</span> <span class="c1">// warn: This lock has already been acquired</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-callandmessageuninitrefarg-c-c-objc">
<span id="alpha-core-callandmessageuninitrefarg"></span><h4><a class="toc-backref" href="#id134">1.2.2.2. alpha.core.CallAndMessageUnInitRefArg (C,C++, ObjC)</a><a class="headerlink" href="#alpha-core-callandmessageuninitrefarg-c-c-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for logical errors for function calls and Objective-C
message expressions (e.g., uninitialized arguments, null function pointers, and pointer to undefined variables).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">t</span><span class="p">;</span>
  <span class="kt">int</span> <span class="o">&amp;</span><span class="n">p</span> <span class="o">=</span> <span class="n">t</span><span class="p">;</span>
  <span class="kt">int</span> <span class="o">&amp;</span><span class="n">s</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
  <span class="kt">int</span> <span class="o">&amp;</span><span class="n">q</span> <span class="o">=</span> <span class="n">s</span><span class="p">;</span>
  <span class="n">foo</span><span class="p">(</span><span class="n">q</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="n">foo</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-castsize-c">
<span id="alpha-core-castsize"></span><h4><a class="toc-backref" href="#id135">1.2.2.3. alpha.core.CastSize (C)</a><a class="headerlink" href="#alpha-core-castsize-c" title="Permalink to this headline">¶</a></h4>
<p>Check when casting a malloc’ed type <code class="docutils literal notranslate"><span class="pre">T</span></code>, whether the size is a multiple of the size of <code class="docutils literal notranslate"><span class="pre">T</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">11</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-casttostruct-c-c">
<span id="alpha-core-casttostruct"></span><h4><a class="toc-backref" href="#id136">1.2.2.4. alpha.core.CastToStruct (C, C++)</a><a class="headerlink" href="#alpha-core-casttostruct-c-c" title="Permalink to this headline">¶</a></h4>
<p>Check for cast from non-struct pointer to struct pointer.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// C</span>
<span class="k">struct</span> <span class="n">s</span> <span class="p">{};</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="n">s</span> <span class="o">*</span><span class="n">ps</span> <span class="o">=</span> <span class="p">(</span><span class="k">struct</span> <span class="n">s</span> <span class="o">*</span><span class="p">)</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// C++</span>
<span class="k">class</span> <span class="nc">c</span> <span class="p">{};</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">c</span> <span class="o">*</span><span class="n">pc</span> <span class="o">=</span> <span class="p">(</span><span class="n">c</span> <span class="o">*</span><span class="p">)</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-conversion-c-c-objc">
<span id="alpha-core-conversion"></span><h4><a class="toc-backref" href="#id137">1.2.2.5. alpha.core.Conversion (C, C++, ObjC)</a><a class="headerlink" href="#alpha-core-conversion-c-c-objc" title="Permalink to this headline">¶</a></h4>
<p>Loss of sign/precision in implicit conversions.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">unsigned</span> <span class="n">U</span><span class="p">,</span> <span class="kt">signed</span> <span class="n">S</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">S</span> <span class="o">&gt;</span> <span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">U</span> <span class="o">&lt;</span> <span class="n">S</span><span class="p">)</span> <span class="p">{</span>
    <span class="p">}</span>
  <span class="p">}</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">S</span> <span class="o">&lt;</span> <span class="o">-</span><span class="mi">10</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">U</span> <span class="o">&lt;</span> <span class="n">S</span><span class="p">)</span> <span class="p">{</span> <span class="c1">// warn (loss of sign)</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">long</span> <span class="kt">long</span> <span class="n">A</span> <span class="o">=</span> <span class="mi">1LL</span> <span class="o">&lt;&lt;</span> <span class="mi">60</span><span class="p">;</span>
  <span class="kt">short</span> <span class="n">X</span> <span class="o">=</span> <span class="n">A</span><span class="p">;</span> <span class="c1">// warn (loss of precision)</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-dynamictypechecker-objc">
<span id="alpha-core-dynamictypechecker"></span><h4><a class="toc-backref" href="#id138">1.2.2.6. alpha.core.DynamicTypeChecker (ObjC)</a><a class="headerlink" href="#alpha-core-dynamictypechecker-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for cases where the dynamic and the static type of an object are unrelated.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="kt">id</span> <span class="n">date</span> <span class="o">=</span> <span class="p">[</span><span class="bp">NSDate</span> <span class="n">date</span><span class="p">];</span>

<span class="c1">// Warning: Object has a dynamic type &#39;NSDate *&#39; which is</span>
<span class="c1">// incompatible with static type &#39;NSNumber *&#39;&quot;</span>
<span class="bp">NSNumber</span> <span class="o">*</span><span class="n">number</span> <span class="o">=</span> <span class="n">date</span><span class="p">;</span>
<span class="p">[</span><span class="n">number</span> <span class="n">doubleValue</span><span class="p">];</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-fixedaddr-c">
<span id="alpha-core-fixedaddr"></span><h4><a class="toc-backref" href="#id139">1.2.2.7. alpha.core.FixedAddr (C)</a><a class="headerlink" href="#alpha-core-fixedaddr-c" title="Permalink to this headline">¶</a></h4>
<p>Check for assignment of a fixed address to a pointer.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
  <span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span> <span class="mh">0x10000</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-identicalexpr-c-c">
<span id="alpha-core-identicalexpr"></span><h4><a class="toc-backref" href="#id140">1.2.2.8. alpha.core.IdenticalExpr (C, C++)</a><a class="headerlink" href="#alpha-core-identicalexpr-c-c" title="Permalink to this headline">¶</a></h4>
<p>Warn about unintended use of identical expressions in operators.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// C</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">5</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">b</span> <span class="o">=</span> <span class="n">a</span> <span class="o">|</span> <span class="mi">4</span> <span class="o">|</span> <span class="n">a</span><span class="p">;</span> <span class="c1">// warn: identical expr on both sides</span>
<span class="p">}</span>

<span class="c1">// C++</span>
<span class="kt">bool</span> <span class="nf">f</span><span class="p">(</span><span class="kt">void</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">bool</span> <span class="n">b</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">10</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">f</span><span class="p">())</span> <span class="p">{</span> <span class="c1">// warn: true and false branches are identical</span>
    <span class="k">do</span> <span class="p">{</span>
      <span class="n">i</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">f</span><span class="p">());</span>
  <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
    <span class="k">do</span> <span class="p">{</span>
      <span class="n">i</span><span class="o">--</span><span class="p">;</span>
    <span class="p">}</span> <span class="k">while</span> <span class="p">(</span><span class="n">f</span><span class="p">());</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-pointerarithm-c">
<span id="alpha-core-pointerarithm"></span><h4><a class="toc-backref" href="#id141">1.2.2.9. alpha.core.PointerArithm (C)</a><a class="headerlink" href="#alpha-core-pointerarithm-c" title="Permalink to this headline">¶</a></h4>
<p>Check for pointer arithmetic on locations other than array elements.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
  <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">x</span> <span class="o">+</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-pointersub-c">
<span id="alpha-core-pointersub"></span><h4><a class="toc-backref" href="#id142">1.2.2.10. alpha.core.PointerSub (C)</a><a class="headerlink" href="#alpha-core-pointersub-c" title="Permalink to this headline">¶</a></h4>
<p>Check for pointer subtractions on two pointers pointing to different memory chunks.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">,</span> <span class="n">y</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">d</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">y</span> <span class="o">-</span> <span class="o">&amp;</span><span class="n">x</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-sizeofptr-c">
<span id="alpha-core-sizeofptr"></span><h4><a class="toc-backref" href="#id143">1.2.2.11. alpha.core.SizeofPtr (C)</a><a class="headerlink" href="#alpha-core-sizeofptr-c" title="Permalink to this headline">¶</a></h4>
<p>Warn about unintended use of <code class="docutils literal notranslate"><span class="pre">sizeof()</span></code> on pointer expressions.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">s</span> <span class="p">{};</span>

<span class="kt">int</span> <span class="nf">test</span><span class="p">(</span><span class="k">struct</span> <span class="n">s</span> <span class="o">*</span><span class="n">p</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
    <span class="c1">// warn: sizeof(ptr) can produce an unexpected result</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-stackaddressasyncescape-c">
<span id="alpha-core-stackaddressasyncescape"></span><h4><a class="toc-backref" href="#id144">1.2.2.12. alpha.core.StackAddressAsyncEscape (C)</a><a class="headerlink" href="#alpha-core-stackaddressasyncescape-c" title="Permalink to this headline">¶</a></h4>
<p>Check that addresses to stack memory do not escape the function that involves dispatch_after or dispatch_async.
This checker is a part of <code class="docutils literal notranslate"><span class="pre">core.StackAddressEscape</span></code>, but is temporarily disabled until some false positives are fixed.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">dispatch_block_t</span> <span class="nf">test_block_inside_block_async_leak</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">123</span><span class="p">;</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="n">inner</span><span class="p">)(</span><span class="kt">void</span><span class="p">)</span> <span class="o">=</span> <span class="o">^</span><span class="kt">void</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="o">++</span><span class="n">y</span><span class="p">;</span>
  <span class="p">};</span>
  <span class="kt">void</span> <span class="p">(</span><span class="o">^</span><span class="n">outer</span><span class="p">)(</span><span class="kt">void</span><span class="p">)</span> <span class="o">=</span> <span class="o">^</span><span class="kt">void</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
    <span class="kt">int</span> <span class="n">z</span> <span class="o">=</span> <span class="n">x</span><span class="p">;</span>
    <span class="o">++</span><span class="n">z</span><span class="p">;</span>
    <span class="n">inner</span><span class="p">();</span>
  <span class="p">};</span>
  <span class="k">return</span> <span class="n">outer</span><span class="p">;</span> <span class="c1">// warn: address of stack-allocated block is captured by a</span>
                <span class="c1">//       returned block</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-core-testafterdivzero-c">
<span id="alpha-core-testafterdivzero"></span><h4><a class="toc-backref" href="#id145">1.2.2.13. alpha.core.TestAfterDivZero (C)</a><a class="headerlink" href="#alpha-core-testafterdivzero-c" title="Permalink to this headline">¶</a></h4>
<p>Check for division by variable that is later compared against 0.
Either the comparison is useless or there is division by zero.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">var</span> <span class="o">=</span> <span class="mi">77</span> <span class="o">/</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="p">{</span> <span class="p">}</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="alpha-cplusplus">
<h3><a class="toc-backref" href="#id146">1.2.3. alpha.cplusplus</a><a class="headerlink" href="#alpha-cplusplus" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-cplusplus-deletewithnonvirtualdtor-c">
<span id="alpha-cplusplus-deletewithnonvirtualdtor"></span><h4><a class="toc-backref" href="#id147">1.2.3.1. alpha.cplusplus.DeleteWithNonVirtualDtor (C++)</a><a class="headerlink" href="#alpha-cplusplus-deletewithnonvirtualdtor-c" title="Permalink to this headline">¶</a></h4>
<p>Reports destructions of polymorphic objects with a non-virtual destructor in their base class.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">NonVirtual</span> <span class="o">*</span><span class="nf">create</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">NonVirtual</span> <span class="o">*</span><span class="n">x</span> <span class="o">=</span> <span class="k">new</span> <span class="n">NVDerived</span><span class="p">();</span> <span class="c1">// note: conversion from derived to base</span>
                                   <span class="c1">//       happened here</span>
  <span class="k">return</span> <span class="n">x</span><span class="p">;</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">sink</span><span class="p">(</span><span class="n">NonVirtual</span> <span class="o">*</span><span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">delete</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// warn: destruction of a polymorphic object with no virtual</span>
            <span class="c1">//       destructor</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-cplusplus-enumcastoutofrange-c">
<span id="alpha-cplusplus-enumcastoutofrange"></span><h4><a class="toc-backref" href="#id148">1.2.3.2. alpha.cplusplus.EnumCastOutOfRange (C++)</a><a class="headerlink" href="#alpha-cplusplus-enumcastoutofrange-c" title="Permalink to this headline">¶</a></h4>
<p>Check for integer to enumeration casts that could result in undefined values.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">enum</span> <span class="n">TestEnum</span> <span class="p">{</span>
  <span class="n">A</span> <span class="o">=</span> <span class="mi">0</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">TestEnum</span> <span class="n">t</span> <span class="o">=</span> <span class="k">static_cast</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
      <span class="c1">// warn: the value provided to the cast expression is not in</span>
      <span class="c1">//       the valid range of values for the enum</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-cplusplus-invalidatediterator-c">
<span id="alpha-cplusplus-invalidatediterator"></span><h4><a class="toc-backref" href="#id149">1.2.3.3. alpha.cplusplus.InvalidatedIterator (C++)</a><a class="headerlink" href="#alpha-cplusplus-invalidatediterator-c" title="Permalink to this headline">¶</a></h4>
<p>Check for use of invalidated iterators.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">bad_copy_assign_operator_list1</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">list</span> <span class="o">&amp;</span><span class="n">L1</span><span class="p">,</span>
                                    <span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">list</span> <span class="o">&amp;</span><span class="n">L2</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">auto</span> <span class="n">i0</span> <span class="o">=</span> <span class="n">L1</span><span class="p">.</span><span class="n">cbegin</span><span class="p">();</span>
  <span class="n">L1</span> <span class="o">=</span> <span class="n">L2</span><span class="p">;</span>
  <span class="o">*</span><span class="n">i0</span><span class="p">;</span> <span class="c1">// warn: invalidated iterator accessed</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-cplusplus-iteratorrange-c">
<span id="alpha-cplusplus-iteratorrange"></span><h4><a class="toc-backref" href="#id150">1.2.3.4. alpha.cplusplus.IteratorRange (C++)</a><a class="headerlink" href="#alpha-cplusplus-iteratorrange-c" title="Permalink to this headline">¶</a></h4>
<p>Check for iterators used outside their valid ranges.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">simple_bad_end</span><span class="p">(</span><span class="k">const</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span> <span class="o">&amp;</span><span class="n">v</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">auto</span> <span class="n">i</span> <span class="o">=</span> <span class="n">v</span><span class="p">.</span><span class="n">end</span><span class="p">();</span>
  <span class="o">*</span><span class="n">i</span><span class="p">;</span> <span class="c1">// warn: iterator accessed outside of its range</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-cplusplus-mismatchediterator-c">
<span id="alpha-cplusplus-mismatchediterator"></span><h4><a class="toc-backref" href="#id151">1.2.3.5. alpha.cplusplus.MismatchedIterator (C++)</a><a class="headerlink" href="#alpha-cplusplus-mismatchediterator-c" title="Permalink to this headline">¶</a></h4>
<p>Check for use of iterators of different containers where iterators of the same container are expected.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">bad_insert3</span><span class="p">(</span><span class="n">std</span><span class="o">::</span><span class="n">vector</span> <span class="o">&amp;</span><span class="n">v1</span><span class="p">,</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span> <span class="o">&amp;</span><span class="n">v2</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">v2</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span> <span class="n">v2</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span> <span class="n">v2</span><span class="p">.</span><span class="n">cend</span><span class="p">());</span> <span class="c1">// warn: container accessed</span>
                                                  <span class="c1">//       using foreign</span>
                                                  <span class="c1">//       iterator argument</span>
  <span class="n">v1</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span> <span class="n">v1</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span> <span class="n">v2</span><span class="p">.</span><span class="n">cend</span><span class="p">());</span> <span class="c1">// warn: iterators of</span>
                                                  <span class="c1">//       different containers</span>
                                                  <span class="c1">//       used where the same</span>
                                                  <span class="c1">//       container is</span>
                                                  <span class="c1">//       expected</span>
  <span class="n">v1</span><span class="p">.</span><span class="n">insert</span><span class="p">(</span><span class="n">v1</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span> <span class="n">v2</span><span class="p">.</span><span class="n">cbegin</span><span class="p">(),</span> <span class="n">v1</span><span class="p">.</span><span class="n">cend</span><span class="p">());</span> <span class="c1">// warn: iterators of</span>
                                                  <span class="c1">//       different containers</span>
                                                  <span class="c1">//       used where the same</span>
                                                  <span class="c1">//       container is</span>
                                                  <span class="c1">//       expected</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-cplusplus-misusedmovedobject-c">
<span id="alpha-cplusplus-misusedmovedobject"></span><h4><a class="toc-backref" href="#id152">1.2.3.6. alpha.cplusplus.MisusedMovedObject (C++)</a><a class="headerlink" href="#alpha-cplusplus-misusedmovedobject-c" title="Permalink to this headline">¶</a></h4>
<p>Method calls on a moved-from object and copying a moved-from object will be reported.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span> <span class="k">struct</span> <span class="n">A</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="n">foo</span><span class="p">()</span> <span class="p">{}</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">f</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">A</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">A</span> <span class="n">b</span> <span class="o">=</span> <span class="n">std</span><span class="o">::</span><span class="n">move</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="c1">// note: &#39;a&#39; became &#39;moved-from&#39; here</span>
  <span class="n">a</span><span class="p">.</span><span class="n">foo</span><span class="p">();</span>            <span class="c1">// warn: method call on a &#39;moved-from&#39; object &#39;a&#39;</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="alpha-deadcode">
<h3><a class="toc-backref" href="#id153">1.2.4. alpha.deadcode</a><a class="headerlink" href="#alpha-deadcode" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-deadcode-unreachablecode-c-c">
<span id="alpha-deadcode-unreachablecode"></span><h4><a class="toc-backref" href="#id154">1.2.4.1. alpha.deadcode.UnreachableCode (C, C++)</a><a class="headerlink" href="#alpha-deadcode-unreachablecode-c-c" title="Permalink to this headline">¶</a></h4>
<p>Check unreachable code.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="c1">// C</span>
<span class="kt">int</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span>
  <span class="k">while</span><span class="p">(</span><span class="n">x</span><span class="p">);</span>
  <span class="k">return</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// C++</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>

  <span class="k">while</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">a</span><span class="o">--</span><span class="p">;</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">a</span> <span class="o">&gt;</span> <span class="mi">1</span><span class="p">)</span>
    <span class="n">a</span><span class="o">++</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// Objective-C</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="n">id</span> <span class="n">x</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">return</span><span class="p">;</span>
  <span class="p">[</span><span class="n">x</span> <span class="n">retain</span><span class="p">];</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-cplusplus-smartptr-c">
<span id="alpha-cplusplus-smartptr"></span><h4><a class="toc-backref" href="#id155">1.2.4.2. alpha.cplusplus.SmartPtr (C++)</a><a class="headerlink" href="#alpha-cplusplus-smartptr-c" title="Permalink to this headline">¶</a></h4>
<p>Check for dereference of null smart pointers.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">deref_smart_ptr</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">unique_ptr</span><span class="o">&lt;</span><span class="kt">int</span><span class="o">&gt;</span> <span class="n">P</span><span class="p">;</span>
  <span class="o">*</span><span class="n">P</span><span class="p">;</span> <span class="c1">// warn: dereference of a default constructed smart unique_ptr</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="alpha-fuchsia">
<h3><a class="toc-backref" href="#id156">1.2.5. alpha.fuchsia</a><a class="headerlink" href="#alpha-fuchsia" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-fuchsia-lock">
<span id="id14"></span><h4><a class="toc-backref" href="#id157">1.2.5.1. alpha.fuchsia.Lock</a><a class="headerlink" href="#alpha-fuchsia-lock" title="Permalink to this headline">¶</a></h4>
<p>Similarly to <a class="reference internal" href="#alpha-unix-pthreadlock"><span class="std std-ref">alpha.unix.PthreadLock</span></a>, checks for
the locking/unlocking of fuchsia mutexes.</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">spin_lock_t</span> <span class="n">mtx1</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">bad1</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span>
<span class="p">{</span>
  <span class="n">spin_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mtx1</span><span class="p">);</span>
  <span class="n">spin_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mtx1</span><span class="p">);</span>    <span class="c1">// warn: This lock has already been acquired</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="alpha-llvm">
<h3><a class="toc-backref" href="#id158">1.2.6. alpha.llvm</a><a class="headerlink" href="#alpha-llvm" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-llvm-conventions">
<span id="id15"></span><h4><a class="toc-backref" href="#id159">1.2.6.1. alpha.llvm.Conventions</a><a class="headerlink" href="#alpha-llvm-conventions" title="Permalink to this headline">¶</a></h4>
<p>Check code for LLVM codebase conventions:</p>
<ul class="simple">
<li><p>A StringRef should not be bound to a temporary std::string whose lifetime is shorter than the StringRef’s.</p></li>
<li><p>Clang AST nodes should not have fields that can allocate memory.</p></li>
</ul>
</div>
</div>
<div class="section" id="alpha-osx">
<h3><a class="toc-backref" href="#id160">1.2.7. alpha.osx</a><a class="headerlink" href="#alpha-osx" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-osx-cocoa-directivarassignment-objc">
<span id="alpha-osx-cocoa-directivarassignment"></span><h4><a class="toc-backref" href="#id161">1.2.7.1. alpha.osx.cocoa.DirectIvarAssignment (ObjC)</a><a class="headerlink" href="#alpha-osx-cocoa-directivarassignment-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for direct assignments to instance variables.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="bp">MyClass</span> : <span class="bp">NSObject</span> <span class="p">{}</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">A</span><span class="p">;</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">foo</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="bp">MyClass</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">foo</span> <span class="p">{</span>
  <span class="n">_A</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-osx-cocoa-directivarassignmentforannotatedfunctions-objc">
<span id="alpha-osx-cocoa-directivarassignmentforannotatedfunctions"></span><h4><a class="toc-backref" href="#id162">1.2.7.2. alpha.osx.cocoa.DirectIvarAssignmentForAnnotatedFunctions (ObjC)</a><a class="headerlink" href="#alpha-osx-cocoa-directivarassignmentforannotatedfunctions-objc" title="Permalink to this headline">¶</a></h4>
<p>Check for direct assignments to instance variables in
the methods annotated with <code class="docutils literal notranslate"><span class="pre">objc_no_direct_instance_variable_assignment</span></code>.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@interface</span> <span class="bp">MyClass</span> : <span class="bp">NSObject</span> <span class="p">{}</span>
<span class="k">@property</span> <span class="p">(</span><span class="k">readonly</span><span class="p">)</span> <span class="kt">id</span> <span class="n">A</span><span class="p">;</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">fAnnotated</span> <span class="n">__attribute__</span><span class="p">((</span>
    <span class="n">annotate</span><span class="p">(</span><span class="s">&quot;objc_no_direct_instance_variable_assignment&quot;</span><span class="p">)));</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">fNotAnnotated</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="bp">MyClass</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">fAnnotated</span> <span class="p">{</span>
  <span class="n">_A</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">fNotAnnotated</span> <span class="p">{</span>
  <span class="n">_A</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="c1">// no warn</span>
<span class="p">}</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-osx-cocoa-instancevariableinvalidation-objc">
<span id="alpha-osx-cocoa-instancevariableinvalidation"></span><h4><a class="toc-backref" href="#id163">1.2.7.3. alpha.osx.cocoa.InstanceVariableInvalidation (ObjC)</a><a class="headerlink" href="#alpha-osx-cocoa-instancevariableinvalidation-objc" title="Permalink to this headline">¶</a></h4>
<p>Check that the invalidatable instance variables are
invalidated in the methods annotated with objc_instance_variable_invalidator.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@protocol</span> <span class="nc">Invalidation</span> <span class="o">&lt;</span><span class="bp">NSObject</span><span class="o">&gt;</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="n">invalidate</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">annotate</span><span class="p">(</span><span class="s">&quot;objc_instance_variable_invalidator&quot;</span><span class="p">)));</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">InvalidationImpObj</span> : <span class="bp">NSObject</span> <span class="o">&lt;</span><span class="n">Invalidation</span><span class="o">&gt;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">SubclassInvalidationImpObj</span> : <span class="nc">InvalidationImpObj</span> <span class="p">{</span>
  <span class="n">InvalidationImpObj</span> <span class="o">*</span><span class="n">var</span><span class="p">;</span>
<span class="p">}</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="nf">invalidate</span><span class="p">;</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">SubclassInvalidationImpObj</span>
<span class="p">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="nf">invalidate</span> <span class="p">{}</span>
<span class="k">@end</span>
<span class="c1">// warn: var needs to be invalidated or set to nil</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-osx-cocoa-missinginvalidationmethod-objc">
<span id="alpha-osx-cocoa-missinginvalidationmethod"></span><h4><a class="toc-backref" href="#id164">1.2.7.4. alpha.osx.cocoa.MissingInvalidationMethod (ObjC)</a><a class="headerlink" href="#alpha-osx-cocoa-missinginvalidationmethod-objc" title="Permalink to this headline">¶</a></h4>
<p>Check that the invalidation methods are present in classes that contain invalidatable instance variables.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="k">@protocol</span> <span class="nc">Invalidation</span> <span class="o">&lt;</span><span class="bp">NSObject</span><span class="o">&gt;</span>
<span class="o">-</span> <span class="p">(</span><span class="kt">void</span><span class="p">)</span><span class="n">invalidate</span>
  <span class="n">__attribute__</span><span class="p">((</span><span class="n">annotate</span><span class="p">(</span><span class="s">&quot;objc_instance_variable_invalidator&quot;</span><span class="p">)));</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">NeedInvalidation</span> : <span class="bp">NSObject</span> <span class="o">&lt;</span><span class="n">Invalidation</span><span class="o">&gt;</span>
<span class="k">@end</span>

<span class="k">@interface</span> <span class="nc">MissingInvalidationMethodDecl</span> : <span class="bp">NSObject</span> <span class="p">{</span>
  <span class="n">NeedInvalidation</span> <span class="o">*</span><span class="n">Var</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
<span class="k">@end</span>

<span class="k">@implementation</span> <span class="nc">MissingInvalidationMethodDecl</span>
<span class="k">@end</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-osx-cocoa-localizability-pluralmisusechecker-objc">
<span id="alpha-osx-cocoa-localizability-pluralmisusechecker"></span><h4><a class="toc-backref" href="#id165">1.2.7.5. alpha.osx.cocoa.localizability.PluralMisuseChecker (ObjC)</a><a class="headerlink" href="#alpha-osx-cocoa-localizability-pluralmisusechecker-objc" title="Permalink to this headline">¶</a></h4>
<p>Warns against using one vs. many plural pattern in code when generating localized strings.</p>
<div class="highlight-objc notranslate"><div class="highlight"><pre><span></span><span class="bp">NSString</span> <span class="o">*</span><span class="n">reminderText</span> <span class="o">=</span>
  <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;None&quot;</span><span class="p">,</span> <span class="s">@&quot;Indicates no reminders&quot;</span><span class="p">);</span>
<span class="k">if</span> <span class="p">(</span><span class="n">reminderCount</span> <span class="o">==</span> <span class="mi">1</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Warning: Plural cases are not supported across all languages.</span>
  <span class="c1">// Use a .stringsdict file instead</span>
  <span class="n">reminderText</span> <span class="o">=</span>
    <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;1 Reminder&quot;</span><span class="p">,</span> <span class="s">@&quot;Indicates single reminder&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="k">else</span> <span class="k">if</span> <span class="p">(</span><span class="n">reminderCount</span> <span class="o">&gt;=</span> <span class="mi">2</span><span class="p">)</span> <span class="p">{</span>
  <span class="c1">// Warning: Plural cases are not supported across all languages.</span>
  <span class="c1">// Use a .stringsdict file instead</span>
  <span class="n">reminderText</span> <span class="o">=</span>
    <span class="p">[</span><span class="bp">NSString</span> <span class="nl">stringWithFormat</span><span class="p">:</span>
      <span class="n">NSLocalizedString</span><span class="p">(</span><span class="s">@&quot;%@ Reminders&quot;</span><span class="p">,</span> <span class="s">@&quot;Indicates multiple reminders&quot;</span><span class="p">),</span>
        <span class="n">reminderCount</span><span class="p">];</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="alpha-security">
<h3><a class="toc-backref" href="#id166">1.2.8. alpha.security</a><a class="headerlink" href="#alpha-security" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="alpha-security-cert">
<h3><a class="toc-backref" href="#id167">1.2.9. alpha.security.cert</a><a class="headerlink" href="#alpha-security-cert" title="Permalink to this headline">¶</a></h3>
<p>SEI CERT checkers which tries to find errors based on their <a class="reference external" href="https://wiki.sei.cmu.edu/confluence/display/c/2+Rules">C coding rules</a>.</p>
</div>
<div class="section" id="alpha-security-cert-pos">
<span id="alpha-security-cert-pos-checkers"></span><h3><a class="toc-backref" href="#id168">1.2.10. alpha.security.cert.pos</a><a class="headerlink" href="#alpha-security-cert-pos" title="Permalink to this headline">¶</a></h3>
<p>SEI CERT checkers of <a class="reference external" href="https://wiki.sei.cmu.edu/confluence/pages/viewpage.action?pageId=87152405">POSIX C coding rules</a>.</p>
<div class="section" id="alpha-security-cert-pos-34c">
<span id="id16"></span><h4><a class="toc-backref" href="#id169">1.2.10.1. alpha.security.cert.pos.34c</a><a class="headerlink" href="#alpha-security-cert-pos-34c" title="Permalink to this headline">¶</a></h4>
<p>Finds calls to the <code class="docutils literal notranslate"><span class="pre">putenv</span></code> function which pass a pointer to an automatic variable as the argument.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">int</span> <span class="nf">func</span><span class="p">(</span><span class="k">const</span> <span class="kt">char</span> <span class="o">*</span><span class="n">var</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">env</span><span class="p">[</span><span class="mi">1024</span><span class="p">];</span>
  <span class="kt">int</span> <span class="n">retval</span> <span class="o">=</span> <span class="n">snprintf</span><span class="p">(</span><span class="n">env</span><span class="p">,</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">env</span><span class="p">),</span><span class="s">&quot;TEST=%s&quot;</span><span class="p">,</span> <span class="n">var</span><span class="p">);</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">retval</span> <span class="o">&lt;</span> <span class="mi">0</span> <span class="o">||</span> <span class="p">(</span><span class="kt">size_t</span><span class="p">)</span><span class="n">retval</span> <span class="o">&gt;=</span> <span class="k">sizeof</span><span class="p">(</span><span class="n">env</span><span class="p">))</span> <span class="p">{</span>
      <span class="cm">/* Handle error */</span>
  <span class="p">}</span>

  <span class="k">return</span> <span class="n">putenv</span><span class="p">(</span><span class="n">env</span><span class="p">);</span> <span class="c1">// putenv function should not be called with auto variables</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-security-arraybound-c">
<span id="alpha-security-arraybound"></span><h4><a class="toc-backref" href="#id170">1.2.10.2. alpha.security.ArrayBound (C)</a><a class="headerlink" href="#alpha-security-arraybound-c" title="Permalink to this headline">¶</a></h4>
<p>Warn about buffer overflows (older checker).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="k">struct</span> <span class="n">seven_words</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">c</span><span class="p">[</span><span class="mi">7</span><span class="p">];</span>
<span class="p">};</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">struct</span> <span class="n">seven_words</span> <span class="n">a</span><span class="p">,</span> <span class="o">*</span><span class="n">p</span><span class="p">;</span>
  <span class="n">p</span> <span class="o">=</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">;</span>
  <span class="n">p</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span>
  <span class="n">p</span><span class="p">[</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">a</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// note: requires unix.Malloc or</span>
<span class="c1">// alpha.unix.MallocWithAnnotations checks enabled.</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="mi">12</span><span class="p">);</span>
  <span class="n">p</span><span class="p">[</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="mi">4</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="p">];</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">b</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span><span class="o">*</span><span class="p">)</span><span class="n">a</span><span class="p">;</span>
  <span class="n">b</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">3</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-security-arrayboundv2-c">
<span id="alpha-security-arrayboundv2"></span><h4><a class="toc-backref" href="#id171">1.2.10.3. alpha.security.ArrayBoundV2 (C)</a><a class="headerlink" href="#alpha-security-arrayboundv2-c" title="Permalink to this headline">¶</a></h4>
<p>Warn about buffer overflows (newer checker).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="o">*</span><span class="n">s</span> <span class="o">=</span> <span class="s">&quot;&quot;</span><span class="p">;</span>
  <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">buf</span><span class="p">[</span><span class="mi">100</span><span class="p">];</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">buf</span><span class="p">;</span>
  <span class="n">p</span> <span class="o">=</span> <span class="n">p</span> <span class="o">+</span> <span class="mi">99</span><span class="p">;</span>
  <span class="n">p</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// note: compiler has internal check for this.</span>
<span class="c1">// Use -Wno-array-bounds to suppress compiler warning.</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">buf</span><span class="p">[</span><span class="mi">100</span><span class="p">][</span><span class="mi">100</span><span class="p">];</span>
  <span class="n">buf</span><span class="p">[</span><span class="mi">0</span><span class="p">][</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="mi">1</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="c1">// note: requires alpha.security.taint check turned on.</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">s</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;abc&quot;</span><span class="p">;</span>
  <span class="kt">int</span> <span class="n">x</span> <span class="o">=</span> <span class="n">getchar</span><span class="p">();</span>
  <span class="kt">char</span> <span class="n">c</span> <span class="o">=</span> <span class="n">s</span><span class="p">[</span><span class="n">x</span><span class="p">];</span> <span class="c1">// warn: index is tainted</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-security-mallocoverflow-c">
<span id="alpha-security-mallocoverflow"></span><h4><a class="toc-backref" href="#id172">1.2.10.4. alpha.security.MallocOverflow (C)</a><a class="headerlink" href="#alpha-security-mallocoverflow-c" title="Permalink to this headline">¶</a></h4>
<p>Check for overflows in the arguments to malloc().</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test2</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">n</span> <span class="o">&gt;</span> <span class="mi">100</span><span class="p">)</span> <span class="c1">// gives an upper-bound</span>
    <span class="k">return</span><span class="p">;</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">malloc</span><span class="p">(</span><span class="n">n</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span> <span class="c1">// no warning</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-security-mmapwriteexec-c">
<span id="alpha-security-mmapwriteexec"></span><h4><a class="toc-backref" href="#id173">1.2.10.5. alpha.security.MmapWriteExec (C)</a><a class="headerlink" href="#alpha-security-mmapwriteexec-c" title="Permalink to this headline">¶</a></h4>
<p>Warn on mmap() calls that are both writable and executable.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">(</span><span class="kt">int</span> <span class="n">n</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">void</span> <span class="o">*</span><span class="n">c</span> <span class="o">=</span> <span class="n">mmap</span><span class="p">(</span><span class="nb">NULL</span><span class="p">,</span> <span class="mi">32</span><span class="p">,</span> <span class="n">PROT_READ</span> <span class="o">|</span> <span class="n">PROT_WRITE</span> <span class="o">|</span> <span class="n">PROT_EXEC</span><span class="p">,</span>
                 <span class="n">MAP_PRIVATE</span> <span class="o">|</span> <span class="n">MAP_ANON</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span>
  <span class="c1">// warn: Both PROT_WRITE and PROT_EXEC flags are set. This can lead to</span>
  <span class="c1">//       exploitable memory regions, which could be overwritten with malicious</span>
  <span class="c1">//       code</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-security-returnptrrange-c">
<span id="alpha-security-returnptrrange"></span><h4><a class="toc-backref" href="#id174">1.2.10.6. alpha.security.ReturnPtrRange (C)</a><a class="headerlink" href="#alpha-security-returnptrrange-c" title="Permalink to this headline">¶</a></h4>
<p>Check for an out-of-bound pointer being returned to callers.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="k">static</span> <span class="kt">int</span> <span class="n">A</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>

<span class="kt">int</span> <span class="o">*</span><span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">A</span> <span class="o">+</span> <span class="mi">10</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">p</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">int</span> <span class="nf">test</span><span class="p">(</span><span class="kt">void</span><span class="p">)</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
  <span class="k">return</span> <span class="n">x</span><span class="p">;</span> <span class="c1">// warn: undefined or garbage returned</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-security-taint-taintpropagation-c-c">
<span id="alpha-security-taint-taintpropagation"></span><h4><a class="toc-backref" href="#id175">1.2.10.7. alpha.security.taint.TaintPropagation (C, C++)</a><a class="headerlink" href="#alpha-security-taint-taintpropagation-c-c" title="Permalink to this headline">¶</a></h4>
<p>Generate taint information used by other checkers.
A data is tainted when it comes from an unreliable source.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">x</span> <span class="o">=</span> <span class="n">getchar</span><span class="p">();</span> <span class="c1">// &#39;x&#39; marked as tainted</span>
  <span class="n">system</span><span class="p">(</span><span class="o">&amp;</span><span class="n">x</span><span class="p">);</span> <span class="c1">// warn: untrusted data is passed to a system call</span>
<span class="p">}</span>

<span class="c1">// note: compiler internally checks if the second param to</span>
<span class="c1">// sprintf is a string literal or not.</span>
<span class="c1">// Use -Wno-format-security to suppress compiler warning.</span>
<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">char</span> <span class="n">s</span><span class="p">[</span><span class="mi">10</span><span class="p">],</span> <span class="n">buf</span><span class="p">[</span><span class="mi">10</span><span class="p">];</span>
  <span class="n">fscanf</span><span class="p">(</span><span class="n">stdin</span><span class="p">,</span> <span class="s">&quot;%s&quot;</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span> <span class="c1">// &#39;s&#39; marked as tainted</span>

  <span class="n">sprintf</span><span class="p">(</span><span class="n">buf</span><span class="p">,</span> <span class="n">s</span><span class="p">);</span> <span class="c1">// warn: untrusted data as a format string</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">size_t</span> <span class="n">ts</span><span class="p">;</span>
  <span class="n">scanf</span><span class="p">(</span><span class="s">&quot;%zd&quot;</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">ts</span><span class="p">);</span> <span class="c1">// &#39;ts&#39; marked as tainted</span>
  <span class="kt">int</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="p">(</span><span class="kt">int</span> <span class="o">*</span><span class="p">)</span><span class="n">malloc</span><span class="p">(</span><span class="n">ts</span> <span class="o">*</span> <span class="k">sizeof</span><span class="p">(</span><span class="kt">int</span><span class="p">));</span>
    <span class="c1">// warn: untrusted data as buffer size</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="alpha-unix">
<h3><a class="toc-backref" href="#id176">1.2.11. alpha.unix</a><a class="headerlink" href="#alpha-unix" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-unix-blockincriticalsection-c">
<span id="alpha-unix-blockincriticalsection"></span><h4><a class="toc-backref" href="#id177">1.2.11.1. alpha.unix.BlockInCriticalSection (C)</a><a class="headerlink" href="#alpha-unix-blockincriticalsection-c" title="Permalink to this headline">¶</a></h4>
<p>Check for calls to blocking functions inside a critical section.
Applies to: <code class="docutils literal notranslate"><span class="pre">lock,</span> <span class="pre">unlock,</span> <span class="pre">sleep,</span> <span class="pre">getc,</span> <span class="pre">fgets,</span> <span class="pre">read,</span> <span class="pre">recv,</span> <span class="pre">pthread_mutex_lock,</span></code>
`` pthread_mutex_unlock, mtx_lock, mtx_timedlock, mtx_trylock, mtx_unlock, lock_guard, unique_lock``</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">std</span><span class="o">::</span><span class="n">mutex</span> <span class="n">m</span><span class="p">;</span>
  <span class="n">m</span><span class="p">.</span><span class="n">lock</span><span class="p">();</span>
  <span class="n">sleep</span><span class="p">(</span><span class="mi">3</span><span class="p">);</span> <span class="c1">// warn: a blocking function sleep is called inside a critical</span>
            <span class="c1">//       section</span>
  <span class="n">m</span><span class="p">.</span><span class="n">unlock</span><span class="p">();</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-unix-chroot-c">
<span id="alpha-unix-chroot"></span><h4><a class="toc-backref" href="#id178">1.2.11.2. alpha.unix.Chroot (C)</a><a class="headerlink" href="#alpha-unix-chroot-c" title="Permalink to this headline">¶</a></h4>
<p>Check improper use of chroot.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">f</span><span class="p">();</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">chroot</span><span class="p">(</span><span class="s">&quot;/usr/local&quot;</span><span class="p">);</span>
  <span class="n">f</span><span class="p">();</span> <span class="c1">// warn: no call of chdir(&quot;/&quot;) immediately after chroot</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-unix-pthreadlock-c">
<span id="alpha-unix-pthreadlock"></span><h4><a class="toc-backref" href="#id179">1.2.11.3. alpha.unix.PthreadLock (C)</a><a class="headerlink" href="#alpha-unix-pthreadlock-c" title="Permalink to this headline">¶</a></h4>
<p>Simple lock -&gt; unlock checker.
Applies to: <code class="docutils literal notranslate"><span class="pre">pthread_mutex_lock,</span> <span class="pre">pthread_rwlock_rdlock,</span> <span class="pre">pthread_rwlock_wrlock,</span> <span class="pre">lck_mtx_lock,</span> <span class="pre">lck_rw_lock_exclusive</span></code>
<code class="docutils literal notranslate"><span class="pre">lck_rw_lock_shared,</span> <span class="pre">pthread_mutex_trylock,</span> <span class="pre">pthread_rwlock_tryrdlock,</span> <span class="pre">pthread_rwlock_tryrwlock,</span> <span class="pre">lck_mtx_try_lock,</span>
<span class="pre">lck_rw_try_lock_exclusive,</span> <span class="pre">lck_rw_try_lock_shared,</span> <span class="pre">pthread_mutex_unlock,</span> <span class="pre">pthread_rwlock_unlock,</span> <span class="pre">lck_mtx_unlock,</span> <span class="pre">lck_rw_done</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="n">pthread_mutex_t</span> <span class="n">mtx</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mtx</span><span class="p">);</span>
  <span class="n">pthread_mutex_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">mtx</span><span class="p">);</span>
    <span class="c1">// warn: this lock has already been acquired</span>
<span class="p">}</span>

<span class="n">lck_mtx_t</span> <span class="n">lck1</span><span class="p">,</span> <span class="n">lck2</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">lck_mtx_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lck1</span><span class="p">);</span>
  <span class="n">lck_mtx_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lck2</span><span class="p">);</span>
  <span class="n">lck_mtx_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lck1</span><span class="p">);</span>
    <span class="c1">// warn: this was not the most recently acquired lock</span>
<span class="p">}</span>

<span class="n">lck_mtx_t</span> <span class="n">lck1</span><span class="p">,</span> <span class="n">lck2</span><span class="p">;</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="k">if</span> <span class="p">(</span><span class="n">lck_mtx_try_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lck1</span><span class="p">)</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span>
    <span class="k">return</span><span class="p">;</span>

  <span class="n">lck_mtx_lock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lck2</span><span class="p">);</span>
  <span class="n">lck_mtx_unlock</span><span class="p">(</span><span class="o">&amp;</span><span class="n">lck1</span><span class="p">);</span>
    <span class="c1">// warn: this was not the most recently acquired lock</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-unix-simplestream-c">
<span id="alpha-unix-simplestream"></span><h4><a class="toc-backref" href="#id180">1.2.11.4. alpha.unix.SimpleStream (C)</a><a class="headerlink" href="#alpha-unix-simplestream-c" title="Permalink to this headline">¶</a></h4>
<p>Check for misuses of stream APIs. Check for misuses of stream APIs: <code class="docutils literal notranslate"><span class="pre">fopen,</span> <span class="pre">fclose</span></code>
(demo checker, the subject of the demo (<a class="reference external" href="https://llvm.org/devmtg/2012-11/Zaks-Rose-Checker24Hours.pdf">Slides</a> ,
<a class="reference external" href="https://youtu.be/kdxlsP5QVPw">Video</a>) by Anna Zaks and Jordan Rose presented at the
<a class="reference external" href="https://llvm.org/devmtg/2012-11/">2012 LLVM Developers’ Meeting</a>).</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">FILE</span> <span class="o">*</span><span class="n">F</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;myfile.txt&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="c1">// warn: opened file is never closed</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">FILE</span> <span class="o">*</span><span class="n">F</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;myfile.txt&quot;</span><span class="p">,</span> <span class="s">&quot;w&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">F</span><span class="p">)</span>
    <span class="n">fclose</span><span class="p">(</span><span class="n">F</span><span class="p">);</span>

  <span class="n">fclose</span><span class="p">(</span><span class="n">F</span><span class="p">);</span> <span class="c1">// warn: closing a previously closed file stream</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-unix-stream-c">
<span id="alpha-unix-stream"></span><h4><a class="toc-backref" href="#id181">1.2.11.5. alpha.unix.Stream (C)</a><a class="headerlink" href="#alpha-unix-stream-c" title="Permalink to this headline">¶</a></h4>
<p>Check stream handling functions: <code class="docutils literal notranslate"><span class="pre">fopen,</span> <span class="pre">tmpfile,</span> <span class="pre">fclose,</span> <span class="pre">fread,</span> <span class="pre">fwrite,</span> <span class="pre">fseek,</span> <span class="pre">ftell,</span> <span class="pre">rewind,</span> <span class="pre">fgetpos,</span></code>
<code class="docutils literal notranslate"><span class="pre">fsetpos,</span> <span class="pre">clearerr,</span> <span class="pre">feof,</span> <span class="pre">ferror,</span> <span class="pre">fileno</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">FILE</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
<span class="p">}</span> <span class="c1">// warn: opened file is never closed</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">FILE</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
  <span class="n">fseek</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">SEEK_SET</span><span class="p">);</span> <span class="c1">// warn: stream pointer might be NULL</span>
  <span class="n">fclose</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">FILE</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>

  <span class="k">if</span> <span class="p">(</span><span class="n">p</span><span class="p">)</span>
    <span class="n">fseek</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">3</span><span class="p">);</span>
     <span class="c1">// warn: third arg should be SEEK_SET, SEEK_END, or SEEK_CUR</span>

  <span class="n">fclose</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">FILE</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">fopen</span><span class="p">(</span><span class="s">&quot;foo&quot;</span><span class="p">,</span> <span class="s">&quot;r&quot;</span><span class="p">);</span>
  <span class="n">fclose</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
  <span class="n">fclose</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn: already closed</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">FILE</span> <span class="o">*</span><span class="n">p</span> <span class="o">=</span> <span class="n">tmpfile</span><span class="p">();</span>
  <span class="n">ftell</span><span class="p">(</span><span class="n">p</span><span class="p">);</span> <span class="c1">// warn: stream pointer might be NULL</span>
  <span class="n">fclose</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-unix-cstring-bufferoverlap-c">
<span id="alpha-unix-cstring-bufferoverlap"></span><h4><a class="toc-backref" href="#id182">1.2.11.6. alpha.unix.cstring.BufferOverlap (C)</a><a class="headerlink" href="#alpha-unix-cstring-bufferoverlap-c" title="Permalink to this headline">¶</a></h4>
<p>Checks for overlap in two buffer arguments. Applies to:  <code class="docutils literal notranslate"><span class="pre">memcpy,</span> <span class="pre">mempcpy</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">a</span><span class="p">[</span><span class="mi">4</span><span class="p">]</span> <span class="o">=</span> <span class="p">{</span><span class="mi">0</span><span class="p">};</span>
  <span class="n">memcpy</span><span class="p">(</span><span class="n">a</span> <span class="o">+</span> <span class="mi">2</span><span class="p">,</span> <span class="n">a</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="mi">8</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-unix-cstring-notnullterminated-c">
<span id="alpha-unix-cstring-notnullterminated"></span><h4><a class="toc-backref" href="#id183">1.2.11.7. alpha.unix.cstring.NotNullTerminated (C)</a><a class="headerlink" href="#alpha-unix-cstring-notnullterminated-c" title="Permalink to this headline">¶</a></h4>
<p>Check for arguments which are not null-terminated strings; applies to: <code class="docutils literal notranslate"><span class="pre">strlen,</span> <span class="pre">strnlen,</span> <span class="pre">strcpy,</span> <span class="pre">strncpy,</span> <span class="pre">strcat,</span> <span class="pre">strncat</span></code>.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">test</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-unix-cstring-outofbounds-c">
<span id="alpha-unix-cstring-outofbounds"></span><h4><a class="toc-backref" href="#id184">1.2.11.8. alpha.unix.cstring.OutOfBounds (C)</a><a class="headerlink" href="#alpha-unix-cstring-outofbounds-c" title="Permalink to this headline">¶</a></h4>
<p>Check for out-of-bounds access in string functions; applies to:`` strncopy, strncat``.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
  <span class="kt">int</span> <span class="n">y</span> <span class="o">=</span> <span class="n">strlen</span><span class="p">((</span><span class="kt">char</span> <span class="o">*</span><span class="p">)</span><span class="o">&amp;</span><span class="n">test</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-nondeterminism-pointeriteration-c">
<span id="alpha-nondeterminism-pointeriteration"></span><h4><a class="toc-backref" href="#id185">1.2.11.9. alpha.nondeterminism.PointerIteration (C++)</a><a class="headerlink" href="#alpha-nondeterminism-pointeriteration-c" title="Permalink to this headline">¶</a></h4>
<p>Check for non-determinism caused by iterating unordered containers of pointers.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
 <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
 <span class="n">std</span><span class="o">::</span><span class="n">unordered_set</span><span class="o">&lt;</span><span class="kt">int</span> <span class="o">*&gt;</span> <span class="n">UnorderedPtrSet</span> <span class="o">=</span> <span class="p">{</span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">};</span>

 <span class="k">for</span> <span class="p">(</span><span class="k">auto</span> <span class="nl">i</span> <span class="p">:</span> <span class="n">UnorderedPtrSet</span><span class="p">)</span> <span class="c1">// warn</span>
   <span class="n">f</span><span class="p">(</span><span class="n">i</span><span class="p">);</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
<div class="section" id="alpha-nondeterminism-pointersorting-c">
<span id="alpha-nondeterminism-pointersorting"></span><h4><a class="toc-backref" href="#id186">1.2.11.10. alpha.nondeterminism.PointerSorting (C++)</a><a class="headerlink" href="#alpha-nondeterminism-pointersorting-c" title="Permalink to this headline">¶</a></h4>
<p>Check for non-determinism caused by sorting of pointers.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">test</span><span class="p">()</span> <span class="p">{</span>
 <span class="kt">int</span> <span class="n">a</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span> <span class="n">b</span> <span class="o">=</span> <span class="mi">2</span><span class="p">;</span>
 <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="kt">int</span> <span class="o">*&gt;</span> <span class="n">V</span> <span class="o">=</span> <span class="p">{</span><span class="o">&amp;</span><span class="n">a</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">b</span><span class="p">};</span>
 <span class="n">std</span><span class="o">::</span><span class="n">sort</span><span class="p">(</span><span class="n">V</span><span class="p">.</span><span class="n">begin</span><span class="p">(),</span> <span class="n">V</span><span class="p">.</span><span class="n">end</span><span class="p">());</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div>
</div>
<div class="section" id="alpha-webkit">
<h3><a class="toc-backref" href="#id187">1.2.12. alpha.WebKit</a><a class="headerlink" href="#alpha-webkit" title="Permalink to this headline">¶</a></h3>
<div class="section" id="alpha-webkit-uncountedcallargschecker">
<span id="id17"></span><h4><a class="toc-backref" href="#id188">1.2.12.1. alpha.webkit.UncountedCallArgsChecker</a><a class="headerlink" href="#alpha-webkit-uncountedcallargschecker" title="Permalink to this headline">¶</a></h4>
<p>The goal of this rule is to make sure that lifetime of any dynamically allocated ref-countable object passed as a call argument spans past the end of the call. This applies to call to any function, method, lambda, function pointer or functor. Ref-countable types aren’t supposed to be allocated on stack so we check arguments for parameters of raw pointers and references to uncounted types.</p>
<p>Here are some examples of situations that we warn about as they <em>might</em> be potentially unsafe. The logic is that either we’re able to guarantee that an argument is safe or it’s considered if not a bug then bug-prone.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">RefCountable</span><span class="o">*</span> <span class="nf">provide_uncounted</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">consume</span><span class="p">(</span><span class="n">RefCountable</span><span class="o">*</span><span class="p">);</span>

<span class="c1">// In these cases we can&#39;t make sure callee won&#39;t directly or indirectly call `deref()` on the argument which could make it unsafe from such point until the end of the call.</span>

<span class="kt">void</span> <span class="nf">foo1</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">consume</span><span class="p">(</span><span class="n">provide_uncounted</span><span class="p">());</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">foo2</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">RefCountable</span><span class="o">*</span> <span class="n">uncounted</span> <span class="o">=</span> <span class="n">provide_uncounted</span><span class="p">();</span>
  <span class="n">consume</span><span class="p">(</span><span class="n">uncounted</span><span class="p">);</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Although we are enforcing member variables to be ref-counted by <cite>webkit.NoUncountedMemberChecker</cite> any method of the same class still has unrestricted access to these. Since from a caller’s perspective we can’t guarantee a particular member won’t get modified by callee (directly or indirectly) we don’t consider values obtained from members safe.</p>
<p>Note: It’s likely this heuristic could be made more precise with fewer false positives - for example calls to free functions that don’t have any parameter other than the pointer should be safe as the callee won’t be able to tamper with the member unless it’s a global variable.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="k">struct</span> <span class="n">Foo</span> <span class="p">{</span>
  <span class="n">RefPtr</span><span class="o">&lt;</span><span class="n">RefCountable</span><span class="o">&gt;</span> <span class="n">member</span><span class="p">;</span>
  <span class="kt">void</span> <span class="nf">consume</span><span class="p">(</span><span class="n">RefCountable</span><span class="o">*</span><span class="p">)</span> <span class="p">{</span> <span class="cm">/* ... */</span> <span class="p">}</span>
  <span class="kt">void</span> <span class="nf">bugprone</span><span class="p">()</span> <span class="p">{</span>
    <span class="n">consume</span><span class="p">(</span><span class="n">member</span><span class="p">.</span><span class="n">get</span><span class="p">());</span> <span class="c1">// warn</span>
  <span class="p">}</span>
<span class="p">};</span>
</pre></div>
</div>
</div></blockquote>
<p>The implementation of this rule is a heuristic - we define a whitelist of kinds of values that are considered safe to be passed as arguments. If we can’t prove an argument is safe it’s considered an error.</p>
<p>Allowed kinds of arguments:</p>
<ul>
<li><p>values obtained from ref-counted objects (including temporaries as those survive the call too)</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">RefCountable</span><span class="o">*</span> <span class="nf">provide_uncounted</span><span class="p">();</span>
<span class="kt">void</span> <span class="nf">consume</span><span class="p">(</span><span class="n">RefCountable</span><span class="o">*</span><span class="p">);</span>

<span class="kt">void</span> <span class="nf">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">RefPtr</span><span class="o">&lt;</span><span class="n">RefCountable</span><span class="o">&gt;</span> <span class="n">rc</span> <span class="o">=</span> <span class="n">makeRef</span><span class="p">(</span><span class="n">provide_uncounted</span><span class="p">());</span>
  <span class="n">consume</span><span class="p">(</span><span class="n">rc</span><span class="p">.</span><span class="n">get</span><span class="p">());</span> <span class="c1">// ok</span>
  <span class="n">consume</span><span class="p">(</span><span class="n">makeRef</span><span class="p">(</span><span class="n">provide_uncounted</span><span class="p">()).</span><span class="n">get</span><span class="p">());</span> <span class="c1">// ok</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>forwarding uncounted arguments from caller to callee</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">foo</span><span class="p">(</span><span class="n">RefCountable</span><span class="o">&amp;</span> <span class="n">a</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">bar</span><span class="p">(</span><span class="n">a</span><span class="p">);</span> <span class="c1">// ok</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Caller of <code class="docutils literal notranslate"><span class="pre">foo()</span></code> is responsible for  <code class="docutils literal notranslate"><span class="pre">a</span></code>’s lifetime.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">this</span></code> pointer</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="n">Foo</span><span class="o">::</span><span class="n">foo</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">baz</span><span class="p">(</span><span class="k">this</span><span class="p">);</span>  <span class="c1">// ok</span>
<span class="p">}</span>
</pre></div>
</div>
<p>Caller of <code class="docutils literal notranslate"><span class="pre">foo()</span></code> is responsible for keeping the memory pointed to by <code class="docutils literal notranslate"><span class="pre">this</span></code> pointer safe.</p>
</li>
<li><p>constants</p>
<div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="n">foo</span><span class="p">(</span><span class="k">nullptr</span><span class="p">,</span> <span class="nb">NULL</span><span class="p">,</span> <span class="mi">0</span><span class="p">);</span> <span class="c1">// ok</span>
</pre></div>
</div>
</li>
</ul>
<p>We also define a set of safe transformations which if passed a safe value as an input provide (usually it’s the return value) a safe value (or an object that provides safe values). This is also a heuristic.</p>
<ul class="simple">
<li><p>constructors of ref-counted types (including factory methods)</p></li>
<li><p>getters of ref-counted types</p></li>
<li><p>member overloaded operators</p></li>
<li><p>casts</p></li>
<li><p>unary operators like <code class="docutils literal notranslate"><span class="pre">&amp;</span></code> or <code class="docutils literal notranslate"><span class="pre">*</span></code></p></li>
</ul>
</div>
<div class="section" id="alpha-webkit-uncountedlocalvarschecker">
<span id="id18"></span><h4><a class="toc-backref" href="#id189">1.2.12.2. alpha.webkit.UncountedLocalVarsChecker</a><a class="headerlink" href="#alpha-webkit-uncountedlocalvarschecker" title="Permalink to this headline">¶</a></h4>
<p>The goal of this rule is to make sure that any uncounted local variable is backed by a ref-counted object with lifetime that is strictly larger than the scope of the uncounted local variable. To be on the safe side we require the scope of an uncounted variable to be embedded in the scope of ref-counted object that backs it.</p>
<p>These are examples of cases that we consider safe:</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">foo1</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">RefPtr</span><span class="o">&lt;</span><span class="n">RefCountable</span><span class="o">&gt;</span> <span class="n">counted</span><span class="p">;</span>
  <span class="c1">// The scope of uncounted is EMBEDDED in the scope of counted.</span>
  <span class="p">{</span>
    <span class="n">RefCountable</span><span class="o">*</span> <span class="n">uncounted</span> <span class="o">=</span> <span class="n">counted</span><span class="p">.</span><span class="n">get</span><span class="p">();</span> <span class="c1">// ok</span>
  <span class="p">}</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">foo2</span><span class="p">(</span><span class="n">RefPtr</span><span class="o">&lt;</span><span class="n">RefCountable</span><span class="o">&gt;</span> <span class="n">counted_param</span><span class="p">)</span> <span class="p">{</span>
  <span class="n">RefCountable</span><span class="o">*</span> <span class="n">uncounted</span> <span class="o">=</span> <span class="n">counted_param</span><span class="p">.</span><span class="n">get</span><span class="p">();</span> <span class="c1">// ok</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="n">FooClass</span><span class="o">::</span><span class="n">foo_method</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">RefCountable</span><span class="o">*</span> <span class="n">uncounted</span> <span class="o">=</span> <span class="k">this</span><span class="p">;</span> <span class="c1">// ok</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>Here are some examples of situations that we warn about as they <em>might</em> be potentially unsafe. The logic is that either we’re able to guarantee that an argument is safe or it’s considered if not a bug then bug-prone.</p>
<blockquote>
<div><div class="highlight-cpp notranslate"><div class="highlight"><pre><span></span><span class="kt">void</span> <span class="nf">foo1</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">RefCountable</span><span class="o">*</span> <span class="n">uncounted</span> <span class="o">=</span> <span class="k">new</span> <span class="n">RefCountable</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="n">RefCountable</span><span class="o">*</span> <span class="n">global_uncounted</span><span class="p">;</span>
<span class="kt">void</span> <span class="nf">foo2</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">RefCountable</span><span class="o">*</span> <span class="n">uncounted</span> <span class="o">=</span> <span class="n">global_uncounted</span><span class="p">;</span> <span class="c1">// warn</span>
<span class="p">}</span>

<span class="kt">void</span> <span class="nf">foo3</span><span class="p">()</span> <span class="p">{</span>
  <span class="n">RefPtr</span><span class="o">&lt;</span><span class="n">RefCountable</span><span class="o">&gt;</span> <span class="n">counted</span><span class="p">;</span>
  <span class="c1">// The scope of uncounted is not EMBEDDED in the scope of counted.</span>
  <span class="n">RefCountable</span><span class="o">*</span> <span class="n">uncounted</span> <span class="o">=</span> <span class="n">counted</span><span class="p">.</span><span class="n">get</span><span class="p">();</span> <span class="c1">// warn</span>
<span class="p">}</span>
</pre></div>
</div>
</div></blockquote>
<p>We don’t warn about these cases - we don’t consider them necessarily safe but since they are very common and usually safe we’d introduce a lot of false positives otherwise:
- variable defined in condition part of an <code class="docutils literal notranslate"><span class="pre">`if`</span></code> statement
- variable defined in init statement condition of a <code class="docutils literal notranslate"><span class="pre">`for`</span></code> statement</p>
<p>For the time being we also don’t warn about uninitialized uncounted local variables.</p>
</div>
</div>
</div>
<div class="section" id="debug-checkers">
<h2><a class="toc-backref" href="#id190">1.3. Debug Checkers</a><a class="headerlink" href="#debug-checkers" title="Permalink to this headline">¶</a></h2>
<div class="section" id="debug">
<span id="id19"></span><h3><a class="toc-backref" href="#id191">1.3.1. debug</a><a class="headerlink" href="#debug" title="Permalink to this headline">¶</a></h3>
<p>Checkers used for debugging the analyzer.
<a class="reference internal" href="developer-docs/DebugChecks.html"><span class="doc">Debug Checks</span></a> page contains a detailed description.</p>
<div class="section" id="debug-analysisorder">
<span id="id20"></span><h4><a class="toc-backref" href="#id192">1.3.1.1. debug.AnalysisOrder</a><a class="headerlink" href="#debug-analysisorder" title="Permalink to this headline">¶</a></h4>
<p>Print callbacks that are called during analysis in order.</p>
</div>
<div class="section" id="debug-configdumper">
<span id="id21"></span><h4><a class="toc-backref" href="#id193">1.3.1.2. debug.ConfigDumper</a><a class="headerlink" href="#debug-configdumper" title="Permalink to this headline">¶</a></h4>
<p>Dump config table.</p>
</div>
<div class="section" id="debug-dumpcfg-display">
<span id="id22"></span><h4><a class="toc-backref" href="#id194">1.3.1.3. debug.DumpCFG Display</a><a class="headerlink" href="#debug-dumpcfg-display" title="Permalink to this headline">¶</a></h4>
<p>Control-Flow Graphs.</p>
</div>
<div class="section" id="debug-dumpcallgraph">
<span id="id23"></span><h4><a class="toc-backref" href="#id195">1.3.1.4. debug.DumpCallGraph</a><a class="headerlink" href="#debug-dumpcallgraph" title="Permalink to this headline">¶</a></h4>
<p>Display Call Graph.</p>
</div>
<div class="section" id="debug-dumpcalls">
<span id="id24"></span><h4><a class="toc-backref" href="#id196">1.3.1.5. debug.DumpCalls</a><a class="headerlink" href="#debug-dumpcalls" title="Permalink to this headline">¶</a></h4>
<p>Print calls as they are traversed by the engine.</p>
</div>
<div class="section" id="debug-dumpdominators">
<span id="id25"></span><h4><a class="toc-backref" href="#id197">1.3.1.6. debug.DumpDominators</a><a class="headerlink" href="#debug-dumpdominators" title="Permalink to this headline">¶</a></h4>
<p>Print the dominance tree for a given CFG.</p>
</div>
<div class="section" id="debug-dumplivevars">
<span id="id26"></span><h4><a class="toc-backref" href="#id198">1.3.1.7. debug.DumpLiveVars</a><a class="headerlink" href="#debug-dumplivevars" title="Permalink to this headline">¶</a></h4>
<p>Print results of live variable analysis.</p>
</div>
<div class="section" id="debug-dumptraversal">
<span id="id27"></span><h4><a class="toc-backref" href="#id199">1.3.1.8. debug.DumpTraversal</a><a class="headerlink" href="#debug-dumptraversal" title="Permalink to this headline">¶</a></h4>
<p>Print branch conditions as they are traversed by the engine.</p>
</div>
<div class="section" id="debug-exprinspection">
<span id="id28"></span><h4><a class="toc-backref" href="#id200">1.3.1.9. debug.ExprInspection</a><a class="headerlink" href="#debug-exprinspection" title="Permalink to this headline">¶</a></h4>
<p>Check the analyzer’s understanding of expressions.</p>
</div>
<div class="section" id="debug-stats">
<span id="id29"></span><h4><a class="toc-backref" href="#id201">1.3.1.10. debug.Stats</a><a class="headerlink" href="#debug-stats" title="Permalink to this headline">¶</a></h4>
<p>Emit warnings with analyzer statistics.</p>
</div>
<div class="section" id="debug-tainttest">
<span id="id30"></span><h4><a class="toc-backref" href="#id202">1.3.1.11. debug.TaintTest</a><a class="headerlink" href="#debug-tainttest" title="Permalink to this headline">¶</a></h4>
<p>Mark tainted symbols as such.</p>
</div>
<div class="section" id="debug-viewcfg">
<span id="id31"></span><h4><a class="toc-backref" href="#id203">1.3.1.12. debug.ViewCFG</a><a class="headerlink" href="#debug-viewcfg" title="Permalink to this headline">¶</a></h4>
<p>View Control-Flow Graphs using GraphViz.</p>
</div>
<div class="section" id="debug-viewcallgraph">
<span id="id32"></span><h4><a class="toc-backref" href="#id204">1.3.1.13. debug.ViewCallGraph</a><a class="headerlink" href="#debug-viewcallgraph" title="Permalink to this headline">¶</a></h4>
<p>View Call Graph using GraphViz.</p>
</div>
<div class="section" id="debug-viewexplodedgraph">
<span id="id33"></span><h4><a class="toc-backref" href="#id205">1.3.1.14. debug.ViewExplodedGraph</a><a class="headerlink" href="#debug-viewexplodedgraph" title="Permalink to this headline">¶</a></h4>
<p>View Exploded Graphs using GraphViz.</p>
</div>
</div>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="../ClangStaticAnalyzer.html">Clang Static Analyzer</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="user-docs.html">2. User Docs</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2021, The Clang Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>