
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>clang-tidy - abseil-duration-subtraction &#8212; Extra Clang Tools 9 documentation</title>
    <link rel="stylesheet" href="../../_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/clang-tools-extra-styles.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="../../" src="../../_static/documentation_options.js"></script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <script type="text/javascript" src="../../_static/language_data.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="abseil-duration-unnecessary-conversion" href="abseil-duration-unnecessary-conversion.html" />
    <link rel="prev" title="abseil-duration-factory-scale" href="abseil-duration-factory-scale.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../../index.html">
          <span>Extra Clang Tools 9 documentation</span></a></h1>
        <h2 class="heading"><span>clang-tidy - abseil-duration-subtraction</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="abseil-duration-factory-scale.html">abseil-duration-factory-scale</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="abseil-duration-unnecessary-conversion.html">abseil-duration-unnecessary-conversion</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="abseil-duration-subtraction">
<h1>abseil-duration-subtraction<a class="headerlink" href="#abseil-duration-subtraction" title="Permalink to this headline">¶</a></h1>
<p>Checks for cases where subtraction should be performed in the
<code class="docutils literal notranslate"><span class="pre">absl::Duration</span></code> domain. When subtracting two values, and the first one is
known to be a conversion from <code class="docutils literal notranslate"><span class="pre">absl::Duration</span></code>, we can infer that the second
should also be interpreted as an <code class="docutils literal notranslate"><span class="pre">absl::Duration</span></code>, and make that inference
explicit.</p>
<p>Examples:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Original - Subtraction in the double domain</span>
<span class="kt">double</span> <span class="n">x</span><span class="p">;</span>
<span class="n">absl</span><span class="o">::</span><span class="n">Duration</span> <span class="n">d</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">result</span> <span class="o">=</span> <span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="o">-</span> <span class="n">x</span><span class="p">;</span>

<span class="c1">// Suggestion - Subtraction in the absl::Duration domain instead</span>
<span class="kt">double</span> <span class="n">result</span> <span class="o">=</span> <span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d</span> <span class="o">-</span> <span class="n">absl</span><span class="o">::</span><span class="n">Seconds</span><span class="p">(</span><span class="n">x</span><span class="p">));</span>

<span class="c1">// Original - Subtraction of two Durations in the double domain</span>
<span class="n">absl</span><span class="o">::</span><span class="n">Duration</span> <span class="n">d1</span><span class="p">,</span> <span class="n">d2</span><span class="p">;</span>
<span class="kt">double</span> <span class="n">result</span> <span class="o">=</span> <span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d1</span><span class="p">)</span> <span class="o">-</span> <span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d2</span><span class="p">);</span>

<span class="c1">// Suggestion - Subtraction in the absl::Duration domain instead</span>
<span class="kt">double</span> <span class="n">result</span> <span class="o">=</span> <span class="n">absl</span><span class="o">::</span><span class="n">ToDoubleSeconds</span><span class="p">(</span><span class="n">d1</span> <span class="o">-</span> <span class="n">d2</span><span class="p">);</span>
</pre></div>
</div>
<p>Note: As with other <code class="docutils literal notranslate"><span class="pre">clang-tidy</span></code> checks, it is possible that multiple fixes
may overlap (as in the case of nested expressions), so not all occurences can
be transformed in one run. In particular, this may occur for nested subtraction
expressions. Running <code class="docutils literal notranslate"><span class="pre">clang-tidy</span></code> multiple times will find and fix these
overlaps.</p>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="abseil-duration-factory-scale.html">abseil-duration-factory-scale</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="abseil-duration-unnecessary-conversion.html">abseil-duration-unnecessary-conversion</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2021, The Clang Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>