
<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>LLVM Code-Review Policy and Practices &#8212; LLVM 18.1.4 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/llvm-theme.css?v=be84393e" />
    <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js?v=409d885a"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=4825356b"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="LLVM Community Support Policy" href="SupportPolicy.html" />
    <link rel="prev" title="LLVM Developer Policy" href="DeveloperPolicy.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="SupportPolicy.html" title="LLVM Community Support Policy"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="DeveloperPolicy.html" title="LLVM Developer Policy"
             accesskey="P">previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingInvolved.html" accesskey="U">Getting Involved</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LLVM Code-Review Policy and Practices</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="https://llvm.org/docs/UserGuides.html">User Guides</a></li>
    <li><a href="https://llvm.org/docs/Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/Contributing.html">Contributing to LLVM</a></li>
    <li><a href="https://llvm.org/docs/HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#irc">IRC</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/FAQ.html">FAQ</a></li>
    <li><a href="https://llvm.org/docs/Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project/">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/CodeReview.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="llvm-code-review-policy-and-practices">
<h1>LLVM Code-Review Policy and Practices<a class="headerlink" href="#llvm-code-review-policy-and-practices" title="Permalink to this heading">¶</a></h1>
<p>LLVM’s code-review policy and practices help maintain high code quality across
the project. Specifically, our code review process aims to:</p>
<blockquote>
<div><ul class="simple">
<li><p>Improve readability and maintainability.</p></li>
<li><p>Improve robustness and prevent the introduction of defects.</p></li>
<li><p>Best leverage the experience of other contributors for each proposed change.</p></li>
<li><p>Help grow and develop new contributors, through mentorship by community leaders.</p></li>
</ul>
</div></blockquote>
<p>It is important for all contributors to understand our code-review
practices and participate in the code-review process.</p>
<section id="general-policies">
<h2>General Policies<a class="headerlink" href="#general-policies" title="Permalink to this heading">¶</a></h2>
<section id="what-code-should-be-reviewed">
<h3>What Code Should Be Reviewed?<a class="headerlink" href="#what-code-should-be-reviewed" title="Permalink to this heading">¶</a></h3>
<p>All developers are required to have significant changes reviewed before they
are committed to the repository.</p>
</section>
<section id="must-code-be-reviewed-prior-to-being-committed">
<h3>Must Code Be Reviewed Prior to Being Committed?<a class="headerlink" href="#must-code-be-reviewed-prior-to-being-committed" title="Permalink to this heading">¶</a></h3>
<p>Code can be reviewed either before it is committed or after. We expect
significant patches to be reviewed before being committed. Smaller patches
(or patches where the developer owns the component) that meet
likely-community-consensus requirements (as apply to all patch approvals) can
be committed prior to an explicit review. In situations where there is any
uncertainty, a patch should be reviewed prior to being committed.</p>
<p>Please note that the developer responsible for a patch is also
responsible for making all necessary review-related changes, including
those requested during any post-commit review.</p>
</section>
<section id="can-code-be-reviewed-after-it-is-committed">
<span id="post-commit-review"></span><h3>Can Code Be Reviewed After It Is Committed?<a class="headerlink" href="#can-code-be-reviewed-after-it-is-committed" title="Permalink to this heading">¶</a></h3>
<p>Post-commit review is encouraged, and can be accomplished using any of the
tools detailed below. There is a strong expectation that authors respond
promptly to post-commit feedback and address it. Failure to do so is cause for
the patch to be <a class="reference internal" href="DeveloperPolicy.html#revert-policy"><span class="std std-ref">reverted</span></a>.</p>
<p>If a community member expresses a concern about a recent commit, and this
concern would have been significant enough to warrant a conversation during
pre-commit review (including around the need for more design discussions),
they may ask for a revert to the original author who is responsible to revert
the patch promptly. Developers often disagree, and erring on the side of the
developer asking for more review prevents any lingering disagreement over
code in the tree. This does not indicate any fault from the patch author,
this is inherent to our post-commit review practices.
Reverting a patch ensures that design discussions can happen without blocking
other development; it’s entirely possible the patch will end up being reapplied
essentially as-is once concerns have been resolved.</p>
<p>Before being recommitted, the patch generally should undergo further review.
The community member who identified the problem is expected to engage
actively in the review. In cases where the problem is identified by a buildbot,
a community member with access to hardware similar to that on the buildbot is
expected to engage in the review.</p>
<p>Please note: The bar for post-commit feedback is not higher than for pre-commit
feedback. Don’t delay unnecessarily in providing feedback. However, if you see
something after code has been committed about which you would have commented
pre-commit (had you noticed it earlier), please feel free to provide that
feedback at any time.</p>
<p>That having been said, if a substantial period of time has passed since the
original change was committed, it may be better to create a new patch to
address the issues than comment on the original commit. The original patch
author, for example, might no longer be an active contributor to the project.</p>
</section>
<section id="what-tools-are-used-for-code-review">
<h3>What Tools Are Used for Code Review?<a class="headerlink" href="#what-tools-are-used-for-code-review" title="Permalink to this heading">¶</a></h3>
<p>Pre-commit code reviews are conducted on GitHub with Pull Requests. See
<a class="reference internal" href="GitHub.html#github-reviews"><span class="std std-ref">GitHub</span></a> documentation.</p>
</section>
<section id="when-is-an-rfc-required">
<h3>When Is an RFC Required?<a class="headerlink" href="#when-is-an-rfc-required" title="Permalink to this heading">¶</a></h3>
<p>Some changes are too significant for just a code review. Changes that should
change the LLVM Language Reference (e.g., adding new target-independent
intrinsics), adding language extensions in Clang, and so on, require an RFC
(Request for Comment) email on the project’s <code class="docutils literal notranslate"><span class="pre">*-dev</span></code> mailing list first. For
changes that promise significant impact on users and/or downstream code bases,
reviewers can request an RFC achieving consensus before proceeding with code
review. That having been said, posting initial patches can help with
discussions on an RFC.</p>
</section>
</section>
<section id="code-review-workflow">
<h2>Code-Review Workflow<a class="headerlink" href="#code-review-workflow" title="Permalink to this heading">¶</a></h2>
<p>Code review can be an iterative process, which continues until the patch is
ready to be committed. Specifically, once a patch is sent out for review, it
needs an explicit approval before it is committed. Do not assume silent
approval, or solicit objections to a patch with a deadline.</p>
<section id="acknowledge-all-reviewer-feedback">
<h3>Acknowledge All Reviewer Feedback<a class="headerlink" href="#acknowledge-all-reviewer-feedback" title="Permalink to this heading">¶</a></h3>
<p>All comments by reviewers should be acknowledged by the patch author. It is
generally expected that suggested changes will be incorporated into a future
revision of the patch unless the author and/or other reviewers can articulate a
good reason to do otherwise (and then the reviewers must agree). If a new patch
does not address all outstanding feedback, the author should explicitly state
that when providing the updated patch. When using the web-based code-review
tool, such notes can be provided in the “Diff” description (which is different
from the description of the “Differential Revision” as a whole used for the
commit message).</p>
<p>If you suggest changes in a code review, but don’t wish the suggestion to be
interpreted this strongly, please state so explicitly.</p>
</section>
<section id="aim-to-make-efficient-use-of-everyone-s-time">
<h3>Aim to Make Efficient Use of Everyone’s Time<a class="headerlink" href="#aim-to-make-efficient-use-of-everyone-s-time" title="Permalink to this heading">¶</a></h3>
<p>Aim to limit the number of iterations in the review process. For example, when
suggesting a change, if you want the author to make a similar set of changes at
other places in the code, please explain the requested set of changes so that
the author can make all of the changes at once. If a patch will require
multiple steps prior to approval (e.g., splitting, refactoring, posting data
from specific performance tests), please explain as many of these up front as
possible. This allows the patch author and reviewers to make the most efficient
use of their time.</p>
</section>
<section id="lgtm-how-a-patch-is-accepted">
<h3>LGTM - How a Patch Is Accepted<a class="headerlink" href="#lgtm-how-a-patch-is-accepted" title="Permalink to this heading">¶</a></h3>
<p>A patch is approved to be committed when a reviewer accepts it, and this is
almost always associated with a message containing the text “LGTM” (which
stands for Looks Good To Me). Only approval from a single reviewer is required.</p>
<p>When providing an unqualified LGTM (approval to commit), it is the
responsibility of the reviewer to have reviewed all of the discussion and
feedback from all reviewers ensuring that all feedback has been addressed and
that all other reviewers will almost surely be satisfied with the patch being
approved. If unsure, the reviewer should provide a qualified approval, (e.g.,
“LGTM, but please wait for &#64;someone, &#64;someone_else”). You may also do this if
you are fairly certain that a particular community member will wish to review,
even if that person hasn’t done so yet.</p>
<p>Note that, if a reviewer has requested a particular community member to review,
and after a week that community member has yet to respond, feel free to ping
the patch (which literally means submitting a comment on the patch with the
word, “Ping.”), or alternatively, ask the original reviewer for further
suggestions.</p>
<p>If it is likely that others will want to review a recently-posted patch,
especially if there might be objections, but no one else has done so yet, it is
also polite to provide a qualified approval (e.g., “LGTM, but please wait for a
couple of days in case others wish to review”). If approval is received very
quickly, a patch author may also elect to wait before committing (and this is
certainly considered polite for non-trivial patches). Especially given the
global nature of our community, this waiting time should be at least 24 hours.
Please also be mindful of weekends and major holidays.</p>
<p>Our goal is to ensure community consensus around design decisions and
significant implementation choices, and one responsibility of a reviewer, when
providing an overall approval for a patch, is to be reasonably sure that such
consensus exists. If you’re not familiar enough with the community to know,
then you shouldn’t be providing final approval to commit. A reviewer providing
final approval should have commit access to the LLVM project.</p>
<p>Every patch should be reviewed by at least one technical expert in the areas of
the project affected by the change.</p>
</section>
<section id="splitting-requests-and-conditional-acceptance">
<h3>Splitting Requests and Conditional Acceptance<a class="headerlink" href="#splitting-requests-and-conditional-acceptance" title="Permalink to this heading">¶</a></h3>
<p>Reviewers may request certain aspects of a patch to be broken out into separate
patches for independent review. Reviewers may also accept a patch
conditioned on the author providing a follow-up patch addressing some
particular issue or concern (although no committed patch should leave the
project in a broken state). Moreover, reviewers can accept a patch conditioned on
the author applying some set of minor updates prior to committing, and when
applicable, it is polite for reviewers to do so.</p>
</section>
<section id="don-t-unintentionally-block-a-review">
<h3>Don’t Unintentionally Block a Review<a class="headerlink" href="#don-t-unintentionally-block-a-review" title="Permalink to this heading">¶</a></h3>
<p>If you review a patch, but don’t intend for the review process to block on your
approval, please state that explicitly. Out of courtesy, we generally wait on
committing a patch until all reviewers are satisfied, and if you don’t intend
to look at the patch again in a timely fashion, please communicate that fact in
the review.</p>
</section>
</section>
<section id="who-can-should-review-code">
<h2>Who Can/Should Review Code?<a class="headerlink" href="#who-can-should-review-code" title="Permalink to this heading">¶</a></h2>
<section id="non-experts-should-review-code">
<h3>Non-Experts Should Review Code<a class="headerlink" href="#non-experts-should-review-code" title="Permalink to this heading">¶</a></h3>
<p>You do not need to be an expert in some area of the code base to review patches;
it’s fine to ask questions about what some piece of code is doing. If it’s not
clear to you what is going on, you’re unlikely to be the only one. Please
remember that it is not in the long-term best interest of the community to have
components that are only understood well by a small number of people. Extra
comments and/or test cases can often help (and asking for comments in the test
cases is fine as well).</p>
<p>Moreover, authors are encouraged to interpret questions as a reason to reexamine
the readability of the code in question. Structural changes, or further
comments, may be appropriate.</p>
<p>If you’re new to the LLVM community, you might also find this presentation helpful:
.. _How to Contribute to LLVM, A 2019 LLVM Developers’ Meeting Presentation: <a class="reference external" href="https://youtu.be/C5Y977rLqpw">https://youtu.be/C5Y977rLqpw</a></p>
<p>A good way for new contributors to increase their knowledge of the code base is
to review code. It is perfectly acceptable to review code and explicitly
defer to others for approval decisions.</p>
</section>
<section id="experts-should-review-code">
<h3>Experts Should Review Code<a class="headerlink" href="#experts-should-review-code" title="Permalink to this heading">¶</a></h3>
<p>If you are an expert in an area of the compiler affected by a proposed patch,
then you are highly encouraged to review the code. If you are a relevant code
owner, and no other experts are reviewing a patch, you must either help arrange
for an expert to review the patch or review it yourself.</p>
</section>
<section id="code-reviews-speed-and-reciprocity">
<h3>Code Reviews, Speed, and Reciprocity<a class="headerlink" href="#code-reviews-speed-and-reciprocity" title="Permalink to this heading">¶</a></h3>
<p>Sometimes code reviews will take longer than you might hope, especially for
larger features. Common ways to speed up review times for your patches are:</p>
<ul class="simple">
<li><p>Review other people’s patches. If you help out, everybody will be more
willing to do the same for you; goodwill is our currency.</p></li>
<li><p>Ping the patch. If it is urgent, provide reasons why it is important to you to
get this patch landed and ping it every couple of days. If it is
not urgent, the common courtesy ping rate is one week. Remember that you’re
asking for valuable time from other professional developers.</p></li>
<li><p>Ask for help on IRC. Developers on IRC will be able to either help you
directly, or tell you who might be a good reviewer.</p></li>
<li><p>Split your patch into multiple smaller patches that build on each other. The
smaller your patch is, the higher the probability that somebody will take a quick
look at it. When doing this, it is helpful to add “[N/M]” (for 1 &lt;= N &lt;= M) to
the title of each patch in the series, so it is clear that there is an order
and what that order is.</p></li>
</ul>
<p>Developers should participate in code reviews as both reviewers and
authors. If someone is kind enough to review your code, you should return the
favor for someone else. Note that anyone is welcome to review and give feedback
on a patch, but approval of patches should be consistent with the policy above.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="SupportPolicy.html" title="LLVM Community Support Policy"
             >next</a> |</li>
        <li class="right" >
          <a href="DeveloperPolicy.html" title="LLVM Developer Policy"
             >previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingInvolved.html" >Getting Involved</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LLVM Code-Review Policy and Practices</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2003-2024, LLVM Project.
      Last updated on 2024-04-17.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.1.2.
    </div>
  </body>
</html>