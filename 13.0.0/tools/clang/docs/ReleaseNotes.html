
<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>Clang 13.0.0 (In-Progress) Release Notes &#8212; Clang 13 documentation</title>
    <link rel="stylesheet" href="_static/haiku.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Clang Compiler User’s Manual" href="UsersManual.html" />
    <link rel="prev" title="Using Clang as a Compiler" href="index.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="index.html">
          <span>Clang 13 documentation</span></a></h1>
        <h2 class="heading"><span>Clang 13.0.0 (In-Progress) Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <div class="section" id="clang-13-0-0-in-progress-release-notes">
<h1>Clang 13.0.0 (In-Progress) Release Notes<a class="headerlink" href="#clang-13-0-0-in-progress-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-s-new-in-clang-13-0-0" id="id3">What’s New in Clang 13.0.0?</a></p>
<ul>
<li><p><a class="reference internal" href="#major-new-features" id="id4">Major New Features</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id5">Non-comprehensive list of changes in this release</a></p></li>
<li><p><a class="reference internal" href="#new-compiler-flags" id="id6">New Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#deprecated-compiler-flags" id="id7">Deprecated Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#modified-compiler-flags" id="id8">Modified Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#removed-compiler-flags" id="id9">Removed Compiler Flags</a></p></li>
<li><p><a class="reference internal" href="#new-pragmas-in-clang" id="id10">New Pragmas in Clang</a></p></li>
<li><p><a class="reference internal" href="#attribute-changes-in-clang" id="id11">Attribute Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#windows-support" id="id12">Windows Support</a></p></li>
<li><p><a class="reference internal" href="#c-language-changes-in-clang" id="id13">C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#id1" id="id14">C++ Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#objective-c-language-changes-in-clang" id="id15">Objective-C Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#opencl-kernel-language-changes-in-clang" id="id16">OpenCL Kernel Language Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#abi-changes-in-clang" id="id17">ABI Changes in Clang</a></p></li>
<li><p><a class="reference internal" href="#openmp-support-in-clang" id="id18">OpenMP Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#cuda-support-in-clang" id="id19">CUDA Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#x86-support-in-clang" id="id20">X86 Support in Clang</a></p></li>
<li><p><a class="reference internal" href="#internal-api-changes" id="id21">Internal API Changes</a></p></li>
<li><p><a class="reference internal" href="#build-system-changes" id="id22">Build System Changes</a></p></li>
<li><p><a class="reference internal" href="#ast-matchers" id="id23">AST Matchers</a></p></li>
<li><p><a class="reference internal" href="#clang-format" id="id24">clang-format</a></p></li>
<li><p><a class="reference internal" href="#libclang" id="id25">libclang</a></p></li>
<li><p><a class="reference internal" href="#static-analyzer" id="id26">Static Analyzer</a></p></li>
<li><p><a class="reference internal" href="#undefined-behavior-sanitizer-ubsan" id="id27">Undefined Behavior Sanitizer (UBSan)</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#core-analysis-improvements" id="id28">Core Analysis Improvements</a></p></li>
<li><p><a class="reference internal" href="#new-issues-found" id="id29">New Issues Found</a></p>
<ul>
<li><p><a class="reference internal" href="#python-binding-changes" id="id30">Python Binding Changes</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#significant-known-problems" id="id31">Significant Known Problems</a></p></li>
<li><p><a class="reference internal" href="#additional-information" id="id32">Additional Information</a></p></li>
</ul>
</div>
<p>Written by the <a class="reference external" href="https://llvm.org/">LLVM Team</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These are in-progress notes for the upcoming Clang 13 release.
Release notes for previous releases can be found on
<a class="reference external" href="https://releases.llvm.org/download.html">the Download Page</a>.</p>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id2">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document contains the release notes for the Clang C/C++/Objective-C
frontend, part of the LLVM Compiler Infrastructure, release 13.0.0. Here we
describe the status of Clang in some detail, including major
improvements from the previous release and new feature work. For the
general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. All LLVM
releases may be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web
site</a>.</p>
<p>For more information about Clang or LLVM, including information about the
latest release, please see the <a class="reference external" href="https://clang.llvm.org">Clang Web Site</a> or the
<a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
<p>Note that if you are reading this file from a Git checkout or the
main Clang web page, this document applies to the <em>next</em> release, not
the current one. To see the release notes for a specific release, please
see the <a class="reference external" href="https://llvm.org/releases/">releases page</a>.</p>
</div>
<div class="section" id="what-s-new-in-clang-13-0-0">
<h2><a class="toc-backref" href="#id3">What’s New in Clang 13.0.0?</a><a class="headerlink" href="#what-s-new-in-clang-13-0-0" title="Permalink to this headline">¶</a></h2>
<p>Some of the major new features and improvements to Clang are listed
here. Generic improvements to Clang as a whole or to its underlying
infrastructure are described first, followed by language-specific
sections with improvements to Clang’s support for those languages.</p>
<div class="section" id="major-new-features">
<h3><a class="toc-backref" href="#id4">Major New Features</a><a class="headerlink" href="#major-new-features" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Guaranteed tail calls are now supported with statement attributes
<code class="docutils literal notranslate"><span class="pre">[[clang::musttail]]</span></code> in C++ and <code class="docutils literal notranslate"><span class="pre">__attribute__((musttail))</span></code> in C. The
attribute is applied to a return statement (not a function declaration),
and an error is emitted if a tail call cannot be guaranteed, for example if
the function signatures of caller and callee are not compatible. Guaranteed
tail calls enable a class of algorithms that would otherwise use an
arbitrary amount of stack space.</p></li>
</ul>
<div class="section" id="improvements-to-clang-s-diagnostics">
<h4>Improvements to Clang’s diagnostics<a class="headerlink" href="#improvements-to-clang-s-diagnostics" title="Permalink to this headline">¶</a></h4>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
</div>
<div class="section" id="non-comprehensive-list-of-changes-in-this-release">
<h3><a class="toc-backref" href="#id5">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The default value of _MSC_VER was raised from 1911 to 1914. MSVC 19.14 has the
support to overaligned objects on x86_32 which is required for some LLVM
passes.</p></li>
</ul>
</div>
<div class="section" id="new-compiler-flags">
<h3><a class="toc-backref" href="#id6">New Compiler Flags</a><a class="headerlink" href="#new-compiler-flags" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">-Wreserved-identifier</span></code> emits warning when user code uses reserved
identifiers.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Wunused-but-set-parameter</span></code> and <code class="docutils literal notranslate"><span class="pre">-Wunused-but-set-variable</span></code> emit warnings
when a parameter or a variable is set but not used.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-fstack-usage</span></code> generates an extra .su file per input source file. The .su
file contains frame size information for each function defined in the source
file.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wnull-pointer-subtraction</span></code> emits warning when user code may have
undefined behaviour due to subtraction involving a null pointer.</p></li>
</ul>
</div>
<div class="section" id="deprecated-compiler-flags">
<h3><a class="toc-backref" href="#id7">Deprecated Compiler Flags</a><a class="headerlink" href="#deprecated-compiler-flags" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="modified-compiler-flags">
<h3><a class="toc-backref" href="#id8">Modified Compiler Flags</a><a class="headerlink" href="#modified-compiler-flags" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>-Wshadow now also checks for shadowed structured bindings</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-B</span> <span class="pre">&lt;prefix&gt;</span></code> (when <code class="docutils literal notranslate"><span class="pre">&lt;prefix&gt;</span></code> is a directory) was overloaded to additionally
detect GCC installations under <code class="docutils literal notranslate"><span class="pre">&lt;prefix&gt;</span></code> (<code class="docutils literal notranslate"><span class="pre">lib{,32,64}/gcc{,-cross}/$triple</span></code>).
This behavior was incompatible with GCC, caused interop issues with
<code class="docutils literal notranslate"><span class="pre">--gcc-toolchain</span></code>, and was thus dropped. Specify <code class="docutils literal notranslate"><span class="pre">--gcc-toolchain=&lt;dir&gt;</span></code>
instead. <code class="docutils literal notranslate"><span class="pre">-B</span></code>’s other GCC-compatible semantics are preserved:
<code class="docutils literal notranslate"><span class="pre">$prefix/$triple-$file</span></code> and <code class="docutils literal notranslate"><span class="pre">$prefix$file</span></code> are searched for executables,
libraries, includes, and data files used by the compiler.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wextra</span></code> now also implies <code class="docutils literal notranslate"><span class="pre">-Wnull-pointer-subtraction.</span></code></p></li>
</ul>
</div>
<div class="section" id="removed-compiler-flags">
<h3><a class="toc-backref" href="#id9">Removed Compiler Flags</a><a class="headerlink" href="#removed-compiler-flags" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The clang-cl <code class="docutils literal notranslate"><span class="pre">/fallback</span></code> flag, which made clang-cl invoke Microsoft Visual
C++ on files it couldn’t compile itself, has been removed.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-Wreturn-std-move-in-c++11</span></code>, which checked whether an entity is affected by
<a class="reference external" href="https://wg21.link/CWG1579">CWG1579</a> to become implicitly movable, has been
removed.</p></li>
</ul>
</div>
<div class="section" id="new-pragmas-in-clang">
<h3><a class="toc-backref" href="#id10">New Pragmas in Clang</a><a class="headerlink" href="#new-pragmas-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="attribute-changes-in-clang">
<h3><a class="toc-backref" href="#id11">Attribute Changes in Clang</a><a class="headerlink" href="#attribute-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
<li><p>Added support for C++11-style <code class="docutils literal notranslate"><span class="pre">[[]]</span></code> attributes on using-declarations, as a
clang extension.</p></li>
</ul>
</div>
<div class="section" id="windows-support">
<h3><a class="toc-backref" href="#id12">Windows Support</a><a class="headerlink" href="#windows-support" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Fixed reading <code class="docutils literal notranslate"><span class="pre">long</span> <span class="pre">double</span></code> arguments with <code class="docutils literal notranslate"><span class="pre">va_arg</span></code> on x86_64 MinGW
targets.</p></li>
</ul>
</div>
<div class="section" id="c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id13">C Language Changes in Clang</a><a class="headerlink" href="#c-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="id1">
<h3><a class="toc-backref" href="#id14">C++ Language Changes in Clang</a><a class="headerlink" href="#id1" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The oldest supported GNU libstdc++ is now 4.8.3 (released 2014-05-22).
Clang workarounds for bugs in earlier versions have been removed.</p></li>
<li><p>…</p></li>
</ul>
<div class="section" id="c-20-feature-support">
<h4>C++20 Feature Support<a class="headerlink" href="#c-20-feature-support" title="Permalink to this headline">¶</a></h4>
<p>…</p>
</div>
<div class="section" id="c-2b-feature-support">
<h4>C++2b Feature Support<a class="headerlink" href="#c-2b-feature-support" title="Permalink to this headline">¶</a></h4>
<p>…</p>
</div>
</div>
<div class="section" id="objective-c-language-changes-in-clang">
<h3><a class="toc-backref" href="#id15">Objective-C Language Changes in Clang</a><a class="headerlink" href="#objective-c-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="opencl-kernel-language-changes-in-clang">
<h3><a class="toc-backref" href="#id16">OpenCL Kernel Language Changes in Clang</a><a class="headerlink" href="#opencl-kernel-language-changes-in-clang" title="Permalink to this headline">¶</a></h3>
<p>Command-line interface changes:</p>
<ul class="simple">
<li><p>All builtin types, macros and function declarations are now added by default
without any command-line flags. A flag is provided <code class="docutils literal notranslate"><span class="pre">-cl-no-stdinc</span></code> to
suppress the default declarations non-native to the compiler.</p></li>
<li><p>Clang now compiles using OpenCL C version 1.2 by default if no version is
specified explicitly from the command line.</p></li>
<li><p>Clang now supports <code class="docutils literal notranslate"><span class="pre">.clcpp</span></code> file extension for sources written in
C++ for OpenCL.</p></li>
<li><p>Clang now accepts <code class="docutils literal notranslate"><span class="pre">-cl-std=clc++1.0</span></code> that sets C++ for OpenCL to
the version 1.0 explicitly.</p></li>
</ul>
<p>Misc common changes:</p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">NULL</span></code> definition in internal headers for standards prior to the
version 2.0.</p></li>
<li><p>Simplified use of pragma in extensions for <code class="docutils literal notranslate"><span class="pre">double</span></code>, images, atomics,
subgroups, Arm dot product extension. There are less cases where extension
pragma is now required by clang to compile kernel sources.</p></li>
<li><p>Added missing <code class="docutils literal notranslate"><span class="pre">as_size</span></code>/<code class="docutils literal notranslate"><span class="pre">as_ptrdiff</span></code>/<code class="docutils literal notranslate"><span class="pre">as_intptr</span></code>/<code class="docutils literal notranslate"><span class="pre">as_uintptr_t</span></code>
operators to internal headers.</p></li>
<li><p>Added new builtin function for ndrange, <code class="docutils literal notranslate"><span class="pre">cl_khr_subgroup_extended_types</span></code>,
<code class="docutils literal notranslate"><span class="pre">cl_khr_subgroup_non_uniform_vote</span></code>, <code class="docutils literal notranslate"><span class="pre">cl_khr_subgroup_ballot</span></code>,
<code class="docutils literal notranslate"><span class="pre">cl_khr_subgroup_non_uniform_arithmetic</span></code>, <code class="docutils literal notranslate"><span class="pre">cl_khr_subgroup_shuffle</span></code>,
<code class="docutils literal notranslate"><span class="pre">cl_khr_subgroup_shuffle_relative</span></code>, <code class="docutils literal notranslate"><span class="pre">cl_khr_subgroup_clustered_reduce</span></code>
into the default Tablegen-based header.</p></li>
<li><p>Added online documentation for Tablegen-based header, OpenCL 3.0 support,
new clang extensions.</p></li>
<li><p>Fixed OpenCL C language version and SPIR address space reporting in DWARF.</p></li>
</ul>
<p>New extensions:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">cl_khr_integer_dot_product</span></code> for dedicated support of dot product.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cl_khr_extended_bit_ops</span></code> for dedicated support of extra binary operations.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__cl_clang_bitfields</span></code> for use of bit-fields in the kernel code.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">__cl_clang_non_portable_kernel_param_types</span></code> for relaxing some restrictions
to types of kernel parameters.</p></li>
</ul>
<p>OpenCL C 3.0 related changes:</p>
<ul class="simple">
<li><p>Added parsing support for the optionality of generic address space, images
(including 3d writes and <code class="docutils literal notranslate"><span class="pre">read_write</span></code> access qualifier), pipes, program
scope variables, double-precision floating-point support.</p></li>
<li><p>Added optionality support for builtin functions (in <code class="docutils literal notranslate"><span class="pre">opencl-c.h</span></code> header)
for generic address space, C11 atomics.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">memory_scope_all_devices</span></code> enum for the atomics in internal headers.</p></li>
<li><p>Enabled use of <code class="docutils literal notranslate"><span class="pre">.rgba</span></code> vector components.</p></li>
</ul>
<p>C++ for OpenCL related changes:</p>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">__remove_address_space</span></code> metaprogramming utility in internal headers
to allow removing address spaces from types.</p></li>
<li><p>Improved overloads resolution logic for constructors wrt address spaces.</p></li>
<li><p>Improved diagnostics of OpenCL specific types and address space qualified
types in <code class="docutils literal notranslate"><span class="pre">reinterpret_cast</span></code> and template functions.</p></li>
<li><p>Fixed <code class="docutils literal notranslate"><span class="pre">NULL</span></code> macro in internal headers to be compatible with C++.</p></li>
<li><p>Fixed use of <code class="docutils literal notranslate"><span class="pre">half</span></code> type.</p></li>
</ul>
</div>
<div class="section" id="abi-changes-in-clang">
<h3><a class="toc-backref" href="#id17">ABI Changes in Clang</a><a class="headerlink" href="#abi-changes-in-clang" title="Permalink to this headline">¶</a></h3>
</div>
<div class="section" id="openmp-support-in-clang">
<h3><a class="toc-backref" href="#id18">OpenMP Support in Clang</a><a class="headerlink" href="#openmp-support-in-clang" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Support for loop transformation directives from OpenMP 5.1 have been added.
<code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">omp</span> <span class="pre">unroll</span></code> is a standardized alternative to <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">unroll</span></code>
(or <code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">clang</span> <span class="pre">loop</span> <span class="pre">unroll(enable)</span></code>) but also allows composition with
other OpenMP loop associated constructs as in</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma omp parallel for</span>
<span class="cp">#pragma omp unroll partial(4)</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
</pre></div>
</div>
<p><code class="docutils literal notranslate"><span class="pre">#pragma</span> <span class="pre">omp</span> <span class="pre">tile</span></code> applies tiling to a perfect loop nest using a
user-defined tile size.</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#pragma omp tile sizes(8,8)</span>
<span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">m</span><span class="p">;</span> <span class="o">++</span><span class="n">i</span><span class="p">)</span>
  <span class="k">for</span> <span class="p">(</span><span class="kt">int</span> <span class="n">j</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">j</span> <span class="o">&lt;</span> <span class="n">n</span><span class="p">;</span> <span class="o">++</span><span class="n">j</span><span class="p">)</span>
</pre></div>
</div>
</li>
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="cuda-support-in-clang">
<h3><a class="toc-backref" href="#id19">CUDA Support in Clang</a><a class="headerlink" href="#cuda-support-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="x86-support-in-clang">
<h3><a class="toc-backref" href="#id20">X86 Support in Clang</a><a class="headerlink" href="#x86-support-in-clang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="internal-api-changes">
<h3><a class="toc-backref" href="#id21">Internal API Changes</a><a class="headerlink" href="#internal-api-changes" title="Permalink to this headline">¶</a></h3>
<p>These are major API changes that have happened since the 12.0.0 release of
Clang. If upgrading an external codebase that uses Clang as a library,
this section should help get you past the largest hurdles of upgrading.</p>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="build-system-changes">
<h3><a class="toc-backref" href="#id22">Build System Changes</a><a class="headerlink" href="#build-system-changes" title="Permalink to this headline">¶</a></h3>
<p>These are major changes to the build system that have happened since the 12.0.0
release of Clang. Users of the build system should adjust accordingly.</p>
<ul class="simple">
<li><p>The option <code class="docutils literal notranslate"><span class="pre">LIBCLANG_INCLUDE_CLANG_TOOLS_EXTRA</span></code> no longer exists. There were
two releases with that flag forced off, and no uses were added that forced it
on. The recommended replacement is clangd.</p></li>
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="ast-matchers">
<h3><a class="toc-backref" href="#id23">AST Matchers</a><a class="headerlink" href="#ast-matchers" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="clang-format">
<h3><a class="toc-backref" href="#id24">clang-format</a><a class="headerlink" href="#clang-format" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">SpacesInLineCommentPrefix</span></code> has been added to control the
number of spaces in a line comments prefix.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">SortIncludes</span></code> has been updated from a <code class="docutils literal notranslate"><span class="pre">bool</span></code> to an
<code class="docutils literal notranslate"><span class="pre">enum</span></code> with backwards compatibility. In addition to the previous
<code class="docutils literal notranslate"><span class="pre">true</span></code>/<code class="docutils literal notranslate"><span class="pre">false</span></code> states (now <code class="docutils literal notranslate"><span class="pre">CaseSensitive</span></code>/<code class="docutils literal notranslate"><span class="pre">Never</span></code>), a third
state has been added (<code class="docutils literal notranslate"><span class="pre">CaseInsensitive</span></code>) which causes an alphabetical sort
with case used as a tie-breaker.</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="c1">// Never (previously false)</span>
<span class="cp">#include</span> <span class="cpf">&quot;B/A.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;A/B.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;a/b.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;A/b.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;B/a.h&quot;</span><span class="cp"></span>

<span class="c1">// CaseSensitive (previously true)</span>
<span class="cp">#include</span> <span class="cpf">&quot;A/B.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;A/b.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;B/A.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;B/a.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;a/b.h&quot;</span><span class="cp"></span>

<span class="c1">// CaseInsensitive</span>
<span class="cp">#include</span> <span class="cpf">&quot;A/B.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;A/b.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;a/b.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;B/A.h&quot;</span><span class="cp"></span>
<span class="cp">#include</span> <span class="cpf">&quot;B/a.h&quot;</span><span class="cp"></span>
</pre></div>
</div>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">BasedOnStyle:</span> <span class="pre">InheritParentConfig</span></code> allows to use the <code class="docutils literal notranslate"><span class="pre">.clang-format</span></code> of
the parent directories to overwrite only parts of it.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">IndentAccessModifiers</span></code> has been added to be able to give access
modifiers their own indentation level inside records.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">PPIndentWidth</span></code> has been added to be able to configure pre-processor
indentation independent from regular code.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">ShortNamespaceLines</span></code> has been added to give better control
over <code class="docutils literal notranslate"><span class="pre">FixNamespaceComments</span></code> when determining a namespace length.</p></li>
<li><p>Support for Whitesmiths has been improved, with fixes for <code class="docutils literal notranslate"><span class="pre">namespace</span></code> blocks
and <code class="docutils literal notranslate"><span class="pre">case</span></code> blocks and labels.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">EmptyLineAfterAccessModifier</span></code> has been added to remove, force or keep
new lines after access modifiers.</p></li>
<li><p>Checks for newlines in option <code class="docutils literal notranslate"><span class="pre">EmptyLineBeforeAccessModifier</span></code> are now based
on the formatted new lines and not on the new lines in the file. (Fixes
<a class="reference external" href="https://llvm.org/PR41870">https://llvm.org/PR41870</a>.)</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">SpacesInAngles</span></code> has been improved, it now accepts <code class="docutils literal notranslate"><span class="pre">Leave</span></code> value
that allows to keep spaces where they are already present.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">AllowShortIfStatementsOnASingleLine</span></code> has been improved, it now
accepts <code class="docutils literal notranslate"><span class="pre">AllIfsAndElse</span></code> value that allows to put “else if” and “else” short
statements on a single line. (Fixes <a class="reference external" href="https://llvm.org/PR50019">https://llvm.org/PR50019</a>.)</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">BreakInheritanceList</span></code> gets a new style, <code class="docutils literal notranslate"><span class="pre">AfterComma</span></code>. It breaks
only after the commas that separate the base-specifiers.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">LambdaBodyIndentation</span></code> has been added to control how the body of a
lambda is indented. The default <code class="docutils literal notranslate"><span class="pre">Signature</span></code> value indents the body one level
relative to whatever indentation the signature has. <code class="docutils literal notranslate"><span class="pre">OuterScope</span></code> lets you
change that so that the lambda body is indented one level relative to the scope
containing the lambda, regardless of where the lambda signature was placed.</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">IfMacros</span></code> has been added. This lets you define macros that get
formatted like conditionals much like <code class="docutils literal notranslate"><span class="pre">ForEachMacros</span></code> get styled like
foreach loops.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">git-clang-format</span></code> no longer formats changes to symbolic links. (Fixes
<a class="reference external" href="https://llvm.org/PR46992">https://llvm.org/PR46992</a>.)</p></li>
<li><p>Makes <code class="docutils literal notranslate"><span class="pre">PointerAligment:</span> <span class="pre">Right</span></code> working with <code class="docutils literal notranslate"><span class="pre">AlignConsecutiveDeclarations</span></code>.
(Fixes <a class="reference external" href="https://llvm.org/PR27353">https://llvm.org/PR27353</a>)</p></li>
<li><p>Option <code class="docutils literal notranslate"><span class="pre">AlignArrayOfStructure</span></code> has been added to allow for ordering array-like
initializers.</p></li>
<li><p>Support for formatting JSON file (*.json) has been added to clang-format.</p></li>
</ul>
</div>
<div class="section" id="libclang">
<h3><a class="toc-backref" href="#id25">libclang</a><a class="headerlink" href="#libclang" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Make libclang SONAME independent from LLVM version. It will be updated only when
needed. Defined in CLANG_SONAME (clang/tools/libclang/CMakeLists.txt).
<a class="reference external" href="https://lists.llvm.org/pipermail/cfe-dev/2021-June/068423.html">More details</a></p></li>
</ul>
</div>
<div class="section" id="static-analyzer">
<h3><a class="toc-backref" href="#id26">Static Analyzer</a><a class="headerlink" href="#static-analyzer" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Add a new analyzer output type, <code class="docutils literal notranslate"><span class="pre">sarif-html</span></code>, that outputs both HTML and
Sarif files.</p></li>
</ul>
<ul class="simple">
<li><p>Add support for <code class="docutils literal notranslate"><span class="pre">allocClassWithName</span></code> in OSObjectCStyleCast checker.</p></li>
</ul>
<ul class="simple">
<li><p>The option <code class="docutils literal notranslate"><span class="pre">-analyzer-display-progress</span></code> now also outputs analysis time for
each function.</p></li>
</ul>
<ul class="simple">
<li><p>For bug reports in HTML format, arrows are now highlighted for the currently
selected event.</p></li>
</ul>
<ul class="simple">
<li><p>While still in alpha, <code class="docutils literal notranslate"><span class="pre">alpha.cplusplus.SmartPtr</span></code> received numerous
improvements and nears production quality.</p></li>
</ul>
<ul class="simple">
<li><p>Various fixes and improvements, including modeling of casts (such as
<code class="docutils literal notranslate"><span class="pre">std::bit_cast&lt;&gt;</span></code>), constraint solving, explaining bug-causing variable
values, macro expansion notes, modeling the size of dynamic objects and the
modeling and reporting of Objective C/C++ retain count related bugs. These
should reduce false positives and make the remaining reports more readable.</p></li>
</ul>
</div>
<div class="section" id="undefined-behavior-sanitizer-ubsan">
<span id="release-notes-ubsan"></span><h3><a class="toc-backref" href="#id27">Undefined Behavior Sanitizer (UBSan)</a><a class="headerlink" href="#undefined-behavior-sanitizer-ubsan" title="Permalink to this headline">¶</a></h3>
</div>
</div>
<div class="section" id="core-analysis-improvements">
<h2><a class="toc-backref" href="#id28">Core Analysis Improvements</a><a class="headerlink" href="#core-analysis-improvements" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
<div class="section" id="new-issues-found">
<h2><a class="toc-backref" href="#id29">New Issues Found</a><a class="headerlink" href="#new-issues-found" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>…</p></li>
</ul>
<div class="section" id="python-binding-changes">
<h3><a class="toc-backref" href="#id30">Python Binding Changes</a><a class="headerlink" href="#python-binding-changes" title="Permalink to this headline">¶</a></h3>
<p>The following methods have been added:</p>
<ul class="simple">
<li><p>…</p></li>
</ul>
</div>
</div>
<div class="section" id="significant-known-problems">
<h2><a class="toc-backref" href="#id31">Significant Known Problems</a><a class="headerlink" href="#significant-known-problems" title="Permalink to this headline">¶</a></h2>
</div>
<div class="section" id="additional-information">
<h2><a class="toc-backref" href="#id32">Additional Information</a><a class="headerlink" href="#additional-information" title="Permalink to this headline">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="https://clang.llvm.org/">Clang web
page</a>. The web page contains versions of the
API documentation which are up-to-date with the Git version of
the source code. You can access versions of these documents specific to
this release by going into the “<code class="docutils literal notranslate"><span class="pre">clang/docs/</span></code>” directory in the Clang
tree.</p>
<p>If you have any questions or comments about Clang, please feel free to
contact us via the <a class="reference external" href="https://lists.llvm.org/mailman/listinfo/cfe-dev">mailing
list</a>.</p>
</div>
</div>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="index.html">Using Clang as a Compiler</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="UsersManual.html">Clang Compiler User’s Manual</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
        &#169; Copyright 2007-2021, The Clang Team.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>