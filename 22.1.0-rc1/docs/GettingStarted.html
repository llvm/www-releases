
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Getting Started with the LLVM System &#8212; LLVM 22.1.0-rc1 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/llvm-theme.css?v=96924833" />
    <script src="_static/documentation_options.js?v=2797fd66"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Getting Started with the LLVM System using Microsoft Visual Studio" href="GettingStartedVS.html" />
    <link rel="prev" title="Performance Tips for Frontend Authors" href="Frontend/PerformanceTips.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="GettingStartedVS.html" title="Getting Started with the LLVM System using Microsoft Visual Studio"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Frontend/PerformanceTips.html" title="Performance Tips for Frontend Authors"
             accesskey="P">previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingStartedTutorials.html" accesskey="U">Getting Started/Tutorials</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting Started with the LLVM System</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="https://llvm.org/docs/UserGuides.html">User Guides</a></li>
    <li><a href="https://llvm.org/docs/Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/Contributing.html">Contributing to LLVM</a></li>
    <li><a href="https://llvm.org/docs/HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#discord">Discord</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/FAQ.html">FAQ</a></li>
    <li><a href="https://llvm.org/docs/Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project/">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/GettingStarted.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="getting-started-with-the-llvm-system">
<h1>Getting Started with the LLVM System<a class="headerlink" href="#getting-started-with-the-llvm-system" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#overview" id="id3">Overview</a></p></li>
<li><p><a class="reference internal" href="#getting-the-source-code-and-building-llvm" id="id4">Getting the Source Code and Building LLVM</a></p>
<ul>
<li><p><a class="reference internal" href="#stand-alone-builds" id="id5">Stand-alone Builds</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#requirements" id="id6">Requirements</a></p>
<ul>
<li><p><a class="reference internal" href="#hardware" id="id7">Hardware</a></p></li>
<li><p><a class="reference internal" href="#software" id="id8">Software</a></p></li>
<li><p><a class="reference internal" href="#host-c-toolchain-both-compiler-and-standard-library" id="id9">Host C++ Toolchain, both Compiler and Standard Library</a></p>
<ul>
<li><p><a class="reference internal" href="#getting-a-modern-host-c-toolchain" id="id10">Getting a Modern Host C++ Toolchain</a></p></li>
</ul>
</li>
</ul>
</li>
<li><p><a class="reference internal" href="#getting-started-with-llvm" id="id11">Getting Started with LLVM</a></p>
<ul>
<li><p><a class="reference internal" href="#terminology-and-notation" id="id12">Terminology and Notation</a></p>
<ul>
<li><p><a class="reference internal" href="#sending-patches" id="id13">Sending patches</a></p></li>
<li><p><a class="reference internal" href="#bisecting-commits" id="id14">Bisecting commits</a></p></li>
<li><p><a class="reference internal" href="#reverting-a-change" id="id15">Reverting a change</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#local-llvm-configuration" id="id16">Local LLVM Configuration</a></p></li>
<li><p><a class="reference internal" href="#compiling-the-llvm-suite-source-code" id="id17">Compiling the LLVM Suite Source Code</a></p></li>
<li><p><a class="reference internal" href="#cross-compiling-llvm" id="id18">Cross-Compiling LLVM</a></p></li>
<li><p><a class="reference internal" href="#the-location-of-llvm-object-files" id="id19">The Location of LLVM Object Files</a></p></li>
<li><p><a class="reference internal" href="#optional-configuration-items" id="id20">Optional Configuration Items</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#directory-layout" id="id21">Directory Layout</a></p>
<ul>
<li><p><a class="reference internal" href="#llvm-cmake" id="id22"><code class="docutils literal notranslate"><span class="pre">llvm/cmake</span></code></a></p></li>
<li><p><a class="reference internal" href="#llvm-examples" id="id23"><code class="docutils literal notranslate"><span class="pre">llvm/examples</span></code></a></p></li>
<li><p><a class="reference internal" href="#llvm-include" id="id24"><code class="docutils literal notranslate"><span class="pre">llvm/include</span></code></a></p></li>
<li><p><a class="reference internal" href="#llvm-lib" id="id25"><code class="docutils literal notranslate"><span class="pre">llvm/lib</span></code></a></p></li>
<li><p><a class="reference internal" href="#llvm-bindings" id="id26"><code class="docutils literal notranslate"><span class="pre">llvm/bindings</span></code></a></p></li>
<li><p><a class="reference internal" href="#llvm-projects" id="id27"><code class="docutils literal notranslate"><span class="pre">llvm/projects</span></code></a></p></li>
<li><p><a class="reference internal" href="#llvm-test" id="id28"><code class="docutils literal notranslate"><span class="pre">llvm/test</span></code></a></p></li>
<li><p><a class="reference internal" href="#test-suite" id="id29"><code class="docutils literal notranslate"><span class="pre">test-suite</span></code></a></p></li>
<li><p><a class="reference internal" href="#llvm-tools" id="id30"><code class="docutils literal notranslate"><span class="pre">llvm/tools</span></code></a></p></li>
<li><p><a class="reference internal" href="#llvm-utils" id="id31"><code class="docutils literal notranslate"><span class="pre">llvm/utils</span></code></a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#an-example-using-the-llvm-tool-chain" id="id32">An Example Using the LLVM Tool Chain</a></p>
<ul>
<li><p><a class="reference internal" href="#example-with-clang" id="id33">Example with clang</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#common-problems" id="id34">Common Problems</a></p></li>
<li><p><a class="reference internal" href="#links" id="id35">Links</a></p></li>
</ul>
</nav>
<section id="overview">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">Overview</a><a class="headerlink" href="#overview" title="Link to this heading">¶</a></h2>
<p>Welcome to the LLVM project!</p>
<p>The LLVM project has multiple components. The core of the project is
itself called “LLVM”. This contains all of the tools, libraries, and header
files needed to process intermediate representations and convert them into
object files.  Tools include an assembler, disassembler, bitcode analyzer, and
bitcode optimizer.  It also contains basic regression tests.</p>
<p>C-like languages use the <a class="reference external" href="https://clang.llvm.org/">Clang</a> front end.  This
component compiles C, C++, Objective-C, and Objective-C++ code into LLVM bitcode
– and from there into object files, using LLVM.</p>
<p>Other components include:
the <a class="reference external" href="https://libcxx.llvm.org">libc++ C++ standard library</a>,
the <a class="reference external" href="https://lld.llvm.org">LLD linker</a>, and more.</p>
</section>
<section id="getting-the-source-code-and-building-llvm">
<span id="sources"></span><h2><a class="toc-backref" href="#id4" role="doc-backlink">Getting the Source Code and Building LLVM</a><a class="headerlink" href="#getting-the-source-code-and-building-llvm" title="Link to this heading">¶</a></h2>
<ol class="arabic">
<li><p>Check out LLVM (including subprojects like Clang):</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">https://github.com/llvm/llvm-project.git</span></code></p></li>
<li><p>Or, on Windows:</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">--config</span> <span class="pre">core.autocrlf=false</span>
<span class="pre">https://github.com/llvm/llvm-project.git</span></code></p>
</li>
<li><p>To save storage and speed up the checkout time, you may want to do a
<a class="reference external" href="https://git-scm.com/docs/git-clone#Documentation/git-clone.txt---depthltdepthgt">shallow clone</a>.
For example, to get the latest revision of the LLVM project, use</p>
<p><code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">clone</span> <span class="pre">--depth</span> <span class="pre">1</span> <span class="pre">https://github.com/llvm/llvm-project.git</span></code></p>
</li>
<li><p>You are likely not interested in the user branches in the repo (used for
stacked pull requests and reverts), you can filter them from your
<cite>git fetch</cite> (or <cite>git pull</cite>) with this configuration:</p></li>
</ul>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">git config --add remote.origin.fetch &#39;^refs/heads/users/*&#39;</span>
<span class="go">git config --add remote.origin.fetch &#39;^refs/heads/revert-*&#39;</span>
</pre></div>
</div>
</li>
<li><p>Configure and build LLVM and Clang:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">cd</span> <span class="pre">llvm-project</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">-S</span> <span class="pre">llvm</span> <span class="pre">-B</span> <span class="pre">build</span> <span class="pre">-G</span> <span class="pre">&lt;generator&gt;</span> <span class="pre">[options]</span></code></p>
<p>Some common build system generators are:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">Ninja</span></code> — for generating <a class="reference external" href="https://ninja-build.org">Ninja</a>
build files. Most llvm developers use Ninja.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Unix</span> <span class="pre">Makefiles</span></code> — for generating make-compatible parallel makefiles.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Visual</span> <span class="pre">Studio</span></code> — for generating Visual Studio projects and
solutions.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Xcode</span></code> — for generating Xcode projects.</p></li>
<li><p>See the <a class="reference external" href="https://cmake.org/cmake/help/latest/manual/cmake-generators.7.html">CMake docs</a>
for a more comprehensive list.</p></li>
</ul>
<p>Some common options:</p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_PROJECTS='...'</span></code> — A semicolon-separated list of the LLVM
subprojects you’d like to additionally build. Can include any of: clang,
clang-tools-extra, lldb, lld, polly, or cross-project-tests.</p>
<p>For example, to build LLVM, Clang, and LLD, use
<code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_PROJECTS=&quot;clang;lld&quot;</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DCMAKE_INSTALL_PREFIX=directory</span></code> — Specify for <em>directory</em> the full
pathname of where you want the LLVM tools and libraries to be installed
(default <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DCMAKE_BUILD_TYPE=type</span></code> — Controls the optimization level and debug
information of the build. Valid options for <em>type</em> are <code class="docutils literal notranslate"><span class="pre">Debug</span></code>,
<code class="docutils literal notranslate"><span class="pre">Release</span></code>, <code class="docutils literal notranslate"><span class="pre">RelWithDebInfo</span></code>, and <code class="docutils literal notranslate"><span class="pre">MinSizeRel</span></code>. For more detailed
information, see <a class="reference internal" href="CMake.html#cmake-build-type"><span class="std std-ref">CMAKE_BUILD_TYPE</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_ASSERTIONS=ON</span></code> — Compile with assertion checks enabled
(default is ON for Debug builds, OFF for all other build types).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_USE_LINKER=lld</span></code> — Link with the <a class="reference external" href="https://lld.llvm.org">lld linker</a>, assuming it
is installed on your system. This can dramatically speed up link times
if the default linker is slow.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_PARALLEL_{COMPILE,LINK,TABLEGEN}_JOBS=N</span></code> — Limit the number of
compile/link/tablegen jobs running in parallel at the same time. This is
especially important for linking since linking can use lots of memory. If
you run into memory issues building LLVM, try setting this to limit the
maximum number of compile/link/tablegen jobs running at the same time.</p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">build</span> <span class="pre">[--target</span> <span class="pre">&lt;target&gt;]</span></code> or the build system specified
above directly.</p>
<ul class="simple">
<li><p>The default target (i.e. <code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">--build</span> <span class="pre">build</span></code> or <code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">-C</span> <span class="pre">build</span></code>)
will build all of LLVM.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">check-all</span></code> target (i.e. <code class="docutils literal notranslate"><span class="pre">ninja</span> <span class="pre">check-all</span></code>) will run the
regression tests to ensure everything is in working order.</p></li>
<li><p>CMake will generate build targets for each tool and library, and most
LLVM sub-projects generate their own <code class="docutils literal notranslate"><span class="pre">check-&lt;project&gt;</span></code> target.</p></li>
<li><p>Running a serial build will be <strong>slow</strong>.  To improve speed, try running a
parallel build. That’s done by default in Ninja; for <code class="docutils literal notranslate"><span class="pre">make</span></code>, use the
option <code class="docutils literal notranslate"><span class="pre">-j</span> <span class="pre">NN</span></code>, where <code class="docutils literal notranslate"><span class="pre">NN</span></code> is the number of parallel jobs, e.g. the
number of available CPUs.</p></li>
</ul>
</li>
<li><p>A basic CMake and build/test invocation which only builds LLVM and no other
subprojects:</p>
<p><code class="docutils literal notranslate"><span class="pre">cmake</span> <span class="pre">-S</span> <span class="pre">llvm</span> <span class="pre">-B</span> <span class="pre">build</span> <span class="pre">-G</span> <span class="pre">Ninja</span> <span class="pre">-DCMAKE_BUILD_TYPE=Debug</span></code></p>
<p><code class="docutils literal notranslate"><span class="pre">ninja</span> <span class="pre">-C</span> <span class="pre">build</span> <span class="pre">check-llvm</span></code></p>
<p>This will set up an LLVM build with debugging info, then compile LLVM and
run LLVM tests.</p>
</li>
<li><p>For more detailed information on CMake options, see <a class="reference external" href="CMake.html">CMake</a></p></li>
<li><p>If you get build or test failures, see <a class="reference internal" href="#below">below</a>.</p></li>
</ul>
</li>
</ol>
<p>Consult the <a class="reference internal" href="#getting-started-with-llvm">Getting Started with LLVM</a> section for detailed information on
configuring and compiling LLVM.  Go to <a class="reference internal" href="#directory-layout">Directory Layout</a> to learn about the
layout of the source code tree.</p>
<section id="stand-alone-builds">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Stand-alone Builds</a><a class="headerlink" href="#stand-alone-builds" title="Link to this heading">¶</a></h3>
<p>Stand-alone builds allow you to build a sub-project against a pre-built
version of the clang or llvm libraries that is already present on your
system.</p>
<p>You can use the source code from a standard checkout of the llvm-project
(as described above) to do stand-alone builds, but you may also build
from a <a class="reference internal" href="Proposals/GitHubMove.html#workflow-multicheckout-nocommit"><span class="std std-ref">sparse checkout</span></a> or from the
tarballs available on the <a class="reference external" href="https://github.com/llvm/llvm-project/releases/">releases</a>
page.</p>
<p>For stand-alone builds, you must have an llvm install that is configured
properly to be consumable by stand-alone builds of the other projects.
This could be a distro-provided LLVM install, or you can build it yourself,
like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake -G Ninja -S path/to/llvm-project/llvm -B $builddir \</span>
<span class="go">      -DLLVM_INSTALL_UTILS=ON \</span>
<span class="go">      -DCMAKE_INSTALL_PREFIX=/path/to/llvm/install/prefix \</span>
<span class="go">      &lt; other options &gt;</span>

<span class="go">ninja -C $builddir install</span>
</pre></div>
</div>
<p>Once llvm is installed, to configure a project for a stand-alone build, invoke CMake like this:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="go">cmake -G Ninja -S path/to/llvm-project/$subproj \</span>
<span class="go">      -B $buildir_subproj \</span>
<span class="go">      -DLLVM_EXTERNAL_LIT=/path/to/lit \</span>
<span class="go">      -DLLVM_ROOT=/path/to/llvm/install/prefix</span>
</pre></div>
</div>
<p>Notice that:</p>
<ul class="simple">
<li><p>The stand-alone build needs to happen in a folder that is not the
original folder where LLVMN was built
(<cite>$builddir!=$builddir_subproj</cite>).</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_ROOT</span></code> should point to the prefix of your llvm installation,
so for example, if llvm is installed into <code class="docutils literal notranslate"><span class="pre">/usr/bin</span></code> and
<code class="docutils literal notranslate"><span class="pre">/usr/lib64</span></code>, then you should pass <code class="docutils literal notranslate"><span class="pre">-DLLVM_ROOT=/usr/</span></code>.</p></li>
<li><p>Both the <code class="docutils literal notranslate"><span class="pre">LLVM_ROOT</span></code> and <code class="docutils literal notranslate"><span class="pre">LLVM_EXTERNAL_LIT</span></code> options are
required to do stand-alone builds for all sub-projects.  Additional
required options for each sub-project can be found in the table
below.</p></li>
</ul>
<p>The <code class="docutils literal notranslate"><span class="pre">check-$subproj</span></code> and <code class="docutils literal notranslate"><span class="pre">install</span></code> build targets are supported for the
sub-projects listed in the table below.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Sub-Project</p></th>
<th class="head"><p>Required Sub-Directories</p></th>
<th class="head"><p>Required CMake Options</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>llvm</p></td>
<td><p>llvm, cmake, third-party</p></td>
<td><p>LLVM_INSTALL_UTILS=ON</p></td>
</tr>
<tr class="row-odd"><td><p>clang</p></td>
<td><p>clang, cmake</p></td>
<td><p>CLANG_INCLUDE_TESTS=ON (Required for check-clang only)</p></td>
</tr>
<tr class="row-even"><td><p>lld</p></td>
<td><p>lld, cmake</p></td>
<td></td>
</tr>
</tbody>
</table>
<p>Example of building stand-alone <cite>clang</cite>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">#</span>!/bin/sh

<span class="go">build_llvm=`pwd`/build-llvm</span>
<span class="go">build_clang=`pwd`/build-clang</span>
<span class="go">installprefix=`pwd`/install</span>
<span class="go">llvm=`pwd`/llvm-project</span>
<span class="go">mkdir -p $build_llvm</span>
<span class="go">mkdir -p $installprefix</span>

<span class="go">cmake -G Ninja -S $llvm/llvm -B $build_llvm \</span>
<span class="go">      -DLLVM_INSTALL_UTILS=ON \</span>
<span class="go">      -DCMAKE_INSTALL_PREFIX=$installprefix \</span>
<span class="go">      -DCMAKE_BUILD_TYPE=Release</span>

<span class="go">ninja -C $build_llvm install</span>

<span class="go">cmake -G Ninja -S $llvm/clang -B $build_clang \</span>
<span class="go">      -DLLVM_EXTERNAL_LIT=$build_llvm/utils/lit \</span>
<span class="go">      -DLLVM_ROOT=$installprefix</span>

<span class="go">ninja -C $build_clang</span>
</pre></div>
</div>
</section>
</section>
<section id="requirements">
<h2><a class="toc-backref" href="#id6" role="doc-backlink">Requirements</a><a class="headerlink" href="#requirements" title="Link to this heading">¶</a></h2>
<p>Before you begin to use the LLVM system, review the requirements below.
This may save you some trouble by knowing ahead of time what hardware and
software you will need.</p>
<section id="hardware">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Hardware</a><a class="headerlink" href="#hardware" title="Link to this heading">¶</a></h3>
<p>LLVM is known to work on the following host platforms:</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>OS</p></th>
<th class="head"><p>Arch</p></th>
<th class="head"><p>Compilers</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Linux</p></td>
<td><p>x86<sup>1</sup></p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>Linux</p></td>
<td><p>amd64</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>Linux</p></td>
<td><p>ARM</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>Linux</p></td>
<td><p>AArch64</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>Linux</p></td>
<td><p>LoongArch</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>Linux</p></td>
<td><p>Mips</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>Linux</p></td>
<td><p>PowerPC</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>Linux</p></td>
<td><p>RISC-V</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>Linux</p></td>
<td><p>SystemZ</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>Solaris</p></td>
<td><p>V9 (Ultrasparc)</p></td>
<td><p>GCC</p></td>
</tr>
<tr class="row-even"><td><p>DragonFlyBSD</p></td>
<td><p>amd64</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>FreeBSD</p></td>
<td><p>x86<sup>1</sup></p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>FreeBSD</p></td>
<td><p>amd64</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>FreeBSD</p></td>
<td><p>AArch64</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>NetBSD</p></td>
<td><p>x86<sup>1</sup></p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>NetBSD</p></td>
<td><p>amd64</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>OpenBSD</p></td>
<td><p>x86<sup>1</sup></p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-odd"><td><p>OpenBSD</p></td>
<td><p>amd64</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>macOS<sup>2</sup></p></td>
<td><p>PowerPC</p></td>
<td><p>GCC</p></td>
</tr>
<tr class="row-odd"><td><p>macOS</p></td>
<td><p>x86</p></td>
<td><p>GCC, Clang</p></td>
</tr>
<tr class="row-even"><td><p>macOS</p></td>
<td><p>arm64</p></td>
<td><p>Clang</p></td>
</tr>
<tr class="row-odd"><td><p>Cygwin/Win32</p></td>
<td><p>x86<sup>1, 3</sup></p></td>
<td><p>GCC</p></td>
</tr>
<tr class="row-even"><td><p>Windows</p></td>
<td><p>x86<sup>1</sup></p></td>
<td><p>Visual Studio</p></td>
</tr>
<tr class="row-odd"><td><p>Windows x64</p></td>
<td><p>x86-64</p></td>
<td><p>Visual Studio, Clang<sup>4</sup></p></td>
</tr>
<tr class="row-even"><td><p>Windows on Arm</p></td>
<td><p>ARM64</p></td>
<td><p>Visual Studio, Clang<sup>4</sup></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Code generation supported for Pentium processors and up</p></li>
<li><p>Code generation supported for 32-bit ABI only</p></li>
<li><p>To use LLVM modules on a Win32-based system, you may configure LLVM
with <code class="docutils literal notranslate"><span class="pre">-DBUILD_SHARED_LIBS=On</span></code>.</p></li>
<li><p>Visual Studio alone can compile LLVM. When using Clang, you
must also have Visual Studio installed.</p></li>
</ol>
</div>
<p>Note that Debug builds require a lot of time and disk space.  An LLVM-only build
will need about 1-3 GB of space.  A full build of LLVM and Clang will need around
15-20 GB of disk space.  The exact space requirements will vary by system.  (It
is so large because of all the debugging information and the fact that the
libraries are statically linked into multiple tools).</p>
<p>If you are space-constrained, you can build only selected tools or only
selected targets.  The Release build requires considerably less space.</p>
<p>The LLVM suite <em>may</em> compile on other platforms, but it is not guaranteed to do
so.  If compilation is successful, the LLVM utilities should be able to
assemble, disassemble, analyze, and optimize LLVM bitcode.  Code generation
should work as well, although the generated native code may not work on your
platform.</p>
</section>
<section id="software">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">Software</a><a class="headerlink" href="#software" title="Link to this heading">¶</a></h3>
<p>Compiling LLVM requires that you have several software packages installed. The
table below lists those required packages. The Package column is the usual name
for the software package that LLVM depends on. The Version column provides
“known to work” versions of the package. The Notes column describes how LLVM
uses the package and provides other details.</p>
<table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Package</p></th>
<th class="head"><p>Version</p></th>
<th class="head"><p>Notes</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><a class="reference external" href="http://cmake.org/">CMake</a></p></td>
<td><p>&gt;=3.20.0</p></td>
<td><p>Makefile/workspace generator</p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="http://www.python.org/">python</a></p></td>
<td><p>&gt;=3.8</p></td>
<td><p>Automated test suite<sup>1</sup></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="http://zlib.net">zlib</a></p></td>
<td><p>&gt;=1.2.3.4</p></td>
<td><p>Compression library<sup>2</sup></p></td>
</tr>
<tr class="row-odd"><td><p><a class="reference external" href="http://savannah.gnu.org/projects/make">GNU Make</a></p></td>
<td><p>3.79, 3.79.1</p></td>
<td><p>Makefile/build processor<sup>3</sup></p></td>
</tr>
<tr class="row-even"><td><p><a class="reference external" href="https://pypi.org/project/PyYAML/">PyYAML</a></p></td>
<td><p>&gt;=5.1</p></td>
<td><p>Header generator<sup>4</sup></p></td>
</tr>
</tbody>
</table>
<div class="admonition note">
<p class="admonition-title">Note</p>
<ol class="arabic simple">
<li><p>Only needed if you want to run the automated test suite in the
<code class="docutils literal notranslate"><span class="pre">llvm/test</span></code> directory, or if you plan to utilize any Python libraries,
utilities, or bindings.</p></li>
<li><p>Optional, adds compression/uncompression capabilities to selected LLVM
tools.</p></li>
<li><p>Optional, you can use any other build tool supported by CMake.</p></li>
<li><p>Only needed when building libc with New Headergen. Mainly used by libc.</p></li>
</ol>
</div>
<p>Additionally, your compilation host is expected to have the usual plethora of
Unix utilities. Specifically:</p>
<ul class="simple">
<li><p><strong>ar</strong> — archive library builder</p></li>
<li><p><strong>bzip2</strong> — bzip2 command for distribution generation</p></li>
<li><p><strong>bunzip2</strong> — bunzip2 command for distribution checking</p></li>
<li><p><strong>chmod</strong> — change permissions on a file</p></li>
<li><p><strong>cat</strong> — output concatenation utility</p></li>
<li><p><strong>cp</strong> — copy files</p></li>
<li><p><strong>date</strong> — print the current date/time</p></li>
<li><p><strong>echo</strong> — print to standard output</p></li>
<li><p><strong>egrep</strong> — extended regular expression search utility</p></li>
<li><p><strong>find</strong> — find files/dirs in a file system</p></li>
<li><p><strong>grep</strong> — regular expression search utility</p></li>
<li><p><strong>gzip</strong> — gzip command for distribution generation</p></li>
<li><p><strong>gunzip</strong> — gunzip command for distribution checking</p></li>
<li><p><strong>install</strong> — install directories/files</p></li>
<li><p><strong>mkdir</strong> — create a directory</p></li>
<li><p><strong>mv</strong> — move (rename) files</p></li>
<li><p><strong>ranlib</strong> — symbol table builder for archive libraries</p></li>
<li><p><strong>rm</strong> — remove (delete) files and directories</p></li>
<li><p><strong>sed</strong> — stream editor for transforming output</p></li>
<li><p><strong>sh</strong> — Bourne shell for make build scripts</p></li>
<li><p><strong>tar</strong> — tape archive for distribution generation</p></li>
<li><p><strong>test</strong> — test things in file system</p></li>
<li><p><strong>unzip</strong> — unzip command for distribution checking</p></li>
<li><p><strong>zip</strong> — zip command for distribution generation</p></li>
</ul>
</section>
<section id="host-c-toolchain-both-compiler-and-standard-library">
<span id="host-cpp-toolchain"></span><span id="check-here"></span><span id="below"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink">Host C++ Toolchain, both Compiler and Standard Library</a><a class="headerlink" href="#host-c-toolchain-both-compiler-and-standard-library" title="Link to this heading">¶</a></h3>
<p>LLVM is very demanding of the host C++ compiler, and as such tends to expose
bugs in the compiler. We also attempt to follow improvements and developments in
the C++ language and library reasonably closely. As such, we require a modern
host C++ toolchain, both compiler and standard library, in order to build LLVM.</p>
<p>LLVM is written using the subset of C++ documented in <a class="reference internal" href="CodingStandards.html"><span class="doc">coding
standards</span></a>. To enforce this language version, we check the most
popular host toolchains for specific minimum versions in our build systems:</p>
<ul class="simple">
<li><p>Clang 5.0</p></li>
<li><p>Apple Clang 10.0</p></li>
<li><p>GCC 7.4</p></li>
<li><p>Visual Studio 2019 16.8</p></li>
</ul>
<p>Anything older than these toolchains <em>may</em> work, but will require forcing the
build system with a special option and is not really a supported host platform.
Also note that older versions of these compilers have often crashed or
miscompiled LLVM.</p>
<p>For less widely used host toolchains such as ICC or xlC, be aware that a very
recent version may be required to support all of the C++ features used in LLVM.</p>
<p>We track certain versions of software that are <em>known</em> to fail when used as
part of the host toolchain. These even include linkers at times.</p>
<p><strong>GNU ld 2.16.X</strong>. Some 2.16.X versions of the ld linker will produce very long
warning messages complaining that some “<code class="docutils literal notranslate"><span class="pre">.gnu.linkonce.t.*</span></code>” symbol was
defined in a discarded section. You can safely ignore these messages as they are
erroneous and the linkage is correct.  These messages disappear using ld 2.17.</p>
<p><strong>GNU binutils 2.17</strong>: Binutils 2.17 contains <a class="reference external" href="http://sourceware.org/bugzilla/show_bug.cgi?id=3111">a bug</a> which causes huge link
times (minutes instead of seconds) when building LLVM.  We recommend upgrading
to a newer version (2.17.50.0.4 or later).</p>
<p><strong>GNU Binutils 2.19.1 Gold</strong>: This version of Gold contained <a class="reference external" href="http://sourceware.org/bugzilla/show_bug.cgi?id=9836">a bug</a> which causes
intermittent failures when building LLVM with position independent code.  The
symptom is an error about cyclic dependencies.  We recommend upgrading to a
newer version of Gold.</p>
<section id="getting-a-modern-host-c-toolchain">
<h4><a class="toc-backref" href="#id10" role="doc-backlink">Getting a Modern Host C++ Toolchain</a><a class="headerlink" href="#getting-a-modern-host-c-toolchain" title="Link to this heading">¶</a></h4>
<p>This section mostly applies to Linux and older BSDs. On macOS, you should
have a sufficiently modern Xcode, or you will likely need to upgrade until you
do. Windows does not have a “system compiler”, so you must install either Visual
Studio 2019 (or later), or a recent version of mingw64. FreeBSD 10.0 and newer
have a modern Clang as the system compiler.</p>
<p>However, some Linux distributions and some other or older BSDs sometimes have
extremely old versions of GCC. These steps attempt to help you upgrade your
compiler even on such a system. However, if at all possible, we encourage you
to use a recent version of a distribution with a modern system compiler that
meets these requirements. Note that it is tempting to install a prior
version of Clang and libc++ to be the host compiler; however, libc++ was not
well tested or set up to build on Linux until relatively recently. As
a consequence, this guide suggests just using libstdc++ and a modern GCC as the
initial host in a bootstrap, and then using Clang (and potentially libc++).</p>
<p>The first step is to get a recent GCC toolchain installed. The most common
distribution on which users have struggled with the version requirements is
Ubuntu Precise, 12.04 LTS. For this distribution, one easy option is to install
the <a class="reference external" href="https://launchpad.net/~ubuntu-toolchain-r/+archive/test">toolchain testing PPA</a> and use it to install a modern GCC. There is
a really nice discussion of this on the <a class="reference external" href="https://askubuntu.com/questions/466651/how-do-i-use-the-latest-gcc-on-ubuntu/581497#58149">ask ubuntu stack exchange</a> and a
<a class="reference external" href="https://gist.github.com/application2000/73fd6f4bf1be6600a2cf9f56315a2d91">github gist</a> with updated commands. However, not all users can use PPAs and
there are many other distributions, so it may be necessary (or just useful, if
you’re here you <em>are</em> doing compiler development after all) to build and install
GCC from source. It is also quite easy to do these days.</p>
<p>Easy steps for installing a specific version of GCC:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span><span class="nv">gcc_version</span><span class="o">=</span><span class="m">7</span>.4.0
<span class="gp">% </span>wget<span class="w"> </span>https://ftp.gnu.org/gnu/gcc/gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>/gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>.tar.bz2
<span class="gp">% </span>wget<span class="w"> </span>https://ftp.gnu.org/gnu/gcc/gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>/gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>.tar.bz2.sig
<span class="gp">% </span>wget<span class="w"> </span>https://ftp.gnu.org/gnu/gnu-keyring.gpg
<span class="gp">% </span><span class="nv">signature_invalid</span><span class="o">=</span><span class="sb">`</span>gpg<span class="w"> </span>--verify<span class="w"> </span>--no-default-keyring<span class="w"> </span>--keyring<span class="w"> </span>./gnu-keyring.gpg<span class="w"> </span>gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>.tar.bz2.sig<span class="sb">`</span>
<span class="gp">% </span><span class="k">if</span><span class="w"> </span><span class="o">[</span><span class="w"> </span><span class="nv">$signature_invalid</span><span class="w"> </span><span class="o">]</span><span class="p">;</span><span class="w"> </span><span class="k">then</span><span class="w"> </span><span class="nb">echo</span><span class="w"> </span><span class="s2">&quot;Invalid signature&quot;</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="nb">exit</span><span class="w"> </span><span class="m">1</span><span class="w"> </span><span class="p">;</span><span class="w"> </span><span class="k">fi</span>
<span class="gp">% </span>tar<span class="w"> </span>-xvjf<span class="w"> </span>gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>.tar.bz2
<span class="gp">% </span><span class="nb">cd</span><span class="w"> </span>gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>
<span class="gp">% </span>./contrib/download_prerequisites
<span class="gp">% </span><span class="nb">cd</span><span class="w"> </span>..
<span class="gp">% </span>mkdir<span class="w"> </span>gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>-build
<span class="gp">% </span><span class="nb">cd</span><span class="w"> </span>gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>-build
<span class="gp">% </span><span class="nv">$PWD</span>/../gcc-<span class="si">${</span><span class="nv">gcc_version</span><span class="si">}</span>/configure<span class="w"> </span>--prefix<span class="o">=</span><span class="nv">$HOME</span>/toolchains<span class="w"> </span>--enable-languages<span class="o">=</span>c,c++
<span class="gp">% </span>make<span class="w"> </span>-j<span class="k">$(</span>nproc<span class="k">)</span>
<span class="gp">% </span>make<span class="w"> </span>install
</pre></div>
</div>
<p>For more details, check out the excellent <a class="reference external" href="https://gcc.gnu.org/wiki/InstallingGCC">GCC wiki entry</a>, where I got most
of this information from.</p>
<p>Once you have a GCC toolchain, configure your build of LLVM to use the new
toolchain for your host compiler and C++ standard library. Because the new
version of libstdc++ is not on the system library search path, you need to pass
extra linker flags so that it can be found at link time (<code class="docutils literal notranslate"><span class="pre">-L</span></code>) and at runtime
(<code class="docutils literal notranslate"><span class="pre">-rpath</span></code>). If you are using CMake, this invocation should produce working
binaries:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>mkdir<span class="w"> </span>build
<span class="gp">% </span><span class="nb">cd</span><span class="w"> </span>build
<span class="gp">% </span><span class="nv">CC</span><span class="o">=</span><span class="nv">$HOME</span>/toolchains/bin/gcc<span class="w"> </span><span class="nv">CXX</span><span class="o">=</span><span class="nv">$HOME</span>/toolchains/bin/g++<span class="w"> </span><span class="se">\</span>
<span class="w">  </span>cmake<span class="w"> </span>..<span class="w"> </span>-DCMAKE_CXX_LINK_FLAGS<span class="o">=</span><span class="s2">&quot;-Wl,-rpath,</span><span class="nv">$HOME</span><span class="s2">/toolchains/lib64 -L</span><span class="nv">$HOME</span><span class="s2">/toolchains/lib64&quot;</span>
</pre></div>
</div>
<p>If you fail to set rpath, most LLVM binaries will fail on startup with a message
from the loader similar to <code class="docutils literal notranslate"><span class="pre">libstdc++.so.6:</span> <span class="pre">version</span> <span class="pre">`GLIBCXX_3.4.20'</span> <span class="pre">not</span>
<span class="pre">found</span></code>. This means you need to tweak the <code class="docutils literal notranslate"><span class="pre">-rpath</span></code> linker flag.</p>
<p>This method will add an absolute path to the rpath of all executables. That’s
fine for local development. If you want to distribute the binaries you build
so that they can run on older systems, copy <code class="docutils literal notranslate"><span class="pre">libstdc++.so.6</span></code> into the
<code class="docutils literal notranslate"><span class="pre">lib/</span></code> directory.  All of LLVM’s shipping binaries have an rpath pointing at
<code class="docutils literal notranslate"><span class="pre">$ORIGIN/../lib</span></code>, so they will find <code class="docutils literal notranslate"><span class="pre">libstdc++.so.6</span></code> there.  Non-distributed
binaries don’t have an rpath set and won’t find <code class="docutils literal notranslate"><span class="pre">libstdc++.so.6</span></code>. Pass
<code class="docutils literal notranslate"><span class="pre">-DLLVM_LOCAL_RPATH=&quot;$HOME/toolchains/lib64&quot;</span></code> to CMake to add an absolute
path to <code class="docutils literal notranslate"><span class="pre">libstdc++.so.6</span></code> as above. Since these binaries are not distributed,
having an absolute local path is fine for them.</p>
<p>When you build Clang, you will need to give <em>it</em> access to a modern C++
standard library in order to use it as your new host in part of a bootstrap.
There are two easy ways to do this, either build (and install) libc++ along
with Clang and then use it with the <code class="docutils literal notranslate"><span class="pre">-stdlib=libc++</span></code> compile and link flag,
or install Clang into the same prefix (<code class="docutils literal notranslate"><span class="pre">$HOME/toolchains</span></code> above) as GCC.
Clang will look within its own prefix for libstdc++ and use it if found. You
can also add an explicit prefix for Clang to look in for a GCC toolchain with
the <code class="docutils literal notranslate"><span class="pre">--gcc-toolchain=/opt/my/gcc/prefix</span></code> flag, passing it to both compile and
link commands when using your just-built-Clang to bootstrap.</p>
</section>
</section>
</section>
<section id="getting-started-with-llvm">
<span id="id1"></span><h2><a class="toc-backref" href="#id11" role="doc-backlink">Getting Started with LLVM</a><a class="headerlink" href="#getting-started-with-llvm" title="Link to this heading">¶</a></h2>
<p>The remainder of this guide is meant to get you up and running with LLVM and to
give you some basic information about the LLVM environment.</p>
<p>The later sections of this guide describe the <a class="reference internal" href="#general-layout">general layout</a> of the LLVM
source tree, a <a class="reference internal" href="#simple-example">simple example</a> using the LLVM toolchain, and <a class="reference internal" href="#links">links</a> to find
more information about LLVM or to get help via e-mail.</p>
<section id="terminology-and-notation">
<h3><a class="toc-backref" href="#id12" role="doc-backlink">Terminology and Notation</a><a class="headerlink" href="#terminology-and-notation" title="Link to this heading">¶</a></h3>
<p>Throughout this manual, the following names are used to denote paths specific to
the local system and working environment.  <em>These are not environment variables
you need to set but just strings used in the rest of this document below</em>.  In
any of the examples below, simply replace each of these names with the
appropriate pathname on your local system.  All these paths are absolute:</p>
<p><code class="docutils literal notranslate"><span class="pre">SRC_ROOT</span></code></p>
<blockquote>
<div><p>This is the top-level directory of the LLVM source tree.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">OBJ_ROOT</span></code></p>
<blockquote>
<div><p>This is the top-level directory of the LLVM object tree (i.e. the tree where
object files and compiled programs will be placed.  It can be the same as
SRC_ROOT).</p>
</div></blockquote>
<section id="sending-patches">
<h4><a class="toc-backref" href="#id13" role="doc-backlink">Sending patches</a><a class="headerlink" href="#sending-patches" title="Link to this heading">¶</a></h4>
<p>See <a class="reference internal" href="Contributing.html#submit-patch"><span class="std std-ref">Contributing</span></a>.</p>
</section>
<section id="bisecting-commits">
<h4><a class="toc-backref" href="#id14" role="doc-backlink">Bisecting commits</a><a class="headerlink" href="#bisecting-commits" title="Link to this heading">¶</a></h4>
<p>See <a class="reference external" href="GitBisecting.html">Bisecting LLVM code</a> for how to use <code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">bisect</span></code>
on LLVM.</p>
</section>
<section id="reverting-a-change">
<h4><a class="toc-backref" href="#id15" role="doc-backlink">Reverting a change</a><a class="headerlink" href="#reverting-a-change" title="Link to this heading">¶</a></h4>
<p>When reverting changes using git, the default message will say “This reverts
commit XYZ”. Leave this at the end of the commit message, but add some details
before it as to why the commit is being reverted. A brief explanation and/or
links to bots that demonstrate the problem are sufficient.</p>
</section>
</section>
<section id="local-llvm-configuration">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Local LLVM Configuration</a><a class="headerlink" href="#local-llvm-configuration" title="Link to this heading">¶</a></h3>
<p>Once checked out repository, the LLVM suite source code must be configured
before being built. This process uses CMake.  Unlike the normal <code class="docutils literal notranslate"><span class="pre">configure</span></code>
script, CMake generates the build files in whatever format you request as well
as various <code class="docutils literal notranslate"><span class="pre">*.inc</span></code> files, and <code class="docutils literal notranslate"><span class="pre">llvm/include/llvm/Config/config.h.cmake</span></code>.</p>
<p>Variables are passed to <code class="docutils literal notranslate"><span class="pre">cmake</span></code> on the command line using the format
<code class="docutils literal notranslate"><span class="pre">-D&lt;variable</span> <span class="pre">name&gt;=&lt;value&gt;</span></code>. The following variables are some common options
used by people developing LLVM.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_C_COMPILER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_COMPILER</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_BUILD_TYPE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">Python3_EXECUTABLE</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_TARGETS_TO_BUILD</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_ENABLE_PROJECTS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_ENABLE_RUNTIMES</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_ENABLE_DOXYGEN</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_ENABLE_SPHINX</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_BUILD_LLVM_DYLIB</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_LINK_LLVM_DYLIB</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_PARALLEL_LINK_JOBS</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">LLVM_OPTIMIZED_TABLEGEN</span></code></p></li>
</ul>
<p>See <a class="reference internal" href="CMake.html#cmake-frequently-used-variables"><span class="std std-ref">the list of frequently-used CMake variables</span></a>
for more information.</p>
<p>To configure LLVM, follow these steps:</p>
<ol class="arabic">
<li><p>Change directory into the object root directory:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span><span class="nb">cd</span><span class="w"> </span>OBJ_ROOT
</pre></div>
</div>
</li>
<li><p>Run the <code class="docutils literal notranslate"><span class="pre">cmake</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>cmake<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>&lt;type&gt;<span class="w"> </span>-DCMAKE_INSTALL_PREFIX<span class="o">=</span>/install/path
<span class="go">  [other options] SRC_ROOT</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="compiling-the-llvm-suite-source-code">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Compiling the LLVM Suite Source Code</a><a class="headerlink" href="#compiling-the-llvm-suite-source-code" title="Link to this heading">¶</a></h3>
<p>Unlike with autotools, with CMake your build type is defined at configuration.
If you want to change your build type, you can re-run CMake with the following
invocation:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>cmake<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>&lt;type&gt;<span class="w"> </span>SRC_ROOT
</pre></div>
</div>
</div></blockquote>
<p>Between runs, CMake preserves the values set for all options. CMake has the
following build types defined:</p>
<p>Debug</p>
<blockquote>
<div><p>These builds are the default. The build system will compile the tools and
libraries unoptimized, with debugging information, and asserts enabled.</p>
</div></blockquote>
<p>Release</p>
<blockquote>
<div><p>For these builds, the build system will compile the tools and libraries
with optimizations enabled and not generate debug info. CMakes default
optimization level is -O3. This can be configured by setting the
<code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS_RELEASE</span></code> variable on the CMake command line.</p>
</div></blockquote>
<p>RelWithDebInfo</p>
<blockquote>
<div><p>These builds are useful when debugging. They generate optimized binaries with
debug information. CMakes default optimization level is -O2. This can be
configured by setting the <code class="docutils literal notranslate"><span class="pre">CMAKE_CXX_FLAGS_RELWITHDEBINFO</span></code> variable on the
CMake command line.</p>
</div></blockquote>
<p>Once you have LLVM configured, you can build it by entering the <em>OBJ_ROOT</em>
directory and issuing the following command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>make
</pre></div>
</div>
<p>If the build fails, please <a class="reference internal" href="#check-here">check here</a> to see if you are using a version of
GCC that is known not to compile LLVM.</p>
<p>If you have multiple processors in your machine, you may wish to use some of the
parallel build options provided by GNU Make.  For example, you could use the
command:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>make<span class="w"> </span>-j2
</pre></div>
</div>
<p>There are several special targets which are useful when working with the LLVM
source code:</p>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">clean</span></code></p>
<blockquote>
<div><p>Removes all files generated by the build.  This includes object files,
generated C/C++ files, libraries, and executables.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">install</span></code></p>
<blockquote>
<div><p>Installs LLVM header files, libraries, tools, and documentation in a hierarchy
under <code class="docutils literal notranslate"><span class="pre">$PREFIX</span></code>, specified with <code class="docutils literal notranslate"><span class="pre">CMAKE_INSTALL_PREFIX</span></code>, which
defaults to <code class="docutils literal notranslate"><span class="pre">/usr/local</span></code>.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">make</span> <span class="pre">docs-llvm-html</span></code></p>
<blockquote>
<div><p>If configured with <code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_SPHINX=On</span></code>, this will generate a directory
at <code class="docutils literal notranslate"><span class="pre">OBJ_ROOT/docs/html</span></code> which contains the HTML formatted documentation.</p>
</div></blockquote>
</section>
<section id="cross-compiling-llvm">
<h3><a class="toc-backref" href="#id18" role="doc-backlink">Cross-Compiling LLVM</a><a class="headerlink" href="#cross-compiling-llvm" title="Link to this heading">¶</a></h3>
<p>It is possible to cross-compile LLVM itself. That is, you can create LLVM
executables and libraries to be hosted on a platform different from the platform
where they are built (a Canadian Cross build). To generate build files for
cross-compiling CMake provides a variable <code class="docutils literal notranslate"><span class="pre">CMAKE_TOOLCHAIN_FILE</span></code> which can
define compiler flags and variables used during the CMake test operations.</p>
<p>The result of such a build is executables that are not runnable on the build
host but can be executed on the target. As an example, the following CMake
invocation can generate build files targeting iOS. This will work on macOS
with the latest Xcode:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>cmake<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Ninja&quot;</span><span class="w"> </span>-DCMAKE_OSX_ARCHITECTURES<span class="o">=</span><span class="s2">&quot;armv7;armv7s;arm64&quot;</span>
<span class="go">  -DCMAKE_TOOLCHAIN_FILE=&lt;PATH_TO_LLVM&gt;/cmake/platforms/iOS.cmake</span>
<span class="go">  -DCMAKE_BUILD_TYPE=Release -DLLVM_BUILD_RUNTIME=Off -DLLVM_INCLUDE_TESTS=Off</span>
<span class="go">  -DLLVM_INCLUDE_EXAMPLES=Off -DLLVM_ENABLE_BACKTRACES=Off [options]</span>
<span class="go">  &lt;PATH_TO_LLVM&gt;</span>
</pre></div>
</div>
<p>Note: There are some additional flags that need to be passed when building for
iOS due to limitations in the iOS SDK.</p>
<p>Check <a class="reference internal" href="HowToCrossCompileLLVM.html"><span class="doc">How to cross-compile Clang/LLVM using Clang/LLVM</span></a> and <a class="reference external" href="https://clang.llvm.org/docs/CrossCompilation.html">Clang docs on how to cross-compile in general</a> for more information
about cross-compiling.</p>
</section>
<section id="the-location-of-llvm-object-files">
<h3><a class="toc-backref" href="#id19" role="doc-backlink">The Location of LLVM Object Files</a><a class="headerlink" href="#the-location-of-llvm-object-files" title="Link to this heading">¶</a></h3>
<p>The LLVM build system is capable of sharing a single LLVM source tree among
several LLVM builds.  Hence, it is possible to build LLVM for several different
platforms or configurations using the same source tree.</p>
<ul>
<li><p>Change directory to where the LLVM object files should live:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span><span class="nb">cd</span><span class="w"> </span>OBJ_ROOT
</pre></div>
</div>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">cmake</span></code>:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>cmake<span class="w"> </span>-G<span class="w"> </span><span class="s2">&quot;Unix Makefiles&quot;</span><span class="w"> </span>-DCMAKE_BUILD_TYPE<span class="o">=</span>Release<span class="w"> </span>SRC_ROOT
</pre></div>
</div>
</li>
</ul>
<p>The LLVM build will create a structure underneath <em>OBJ_ROOT</em> that matches the
LLVM source tree. At each level where source files are present in the source
tree there will be a corresponding <code class="docutils literal notranslate"><span class="pre">CMakeFiles</span></code> directory in the <em>OBJ_ROOT</em>.
Underneath that directory there is another directory with a name ending in
<code class="docutils literal notranslate"><span class="pre">.dir</span></code> under which you’ll find object files for each source.</p>
<p>For example:</p>
<blockquote>
<div><div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span><span class="nb">cd</span><span class="w"> </span>llvm_build_dir
<span class="gp">% </span>find<span class="w"> </span>lib/Support/<span class="w"> </span>-name<span class="w"> </span>APFloat*
<span class="go">lib/Support/CMakeFiles/LLVMSupport.dir/APFloat.cpp.o</span>
</pre></div>
</div>
</div></blockquote>
</section>
<section id="optional-configuration-items">
<h3><a class="toc-backref" href="#id20" role="doc-backlink">Optional Configuration Items</a><a class="headerlink" href="#optional-configuration-items" title="Link to this heading">¶</a></h3>
<p>If you’re running on a Linux system that supports the <a class="reference external" href="http://en.wikipedia.org/wiki/binfmt_misc">binfmt_misc</a>
module, and you have root access on the system, you can set your system up to
execute LLVM bitcode files directly. To do this, use commands like this (the
first command may not be required if you are already using the module):</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>mount<span class="w"> </span>-t<span class="w"> </span>binfmt_misc<span class="w"> </span>none<span class="w"> </span>/proc/sys/fs/binfmt_misc
<span class="gp">% </span><span class="nb">echo</span><span class="w"> </span><span class="s1">&#39;:llvm:M::BC::/path/to/lli:&#39;</span><span class="w"> </span>&gt;<span class="w"> </span>/proc/sys/fs/binfmt_misc/register
<span class="gp">% </span>chmod<span class="w"> </span>u+x<span class="w"> </span>hello.bc<span class="w">   </span><span class="o">(</span><span class="k">if</span><span class="w"> </span>needed<span class="o">)</span>
<span class="gp">% </span>./hello.bc
</pre></div>
</div>
<p>This allows you to execute LLVM bitcode files directly.  On Debian, you can also
use this command instead of the ‘echo’ command above:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>sudo<span class="w"> </span>update-binfmts<span class="w"> </span>--install<span class="w"> </span>llvm<span class="w"> </span>/path/to/lli<span class="w"> </span>--magic<span class="w"> </span><span class="s1">&#39;BC&#39;</span>
</pre></div>
</div>
</section>
</section>
<section id="directory-layout">
<span id="general-layout"></span><span id="program-layout"></span><h2><a class="toc-backref" href="#id21" role="doc-backlink">Directory Layout</a><a class="headerlink" href="#directory-layout" title="Link to this heading">¶</a></h2>
<p>One useful source of information about the LLVM source base is the LLVM <a class="reference external" href="http://www.doxygen.org/">doxygen</a> documentation available at
<a class="reference external" href="https://llvm.org/doxygen/">https://llvm.org/doxygen/</a>.  The following is a brief introduction to code
layout:</p>
<section id="llvm-cmake">
<h3><a class="toc-backref" href="#id22" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/cmake</span></code></a><a class="headerlink" href="#llvm-cmake" title="Link to this heading">¶</a></h3>
<p>Generates system build files.</p>
<dl class="simple">
<dt><code class="docutils literal notranslate"><span class="pre">llvm/cmake/modules</span></code></dt><dd><p>Build configuration for llvm user defined options. Checks compiler version and
linker flags.</p>
</dd>
<dt><code class="docutils literal notranslate"><span class="pre">llvm/cmake/platforms</span></code></dt><dd><p>Toolchain configuration for Android NDK, iOS systems and non-Windows hosts to
target MSVC.</p>
</dd>
</dl>
</section>
<section id="llvm-examples">
<h3><a class="toc-backref" href="#id23" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/examples</span></code></a><a class="headerlink" href="#llvm-examples" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Some simple examples showing how to use LLVM as a compiler for a custom
language - including lowering, optimization, and code generation.</p></li>
<li><p>Kaleidoscope Tutorial: Kaleidoscope language tutorial runs through the
implementation of a nice little compiler for a non-trivial language
including a hand-written lexer, parser, AST, as well as code generation
support using LLVM- both static (ahead of time) and various approaches to
Just In Time (JIT) compilation.
<a class="reference external" href="https://llvm.org/docs/tutorial/MyFirstLanguageFrontend/index.html">Kaleidoscope Tutorial for complete beginner</a>.</p></li>
<li><p>BuildingAJIT: Examples of the <a class="reference external" href="https://llvm.org/docs/tutorial/BuildingAJIT1.html">BuildingAJIT tutorial</a> that shows how LLVM’s
ORC JIT APIs interact with other parts of LLVM. It also teaches how to
recombine them to build a custom JIT that is suited to your use-case.</p></li>
</ul>
</section>
<section id="llvm-include">
<h3><a class="toc-backref" href="#id24" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/include</span></code></a><a class="headerlink" href="#llvm-include" title="Link to this heading">¶</a></h3>
<p>Public header files exported from the LLVM library. The three main subdirectories:</p>
<p><code class="docutils literal notranslate"><span class="pre">llvm/include/llvm</span></code></p>
<blockquote>
<div><p>All LLVM-specific header files, and  subdirectories for different portions of
LLVM: <code class="docutils literal notranslate"><span class="pre">Analysis</span></code>, <code class="docutils literal notranslate"><span class="pre">CodeGen</span></code>, <code class="docutils literal notranslate"><span class="pre">Target</span></code>, <code class="docutils literal notranslate"><span class="pre">Transforms</span></code>, etc…</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/include/llvm/Support</span></code></p>
<blockquote>
<div><p>Generic support libraries provided with LLVM but not necessarily specific to
LLVM. For example, some C++ STL utilities and a Command Line option processing
library store header files here.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/include/llvm/Config</span></code></p>
<blockquote>
<div><p>Header files configured by <code class="docutils literal notranslate"><span class="pre">cmake</span></code>.  They wrap “standard” UNIX and
C header files.  Source code can include these header files which
automatically take care of the conditional #includes that <code class="docutils literal notranslate"><span class="pre">cmake</span></code>
generates.</p>
</div></blockquote>
</section>
<section id="llvm-lib">
<h3><a class="toc-backref" href="#id25" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/lib</span></code></a><a class="headerlink" href="#llvm-lib" title="Link to this heading">¶</a></h3>
<p>Most source files are here. By putting code in libraries, LLVM makes it easy to
share code among the <a class="reference internal" href="#tools">tools</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/IR/</span></code></p>
<blockquote>
<div><p>Core LLVM source files that implement core classes like Instruction and
BasicBlock.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/AsmParser/</span></code></p>
<blockquote>
<div><p>Source code for the LLVM assembly language parser library.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/Bitcode/</span></code></p>
<blockquote>
<div><p>Code for reading and writing bitcode.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/Analysis/</span></code></p>
<blockquote>
<div><p>A variety of program analyses, such as Call Graphs, Induction Variables,
Natural Loop Identification, etc.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/Transforms/</span></code></p>
<blockquote>
<div><p>IR-to-IR program transformations, such as Aggressive Dead Code Elimination,
Sparse Conditional Constant Propagation, Inlining, Loop Invariant Code Motion,
Dead Global Elimination, and many others.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/Target/</span></code></p>
<blockquote>
<div><p>Files describing target architectures for code generation.  For example,
<code class="docutils literal notranslate"><span class="pre">llvm/lib/Target/X86</span></code> holds the X86 machine description.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/CodeGen/</span></code></p>
<blockquote>
<div><p>The major parts of the code generator: Instruction Selector, Instruction
Scheduling, and Register Allocation.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/MC/</span></code></p>
<blockquote>
<div><p>The libraries represent and process code at machine code level. Handles
assembly and object-file emission.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/ExecutionEngine/</span></code></p>
<blockquote>
<div><p>Libraries for directly executing bitcode at runtime in interpreted and
JIT-compiled scenarios.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm/lib/Support/</span></code></p>
<blockquote>
<div><p>Source code that corresponds to the header files in <code class="docutils literal notranslate"><span class="pre">llvm/include/ADT/</span></code>
and <code class="docutils literal notranslate"><span class="pre">llvm/include/Support/</span></code>.</p>
</div></blockquote>
</section>
<section id="llvm-bindings">
<h3><a class="toc-backref" href="#id26" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/bindings</span></code></a><a class="headerlink" href="#llvm-bindings" title="Link to this heading">¶</a></h3>
<p>Contains bindings for the LLVM compiler infrastructure to allow
programs written in languages other than C or C++ to take advantage of the LLVM
infrastructure.
The LLVM project provides language bindings for OCaml and Python.</p>
</section>
<section id="llvm-projects">
<h3><a class="toc-backref" href="#id27" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/projects</span></code></a><a class="headerlink" href="#llvm-projects" title="Link to this heading">¶</a></h3>
<p>Projects not strictly part of LLVM but shipped with LLVM. This is also the
directory for creating your own LLVM-based projects which leverage the LLVM
build system.</p>
</section>
<section id="llvm-test">
<h3><a class="toc-backref" href="#id28" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/test</span></code></a><a class="headerlink" href="#llvm-test" title="Link to this heading">¶</a></h3>
<p>Feature and regression tests and other sanity checks on LLVM infrastructure. These
are intended to run quickly and cover a lot of territory without being exhaustive.</p>
</section>
<section id="test-suite">
<h3><a class="toc-backref" href="#id29" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">test-suite</span></code></a><a class="headerlink" href="#test-suite" title="Link to this heading">¶</a></h3>
<p>A comprehensive correctness, performance, and benchmarking test suite
for LLVM.  This comes in a <code class="docutils literal notranslate"><span class="pre">separate</span> <span class="pre">git</span> <span class="pre">repository</span>
<span class="pre">&lt;https://github.com/llvm/llvm-test-suite&gt;</span></code>, because it contains a
large amount of third-party code under a variety of licenses. For
details see the <a class="reference internal" href="TestingGuide.html"><span class="doc">Testing Guide</span></a> document.</p>
</section>
<section id="llvm-tools">
<span id="tools"></span><h3><a class="toc-backref" href="#id30" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/tools</span></code></a><a class="headerlink" href="#llvm-tools" title="Link to this heading">¶</a></h3>
<p>Executables built out of the libraries
above, which form the main part of the user interface.  You can always get help
for a tool by typing <code class="docutils literal notranslate"><span class="pre">tool_name</span> <span class="pre">-help</span></code>.  The following is a brief introduction
to the most important tools.  More detailed information is in
the <a class="reference external" href="CommandGuide/index.html">Command Guide</a>.</p>
<p><code class="docutils literal notranslate"><span class="pre">bugpoint</span></code></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">bugpoint</span></code> is used to debug optimization passes or code generation backends
by narrowing down the given test case to the minimum number of passes and/or
instructions that still cause a problem, whether it is a crash or
miscompilation. See <a class="reference external" href="HowToSubmitABug.html">HowToSubmitABug.html</a> for more information on using
<code class="docutils literal notranslate"><span class="pre">bugpoint</span></code>.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm-ar</span></code></p>
<blockquote>
<div><p>The archiver produces an archive containing the given LLVM bitcode files,
optionally with an index for faster lookup.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm-as</span></code></p>
<blockquote>
<div><p>The assembler transforms the human-readable LLVM assembly to LLVM bitcode.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm-dis</span></code></p>
<blockquote>
<div><p>The disassembler transforms the LLVM bitcode to human-readable LLVM assembly.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvm-link</span></code></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">llvm-link</span></code>, not surprisingly, links multiple LLVM modules into a single
program.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">lli</span></code></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">lli</span></code> is the LLVM interpreter, which can directly execute LLVM bitcode
(although very slowly…). For architectures that support it (currently x86,
Sparc, and PowerPC), by default, <code class="docutils literal notranslate"><span class="pre">lli</span></code> will function as a Just-In-Time
compiler (if the functionality was compiled in), and will execute the code
<em>much</em> faster than the interpreter.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llc</span></code></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">llc</span></code> is the LLVM backend compiler, which translates LLVM bitcode to a
native code assembly file.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">opt</span></code></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">opt</span></code> reads LLVM bitcode, applies a series of LLVM to LLVM transformations
(which are specified on the command line), and outputs the resultant
bitcode.   ‘<code class="docutils literal notranslate"><span class="pre">opt</span> <span class="pre">-help</span></code>’  is a good way to get a list of the
program transformations available in LLVM.</p>
<p><code class="docutils literal notranslate"><span class="pre">opt</span></code> can also  run a specific analysis on an input LLVM bitcode
file and print  the results.  Primarily useful for debugging
analyses, or familiarizing yourself with what an analysis does.</p>
</div></blockquote>
</section>
<section id="llvm-utils">
<h3><a class="toc-backref" href="#id31" role="doc-backlink"><code class="docutils literal notranslate"><span class="pre">llvm/utils</span></code></a><a class="headerlink" href="#llvm-utils" title="Link to this heading">¶</a></h3>
<p>Utilities for working with LLVM source code; some are part of the build process
because they are code generators for parts of the infrastructure.</p>
<p><code class="docutils literal notranslate"><span class="pre">codegen-diff</span></code></p>
<blockquote>
<div><p><code class="docutils literal notranslate"><span class="pre">codegen-diff</span></code> finds differences between code that LLC
generates and code that LLI generates. This is useful if you are
debugging one of them, assuming that the other generates correct output. For
the full user manual, run <code class="docutils literal notranslate"><span class="pre">`perldoc</span> <span class="pre">codegen-diff'</span></code>.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">emacs/</span></code></p>
<blockquote>
<div><p>Emacs and XEmacs syntax highlighting  for LLVM   assembly files and TableGen
description files.  See the <code class="docutils literal notranslate"><span class="pre">README</span></code> for information on using them.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">getsrcs.sh</span></code></p>
<blockquote>
<div><p>Finds and outputs all non-generated source files,
useful if one wishes to do a lot of development across directories
and does not want to find each file. One way to use it is to run,
for example: <code class="docutils literal notranslate"><span class="pre">xemacs</span> <span class="pre">`utils/getsources.sh`</span></code> from the top of the LLVM source
tree.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">llvmgrep</span></code></p>
<blockquote>
<div><p>Performs an <code class="docutils literal notranslate"><span class="pre">egrep</span> <span class="pre">-H</span> <span class="pre">-n</span></code> on each source file in LLVM and
passes to it a regular expression provided on <code class="docutils literal notranslate"><span class="pre">llvmgrep</span></code>’s command
line. This is an efficient way of searching the source base for a
particular regular expression.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">TableGen/</span></code></p>
<blockquote>
<div><p>Contains the tool used to generate register
descriptions, instruction set descriptions, and even assemblers from common
TableGen description files.</p>
</div></blockquote>
<p><code class="docutils literal notranslate"><span class="pre">vim/</span></code></p>
<blockquote>
<div><p>vim syntax-highlighting for LLVM assembly files
and TableGen description files. See the    <code class="docutils literal notranslate"><span class="pre">README</span></code> for how to use them.</p>
</div></blockquote>
</section>
</section>
<section id="an-example-using-the-llvm-tool-chain">
<span id="simple-example"></span><h2><a class="toc-backref" href="#id32" role="doc-backlink">An Example Using the LLVM Tool Chain</a><a class="headerlink" href="#an-example-using-the-llvm-tool-chain" title="Link to this heading">¶</a></h2>
<p>This section gives an example of using LLVM with the Clang front end.</p>
<section id="example-with-clang">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Example with clang</a><a class="headerlink" href="#example-with-clang" title="Link to this heading">¶</a></h3>
<ol class="arabic">
<li><p>First, create a simple C file, name it ‘hello.c’:</p>
<div class="highlight-c notranslate"><div class="highlight"><pre><span></span><span class="cp">#include</span><span class="w"> </span><span class="cpf">&lt;stdio.h&gt;</span>

<span class="kt">int</span><span class="w"> </span><span class="nf">main</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="n">printf</span><span class="p">(</span><span class="s">&quot;hello world</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
<span class="w">  </span><span class="k">return</span><span class="w"> </span><span class="mi">0</span><span class="p">;</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Next, compile the C file into a native executable:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>clang<span class="w"> </span>hello.c<span class="w"> </span>-o<span class="w"> </span>hello
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Clang works just like GCC by default.  The standard <code class="docutils literal notranslate"><span class="pre">-S</span></code> and <code class="docutils literal notranslate"><span class="pre">-c</span></code> arguments
work as usual (producing a native <code class="docutils literal notranslate"><span class="pre">.s</span></code> or <code class="docutils literal notranslate"><span class="pre">.o</span></code> file, respectively).</p>
</div>
</li>
<li><p>Next, compile the C file into an LLVM bitcode file:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>clang<span class="w"> </span>-O3<span class="w"> </span>-emit-llvm<span class="w"> </span>hello.c<span class="w"> </span>-c<span class="w"> </span>-o<span class="w"> </span>hello.bc
</pre></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">-emit-llvm</span></code> option can be used with the <code class="docutils literal notranslate"><span class="pre">-S</span></code> or <code class="docutils literal notranslate"><span class="pre">-c</span></code> options to emit an LLVM
<code class="docutils literal notranslate"><span class="pre">.ll</span></code> or <code class="docutils literal notranslate"><span class="pre">.bc</span></code> file (respectively) for the code.  This allows you to use
the <a class="reference external" href="CommandGuide/index.html">standard LLVM tools</a> on the bitcode file.</p>
</li>
<li><p>Run the program in both forms. To run the program, use:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>./hello
</pre></div>
</div>
<p>and</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>lli<span class="w"> </span>hello.bc
</pre></div>
</div>
<p>The second example shows how to invoke the LLVM JIT, <a class="reference internal" href="CommandGuide/lli.html"><span class="doc">lli</span></a>.</p>
</li>
<li><p>Use the <code class="docutils literal notranslate"><span class="pre">llvm-dis</span></code> utility to take a look at the LLVM assembly code:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>llvm-dis<span class="w"> </span>&lt;<span class="w"> </span>hello.bc<span class="w"> </span><span class="p">|</span><span class="w"> </span>less
</pre></div>
</div>
</li>
<li><p>Compile the program to native assembly using the LLC code generator:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>llc<span class="w"> </span>hello.bc<span class="w"> </span>-o<span class="w"> </span>hello.s
</pre></div>
</div>
</li>
<li><p>Assemble the native assembly language file into a program:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>/opt/SUNWspro/bin/cc<span class="w"> </span>-xarch<span class="o">=</span>v9<span class="w"> </span>hello.s<span class="w"> </span>-o<span class="w"> </span>hello.native<span class="w">   </span><span class="c1"># On Solaris</span>

<span class="gp">% </span>gcc<span class="w"> </span>hello.s<span class="w"> </span>-o<span class="w"> </span>hello.native<span class="w">                              </span><span class="c1"># On others</span>
</pre></div>
</div>
</li>
<li><p>Execute the native code program:</p>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">% </span>./hello.native
</pre></div>
</div>
<p>Note that using clang to compile directly to native code (i.e. when the
<code class="docutils literal notranslate"><span class="pre">-emit-llvm</span></code> option is not present) does steps 6/7/8 for you.</p>
</li>
</ol>
</section>
</section>
<section id="common-problems">
<h2><a class="toc-backref" href="#id34" role="doc-backlink">Common Problems</a><a class="headerlink" href="#common-problems" title="Link to this heading">¶</a></h2>
<p>If you are having problems building or using LLVM, or if you have any other
general questions about LLVM, please consult the <a class="reference external" href="FAQ.html">Frequently Asked
Questions</a> page.</p>
<p>If you are having problems with limited memory and build time, please try
building with <code class="docutils literal notranslate"><span class="pre">ninja</span></code> instead of <code class="docutils literal notranslate"><span class="pre">make</span></code>. Please consider configuring the
following options with CMake:</p>
<blockquote>
<div><ul>
<li><p><code class="docutils literal notranslate"><span class="pre">-G</span> <span class="pre">Ninja</span></code></p>
<p>Setting this option will allow you to build with ninja instead of make.
Building with ninja significantly improves your build time, especially with
incremental builds, and improves your memory usage.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_USE_LINKER</span></code></p>
<p>Setting this option to <code class="docutils literal notranslate"><span class="pre">lld</span></code> will significantly reduce linking time for LLVM
executables, particularly on Linux and Windows. If you are building LLVM
for the first time and lld is not available to you as a binary package, then
you may want to use the gold linker as a faster alternative to GNU ld.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DCMAKE_BUILD_TYPE</span></code></p>
<p>Controls optimization level and debug information of the build.  This setting
can affect RAM and disk usage, see <a class="reference internal" href="CMake.html#cmake-build-type"><span class="std std-ref">CMAKE_BUILD_TYPE</span></a>
for more information.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_ASSERTIONS</span></code></p>
<p>This option defaults to <code class="docutils literal notranslate"><span class="pre">ON</span></code> for Debug builds and defaults to <code class="docutils literal notranslate"><span class="pre">OFF</span></code> for Release
builds. As mentioned in the previous option, using the Release build type and
enabling assertions may be a good alternative to using the Debug build type.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_PARALLEL_LINK_JOBS</span></code></p>
<p>Set this equal to number of jobs you wish to run simultaneously. This is
similar to the <code class="docutils literal notranslate"><span class="pre">-j</span></code> option used with <code class="docutils literal notranslate"><span class="pre">make</span></code>, but only for link jobs. This option
can only be used with ninja. You may wish to use a very low number of jobs,
as this will greatly reduce the amount of memory used during the build
process. If you have limited memory, you may wish to set this to <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_TARGETS_TO_BUILD</span></code></p>
<p>Set this equal to the target you wish to build. You may wish to set this to
only your host architecture. For example <code class="docutils literal notranslate"><span class="pre">X86</span></code> if you are using an Intel or
AMD machine. You will find a full list of targets within the
<a class="reference external" href="https://github.com/llvm/llvm-project/tree/main/llvm/lib/Target">llvm-project/llvm/lib/Target</a>
directory.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_OPTIMIZED_TABLEGEN</span></code></p>
<p>Set this to <code class="docutils literal notranslate"><span class="pre">ON</span></code> to generate a fully optimized TableGen compiler during your
build, even if that build is a <code class="docutils literal notranslate"><span class="pre">Debug</span></code> build. This will significantly improve
your build time. You should not enable this if your intention is to debug the
TableGen compiler.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_PROJECTS</span></code></p>
<p>Set this equal to the projects you wish to compile (e.g. <code class="docutils literal notranslate"><span class="pre">clang</span></code>, <code class="docutils literal notranslate"><span class="pre">lld</span></code>, etc.) If
compiling more than one project, separate the items with a semicolon. Should
you run into issues with the semicolon, try surrounding it with single quotes.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_ENABLE_RUNTIMES</span></code></p>
<p>Set this equal to the runtimes you wish to compile (e.g. <code class="docutils literal notranslate"><span class="pre">libcxx</span></code>, <code class="docutils literal notranslate"><span class="pre">libcxxabi</span></code>, etc.)
If compiling more than one runtime, separate the items with a semicolon. Should
you run into issues with the semicolon, try surrounding it with single quotes.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DCLANG_ENABLE_STATIC_ANALYZER</span></code></p>
<p>Set this option to <code class="docutils literal notranslate"><span class="pre">OFF</span></code> if you do not require the clang static analyzer. This
should improve your build time slightly.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DLLVM_USE_SPLIT_DWARF</span></code></p>
<p>Consider setting this to <code class="docutils literal notranslate"><span class="pre">ON</span></code> if you require a debug build, as this will ease
memory pressure on the linker. This will make linking much faster, as the
binaries will not contain any of the debug information. Instead, the debug
information is in a separate DWARF object file (with the extension <code class="docutils literal notranslate"><span class="pre">.dwo</span></code>).
This only applies to host platforms using ELF, such as Linux.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">-DBUILD_SHARED_LIBS</span></code></p>
<p>Setting this to <code class="docutils literal notranslate"><span class="pre">ON</span></code> will build shared libraries instead of static
libraries. This will ease memory pressure on the linker. However, this should
only be used when developing llvm. See
<a class="reference internal" href="CMake.html#llvm-related-variables-build-shared-libs"><span class="std std-ref">BUILD_SHARED_LIBS</span></a>
for more information.</p>
</li>
</ul>
</div></blockquote>
</section>
<section id="links">
<span id="id2"></span><h2><a class="toc-backref" href="#id35" role="doc-backlink">Links</a><a class="headerlink" href="#links" title="Link to this heading">¶</a></h2>
<p>This document is just an <strong>introduction</strong> on how to use LLVM to do some simple
things… there are many more interesting and complicated things that you can do
that aren’t documented here (but we’ll gladly accept a patch if you want to
write something up!).  For more information about LLVM, check out:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://llvm.org/">LLVM Homepage</a></p></li>
<li><p><a class="reference external" href="https://llvm.org/doxygen/">LLVM Doxygen Tree</a></p></li>
<li><p><a class="reference external" href="https://llvm.org/docs/Projects.html">Starting a Project that Uses LLVM</a></p></li>
</ul>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="GettingStartedVS.html" title="Getting Started with the LLVM System using Microsoft Visual Studio"
             >next</a> |</li>
        <li class="right" >
          <a href="Frontend/PerformanceTips.html" title="Performance Tips for Frontend Authors"
             >previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingStartedTutorials.html" >Getting Started/Tutorials</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Getting Started with the LLVM System</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2003-2026, LLVM Project.
      Last updated on 2026-01-16.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>