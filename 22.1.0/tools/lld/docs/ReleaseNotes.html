
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>lld 22.1.0 Release Notes &#8212; lld 22.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/llvm.css?v=1cf7c864" />
    <script src="_static/documentation_options.js?v=19ab019f"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="icon" href="_static/favicon.ico"/>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Large data sections" href="ELF/large_sections.html" />
    <link rel="prev" title="Partitions" href="Partitions.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
<a href="index.html"><img src="_static/logo.png" alt="LLVM Documentation"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ELF/large_sections.html" title="Large data sections"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             accesskey="P">previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>

        <li class="nav-item nav-item-this"><a href="">lld 22.1.0 Release Notes</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <div>
    <h3><a href="index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">lld 22.1.0 Release Notes</a><ul>
<li><a class="reference internal" href="#introduction">Introduction</a></li>
<li><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release">Non-comprehensive list of changes in this release</a><ul>
<li><a class="reference internal" href="#elf-improvements">ELF Improvements</a></li>
<li><a class="reference internal" href="#breaking-changes">Breaking changes</a></li>
<li><a class="reference internal" href="#coff-improvements">COFF Improvements</a></li>
<li><a class="reference internal" href="#mingw-improvements">MinGW Improvements</a></li>
<li><a class="reference internal" href="#macho-improvements">MachO Improvements</a></li>
<li><a class="reference internal" href="#webassembly-improvements">WebAssembly Improvements</a><ul>
<li><a class="reference internal" href="#fixes">Fixes</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="Partitions.html"
                          title="previous chapter">Partitions</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ELF/large_sections.html"
                          title="next chapter">Large data sections</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ReleaseNotes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="lld-release-release-notes">
<h1>lld 22.1.0 Release Notes<a class="headerlink" href="#lld-release-release-notes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id61">Introduction</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id62">Non-comprehensive list of changes in this release</a></p>
<ul>
<li><p><a class="reference internal" href="#elf-improvements" id="id63">ELF Improvements</a></p></li>
<li><p><a class="reference internal" href="#breaking-changes" id="id64">Breaking changes</a></p></li>
<li><p><a class="reference internal" href="#coff-improvements" id="id65">COFF Improvements</a></p></li>
<li><p><a class="reference internal" href="#mingw-improvements" id="id66">MinGW Improvements</a></p></li>
<li><p><a class="reference internal" href="#macho-improvements" id="id67">MachO Improvements</a></p></li>
<li><p><a class="reference internal" href="#webassembly-improvements" id="id68">WebAssembly Improvements</a></p>
<ul>
<li><p><a class="reference internal" href="#fixes" id="id69">Fixes</a></p></li>
</ul>
</li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id61" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the lld linker, release 22.1.0.
Here we describe the status of lld, including major improvements
from the previous release. All lld releases may be downloaded
from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
</section>
<section id="non-comprehensive-list-of-changes-in-this-release">
<h2><a class="toc-backref" href="#id62" role="doc-backlink">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Link to this heading">¶</a></h2>
<section id="elf-improvements">
<h3><a class="toc-backref" href="#id63" role="doc-backlink">ELF Improvements</a><a class="headerlink" href="#elf-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--print-gc-sections=&lt;file&gt;</span></code> to redirect garbage collection section
listing to a file, avoiding contamination of stdout with other linker output.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/159706">#159706</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">VersionNode</span></code> lexer state for better version script parsing.
This brings the lexer behavior closer to GNU ld.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/174530">#174530</a>)</p></li>
<li><p>Unversioned undefined symbols now use version index 0, aligning with
GNU ld 2.46 behavior.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/168189">#168189</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">.data.rel.ro.hot</span></code> and <code class="docutils literal notranslate"><span class="pre">.data.rel.ro.unlikely</span></code> are now recognized as
RELRO sections, allowing profile-guided static data partitioning.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/148920">#148920</a>)</p></li>
<li><p>DTLTO now supports archive members and bitcode members of thin archives.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/157043">#157043</a>)</p></li>
<li><p>For DTLTO, <code class="docutils literal notranslate"><span class="pre">--thinlto-remote-compiler-prepend-arg=&lt;arg&gt;</span></code> has been added to
prepend an argument to the remote compiler’s command line.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/162456">#162456</a>)</p></li>
<li><p>Balanced Partitioning (BP) section ordering now skips input sections with
null data, and filters out section symbols.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/149265">#149265</a>)
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/151685">#151685</a>)</p></li>
<li><p>For AArch64, fixed a crash when using <code class="docutils literal notranslate"><span class="pre">--fix-cortex-a53-843419</span></code> with
synthetic sections and improved handling when patched code is far from
the short jump.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/170495">#170495</a>)</p></li>
<li><p>For AArch64, added support for the <code class="docutils literal notranslate"><span class="pre">R_AARCH64_FUNCINIT64</span></code> dynamic
relocation type for relocating word-sized data using the return value
of a function.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/156564">#156564</a>)</p></li>
<li><p>For AArch64, added support for the <code class="docutils literal notranslate"><span class="pre">R_AARCH64_PATCHINST</span></code> relocation type
to support deactivation symbols.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/133534">#133534</a>)</p></li>
<li><p>For AArch64, added support for reading AArch64 Build Attributes and
converting them into GNU Properties.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/147970">#147970</a>)</p></li>
<li><p>For ARM, fixed incorrect veneer generation for wraparound branches at
the high end of the 32-bit address space branching to the low end.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/165263">#165263</a>)</p></li>
<li><p>For LoongArch, <code class="docutils literal notranslate"><span class="pre">-r</span></code> now synthesizes <code class="docutils literal notranslate"><span class="pre">R_LARCH_ALIGN</span></code> at input section
start to preserve alignment information.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/153935">#153935</a>)</p></li>
<li><p>For LoongArch, added relocation types for LA32R/LA32S.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/172618">#172618</a>)
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/176312">#176312</a>)</p></li>
<li><p>For RISC-V, added infrastructure for handling vendor-specific relocations.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/159987">#159987</a>)</p></li>
<li><p>For RISC-V, added support for statically resolved vendor-specific relocations.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/169273">#169273</a>)</p></li>
<li><p>For RISC-V, <code class="docutils literal notranslate"><span class="pre">-r</span></code> now synthesizes <code class="docutils literal notranslate"><span class="pre">R_RISCV_ALIGN</span></code> at input section start
to preserve alignment information during two-stage linking.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/151639">#151639</a>)</p></li>
</ul>
</section>
<section id="breaking-changes">
<h3><a class="toc-backref" href="#id64" role="doc-backlink">Breaking changes</a><a class="headerlink" href="#breaking-changes" title="Link to this heading">¶</a></h3>
</section>
<section id="coff-improvements">
<h3><a class="toc-backref" href="#id65" role="doc-backlink">COFF Improvements</a><a class="headerlink" href="#coff-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-prefetch-inputs</span></code> to improve link times by asynchronously loading input files in RAM.
This will dampen the effect of input file I/O latency on link times.
However this flag can have an adverse effect when linking a large number of inputs files, or if all
inputs do not fit in RAM at once. For those cases, linking might be a bit slower since the inputs
will be streamed into RAM upfront, only to be evicted later by swapping.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/169224">#169224</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">/sectionlayout:&#64;&lt;file&gt;</span></code> to specify custom output section ordering.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/152779">#152779</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">/nodbgdirmerge</span></code> to emit the debug directory section in <code class="docutils literal notranslate"><span class="pre">.cvinfo</span></code>
instead of merging it to <code class="docutils literal notranslate"><span class="pre">.rdata</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/159235">#159235</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">-fat-lto-objects</span></code> to support FatLTO. Without <code class="docutils literal notranslate"><span class="pre">-fat-lto-objects</span></code> or
with <code class="docutils literal notranslate"><span class="pre">-fat-lto-objects:no</span></code>, LLD will link LLVM FatLTO objects using the
relocatable object file.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/165529">#165529</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">/linkreprofullpathrsp</span></code> to print the full path to each object
passed to the link line to a file. This is used in particular when linking
Arm64X binaries.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/174971">#174971</a>)</p></li>
<li><p>Added CET flags: <code class="docutils literal notranslate"><span class="pre">/cetcompatstrict</span></code>, <code class="docutils literal notranslate"><span class="pre">/cetipvalidationrelaxed</span></code>,
<code class="docutils literal notranslate"><span class="pre">/cetdynamicapisinproc</span></code>, and <code class="docutils literal notranslate"><span class="pre">/hotpatchcompatible</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/150761">#150761</a>)</p></li>
<li><p>Added support for ARM64X same-address thunks.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/151255">#151255</a>)</p></li>
<li><p>Added more <code class="docutils literal notranslate"><span class="pre">--time-trace</span></code> tags for ThinLTO linking.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/156471">#156471</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/summary</span></code> now works when <code class="docutils literal notranslate"><span class="pre">/debug</span></code> isn’t provided.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/157476">#157476</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">/summary</span></code> now displays the size of all consumed inputs.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/157284">#157284</a>)</p></li>
<li><p>For DTLTO, <code class="docutils literal notranslate"><span class="pre">-thinlto-remote-compiler-prepend-arg:&lt;arg&gt;</span></code> has been added to
prepend an argument to the remote compiler’s command line.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/162456">#162456</a>)</p></li>
<li><p>Loop and SLP vectorize options are now passed to the LTO backend.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/173041">#173041</a>)</p></li>
<li><p>Deduplicate common chunks when linking COFF files.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/162553">#162553</a>)</p></li>
<li><p>Discard <code class="docutils literal notranslate"><span class="pre">.llvmbc</span></code> and <code class="docutils literal notranslate"><span class="pre">.llvmcmd</span></code> sections.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/150897">#150897</a>)</p></li>
<li><p>Prevent emitting relocations for discarded weak wrapped symbols.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/156214">#156214</a>)</p></li>
</ul>
</section>
<section id="mingw-improvements">
<h3><a class="toc-backref" href="#id66" role="doc-backlink">MinGW Improvements</a><a class="headerlink" href="#mingw-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--fat-lto-objects</span></code> flag.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/174962">#174962</a>)</p></li>
<li><p>Handle <code class="docutils literal notranslate"><span class="pre">-m</span> <span class="pre">mipspe</span></code> for MIPS.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/157742">#157742</a>)</p></li>
<li><p>Fixed implicit DLL entry point for MinGW.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/171680">#171680</a>)</p></li>
</ul>
</section>
<section id="macho-improvements">
<h3><a class="toc-backref" href="#id67" role="doc-backlink">MachO Improvements</a><a class="headerlink" href="#macho-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--read-workers=&lt;N&gt;</span></code> for multi-threaded preload of input files
into memory, significantly reducing link times for large projects.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/147134">#147134</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--separate-cstring-literal-sections</span></code> to emit cstring literals
into sections defined by their section name.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/158720">#158720</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--tail-merge-strings</span></code> to enable tail merging of cstrings.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/161262">#161262</a>)</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--lto-emit-llvm</span></code> command line option.</p></li>
<li><p>Added <code class="docutils literal notranslate"><span class="pre">--slop-scale</span></code> flag for adjusting slop scale.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/164295">#164295</a>)</p></li>
<li><p>Added support for section branch relocations, including the 1-byte form.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/169062">#169062</a>)</p></li>
<li><p>Enabled Linker Optimization Hints pass for arm64_32.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/148964">#148964</a>)</p></li>
<li><p>Read cstring order for non-deduped sections.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/161879">#161879</a>)</p></li>
<li><p>Allow independent override of weak symbols aliased via <code class="docutils literal notranslate"><span class="pre">.set</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/167825">#167825</a>)</p></li>
<li><p>Fixed segfault while processing malformed object file.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/167025">#167025</a>)</p></li>
<li><p>Fixed infinite recursion when parsing corrupted export tries.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/152569">#152569</a>)</p></li>
<li><p>Error out gracefully when offset is outside literal section.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/164660">#164660</a>)</p></li>
<li><p>Process OSO prefix only textually in both input and output.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/152063">#152063</a>)</p></li>
</ul>
</section>
<section id="webassembly-improvements">
<h3><a class="toc-backref" href="#id68" role="doc-backlink">WebAssembly Improvements</a><a class="headerlink" href="#webassembly-improvements" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--stack-first</span></code> is now the default. Use <code class="docutils literal notranslate"><span class="pre">--no-stack-first</span></code> for the
old behavior.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/166998">#166998</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">--import-memory</span></code> can now take a single name (imports from default module).
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/160409">#160409</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">-r</span></code> now forces <code class="docutils literal notranslate"><span class="pre">-Bstatic</span></code>.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/108264">#108264</a>)</p></li>
<li><p>LTO now uses PIC reloc model with dynamic imports.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/165342">#165342</a>)</p></li>
<li><p>Honor command line reloc model during LTO.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/164838">#164838</a>)</p></li>
<li><p>Fixed visibility of <code class="docutils literal notranslate"><span class="pre">__stack_pointer</span></code> global.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/161284">#161284</a>)</p></li>
<li><p>Fixed check for exporting mutable globals.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/160787">#160787</a>)</p></li>
<li><p>Fixed check for implicitly exported mutable globals.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/160966">#160966</a>)</p></li>
<li><p>Don’t export deps for unused stub symbols.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/173422">#173422</a>)</p></li>
<li><p>Fixed SEGFAULT when importing wrapped symbol.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/169656">#169656</a>)</p></li>
<li><p>Error on unexpected relocation types in <code class="docutils literal notranslate"><span class="pre">-pie</span></code>/<code class="docutils literal notranslate"><span class="pre">-shared</span></code> data sections.
(<a class="reference external" href="https://github.com/llvm/llvm-project/pull/162117">#162117</a>)</p></li>
</ul>
<section id="fixes">
<h4><a class="toc-backref" href="#id69" role="doc-backlink">Fixes</a><a class="headerlink" href="#fixes" title="Link to this heading">¶</a></h4>
</section>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ELF/large_sections.html" title="Large data sections"
             >next</a> |</li>
        <li class="right" >
          <a href="Partitions.html" title="Partitions"
             >previous</a> |</li>
  <li><a href="index.html">lld Home</a>&nbsp;|&nbsp;</li>

        <li class="nav-item nav-item-this"><a href="">lld 22.1.0 Release Notes</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2011-2026, LLVM Project.
      Last updated on 2026-02-24.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>