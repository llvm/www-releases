
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>LLVM Developer Policy &#8212; LLVM 21.1.6 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/llvm-theme.css?v=96924833" />
    <script src="_static/documentation_options.js?v=aabb52c0"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="LLVM Code-Review Policy and Practices" href="CodeReview.html" />
    <link rel="prev" title="Contributing to LLVM" href="Contributing.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="CodeReview.html" title="LLVM Code-Review Policy and Practices"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="Contributing.html" title="Contributing to LLVM"
             accesskey="P">previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingInvolved.html" accesskey="U">Getting Involved</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LLVM Developer Policy</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="https://llvm.org/docs/UserGuides.html">User Guides</a></li>
    <li><a href="https://llvm.org/docs/Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/Contributing.html">Contributing to LLVM</a></li>
    <li><a href="https://llvm.org/docs/HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#discord">Discord</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/FAQ.html">FAQ</a></li>
    <li><a href="https://llvm.org/docs/Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project/">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/DeveloperPolicy.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="llvm-developer-policy">
<span id="developer-policy"></span><h1>LLVM Developer Policy<a class="headerlink" href="#llvm-developer-policy" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id8">Introduction</a></p></li>
<li><p><a class="reference internal" href="#developer-policies" id="id9">Developer Policies</a></p>
<ul>
<li><p><a class="reference internal" href="#communication-channels" id="id10">Communication Channels</a></p></li>
<li><p><a class="reference internal" href="#making-and-submitting-a-patch" id="id11">Making and Submitting a Patch</a></p></li>
<li><p><a class="reference internal" href="#email-addresses" id="id12">Email Addresses</a></p></li>
<li><p><a class="reference internal" href="#code-reviews" id="id13">Code Reviews</a></p></li>
<li><p><a class="reference internal" href="#maintainers" id="id14">Maintainers</a></p></li>
<li><p><a class="reference internal" href="#test-cases" id="id15">Test Cases</a></p></li>
<li><p><a class="reference internal" href="#release-notes" id="id16">Release Notes</a></p></li>
<li><p><a class="reference internal" href="#quality" id="id17">Quality</a></p></li>
<li><p><a class="reference internal" href="#commit-messages" id="id18">Commit messages</a></p></li>
<li><p><a class="reference internal" href="#patch-reversion-policy" id="id19">Patch reversion policy</a></p></li>
<li><p><a class="reference internal" href="#obtaining-commit-access" id="id20">Obtaining Commit Access</a></p></li>
<li><p><a class="reference internal" href="#obtaining-other-access-or-permissions" id="id21">Obtaining Other Access or Permissions</a></p></li>
<li><p><a class="reference internal" href="#proposing-major-changes-rfcs" id="id22">Proposing Major Changes (RFCs)</a></p></li>
<li><p><a class="reference internal" href="#incremental-development" id="id23">Incremental Development</a></p></li>
<li><p><a class="reference internal" href="#making-potentially-breaking-changes" id="id24">Making Potentially Breaking Changes</a></p></li>
<li><p><a class="reference internal" href="#attribution-of-changes" id="id25">Attribution of Changes</a></p></li>
<li><p><a class="reference internal" href="#bans" id="id26">Bans</a></p></li>
<li><p><a class="reference internal" href="#ir-backwards-compatibility" id="id27">IR Backwards Compatibility</a></p></li>
<li><p><a class="reference internal" href="#c-api-changes" id="id28">C API Changes</a></p></li>
<li><p><a class="reference internal" href="#updating-toolchain-requirements" id="id29">Updating Toolchain Requirements</a></p></li>
<li><p><a class="reference internal" href="#working-with-the-ci-system" id="id30">Working with the CI system</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#introducing-new-components-into-llvm" id="id31">Introducing New Components into LLVM</a></p>
<ul>
<li><p><a class="reference internal" href="#adding-a-new-target" id="id32">Adding a New Target</a></p></li>
<li><p><a class="reference internal" href="#adding-an-established-project-to-the-llvm-monorepo" id="id33">Adding an Established Project To the LLVM Monorepo</a></p></li>
<li><p><a class="reference internal" href="#incubating-new-projects" id="id34">Incubating New Projects</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#copyright-license-and-patents" id="id35">Copyright, License, and Patents</a></p>
<ul>
<li><p><a class="reference internal" href="#copyright" id="id36">Copyright</a></p>
<ul>
<li><p><a class="reference internal" href="#embedded-copyright-or-contributed-by-statements" id="id37">Embedded Copyright or ‘Contributed by’ Statements</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#relicensing" id="id38">Relicensing</a></p></li>
<li><p><a class="reference internal" href="#new-llvm-project-license-framework" id="id39">New LLVM Project License Framework</a></p></li>
<li><p><a class="reference internal" href="#patents" id="id40">Patents</a></p></li>
<li><p><a class="reference internal" href="#legacy-license-structure" id="id41">Legacy License Structure</a></p></li>
<li><p><a class="reference internal" href="#ai-generated-contributions" id="id42">AI generated contributions</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="introduction">
<h2><a class="toc-backref" href="#id8" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the LLVM Developer Policy which defines the project’s
policy towards developers and their contributions. The intent of this policy is
to eliminate miscommunication, rework, and confusion that might arise from the
distributed nature of LLVM’s development.  By stating the policy in clear terms,
we hope each developer can know ahead of time what to expect when making LLVM
contributions.  This policy covers all llvm.org subprojects, including Clang,
LLDB, libc++, MLIR, etc.</p>
<p>The developer policy supports the following LLVM project objectives:</p>
<ol class="arabic simple">
<li><p>Attract both users and new contributors to the LLVM project.</p></li>
<li><p>Help people contribute to LLVM by documenting our development practices.</p></li>
<li><p>Maintain the stability, performance, and quality of the <code class="docutils literal notranslate"><span class="pre">main</span></code> branch.</p></li>
<li><p>Establish the project’s <a class="reference internal" href="#copyright-license-patents"><span class="std std-ref">copyright, license, and patent
policies</span></a> policies.</p></li>
</ol>
</section>
<section id="developer-policies">
<h2><a class="toc-backref" href="#id9" role="doc-backlink">Developer Policies</a><a class="headerlink" href="#developer-policies" title="Link to this heading">¶</a></h2>
<section id="communication-channels">
<h3><a class="toc-backref" href="#id10" role="doc-backlink">Communication Channels</a><a class="headerlink" href="#communication-channels" title="Link to this heading">¶</a></h3>
<p>LLVM is a large project with many subcomponents, and it has a wide array of
communication channels that you can use to keep track of recent developments,
upcoming projects, new designs, enhancements, and other community business.</p>
<p>First and foremost is the <a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a>, which is the successor
to our former mailing lists (llvm-dev&#64;, cfe-dev&#64;, lldb-dev&#64;, etc). This is
probably the most vital and active communication channel to our highly
distributed open source project. It enables long-form asynchronous text
communication, and this is where people tend to propose major changes or
propose new designs in the form of RFCs (Request For Comment), which are
described later. Please be aware that the Discourse forums are public and
archived, and that notices of confidentiality or non-disclosure cannot be
respected.</p>
<p>We accept code contributions as <a class="reference internal" href="GitHub.html#github-reviews"><span class="std std-ref">GitHub Pull Requests</span></a>.
Our project is generally too large to subscribe to all github notifications, so
if you want to be notified of pull requests affecting a specific parts of the
code, you can join
one of the <a class="reference external" href="https://github.com/orgs/llvm/teams?query=pr-subscribers">pr-subscribers-*</a>
GitHub teams. This <a class="reference external" href="https://github.com/llvm/llvm-project/blob/main/.github/new-prs-labeler.yml">mapping</a>
documents the paths that trigger notifications for each of the listed teams.</p>
<p>Missing features and bugs are tracked through our <a class="reference external" href="https://github.com/llvm/llvm-project/issues">GitHub issue tracker</a>. You can subscribe for
notification for specific components by joining one of the <a class="reference external" href="https://github.com/orgs/llvm/teams?query=issue-subscribers">issue-subscribers-*</a> teams. You may
also subscribe to the <a class="reference external" href="http://lists.llvm.org/mailman/listinfo/llvm-bugs">llvm-bugs</a> email list to subscribe to
the firehose of all issue notifications, which some community members use to
perform custom filtering.</p>
<p>Beyond the asynchronous written communication channels, LLVM has a Discord
server for real-time chat communication, as well as a community calendar with
many regular workgroup video calls and office hours. See <a class="reference internal" href="GettingInvolved.html"><span class="doc">Getting Involved</span></a>
for more information on other ways to engage with the community.</p>
</section>
<section id="making-and-submitting-a-patch">
<span id="patch"></span><h3><a class="toc-backref" href="#id11" role="doc-backlink">Making and Submitting a Patch</a><a class="headerlink" href="#making-and-submitting-a-patch" title="Link to this heading">¶</a></h3>
<p>Patches are submitted to GitHub and reviewed using Pull Requests. Follow the
<a class="reference internal" href="GettingStarted.html#sources"><span class="std std-ref">Getting Started Guide</span></a> to check out sources, make a patch, and
then follow the <a class="reference internal" href="GitHub.html#github-reviews"><span class="std std-ref">GitHub Pull Request</span></a> guide to upload a
pull request.</p>
<p>Here are some tips to enable a successful code review:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#include-a-testcase"><span class="std std-ref">Include a test</span></a>. This tends to be one of the first
things a reviewer will ask for and look at to understand what a new patch
does.</p></li>
<li><p>Identify 2-3 individuals to review the patch. Look through the relevant
<a class="reference internal" href="#maintainers"><span class="std std-ref">Maintainers</span></a> file or browse git blame for likely stakeholders for the
code you want to modify, and add <code class="docutils literal notranslate"><span class="pre">&#64;username</span></code> to a PR comment to notify them
of your PR if you are unable to add reviewers yourself due to GitHub permissions.</p></li>
<li><p>To avoid precommit CI failures due to merge conflicts, base your patches on a
recent commit from <code class="docutils literal notranslate"><span class="pre">main</span></code>. If you want to make changes to a release branch,
land a change in <code class="docutils literal notranslate"><span class="pre">main</span></code> first and then follow the
<a class="reference internal" href="GitHub.html#backporting"><span class="std std-ref">backporting instructions</span></a>.</p></li>
</ul>
<p>See <a class="reference internal" href="CodeReview.html"><span class="doc">LLVM Code-Review Policy and Practices</span></a> for more info on what to expect.</p>
<p>When submitting patches, please do not add confidentiality or non-disclosure
notices to the patches themselves.  These notices conflict with the LLVM
licensing terms and may result in your contribution being excluded.</p>
</section>
<section id="email-addresses">
<span id="github-email-address"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink">Email Addresses</a><a class="headerlink" href="#email-addresses" title="Link to this heading">¶</a></h3>
<p>The LLVM project uses email to communicate to contributors outside of the
GitHub platform about their past contributions. Primarily, our buildbot
infrastructure uses emails to contact contributors about build and test
failures.</p>
<p>Therefore, the LLVM community requires contributors to have a public email
address associated with their GitHub commits, so please ensure that “Keep my
email addresses private” is disabled in your <a class="reference external" href="https://github.com/settings/emails">account settings</a>. There are many free email forwarding
services available if you wish to keep your identity private.</p>
</section>
<section id="code-reviews">
<span id="code-review"></span><h3><a class="toc-backref" href="#id13" role="doc-backlink">Code Reviews</a><a class="headerlink" href="#code-reviews" title="Link to this heading">¶</a></h3>
<p>LLVM uses code review, which is a generally accepted software engineering best
practice for maintaining high code quality. Please see <a class="reference internal" href="CodeReview.html"><span class="doc">LLVM Code-Review Policy and Practices</span></a> for
more information on LLVM’s code review process.</p>
</section>
<section id="maintainers">
<span id="id1"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">Maintainers</a><a class="headerlink" href="#maintainers" title="Link to this heading">¶</a></h3>
<p>The LLVM Project aims to evolve features quickly while continually being in a
release-ready state. In order to accomplish this, the project needs volunteers
willing to do the less glamorous work to ensure we produce robust, high-quality
products.</p>
<p>Maintainers are those volunteers; they are regular contributors who volunteer
to take on additional community responsibilities beyond code contributions.
Community members can find active and inactive maintainers for a project in the
<code class="docutils literal notranslate"><span class="pre">Maintainers.rst</span></code> file at the root directory of the individual project.</p>
<p>Maintainers are volunteering to take on the following shared responsibilities
within an area of a project:</p>
<ul class="simple">
<li><p>ensure that commits receive high-quality review, either by the maintainer
or by someone else,</p></li>
<li><p>help to confirm and comment on issues,</p></li>
<li><p>mediate code review disagreements through collaboration with other
maintainers (and other reviewers) to come to a consensus on how best to
proceed with disputed changes,</p></li>
<li><p>actively engage with relevant RFCs,</p></li>
<li><p>aid release managers with backporting and other release-related
activities,</p></li>
<li><p>be a point of contact for contributors who need help (answering questions
on Discord/Discourse or holding office hours).</p></li>
</ul>
<p>Each top-level project in the monorepo will specify one or more
lead maintainers who are responsible for ensuring community needs are
met for that project. This role is like any other maintainer role,
except the responsibilities span the project rather than a limited area
within the project. If you cannot reach a maintainer or don’t know which
maintainer to reach out to, a lead maintainer is always a good choice
to reach out to. If a project has no active lead maintainers, it may be a
reasonable candidate for removal from the monorepo. A discussion should be
started on Discourse to find a new, active lead maintainer or whether the
project should be discontinued.</p>
<p>All contributors with commit access to the LLVM Project are eligible to be a
maintainer. However, we are looking for people who can commit to:</p>
<ul class="simple">
<li><p>engaging in their responsibilities the majority of the days in a month,</p></li>
<li><p>ensuring that they, and the community members they interact with, abide by the
<a class="reference internal" href="CodeOfConduct.html#llvm-community-code-of-conduct"><span class="std std-ref">LLVM Community Code of Conduct</span></a>, and</p></li>
<li><p>performing these duties for at least three months.</p></li>
</ul>
<p>We recognize that priorities shift, job changes happen, burnout is real,
extended vacations are a blessing, and people’s lives are generally complex.
Therefore, we want as little friction as possible for someone to become a
maintainer or to step down as a maintainer.</p>
<p><em>To become a new maintainer</em>, you can volunteer yourself by posting a PR which
adds yourself to the area(s) you are volunteering for. Alternatively, an
existing maintainer can nominate you by posting a PR, but the nominee must
explicitly accept the PR so that it’s clear they agree to volunteer within the
proposed area(s). The PR will be accepted so long as at least one maintainer in
the same project vouches for their ability to perform the responsibilities and
there are no explicit objections raised by the community.</p>
<p><em>To step down as a maintainer</em>, you can move your name to the “inactive
maintainers” section of the <code class="docutils literal notranslate"><span class="pre">Maintainers.rst</span></code> file for the project, or remove
your name entirely; no PR review is necessary. Additionally, any maintainer who
has not been actively performing their responsibilities over an extended period
of time can be moved to the “inactive maintainers” section by another active
maintainer within that project with agreement from one other active maintainer
within that project. If there is only one active maintainer for a project,
please post on Discourse to solicit wider community feedback about the removal
and future direction for the project. However, please discuss the situation
with the inactive maintainer before such removal to avoid accidental
miscommunications. If the inactive maintainer is unreachable, no discussion
with them is required. Stepping down or being removed as a maintainer is normal
and does not prevent someone from resuming their activities as a maintainer in
the future.</p>
<p><em>To resume activities as a maintainer</em>, you can post a PR moving your name from
the “inactive maintainers” section of the <code class="docutils literal notranslate"><span class="pre">Maintainers.rst</span></code> file to the
active maintainers list. Because the volunteer was already previously accepted,
they will be re-accepted so long as at least one maintainer in the same project
approves the PR and there are no explicit objections raised by the community.</p>
</section>
<section id="test-cases">
<span id="include-a-testcase"></span><h3><a class="toc-backref" href="#id15" role="doc-backlink">Test Cases</a><a class="headerlink" href="#test-cases" title="Link to this heading">¶</a></h3>
<p>Developers are required to create test cases for any bugs fixed and any new
features added.  Some tips for getting your testcase approved:</p>
<ul class="simple">
<li><p>All feature and regression test cases are added to the <code class="docutils literal notranslate"><span class="pre">test</span></code> subdirectory
of each LLVM subproject, i.e. <code class="docutils literal notranslate"><span class="pre">llvm-project/llvm/test</span></code> for LLVM itself. The
appropriate sub-directory should be selected (see the
<a class="reference internal" href="TestingGuide.html"><span class="doc">Testing Guide</span></a> for details).</p></li>
<li><p>We prefer that functional changes are tested using <code class="docutils literal notranslate"><span class="pre">FileCheck</span></code> and the tool
that fits most closely with the code being modified. For example, <code class="docutils literal notranslate"><span class="pre">opt</span></code> is
used to test IR transformations, <code class="docutils literal notranslate"><span class="pre">llc</span></code> for backend changes, and <code class="docutils literal notranslate"><span class="pre">clang</span></code>
for frontend changes. Some components have scripts for generating and
updating golden tests in the <code class="docutils literal notranslate"><span class="pre">utils/</span></code> subproject directory, i.e.
<a class="reference external" href="https://github.com/llvm/llvm-project/blob/main/mlir/utils/generate-test-checks.py">mlir/utils/generate-test-checks.py</a>
and <a class="reference external" href="https://github.com/llvm/llvm-project/blob/main/llvm/utils/update_llc_test_checks.py">llvm/utils/update_llc_test_checks.py</a></p></li>
<li><p>Some subprojects such as <code class="docutils literal notranslate"><span class="pre">clang</span></code> and <code class="docutils literal notranslate"><span class="pre">clangd</span></code> have project specific
testing tools, like the <code class="docutils literal notranslate"><span class="pre">clang</span> <span class="pre">-verify</span></code> flag (<a class="reference external" href="https://clang.llvm.org/docs/InternalsManual.html#verifying-diagnostics">docs</a>)
and the <code class="docutils literal notranslate"><span class="pre">clangd</span> <span class="pre">-lit-test</span></code>
flag, which are preferred over <code class="docutils literal notranslate"><span class="pre">FileCheck</span></code>.</p></li>
<li><p>Changes to libraries, such as Support, which are not directly observable
through tool invocations, are often best tested with unit tests. Unit tests
are located under the <code class="docutils literal notranslate"><span class="pre">unittests</span></code> subdirectory of each subproject.</p></li>
<li><p>Test cases should be targeted. Large inputs exhibiting bugs should be reduced
with tools like <code class="docutils literal notranslate"><span class="pre">llvm-reduce</span></code> before committing them to the suite. It is not
acceptable to place an entire failing program into <code class="docutils literal notranslate"><span class="pre">llvm/test</span></code> as this
creates a <em>time-to-test</em> burden on all developers. Please keep them short.</p></li>
<li><p>Avoid adding links to resources that are not available to the entire
community, such as links to private bug trackers, internal corporate
documentation, etc. Instead, add sufficient comments to the test to provide
the context behind such links.</p></li>
</ul>
<p>As a project, we prefer to separate tests into small in-tree tests, and large
out-of-tree integration tests. More extensive integration test cases (e.g.,
entire applications, benchmarks, etc) should be added to the <a class="reference external" href="https://github.com/llvm/llvm-test-suite">llvm-test-suite</a> repository.  The
<code class="docutils literal notranslate"><span class="pre">llvm-test-suite</span></code> repository is for integration and application testing
(correctness, performance, etc) testing, not feature or regression testing. It
also serves to separate out third party code that falls under a different
license.</p>
</section>
<section id="release-notes">
<h3><a class="toc-backref" href="#id16" role="doc-backlink">Release Notes</a><a class="headerlink" href="#release-notes" title="Link to this heading">¶</a></h3>
<p>Many projects in LLVM communicate important changes to users through release
notes, typically found in <code class="docutils literal notranslate"><span class="pre">docs/ReleaseNotes.rst</span></code> for the project. Changes to
a project that are user-facing, or that users may wish to know about, should be
added to the project’s release notes at the author’s or code reviewer’s
discretion, preferably as part of the commit landing the changes. Examples of
changes that would typically warrant adding a release note (this list is not
exhaustive):</p>
<ul class="simple">
<li><p>Adding, removing, or modifying command-line options.</p></li>
<li><p>Adding, removing, or regrouping a diagnostic.</p></li>
<li><p>Fixing a bug that potentially has significant user-facing impact (please link
to the issue fixed in the bug database).</p></li>
<li><p>Adding or removing optimizations that have widespread impact or enables new
programming paradigms.</p></li>
<li><p>Modifying a C stable API.</p></li>
<li><p>Notifying users about a potentially disruptive change expected to be made in
a future release, such as removal of a deprecated feature. In this case, the
release note should be added to a <code class="docutils literal notranslate"><span class="pre">Potentially</span> <span class="pre">Breaking</span> <span class="pre">Changes</span></code> section of
the notes with sufficient information and examples to demonstrate the
potential disruption. Additionally, any new entries to this section should be
announced in the <a class="reference external" href="https://discourse.llvm.org/c/announce/">Announcements</a>
channel on Discourse. See <a class="reference internal" href="#breaking"><span class="std std-ref">Making Potentially Breaking Changes</span></a> for more details.</p></li>
</ul>
<p>Code reviewers are encouraged to request a release note if they think one is
warranted when performing a code review.</p>
</section>
<section id="quality">
<h3><a class="toc-backref" href="#id17" role="doc-backlink">Quality</a><a class="headerlink" href="#quality" title="Link to this heading">¶</a></h3>
<p>The minimum quality standards that any change must satisfy before being
committed to the main development branch are:</p>
<ol class="arabic simple">
<li><p>Code must adhere to the <a class="reference external" href="CodingStandards.html">LLVM Coding Standards</a>.</p></li>
<li><p>Code must compile cleanly (no errors, no warnings) on at least one platform.</p></li>
<li><p>Bug fixes and new features should <a class="reference internal" href="#include-a-testcase">include a testcase</a> so we know if the
fix/feature ever regresses in the future.</p></li>
<li><p>Code must pass the <code class="docutils literal notranslate"><span class="pre">llvm/test</span></code> test suite.</p></li>
<li><p>The code must not cause regressions on a reasonable subset of llvm-test,
where “reasonable” depends on the contributor’s judgement and the scope of
the change (more invasive changes require more testing). A reasonable subset
might be something like “<code class="docutils literal notranslate"><span class="pre">llvm-test/MultiSource/Benchmarks</span></code>”.</p></li>
<li><p>Ensure that links in source code and test files point to publicly available
resources and are used primarily to add additional information rather than
to supply critical context. The surrounding comments should be sufficient
to provide the context behind such links.</p></li>
</ol>
<p>Additionally, the committer is responsible for addressing any problems found in
the future that the change is responsible for.  For example:</p>
<ul class="simple">
<li><p>The code should compile cleanly on all supported platforms.</p></li>
<li><p>The changes should not cause any correctness regressions in the <code class="docutils literal notranslate"><span class="pre">llvm-test</span></code>
suite and must not cause any major performance regressions.</p></li>
<li><p>The change set should not cause performance or correctness regressions for the
LLVM tools.</p></li>
<li><p>The changes should not cause performance or correctness regressions in code
compiled by LLVM on all applicable targets.</p></li>
<li><p>You are expected to address any <a class="reference external" href="https://github.com/llvm/llvm-project/issues">GitHub Issues</a> that
result from your change.</p></li>
</ul>
<p>We prefer for this to be handled before submission but understand that it isn’t
possible to test all of this for every submission.  Our build bots and nightly
testing infrastructure normally finds these problems.  A good rule of thumb is
to check the nightly testers for regressions the day after your change.  Build
bots will directly email you if a group of commits that included yours caused a
failure.  You are expected to check the build bot messages to see if they are
your fault and, if so, fix the breakage.</p>
<p>Commits that violate these quality standards (e.g. are very broken) may be
reverted. This is necessary when the change blocks other developers from making
progress. The developer is welcome to re-commit the change after the problem has
been fixed.</p>
</section>
<section id="commit-messages">
<span id="id2"></span><h3><a class="toc-backref" href="#id18" role="doc-backlink">Commit messages</a><a class="headerlink" href="#commit-messages" title="Link to this heading">¶</a></h3>
<p>Although we don’t enforce the format of commit messages, we prefer that
you follow these guidelines to help review, search in logs, email formatting
and so on. These guidelines are very similar to rules used by other open source
projects.</p>
<p>Commit messages should communicate briefly what the change does, but they
should really emphasize why a change is being made and provide useful context.
Commit messages should be thoughtfully written and specific, rather than vague.
For example, “bits were not set right” will leave the reviewer wondering about
which bits, and why they weren’t right, while “Correctly set overflow bits in
TargetInfo” conveys almost all there is to the change.</p>
<p>Below are some guidelines about the format of the message itself:</p>
<ul>
<li><p>Separate the commit message into title and body separated by a blank line.</p></li>
<li><p>If you’re not the original author, ensure the ‘Author’ property of the commit is
set to the original author and the ‘Committer’ property is set to yourself.
You can use a command similar to
<code class="docutils literal notranslate"><span class="pre">git</span> <span class="pre">commit</span> <span class="pre">--amend</span> <span class="pre">--author=&quot;John</span> <span class="pre">Doe</span> <span class="pre">&lt;jdoe&#64;llvm.org&gt;&quot;</span></code> to correct the
author property if it is incorrect. See <a class="reference internal" href="#attribution-of-changes">Attribution of Changes</a> for more
information including the method we used for attribution before the project
migrated to git.</p>
<p>In the rare situation where there are multiple authors, please use the <a class="reference external" href="https://github.blog/2018-01-29-commit-together-with-co-authors/">git
tag ‘Co-authored-by:’ to list the additional authors</a>.</p>
</li>
<li><p>The title should be concise. Because all commits are emailed to the list with
the first line as the subject, long titles are frowned upon.  Short titles
also look better in <cite>git log</cite>.</p></li>
<li><p>When the changes are restricted to a specific part of the code (e.g. a
back-end or optimization pass), it is customary to add a tag to the
beginning of the line in square brackets.  For example, “[SCEV] …”
or “[OpenMP] …”. This helps email filters and searches for post-commit
reviews.</p></li>
<li><p>The body should be concise, but explanatory, including a complete
reasoning.  Unless it is required to understand the change, examples,
code snippets and gory details should be left to bug comments, web
review or the mailing list.</p></li>
<li><p>Text formatting and spelling should follow the same rules as documentation
and in-code comments, ex. capitalization, full stop, etc.</p></li>
<li><p>If the commit is a bug fix on top of another recently committed patch, or a
revert or reapply of a patch, include the git commit hash of the prior
related commit. This could be as simple as “Revert commit NNNN because it
caused issue #”.</p></li>
<li><p>If the patch has been reviewed, add a link to its review page, as shown
<a class="reference external" href="https://www.llvm.org/docs/Phabricator.html#committing-a-change">here</a>.
If the patch fixes a bug in GitHub Issues, we encourage adding a reference to
the issue being closed, as described
<a class="reference external" href="https://llvm.org/docs/BugLifeCycle.html#resolving-closing-bugs">here</a>.</p></li>
<li><p>It is also acceptable to add other metadata to the commit message to automate
processes, including for downstream consumers. This metadata can include
links to resources that are not available to the entire community. However,
such links and/or metadata should not be used in place of making the commit
message self-explanatory. Note that such non-public links should not be
included in the submitted code.</p></li>
</ul>
<p>LLVM uses a squash workflow for pull requests, so as the pull request evolves
during review, it’s important to update the pull request description over the
course of a review. GitHub uses the initial commit message to create the pull
request description, but it ignores all subsequent commit messages. Authors and
reviewers should make a final editing pass over the squashed commit description when
squashing and merging PRs.</p>
<p>For minor violations of these recommendations, the community normally favors
reminding the contributor of this policy over reverting.</p>
</section>
<section id="patch-reversion-policy">
<span id="revert-policy"></span><h3><a class="toc-backref" href="#id19" role="doc-backlink">Patch reversion policy</a><a class="headerlink" href="#patch-reversion-policy" title="Link to this heading">¶</a></h3>
<p>As a community, we strongly value having the tip of tree in a good state while
allowing rapid iterative development.  As such, we tend to make much heavier
use of reverts to keep the tree healthy than some other open source projects,
and our norms are a bit different.</p>
<p>How should you respond if someone reverted your change?</p>
<ul class="simple">
<li><p>Remember, it is normal and healthy to have patches reverted.  Having a patch
reverted does not necessarily mean you did anything wrong.</p></li>
<li><p>We encourage explicitly thanking the person who reverted the patch for doing
the task on your behalf.</p></li>
<li><p>If you need more information to address the problem, please follow up in the
original commit thread with the reverting patch author.</p></li>
</ul>
<p>When should you revert your own change?</p>
<ul class="simple">
<li><p>Any time you learn of a serious problem with a change, you should revert it.
We strongly encourage “revert to green” as opposed to “fixing forward”.  We
encourage reverting first, investigating offline, and then reapplying the
fixed patch - possibly after another round of review if warranted.</p></li>
<li><p>If you break a buildbot in a way which can’t be quickly fixed, please revert.</p></li>
<li><p>If a test case that demonstrates a problem is reported in the commit thread,
please revert and investigate offline.</p></li>
<li><p>If you receive substantial <a class="reference internal" href="CodeReview.html#post-commit-review"><span class="std std-ref">post-commit review</span></a>
feedback, please revert and address said feedback before recommitting.
(Possibly after another round of review.)</p></li>
<li><p>If you are asked to revert by another contributor, please revert and discuss
the merits of the request offline (unless doing so would further destabilize
tip of tree).</p></li>
</ul>
<p>When should you revert someone else’s change?</p>
<ul class="simple">
<li><p>In general, if the author themselves would revert the change per these
guidelines, we encourage other contributors to do so as a courtesy to the
author.  This is one of the major cases where our norms differ from others;
we generally consider reverting a normal part of development.  We don’t
expect contributors to be always available, and the assurance that a
problematic patch will be reverted and we can return to it at our next
opportunity enables this.</p></li>
</ul>
<p>What are the expectations around a revert?</p>
<ul class="simple">
<li><p>Use your best judgment. If you’re uncertain, please start an email on
the commit thread asking for assistance.  We aren’t trying to enumerate
every case, but rather give a set of guidelines.</p></li>
<li><p>You should be sure that reverting the change improves the stability of tip
of tree.  Sometimes reverting one change in a series can worsen things
instead of improving them.  We expect reasonable judgment to ensure that
the proper patch or set of patches is being reverted.</p></li>
<li><p>The commit message for the reverting commit should explain why patch
is being reverted.</p></li>
<li><p>It is customary to respond to the original commit email mentioning the
revert.  This serves as both a notice to the original author that their
patch was reverted, and helps others following llvm-commits track context.</p></li>
<li><p>Ideally, you should have a publicly reproducible test case ready to share.
Where possible, we encourage sharing of test cases in commit threads, or
in PRs.  We encourage the reverter to minimize the test case and to prune
dependencies where practical.  This even applies when reverting your own
patch; documenting the reasons for others who might be following along
is critical.</p></li>
<li><p>It is not considered reasonable to revert without at least the promise to
provide a means for the patch author to debug the root issue.  If a situation
arises where a public reproducer can not be shared for some reason (e.g.
requires hardware patch author doesn’t have access to, sharp regression in
compile time of internal workload, etc.), the reverter is expected to be
proactive about working with the patch author to debug and test candidate
patches.</p></li>
<li><p>Reverts should be reasonably timely.  A change submitted two hours ago
can be reverted without prior discussion.  A change submitted two years ago
should not be.  Where exactly the transition point is is hard to say, but
it’s probably in the handful of days in tree territory.  If you are unsure,
we encourage you to reply to the commit thread, give the author a bit to
respond, and then proceed with the revert if the author doesn’t seem to be
actively responding.</p></li>
<li><p>When re-applying a reverted patch, the commit message should be updated to
indicate the problem that was addressed and how it was addressed.</p></li>
</ul>
</section>
<section id="obtaining-commit-access">
<span id="id3"></span><h3><a class="toc-backref" href="#id20" role="doc-backlink">Obtaining Commit Access</a><a class="headerlink" href="#obtaining-commit-access" title="Link to this heading">¶</a></h3>
<p>Once you have 3 or more merged pull requests, you may use <a class="reference external" href="https://github.com/llvm/llvm-project/issues/new?title=Request%20Commit%20Access%20For%20%3Cuser%3E&amp;body=%23%23%23%20Why%20Are%20you%20requesting%20commit%20access%20?">this link</a>
to file an issue and request commit access. Replace the &lt;user&gt; string in the title
with your github username, and explain why you are requesting commit access in
the issue description.  Once the issue is created, you will need to get two
current contributors to support your request before commit access will be granted.</p>
<p>Reviewers of your committed patches will automatically be CCed upon creating the issue.
Most commonly these reviewers will provide the necessary approval, but approvals
from other LLVM committers are also acceptable. Those reviewing the application are
confirming that you have indeed had three patches committed, and that based on interactions
on those reviews and elsewhere in the LLVM community they have no concern about you
adhering to our Developer Policy and Code of Conduct.</p>
<p>If approved, a GitHub invitation will be sent to your
GitHub account. In case you don’t get notification from GitHub, go to
<a class="reference external" href="https://github.com/orgs/llvm/invitation">Invitation Link</a> directly. Once
you accept the invitation, you’ll get commit access.</p>
<p>Prior to obtaining commit access, it is common practice to request that
someone with commit access commits on your behalf. When doing so, please
provide the name and email address you would like to use in the Author
property of the commit.</p>
<p>For external tracking purposes, committed changes are automatically reflected on
a commits mailing list soon after the commit lands (e.g.
<a class="reference external" href="mailto:llvm-commits&#37;&#52;&#48;lists&#46;llvm&#46;org">llvm-commits<span>&#64;</span>lists<span>&#46;</span>llvm<span>&#46;</span>org</a>). Note that these mailing lists are moderated, and
it is not unusual for a large commit to require a moderator to approve the
email, so do not be concerned if a commit does not immediately appear in the
archives.</p>
<p>If you have recently been granted commit access, these policies apply:</p>
<ol class="arabic simple">
<li><p>You are granted <em>commit-after-approval</em> to all parts of LLVM. For
information on how to get approval for a patch, please see <a class="reference internal" href="CodeReview.html"><span class="doc">LLVM Code-Review Policy and Practices</span></a>.
When approved, you may commit it yourself.</p></li>
<li><p>You are allowed to commit patches without approval which you think are
obvious. This is clearly a subjective decision — we simply expect you to
use good judgement.  Examples include: fixing build breakage, reverting
obviously broken patches, documentation/comment changes, any other minor
changes. Avoid committing formatting- or whitespace-only changes outside of
code you plan to make subsequent changes to. Also, try to separate
formatting or whitespace changes from functional changes, either by
correcting the format first (ideally) or afterward. Such changes should be
highly localized and the commit message should clearly state that the commit
is not intended to change functionality, usually by stating it is
<a class="reference internal" href="Lexicon.html#nfc"><span class="std std-ref">NFC</span></a>.</p></li>
<li><p>You are allowed to commit patches without approval to those portions of LLVM
that you have contributed or maintain (i.e., have been assigned
responsibility for), with the proviso that such commits must not break the
build.  This is a “trust but verify” policy, and commits of this nature are
reviewed after they are committed.</p></li>
<li><p>Multiple violations of these policies or a single egregious violation may
cause commit access to be revoked.</p></li>
</ol>
<p>In any case, your changes are still subject to <a class="reference internal" href="#code-review">code review</a> (either before or
after they are committed, depending on the nature of the change).  You are
encouraged to review other peoples’ patches as well, but you aren’t required
to do so.</p>
</section>
<section id="obtaining-other-access-or-permissions">
<h3><a class="toc-backref" href="#id21" role="doc-backlink">Obtaining Other Access or Permissions</a><a class="headerlink" href="#obtaining-other-access-or-permissions" title="Link to this heading">¶</a></h3>
<p>To obtain access other than commit access, you can raise an issue like the one
for obtaining commit access. However, instead of including PRs you have authored,
include evidence of your need for the type of access you want.</p>
<p>For example, if you are helping to triage issues and want the ability to add
labels, include links to issues you have triaged previously and explain how
having this ability would help that work.</p>
</section>
<section id="proposing-major-changes-rfcs">
<span id="discuss-the-change-gather-consensus"></span><h3><a class="toc-backref" href="#id22" role="doc-backlink">Proposing Major Changes (RFCs)</a><a class="headerlink" href="#proposing-major-changes-rfcs" title="Link to this heading">¶</a></h3>
<p>LLVM is a large community with many stakeholders, and before landing any major
change, it is important to discuss the design of a change publicly with the
community. This is done by posting an Request For Comments (RFC) on the <a class="reference external" href="https://discourse.llvm.org">LLVM
Discourse forums</a>.</p>
<p>The design of LLVM is carefully controlled to ensure that all the pieces fit
together well and are as consistent as possible. If you plan to make a major
change to the way LLVM works or want to add a major new extension, it is a good
idea to get consensus with the development community before you invest
significant effort in an implementation. Prototype implementations, however, can
often be helpful in making design discussions more concrete by demonstrating
what is possible.</p>
<p>These are some suggestions for how to get a major change accepted:</p>
<ul class="simple">
<li><p>Make it targeted, and avoid touching components irrelevant to the task.</p></li>
<li><p>Explain how the change improves LLVM for other stakeholders rather than
focusing on your specific use case.</p></li>
<li><p>As discussion evolves, periodically summarize the current state of the
discussion and clearly separate points where consensus seems to emerge from
those where further discussion is necessary.</p></li>
<li><p>Compilers are foundational infrastructure, so there is a high quality bar,
and the burden of proof is on the proposer. If reviewers repeatedly ask for
an unreasonable amount of evidence or data, proposal authors can escalate to
the area team to resolve disagreements.</p></li>
</ul>
<p>After posting a major proposal, it is common to receive lots of conflicting
feedback from different parties, or no feedback at all, leaving authors without
clear next steps. As a community, we are aiming for <a class="reference external" href="https://en.wikipedia.org/wiki/Rough_consensus">“rough consensus”</a>, similar in spirit to what is
described in <a class="reference external" href="https://datatracker.ietf.org/doc/html/rfc7282">IETF RFC7282</a>.
This requires considering and addressing all of the objections to the RFC, and
confirming that we can all live with the tradeoffs embodied in the proposal.</p>
<p>The LLVM Area Teams (defined in <a class="reference external" href="https://github.com/llvm/llvm-www/blob/main/proposals/LP0004-project-governance.md">LP0004</a>)
are responsible for facilitating project decision making. In cases were there
isn’t obvious agreement, area teams should step in to restate their perceived
consensus. In cases of deeper disagreement, area teams should try to identify
the next steps for the proposal, such as gathering more data, changing the
proposal, or rejecting it outright. They can also act as moderators by
scheduling calls for participants to speak directly to resolve disagreements,
subject to normal <a class="reference internal" href="CodeOfConduct.html#llvm-community-code-of-conduct"><span class="std std-ref">Code of Conduct</span></a>
guidelines.</p>
<p>Once the design of the new feature is finalized, the work itself should be done
as a series of <a class="reference internal" href="#incremental-changes">incremental changes</a>, not as a long-term development branch.</p>
</section>
<section id="incremental-development">
<span id="incremental-changes"></span><h3><a class="toc-backref" href="#id23" role="doc-backlink">Incremental Development</a><a class="headerlink" href="#incremental-development" title="Link to this heading">¶</a></h3>
<p>In the LLVM project, we prefer the incremental development approach, where
significant changes are developed in-tree incrementally. The alternative
approach of implementing features in long-lived development branches or forks
is discouraged, although we have accepted features developed this way in the
past. Long-term development branches have a number of drawbacks:</p>
<ol class="arabic simple">
<li><p>Branches must have mainline merged into them periodically.  If the branch
development and mainline development occur in the same pieces of code,
resolving merge conflicts can take a lot of time.</p></li>
<li><p>Other people in the community tend to ignore work on branches.</p></li>
<li><p>Huge changes (produced when a branch is merged back onto mainline) are
extremely difficult to <a class="reference internal" href="#code-review">code review</a>.</p></li>
<li><p>Branches are not routinely tested by our nightly tester infrastructure.</p></li>
<li><p>Changes developed as monolithic large changes often don’t work until the
entire set of changes is done.  Breaking it down into a set of smaller
changes increases the odds that any of the work will be committed to the main
repository.</p></li>
</ol>
<p>To address these problems, LLVM uses an incremental development style and we
require contributors to follow this practice when making a large/invasive
change.  Some tips:</p>
<ul class="simple">
<li><p>Large/invasive changes usually have a number of secondary changes that are
required before the big change can be made (e.g. API cleanup, etc).  These
sorts of changes can often be done before the major change is done,
independently of that work.</p></li>
<li><p>The remaining inter-related work should be decomposed into unrelated sets of
changes if possible.  Once this is done, define the first increment and get
consensus on what the end goal of the change is.</p></li>
<li><p>Each change in the set can be stand alone (e.g. to fix a bug), or part of a
planned series of changes that works towards the development goal.</p></li>
<li><p>Each change should be kept as small as possible. This simplifies your work
(into a logical progression), simplifies code review and reduces the chance
that you will get negative feedback on the change. Small increments also
facilitate the maintenance of a high quality code base.</p></li>
<li><p>Often, an independent precursor to a big change is to add a new API and slowly
migrate clients to use the new API.  Each change to use the new API is often
“obvious” and can be committed without review.  Once the new API is in place
and used, it is much easier to replace the underlying implementation of the
API.  This implementation change is logically separate from the API
change.</p></li>
</ul>
<p>If you are interested in making a large change, and this scares you, please make
sure to first <a class="reference internal" href="#discuss-the-change-gather-consensus">discuss the change/gather consensus</a> then ask about the best way
to go about making the change.</p>
</section>
<section id="making-potentially-breaking-changes">
<span id="breaking"></span><h3><a class="toc-backref" href="#id24" role="doc-backlink">Making Potentially Breaking Changes</a><a class="headerlink" href="#making-potentially-breaking-changes" title="Link to this heading">¶</a></h3>
<p>Please help notify users and vendors of potential disruptions when upgrading to
a newer version of a tool. For example, deprecating a feature that is expected
to be removed in the future, removing an already-deprecated feature, upgrading
a diagnostic from a warning to an error, switching important default behavior,
or any other potentially disruptive situation thought to be worth raising
awareness of. For such changes, the following should be done:</p>
<ul>
<li><p>When performing the code review for the change, please add any applicable
“vendors” github team to the review for their awareness. The purpose of these
groups is to give vendors early notice that potentially disruptive changes
are being considered but have not yet been accepted. Vendors can give early
testing feedback on the changes to alert us to unacceptable breakages. The
current list of vendor groups is:</p>
<ul class="simple">
<li><p><a class="reference external" href="https://github.com/orgs/llvm/teams/clang-vendors">Clang vendors</a></p></li>
<li><p><a class="reference external" href="https://github.com/orgs/llvm/teams/libcxx-vendors">libc++ vendors</a></p></li>
</ul>
<p>People interested in joining the vendors group can do so by clicking the
“Join team” button on the linked github pages above.</p>
</li>
<li><p>When committing the change to the repository, add appropriate information
about the potentially breaking changes to the <code class="docutils literal notranslate"><span class="pre">Potentially</span> <span class="pre">Breaking</span> <span class="pre">Changes</span></code>
section of the project’s release notes. The release note should have
information about what the change is, what is potentially disruptive about
it, as well as any code examples, links, and motivation that is appropriate
to share with users. This helps users to learn about potential issues with
upgrading to that release.</p></li>
<li><p>After the change has been committed to the repository, the potentially
disruptive changes described in the release notes should be posted to the
<a class="reference external" href="https://discourse.llvm.org/c/announce/">Announcements</a> channel on
Discourse. The post should be tagged with the <code class="docutils literal notranslate"><span class="pre">potentially-breaking</span></code> label
and a label specific to the project (such as <code class="docutils literal notranslate"><span class="pre">clang</span></code>, <code class="docutils literal notranslate"><span class="pre">llvm</span></code>, etc). This
is another mechanism by which we can give pre-release notice to users about
potentially disruptive changes. It is a lower-traffic alternative to the
joining “vendors” group. To automatically be notified of new announcements
with the <code class="docutils literal notranslate"><span class="pre">potentially-breaking</span></code> label, go to your user preferences page in
Discourse, and add the label to one of the watch categories under
<code class="docutils literal notranslate"><span class="pre">Notifications-&gt;Tags</span></code>.</p></li>
</ul>
</section>
<section id="attribution-of-changes">
<h3><a class="toc-backref" href="#id25" role="doc-backlink">Attribution of Changes</a><a class="headerlink" href="#attribution-of-changes" title="Link to this heading">¶</a></h3>
<p>When contributors submit a patch to an LLVM project, other developers with
commit access may commit it for the author once appropriate (based on the
progression of code review, etc.). When doing so, it is important to retain
correct attribution of contributions to their contributors. However, we do not
want the source code to be littered with random attributions “this code written
by J. Random Hacker” (this is noisy and distracting). In practice, the revision
control system keeps a perfect history of who changed what, and the CREDITS.txt
file describes higher-level contributions. If you commit a patch for someone
else, please follow the attribution of changes in the simple manner as outlined
by the <a class="reference internal" href="#commit-messages">commit messages</a> section. Overall, please do not add contributor names
to the source code.</p>
<p>Also, don’t commit patches authored by others unless they have submitted the
patch to the project or you have been authorized to submit them on their behalf
(you work together and your company authorized you to contribute the patches,
etc.). The author should first submit them to the relevant project’s commit
list, development list, or LLVM bug tracker component. If someone sends you
a patch privately, encourage them to submit it to the appropriate list first.</p>
<p>Our previous version control system (subversion) did not distinguish between the
author and the committer like git does. As such, older commits used a different
attribution mechanism. The previous method was to include “Patch by John Doe.”
in a separate line of the commit message and there are automated processes that
rely on this format.</p>
</section>
<section id="bans">
<h3><a class="toc-backref" href="#id26" role="doc-backlink">Bans</a><a class="headerlink" href="#bans" title="Link to this heading">¶</a></h3>
<p>The goal of a ban is to protect people in the community from having to interact
with people who are consistently not respecting the
<a class="reference internal" href="CodeOfConduct.html#llvm-community-code-of-conduct"><span class="std std-ref">LLVM Community Code of Conduct</span></a> in LLVM project spaces. Contributions of
any variety (pull requests, issue reports, forum posts, etc.) require
interacting with the community. Therefore, we do not accept any form of direct
contribution from a banned individual.</p>
<p>Indirect contributions are permissible only by someone taking full ownership of
such a contribution and they are responsible for all related interactions with
the community regarding that contribution.</p>
<p>Trying to evade a non-permanent ban results in getting banned permanently.</p>
<p>When in doubt how to act in a specific instance, please reach out to
<a class="reference external" href="mailto:conduct&#37;&#52;&#48;llvm&#46;org">conduct<span>&#64;</span>llvm<span>&#46;</span>org</a> for advice.</p>
</section>
<section id="ir-backwards-compatibility">
<span id="id5"></span><h3><a class="toc-backref" href="#id27" role="doc-backlink">IR Backwards Compatibility</a><a class="headerlink" href="#ir-backwards-compatibility" title="Link to this heading">¶</a></h3>
<p>When the IR format has to be changed, keep in mind that we try to maintain some
backwards compatibility. The rules are intended as a balance between convenience
for llvm users and not imposing a big burden on llvm developers:</p>
<ul class="simple">
<li><p>The textual format is not backwards compatible. We don’t change it too often,
but there are no specific promises.</p></li>
<li><p>Additions and changes to the IR should be reflected in
<code class="docutils literal notranslate"><span class="pre">test/Bitcode/compatibility.ll</span></code>.</p></li>
<li><p>The current LLVM version supports loading any bitcode since version 3.0.</p></li>
<li><p>After each X.Y release, <code class="docutils literal notranslate"><span class="pre">compatibility.ll</span></code> must be copied to
<code class="docutils literal notranslate"><span class="pre">compatibility-X.Y.ll</span></code>. The corresponding bitcode file should be assembled
using the X.Y build and committed as <code class="docutils literal notranslate"><span class="pre">compatibility-X.Y.ll.bc</span></code>.</p></li>
<li><p>Newer releases can ignore features from older releases, but they cannot
miscompile them. For example, if nsw is ever replaced with something else,
dropping it would be a valid way to upgrade the IR.</p></li>
<li><p>Debug metadata is special in that it is currently dropped during upgrades.</p></li>
<li><p>Non-debug metadata is defined to be safe to drop, so a valid way to upgrade
it is to drop it. That is not very user friendly and a bit more effort is
expected, but no promises are made.</p></li>
</ul>
</section>
<section id="c-api-changes">
<h3><a class="toc-backref" href="#id28" role="doc-backlink">C API Changes</a><a class="headerlink" href="#c-api-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>Stability Guarantees: The C API is, in general, a “best effort” for stability.
This means that we make every attempt to keep the C API stable, but that
stability will be limited by the abstractness of the interface and the
stability of the C++ API that it wraps. In practice, this means that things
like “create debug info” or “create this type of instruction” are likely to be
less stable than “take this IR file and JIT it for my current machine”.</p></li>
<li><p>Release stability: We won’t break the C API on the release branch with patches
that go on that branch, with the exception that we will fix an unintentional
C API break that will keep the release consistent with both the previous and
next release.</p></li>
<li><p>Testing: Patches to the C API are expected to come with tests just like any
other patch.</p></li>
<li><p>Including new things into the API: If an LLVM subcomponent has a C API already
included, then expanding that C API is acceptable. Adding C API for
subcomponents that don’t currently have one needs to be discussed on the
<a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a> for design and maintainability feedback prior to implementation.</p></li>
<li><p>Documentation: Any changes to the C API are required to be documented in the
release notes so that it’s clear to external users who do not follow the
project how the C API is changing and evolving.</p></li>
</ul>
</section>
<section id="updating-toolchain-requirements">
<span id="toolchain"></span><h3><a class="toc-backref" href="#id29" role="doc-backlink">Updating Toolchain Requirements</a><a class="headerlink" href="#updating-toolchain-requirements" title="Link to this heading">¶</a></h3>
<p>We intend to require newer toolchains as time goes by. This means LLVM’s
codebase can use newer versions of C++ as they get standardized. Requiring newer
toolchains to build LLVM can be painful for those building LLVM; therefore, it
will only be done through the following process:</p>
<blockquote>
<div><ul class="simple">
<li><p>It is a general goal to support LLVM and GCC versions from the last 3 years
at a minimum. This time-based guideline is not strict: we may support much
older compilers, or decide to support fewer versions.</p></li>
<li><p>An RFC is sent to the <a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a></p>
<ul>
<li><p>Detail upsides of the version increase (e.g. which newer C++ language or
library features LLVM should use; avoid miscompiles in particular compiler
versions, etc).</p></li>
<li><p>Detail downsides on important platforms (e.g. Ubuntu LTS status).</p></li>
</ul>
</li>
<li><p>Once the RFC reaches consensus, update the CMake toolchain version checks as
well as the <a class="reference internal" href="GettingStarted.html"><span class="doc">getting started</span></a> guide.  This provides a
softer transition path for developers compiling LLVM, because the
error can be turned into a warning using a CMake flag. This is an important
step: LLVM still doesn’t have code which requires the new toolchains, but it
soon will. If you compile LLVM but don’t read the forums, we should
tell you!</p></li>
<li><p>Ensure that at least one LLVM release has had this soft-error. Not all
developers compile LLVM top-of-tree. These release-bound developers should
also be told about upcoming changes.</p></li>
<li><p>Turn the soft-error into a hard-error after said LLVM release has branched.</p></li>
<li><p>Update the <a class="reference internal" href="CodingStandards.html"><span class="doc">coding standards</span></a> to allow the new
features we’ve explicitly approved in the RFC.</p></li>
<li><p>Start using the new features in LLVM’s codebase.</p></li>
</ul>
</div></blockquote>
<p>Here’s a <a class="reference external" href="https://discourse.llvm.org/t/rfc-migrating-past-c-11/50943">sample RFC</a> and the
<a class="reference external" href="https://reviews.llvm.org/D57264">corresponding change</a>.</p>
</section>
<section id="working-with-the-ci-system">
<span id="ci-usage"></span><h3><a class="toc-backref" href="#id30" role="doc-backlink">Working with the CI system</a><a class="headerlink" href="#working-with-the-ci-system" title="Link to this heading">¶</a></h3>
<p>The main continuous integration (CI) tool for the LLVM project is the
<a class="reference external" href="https://lab.llvm.org/buildbot/">LLVM Buildbot</a>. It uses different <em>builders</em>
to cover a wide variety of sub-projects and configurations. The builds are
executed on different <em>workers</em>. Builders and workers are configured and
provided by community members.</p>
<p>The Buildbot tracks the commits on the main branch and the release branches.
This means that patches are built and tested after they are merged to the these
branches (aka post-merge testing). This also means it’s okay to break the build
occasionally, as it’s unreasonable to expect contributors to build and test
their patch with every possible configuration.</p>
<p><em>If your commit broke the build:</em></p>
<ul class="simple">
<li><p>Fix the build as soon as possible as this might block other contributors or
downstream users.</p></li>
<li><p>If you need more time to analyze and fix the bug, please revert your change to
unblock others.</p></li>
</ul>
<p><em>If someone else broke the build and this blocks your work</em></p>
<ul class="simple">
<li><p>Comment on the code review in <a class="reference external" href="https://github.com/llvm/llvm-project/pulls">GitHub</a>
(if available) or email the author, explain the problem and how this impacts
you. Add a link to the broken build and the error message so folks can
understand the problem.</p></li>
<li><p>Revert the commit if this blocks your work, see <a class="reference internal" href="#revert-policy">revert_policy</a> .</p></li>
</ul>
<p><em>If a build/worker is permanently broken</em></p>
<ul>
<li><p>1st step: contact the owner of the worker. You can find the name and contact
information for the <em>Admin</em> of worker on the page of the build in the
<em>Worker</em> tab:</p>
<img alt="_images/buildbot_worker_contact.png" src="_images/buildbot_worker_contact.png" />
</li>
<li><p>2nd step: If the owner does not respond or fix the worker, please escalate
to Galina Kostanova, the maintainer of the BuildBot master.</p></li>
<li><p>3rd step: If Galina could not help you, please escalate to the
<a class="reference external" href="mailto:iwg&#37;&#52;&#48;llvm&#46;org">Infrastructure Working Group</a>.</p></li>
</ul>
</section>
</section>
<section id="introducing-new-components-into-llvm">
<span id="new-llvm-components"></span><h2><a class="toc-backref" href="#id31" role="doc-backlink">Introducing New Components into LLVM</a><a class="headerlink" href="#introducing-new-components-into-llvm" title="Link to this heading">¶</a></h2>
<p>The LLVM community is a vibrant and exciting place to be, and we look to be
inclusive of new projects and foster new communities, and increase
collaboration across industry and academia.</p>
<p>That said, we need to strike a balance between being inclusive of new ideas and
people and the cost of ongoing maintenance that new code requires.  As such, we
have a general <a class="reference internal" href="SupportPolicy.html"><span class="doc">support policy</span></a> for introducing major new
components into the LLVM world, depending on the degree of detail and
responsibility required. <em>Core</em> projects need a higher degree of scrutiny
than <em>peripheral</em> projects, and the latter may have additional differences.</p>
<p>However, this is really only intended to cover common cases
that we have seen arise: different situations are different, and we are open
to discussing unusual cases as well - just start an RFC thread on the
<a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a>.</p>
<section id="adding-a-new-target">
<h3><a class="toc-backref" href="#id32" role="doc-backlink">Adding a New Target</a><a class="headerlink" href="#adding-a-new-target" title="Link to this heading">¶</a></h3>
<p>LLVM is very receptive to new targets, even experimental ones, but a number of
problems can appear when adding new large portions of code, and back-ends are
normally added in bulk. New targets need the same level of support as other
<em>core</em> parts of the compiler, so they are covered in the <em>core tier</em> of our
<a class="reference internal" href="SupportPolicy.html"><span class="doc">support policy</span></a>.</p>
<p>We have found that landing large pieces of new code and then trying to fix
emergent problems in-tree is problematic for a variety of reasons. For these
reasons, new targets are <em>always</em> added as <em>experimental</em> until they can be
proven stable, and later moved to non-experimental.</p>
<p>The differences between both classes are:</p>
<ul class="simple">
<li><p>Experimental targets are not built by default (they need to be explicitly
enabled at CMake time).</p></li>
<li><p>Test failures, bugs, and build breakages that only appear when the
experimental target is enabled, caused by changes unrelated to the target, are
the responsibility of the community behind the target to fix.</p></li>
</ul>
<p>The basic rules for a back-end to be upstreamed in <strong>experimental</strong> mode are:</p>
<ul class="simple">
<li><p>Every target must have at least one <a class="reference internal" href="#maintainers"><span class="std std-ref">maintainer</span></a>. The
<cite>Maintainers.rst</cite> file has to be updated as part of the first merge. These
maintainers make sure that changes to the target get reviewed and steers the
overall effort.</p></li>
<li><p>There must be an active community behind the target. This community
will help maintain the target by providing buildbots, fixing
bugs, answering the LLVM community’s questions and making sure the new
target doesn’t break any of the other targets, or generic code. This
behavior is expected to continue throughout the lifetime of the
target’s code.</p></li>
<li><p>The code must be free of contentious issues, for example, large
changes in how the IR behaves or should be formed by the front-ends,
unless agreed by the majority of the community via refactoring of the
(<a class="reference internal" href="LangRef.html"><span class="doc">IR standard</span></a>) <strong>before</strong> the merge of the new target changes,
following the <a class="reference internal" href="#ir-backwards-compatibility"><span class="std std-ref">IR Backwards Compatibility</span></a>.</p></li>
<li><p>The code conforms to all of the policies laid out in this developer policy
document, including license, patent, and coding standards.</p></li>
<li><p>The target should have either reasonable documentation on how it
works (ISA, ABI, etc.) or a publicly available simulator/hardware
(either free or cheap enough) - preferably both.  This allows
developers to validate assumptions, understand constraints and review code
that can affect the target.</p></li>
</ul>
<p>In addition, the rules for a back-end to be promoted to <strong>official</strong> are:</p>
<ul class="simple">
<li><p>The target must have addressed every other minimum requirement and
have been stable in tree for at least 3 months. This cool down
period is to make sure that the back-end and the target community can
endure continuous upstream development for the foreseeable future.</p></li>
<li><p>The target’s code must have been completely adapted to this policy
as well as the <a class="reference internal" href="CodingStandards.html"><span class="doc">coding standards</span></a>. Any exceptions that
were made to move into experimental mode must have been fixed <strong>before</strong>
becoming official.</p></li>
<li><p>The test coverage needs to be broad and well written (small tests,
well documented). The build target <code class="docutils literal notranslate"><span class="pre">check-all</span></code> must pass with the
new target built, and where applicable, the <code class="docutils literal notranslate"><span class="pre">test-suite</span></code> must also
pass without errors, in at least one configuration (publicly
demonstrated, for example, via buildbots).</p></li>
<li><p>Public buildbots need to be created and actively maintained, unless
the target requires no additional buildbots (ex. <code class="docutils literal notranslate"><span class="pre">check-all</span></code> covers
all tests). The more relevant and public the new target’s CI infrastructure
is, the more the LLVM community will embrace it.</p></li>
</ul>
<p>To <strong>continue</strong> as a supported and official target:</p>
<ul class="simple">
<li><p>The maintainer(s) must continue following these rules throughout the lifetime
of the target. Continuous violations of aforementioned rules and policies
could lead to complete removal of the target from the code base.</p></li>
<li><p>Degradation in support, documentation or test coverage will make the target as
nuisance to other targets and be considered a candidate for deprecation and
ultimately removed.</p></li>
</ul>
<p>In essence, these rules are necessary for targets to gain and retain their
status, but also markers to define bit-rot, and will be used to clean up the
tree from unmaintained targets.</p>
<p>Those wishing to add a new target to LLVM must follow the procedure below:</p>
<ol class="arabic simple">
<li><p>Read this section and make sure your target follows all requirements. For
minor issues, your community will be responsible for making all necessary
adjustments soon after the initial merge.</p></li>
<li><p>Send a request for comment (RFC) to the <a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a> describing
your target and how it follows all the requirements and what work has been
done and will need to be done to accommodate the official target requirements.
Make sure to expose any and all controversial issues, changes needed in the
base code, table gen, etc.</p></li>
<li><p>Once the response is positive, the LLVM community can start reviewing the
actual patches (but they can be prepared before, to support the RFC). Create
a sequence of N patches, numbered ‘1/N’ to ‘N/N’ (make sure N is an actual
number, not the letter ‘N’), that completes the basic structure of the target.</p></li>
<li><p>The initial patch should add documentation, maintainers, and triple support in
clang and LLVM. The following patches add TableGen infrastructure to describe
the target and lower instructions to assembly. The final patch must show that
the target can lower correctly with extensive LIT tests (IR to MIR, MIR to
ASM, etc).</p></li>
<li><p>Some patches may be approved before others, but only after <em>all</em> patches are
approved that the whole set can be merged in one go. This is to guarantee
that all changes are good as a single block.</p></li>
<li><p>After the initial merge, the target community can stop numbering patches and
start working asynchronously on the target to complete support. They should
still seek review from those who helped them in the initial phase, to make
sure the progress is still consistent.</p></li>
<li><p>Once all official requirements have been fulfilled (as above), the maintainers
should request the target to be enabled by default by sending another RFC to
the <a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a>.</p></li>
</ol>
</section>
<section id="adding-an-established-project-to-the-llvm-monorepo">
<h3><a class="toc-backref" href="#id33" role="doc-backlink">Adding an Established Project To the LLVM Monorepo</a><a class="headerlink" href="#adding-an-established-project-to-the-llvm-monorepo" title="Link to this heading">¶</a></h3>
<p>The <a class="reference external" href="https://github.com/llvm/llvm-project">LLVM monorepo</a> is the centerpoint
of development in the LLVM world, and has all of the primary LLVM components,
including the LLVM optimizer and code generators, Clang, LLDB, etc.  <a class="reference external" href="https://en.wikipedia.org/wiki/Monorepo">Monorepos
in general</a> are great because they
allow atomic commits to the project, simplify CI, and make it easier for
subcommunities to collaborate.</p>
<p>Like new targets, most projects already in the monorepo are considered to be in
the <em>core tier</em> of our <a class="reference internal" href="SupportPolicy.html"><span class="doc">support policy</span></a>. The burden to add
things to the LLVM monorepo needs to be very high - code that is added to this
repository is checked out by everyone in the community.  As such, we hold
components to a high bar similar to “official targets”, they:</p>
<blockquote>
<div><ul class="simple">
<li><p>Must be generally aligned with the mission of the LLVM project to advance
compilers, languages, tools, runtimes, etc.</p></li>
<li><p>Must conform to all of the policies laid out in this developer policy
document, including license, patent, coding standards, and code of conduct.</p></li>
<li><p>Must have an active community that maintains the code, including established
maintainers.</p></li>
<li><p>Should have reasonable documentation about how it works, including a high
quality README file.</p></li>
<li><p>Should have CI to catch breakage within the project itself or due to
underlying LLVM dependencies.</p></li>
<li><p>Should have code free of issues the community finds contentious, or be on a
clear path to resolving them.</p></li>
<li><p>Must be proposed through the LLVM RFC process, and have its addition approved
by the LLVM community - this ultimately mediates the resolution of the
“should” concerns above.</p></li>
</ul>
</div></blockquote>
<p>If you have a project that you think would make sense to add to the LLVM
monorepo, please start an RFC topic on the <a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a> to kick off
the discussion.  This process can take some time and iteration - please don’t
be discouraged or intimidated by that!</p>
<p>If you have an earlier stage project that you think is aligned with LLVM, please
see the “Incubating New Projects” section.</p>
</section>
<section id="incubating-new-projects">
<h3><a class="toc-backref" href="#id34" role="doc-backlink">Incubating New Projects</a><a class="headerlink" href="#incubating-new-projects" title="Link to this heading">¶</a></h3>
<p>The burden to add a new project to the LLVM monorepo is intentionally very high,
but that can have a chilling effect on new and innovative projects.  To help
foster these sorts of projects, LLVM supports an “incubator” process that is
much easier to get started with.  It provides space for potentially valuable,
new top-level and sub-projects to reach a critical mass before they have enough
code to prove their utility and grow a community.  This also allows
collaboration between teams that already have permissions to make contributions
to projects under the LLVM umbrella.</p>
<p>Projects which can be considered for the LLVM incubator meet the following
criteria:</p>
<blockquote>
<div><ul class="simple">
<li><p>Must be generally aligned with the mission of the LLVM project to advance
compilers, languages, tools, runtimes, etc.</p></li>
<li><p>Must conform to the license, patent, and code of conduct policies laid out
in this developer policy document.</p></li>
<li><p>Must have a documented charter and development plan, e.g. in the form of a
README file, mission statement, and/or manifesto.</p></li>
<li><p>Should conform to coding standards, incremental development process, and
other expectations.</p></li>
<li><p>Should have a sense of the community that it hopes to eventually foster, and
there should be interest from members with different affiliations /
organizations.</p></li>
<li><p>Should have a feasible path to eventually graduate as a dedicated top-level
or sub-project within the <a class="reference external" href="https://github.com/llvm/llvm-project">LLVM monorepo</a>.</p></li>
<li><p>Should include a notice (e.g. in the project README or web page) that the
project is in ‘incubation status’ and is not included in LLVM releases (see
suggested wording below).</p></li>
<li><p>Must be proposed through the LLVM RFC process, and have its addition
approved by the LLVM community - this ultimately mediates the resolution of
the “should” concerns above.</p></li>
</ul>
</div></blockquote>
<p>That said, the project need not have any code to get started, and need not have
an established community at all!  Furthermore, incubating projects may pass
through transient states that violate the “Should” guidelines above, or would
otherwise make them unsuitable for direct inclusion in the monorepo (e.g.
dependencies that have not yet been factored appropriately, leveraging
experimental components or APIs that are not yet upstream, etc).</p>
<dl class="simple">
<dt>When approved, the llvm-admin group can grant the new project:</dt><dd><ul class="simple">
<li><p>A new repository in the LLVM Github Organization - but not the LLVM monorepo.</p></li>
<li><p>New mailing list, discourse forum, and/or discord chat hosted with other LLVM
forums.</p></li>
<li><p>Other infrastructure integration can be discussed on a case-by-case basis.</p></li>
</ul>
</dd>
</dl>
<p>Graduation to the mono-repo would follow existing processes and standards for
becoming a first-class part of the monorepo.  Similarly, an incubating project
may be eventually retired, but no process has been established for that yet.  If
and when this comes up, please start an RFC discussion on the <a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a>.</p>
<p>This process is very new - please expect the details to change, it is always
safe to ask on the <a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a> about this.</p>
<p>Suggested disclaimer for the project README and the main project web page:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">This</span> <span class="n">project</span> <span class="ow">is</span> <span class="n">participating</span> <span class="ow">in</span> <span class="n">the</span> <span class="n">LLVM</span> <span class="n">Incubator</span> <span class="n">process</span><span class="p">:</span> <span class="k">as</span> <span class="n">such</span><span class="p">,</span> <span class="n">it</span> <span class="ow">is</span>
<span class="ow">not</span> <span class="n">part</span> <span class="n">of</span> <span class="nb">any</span> <span class="n">official</span> <span class="n">LLVM</span> <span class="n">release</span><span class="o">.</span>  <span class="n">While</span> <span class="n">incubation</span> <span class="n">status</span> <span class="ow">is</span> <span class="ow">not</span>
<span class="n">necessarily</span> <span class="n">a</span> <span class="n">reflection</span> <span class="n">of</span> <span class="n">the</span> <span class="n">completeness</span> <span class="ow">or</span> <span class="n">stability</span> <span class="n">of</span> <span class="n">the</span> <span class="n">code</span><span class="p">,</span> <span class="n">it</span>
<span class="n">does</span> <span class="n">indicate</span> <span class="n">that</span> <span class="n">the</span> <span class="n">project</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">yet</span> <span class="n">endorsed</span> <span class="k">as</span> <span class="n">a</span> <span class="n">component</span> <span class="n">of</span> <span class="n">LLVM</span><span class="o">.</span>
</pre></div>
</div>
</section>
</section>
<section id="copyright-license-and-patents">
<span id="copyright-license-patents"></span><h2><a class="toc-backref" href="#id35" role="doc-backlink">Copyright, License, and Patents</a><a class="headerlink" href="#copyright-license-and-patents" title="Link to this heading">¶</a></h2>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>This section deals with legal matters but does not provide legal advice.  We
are not lawyers — please seek legal counsel from a licensed attorney.</p>
</div>
<p>This section addresses the issues of copyright, license and patents for the LLVM
project.  The copyright for the code is held by the contributors of
the code.  The code is licensed under permissive <a class="reference internal" href="#open-source-licensing-terms">open source licensing terms</a>,
namely the Apache-2.0 with LLVM-exception license, which includes a copyright
and <a class="reference internal" href="#patent-license">patent license</a>.  When you contribute code to the LLVM project, you
license it under these terms.</p>
<p>In certain circumstances, code licensed under other licenses can be added
to the codebase.  However, this may only be done with approval of the LLVM
Foundation Board of Directors, and contributors should plan for the approval
process to take at least 4-6 weeks.  If you would like to contribute code
under a different license, please create a pull request with the code
you want to contribute and email <a class="reference external" href="mailto:board&#37;&#52;&#48;llvm&#46;org">board<span>&#64;</span>llvm<span>&#46;</span>org</a> requesting a review.</p>
<p>If you have questions or comments about these topics, please ask on the
<a class="reference external" href="https://discourse.llvm.org">LLVM Discourse forums</a>.  However,
please realize that most compiler developers are not lawyers, and therefore you
will not be getting official legal advice.</p>
<section id="copyright">
<h3><a class="toc-backref" href="#id36" role="doc-backlink">Copyright</a><a class="headerlink" href="#copyright" title="Link to this heading">¶</a></h3>
<p>The LLVM project does not collect copyright assignments, which means that the
copyright for the code in the project is held by the respective contributors.
Because you (or your company)
retain ownership of the code you contribute, you know it may only be used under
the terms of the open source license you contributed it under: the license for
your contributions cannot be changed in the future without your approval.</p>
<p>Because the LLVM project does not require copyright assignments, changing the
LLVM license requires tracking down the
contributors to LLVM and getting them to agree that a license change is
acceptable for their contributions.  We feel that a high burden for relicensing
is good for the project, because contributors do not have to fear that their
code will be used in a way with which they disagree.</p>
<section id="embedded-copyright-or-contributed-by-statements">
<h4><a class="toc-backref" href="#id37" role="doc-backlink">Embedded Copyright or ‘Contributed by’ Statements</a><a class="headerlink" href="#embedded-copyright-or-contributed-by-statements" title="Link to this heading">¶</a></h4>
<p>The LLVM project does not accept contributions that include in-source copyright
notices except where such notices are part of a larger external project being
added as a vendored dependency.</p>
<p>LLVM source code lives for a long time and is edited by many people, the best
way to track contributions is through revision control history.
See the <a class="reference internal" href="#attribution-of-changes">Attribution of Changes</a> section for more information about attributing
changes to authors other than the committer.</p>
</section>
</section>
<section id="relicensing">
<h3><a class="toc-backref" href="#id38" role="doc-backlink">Relicensing</a><a class="headerlink" href="#relicensing" title="Link to this heading">¶</a></h3>
<p>The last paragraph notwithstanding, the LLVM Project is in the middle of a large
effort to change licenses, which aims to solve several problems:</p>
<ul class="simple">
<li><p>The old licenses made it difficult to move code from (e.g.) the compiler to
runtime libraries, because runtime libraries used a different license from the
rest of the compiler.</p></li>
<li><p>Some contributions were not submitted to LLVM due to concerns that
the patent grant required by the project was overly broad.</p></li>
<li><p>The patent grant was unique to the LLVM Project, not written by a lawyer, and
was difficult to determine what protection was provided (if any).</p></li>
</ul>
<p>The scope of relicensing is all code that is considered part of the LLVM
project, including the main LLVM repository, runtime libraries (compiler_rt,
OpenMP, etc), Polly, and all other subprojects.  There are a few exceptions:</p>
<ul class="simple">
<li><p>Code imported from other projects (e.g. Google Test, Autoconf, etc) will
remain as it is.  This code isn’t developed as part of the LLVM project, it
is used by LLVM.</p></li>
<li><p>Some subprojects are impractical or uninteresting to relicense (e.g. llvm-gcc
and dragonegg). These will be split off from the LLVM project (e.g. to
separate GitHub projects), allowing interested people to continue their
development elsewhere.</p></li>
</ul>
<p>To relicense LLVM, we will be seeking approval from all of the copyright holders
of code in the repository, or potentially remove/rewrite code if we cannot.
This is a large
and challenging project which will take a significant amount of time to
complete.</p>
<p>Starting on 2024-06-01 (first of June 2024), new contributions only need to
be covered by the new LLVM license, i.e. Apache-2.0 WITH LLVM-exception.
Before this date, the project required all contributions to be made under
both the new license and the legacy license.</p>
<p>If you are a contributor to LLVM with contributions committed before 2019-01-19
and have not done so already, please do follow the instructions at
<a class="reference external" href="https://foundation.llvm.org/docs/relicensing/">https://foundation.llvm.org/docs/relicensing/</a>, under section “Individual
Relicensing Agreement” to relicense your contributions under the new license.</p>
</section>
<section id="new-llvm-project-license-framework">
<span id="open-source-licensing-terms"></span><h3><a class="toc-backref" href="#id39" role="doc-backlink">New LLVM Project License Framework</a><a class="headerlink" href="#new-llvm-project-license-framework" title="Link to this heading">¶</a></h3>
<p>Contributions to LLVM are licensed under the <a class="reference external" href="https://www.apache.org/licenses/LICENSE-2.0">Apache License, Version 2.0</a>, with two limited
exceptions intended to ensure that LLVM is very permissively licensed.
Collectively, the name of this license is “Apache 2.0 License with LLVM
exceptions”.  The exceptions read:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">----</span> <span class="n">LLVM</span> <span class="n">Exceptions</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Apache</span> <span class="mf">2.0</span> <span class="n">License</span> <span class="o">----</span>

<span class="n">As</span> <span class="n">an</span> <span class="n">exception</span><span class="p">,</span> <span class="k">if</span><span class="p">,</span> <span class="k">as</span> <span class="n">a</span> <span class="n">result</span> <span class="n">of</span> <span class="n">your</span> <span class="n">compiling</span> <span class="n">your</span> <span class="n">source</span> <span class="n">code</span><span class="p">,</span> <span class="n">portions</span>
<span class="n">of</span> <span class="n">this</span> <span class="n">Software</span> <span class="n">are</span> <span class="n">embedded</span> <span class="n">into</span> <span class="n">an</span> <span class="n">Object</span> <span class="n">form</span> <span class="n">of</span> <span class="n">such</span> <span class="n">source</span> <span class="n">code</span><span class="p">,</span> <span class="n">you</span>
<span class="n">may</span> <span class="n">redistribute</span> <span class="n">such</span> <span class="n">embedded</span> <span class="n">portions</span> <span class="ow">in</span> <span class="n">such</span> <span class="n">Object</span> <span class="n">form</span> <span class="n">without</span> <span class="n">complying</span>
<span class="k">with</span> <span class="n">the</span> <span class="n">conditions</span> <span class="n">of</span> <span class="n">Sections</span> <span class="mi">4</span><span class="p">(</span><span class="n">a</span><span class="p">),</span> <span class="mi">4</span><span class="p">(</span><span class="n">b</span><span class="p">)</span> <span class="ow">and</span> <span class="mi">4</span><span class="p">(</span><span class="n">d</span><span class="p">)</span> <span class="n">of</span> <span class="n">the</span> <span class="n">License</span><span class="o">.</span>

<span class="n">In</span> <span class="n">addition</span><span class="p">,</span> <span class="k">if</span> <span class="n">you</span> <span class="n">combine</span> <span class="ow">or</span> <span class="n">link</span> <span class="n">compiled</span> <span class="n">forms</span> <span class="n">of</span> <span class="n">this</span> <span class="n">Software</span> <span class="k">with</span>
<span class="n">software</span> <span class="n">that</span> <span class="ow">is</span> <span class="n">licensed</span> <span class="n">under</span> <span class="n">the</span> <span class="n">GPLv2</span> <span class="p">(</span><span class="s2">&quot;Combined Software&quot;</span><span class="p">)</span> <span class="ow">and</span> <span class="k">if</span> <span class="n">a</span>
<span class="n">court</span> <span class="n">of</span> <span class="n">competent</span> <span class="n">jurisdiction</span> <span class="n">determines</span> <span class="n">that</span> <span class="n">the</span> <span class="n">patent</span> <span class="n">provision</span> <span class="p">(</span><span class="n">Section</span>
<span class="mi">3</span><span class="p">),</span> <span class="n">the</span> <span class="n">indemnity</span> <span class="n">provision</span> <span class="p">(</span><span class="n">Section</span> <span class="mi">9</span><span class="p">)</span> <span class="ow">or</span> <span class="n">other</span> <span class="n">Section</span> <span class="n">of</span> <span class="n">the</span> <span class="n">License</span>
<span class="n">conflicts</span> <span class="k">with</span> <span class="n">the</span> <span class="n">conditions</span> <span class="n">of</span> <span class="n">the</span> <span class="n">GPLv2</span><span class="p">,</span> <span class="n">you</span> <span class="n">may</span> <span class="n">retroactively</span> <span class="ow">and</span>
<span class="n">prospectively</span> <span class="n">choose</span> <span class="n">to</span> <span class="n">deem</span> <span class="n">waived</span> <span class="ow">or</span> <span class="n">otherwise</span> <span class="n">exclude</span> <span class="n">such</span> <span class="n">Section</span><span class="p">(</span><span class="n">s</span><span class="p">)</span> <span class="n">of</span>
<span class="n">the</span> <span class="n">License</span><span class="p">,</span> <span class="n">but</span> <span class="n">only</span> <span class="ow">in</span> <span class="n">their</span> <span class="n">entirety</span> <span class="ow">and</span> <span class="n">only</span> <span class="k">with</span> <span class="n">respect</span> <span class="n">to</span> <span class="n">the</span> <span class="n">Combined</span>
<span class="n">Software</span><span class="o">.</span>
</pre></div>
</div>
<p>We intend to keep LLVM perpetually open source and available under a permissive
license - this fosters the widest adoption of LLVM by
<strong>allowing commercial products to be derived from LLVM</strong> with few restrictions
and without a requirement for making any derived works also open source.  In
particular, LLVM’s license is not a “copyleft” license like the GPL.</p>
<p>The “Apache 2.0 License with LLVM exceptions” allows you to:</p>
<ul class="simple">
<li><p>freely download and use LLVM (in whole or in part) for personal, internal, or
commercial purposes.</p></li>
<li><p>include LLVM in packages or distributions you create.</p></li>
<li><p>combine LLVM with code licensed under every other major open source
license (including BSD, MIT, GPLv2, GPLv3…).</p></li>
<li><p>make changes to LLVM code without being required to contribute it back
to the project - contributions are appreciated though!</p></li>
</ul>
<p>However, it imposes these limitations on you:</p>
<ul class="simple">
<li><p>You must retain the copyright notice if you redistribute LLVM: You cannot
strip the copyright headers off or replace them with your own.</p></li>
<li><p>Binaries that include LLVM must reproduce the copyright notice (e.g. in an
included README file or in an “About” box), unless the LLVM code was added as
a by-product of compilation.  For example, if an LLVM runtime library like
compiler_rt or libc++ was automatically included into your application by the
compiler, you do not need to attribute it.</p></li>
<li><p>You can’t use our names to promote your products (LLVM derived or not) -
though you can make truthful statements about your use of the LLVM code,
without implying our sponsorship.</p></li>
<li><p>There’s no warranty on LLVM at all.</p></li>
</ul>
<p>We want LLVM code to be widely used, and believe that this provides a model that
is great for contributors and users of the project.  For more information about
the Apache 2.0 License, please see the <a class="reference external" href="http://www.apache.org/foundation/license-faq.html">Apache License FAQ</a>, maintained by the
Apache Project.</p>
</section>
<section id="patents">
<span id="patent-license"></span><h3><a class="toc-backref" href="#id40" role="doc-backlink">Patents</a><a class="headerlink" href="#patents" title="Link to this heading">¶</a></h3>
<p>Section 3 of the Apache 2.0 license is a patent grant under which
contributors of code to the project contribute the rights to use any of
their patents that would otherwise be infringed by that code contribution
(protecting uses of that code).  Further, the patent grant is revoked
from anyone who files a patent lawsuit about code in LLVM - this protects the
community by providing a “patent commons” for the code base and reducing the
odds of patent lawsuits in general.</p>
<p>The license specifically scopes which patents are included with code
contributions.  To help explain this, the <a class="reference external" href="http://www.apache.org/foundation/license-faq.html">Apache License FAQ</a> explains this scope using
some questions and answers, which we reproduce here for your convenience (for
reference, the “ASF” is the Apache Software Foundation, the guidance still
holds though):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>Q1: If I own a patent and contribute to a Work, and, at the time my
contribution is included in that Work, none of my patent&#39;s claims are subject
to Apache&#39;s Grant of Patent License, is there a way any of those claims would
later become subject to the Grant of Patent License solely due to subsequent
contributions by other parties who are not licensees of that patent.

A1: No.

Q2: If at any time after my contribution, I am able to license other patent
claims that would have been subject to Apache&#39;s Grant of Patent License if
they were licensable by me at the time of my contribution, do those other
claims become subject to the Grant of Patent License?

A2: Yes.

Q3: If I own or control a licensable patent and contribute code to a specific
Apache product, which of my patent claims are subject to Apache&#39;s Grant of
Patent License?

A3:  The only patent claims that are licensed to the ASF are those you own or
have the right to license that read on your contribution or on the
combination of your contribution with the specific Apache product to which
you contributed as it existed at the time of your contribution. No additional
patent claims become licensed as a result of subsequent combinations of your
contribution with any other software. Note, however, that licensable patent
claims include those that you acquire in the future, as long as they read on
your original contribution as made at the original time. Once a patent claim
is subject to Apache&#39;s Grant of Patent License, it is licensed under the
terms of that Grant to the ASF and to recipients of any software distributed
by the ASF for any Apache software product whatsoever.
</pre></div>
</div>
</section>
<section id="legacy-license-structure">
<span id="legacy"></span><h3><a class="toc-backref" href="#id41" role="doc-backlink">Legacy License Structure</a><a class="headerlink" href="#legacy-license-structure" title="Link to this heading">¶</a></h3>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>The code base was previously licensed under the Terms described here.
We are in the middle of relicensing to a new approach (described above).
More than 99% of all contributions made to LLVM are covered by the Apache-2.0
WITH LLVM-exception license. A small portion of LLVM code remains exclusively
covered by the legacy license. Contributions after 2024-06-01 are covered
exclusively by the new license._</p>
</div>
<p>We intend to keep LLVM perpetually open source and to use a permissive open
source license.  The code in
LLVM is available under the <a class="reference external" href="http://www.opensource.org/licenses/UoI-NCSA.php">University of Illinois/NCSA Open Source License</a>, which boils down to
this:</p>
<ul class="simple">
<li><p>You can freely distribute LLVM.</p></li>
<li><p>You must retain the copyright notice if you redistribute LLVM.</p></li>
<li><p>Binaries derived from LLVM must reproduce the copyright notice (e.g. in an
included README file).</p></li>
<li><p>You can’t use our names to promote your LLVM derived products.</p></li>
<li><p>There’s no warranty on LLVM at all.</p></li>
</ul>
<p>We believe this fosters the widest adoption of LLVM because it <strong>allows
commercial products to be derived from LLVM</strong> with few restrictions and without
a requirement for making any derived works also open source (i.e. LLVM’s
license is not a “copyleft” license like the GPL). We suggest that you read the
<a class="reference external" href="http://www.opensource.org/licenses/UoI-NCSA.php">License</a> if further
clarification is needed.</p>
<p>In addition to the UIUC license, the runtime library components of LLVM
(<strong>compiler_rt, libc++, and libclc</strong>) are also licensed under the <a class="reference external" href="http://www.opensource.org/licenses/mit-license.php">MIT License</a>, which does not contain
the binary redistribution clause.  As a user of these runtime libraries, it
means that you can choose to use the code under either license (and thus don’t
need the binary redistribution clause), and as a contributor to the code that
you agree that any contributions to these libraries be licensed under both
licenses.  We feel that this is important for runtime libraries, because they
are implicitly linked into applications and therefore should not subject those
applications to the binary redistribution clause. This also means that it is ok
to move code from (e.g.)  libc++ to the LLVM core without concern, but that code
cannot be moved from the LLVM core to libc++ without the copyright owner’s
permission.</p>
</section>
<section id="ai-generated-contributions">
<span id="ai-contributions"></span><h3><a class="toc-backref" href="#id42" role="doc-backlink">AI generated contributions</a><a class="headerlink" href="#ai-generated-contributions" title="Link to this heading">¶</a></h3>
<p>Artificial intelligence systems raise many questions around copyright that have
yet to be answered. Our policy on AI tools is guided by our copyright policy:
Contributors are responsible for ensuring that they have the right to contribute
code under the terms of our license, typically meaning that either they, their
employer, or their collaborators hold the copyright. Using AI tools to
regenerate copyrighted material does not remove the copyright, and contributors
are responsible for ensuring that such material does not appear in their
contributions.</p>
<p>As such, the LLVM policy is that contributors are permitted to use artificial
intelligence tools to produce contributions, provided that they have the right
to license that code under the project license. Contributions found to violate
this policy will be removed just like any other offending contribution.</p>
<p>While the LLVM project has a liberal policy on AI tool use, contributors are
considered responsible for their contributions. We encourage contributors to
review all generated code before sending it for review to verify its
correctness and to understand it so that they can answer questions during code
review. Reviewing and maintaining generated code that the original contributor
does not understand is not a good use of limited project resources.</p>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="CodeReview.html" title="LLVM Code-Review Policy and Practices"
             >next</a> |</li>
        <li class="right" >
          <a href="Contributing.html" title="Contributing to LLVM"
             >previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingInvolved.html" >Getting Involved</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">LLVM Developer Policy</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2003-2025, LLVM Project.
      Last updated on 2025-11-20.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>