<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Libc++ 20.0.0 (In-Progress) Release Notes &#8212; libc++  documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="../_static/haiku.css?v=e491ac2d" />
    <script src="../_static/documentation_options.js?v=5929fcd5"></script>
    <script src="../_static/doctools.js?v=888ff710"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Libc++ 21.0.0 (In-Progress) Release Notes" href="21.html" />
    <link rel="prev" title="Libc++ 22.0.0 (In-Progress) Release Notes" href="../ReleaseNotes.html" /> 
  </head><body>
      <div class="header" role="banner"><h1 class="heading"><a href="../index.html">
          <span>libc++  documentation</span></a></h1>
        <h2 class="heading"><span>Libc++ 20.0.0 (In-Progress) Release Notes</span></h2>
      </div>
      <div class="topnav" role="navigation" aria-label="top navigation">
      
        <p>
        «&#160;&#160;<a href="../ReleaseNotes.html">Libc++ 22.0.0 (In-Progress) Release Notes</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="21.html">Libc++ 21.0.0 (In-Progress) Release Notes</a>&#160;&#160;»
        </p>

      </div>
      <div class="content" role="main">
        
        
  <section id="libc-20-0-0-in-progress-release-notes">
<h1>Libc++ 20.0.0 (In-Progress) Release Notes<a class="headerlink" href="#libc-20-0-0-in-progress-release-notes" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id2">Introduction</a></p></li>
<li><p><a class="reference internal" href="#what-s-new-in-libc-20-0-0" id="id3">What’s New in Libc++ 20.0.0?</a></p>
<ul>
<li><p><a class="reference internal" href="#implemented-papers" id="id4">Implemented Papers</a></p></li>
<li><p><a class="reference internal" href="#improvements-and-new-features" id="id5">Improvements and New Features</a></p></li>
<li><p><a class="reference internal" href="#deprecations-and-removals" id="id6">Deprecations and Removals</a></p></li>
<li><p><a class="reference internal" href="#upcoming-deprecations-and-removals" id="id7">Upcoming Deprecations and Removals</a></p></li>
<li><p><a class="reference internal" href="#abi-affecting-changes" id="id8">ABI Affecting Changes</a></p></li>
</ul>
</li>
</ul>
</nav>
<p>Written by the <a class="reference external" href="https://libcxx.llvm.org">Libc++ Team</a></p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>These are in-progress notes for the upcoming libc++ 20.0.0 release.
Release notes for previous releases can be found on
<a class="reference external" href="https://releases.llvm.org/download.html">the Download Page</a>.</p>
</div>
<section id="introduction">
<h2><a class="toc-backref" href="#id2" role="doc-backlink">Introduction</a><a class="headerlink" href="#introduction" title="Link to this heading">¶</a></h2>
<p>This document contains the release notes for the libc++ C++ Standard Library,
part of the LLVM Compiler Infrastructure, release 20.0.0. Here we describe the
status of libc++ in some detail, including major improvements from the previous
release and new feature work. For the general LLVM release notes, see <a class="reference external" href="https://llvm.org/docs/ReleaseNotes.html">the LLVM
documentation</a>. All LLVM releases may
be downloaded from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
<p>For more information about libc++, please see the <a class="reference external" href="https://libcxx.llvm.org">Libc++ Web Site</a> or the <a class="reference external" href="https://llvm.org">LLVM Web Site</a>.</p>
<p>Note that if you are reading this file from a Git checkout or the
main Libc++ web page, this document applies to the <em>next</em> release, not
the current one. To see the release notes for a specific release, please
see the <a class="reference external" href="https://llvm.org/releases/">releases page</a>.</p>
</section>
<section id="what-s-new-in-libc-20-0-0">
<h2><a class="toc-backref" href="#id3" role="doc-backlink">What’s New in Libc++ 20.0.0?</a><a class="headerlink" href="#what-s-new-in-libc-20-0-0" title="Link to this heading">¶</a></h2>
<p>The main focus of the libc++ team has been to implement new C++20, C++23, and C++26 features.</p>
<section id="implemented-papers">
<h3><a class="toc-backref" href="#id4" role="doc-backlink">Implemented Papers</a><a class="headerlink" href="#implemented-papers" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>P0619R4: Reviewing Deprecated Facilities of C++17 for C++20 (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/99985">Github</a>)</p></li>
<li><p>P2747R2: <code class="docutils literal notranslate"><span class="pre">constexpr</span></code> placement new (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/105427">Github</a>)</p></li>
<li><p>P2609R3: Relaxing Ranges Just A Smidge (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/105253">Github</a>)</p></li>
<li><p>P2985R0: A type trait for detecting virtual base classes (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/105432">Github</a>)</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::jthread</span></code> and <code class="docutils literal notranslate"><span class="pre">&lt;stop_token&gt;</span></code> are not guarded behind <code class="docutils literal notranslate"><span class="pre">-fexperimental-library</span></code> anymore</p></li>
<li><p>P2674R1: A trait for implicit lifetime types (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/105259">Github</a>)</p></li>
<li><p>P0429R9: A Standard <code class="docutils literal notranslate"><span class="pre">flat_map</span></code> (<a class="reference external" href="https://github.com/llvm/llvm-project/issues/105190">Github</a>)</p></li>
</ul>
</section>
<section id="improvements-and-new-features">
<h3><a class="toc-backref" href="#id5" role="doc-backlink">Improvements and New Features</a><a class="headerlink" href="#improvements-and-new-features" title="Link to this heading">¶</a></h3>
<ul>
<li><p>The <code class="docutils literal notranslate"><span class="pre">lexicographical_compare</span></code> and <code class="docutils literal notranslate"><span class="pre">ranges::lexicographical_compare</span></code> algorithms have been optimized for trivially
equality comparable types, resulting in a performance improvement of up to 40x.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_CXX20_REMOVED_TEMPORARY_BUFFER</span></code> macro has been added to make <code class="docutils literal notranslate"><span class="pre">std::get_temporary_buffer</span></code> and
<code class="docutils literal notranslate"><span class="pre">std::return_temporary_buffer</span></code> available.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">std::uncaught_exception</span></code> function was marked as deprecated since C++17 and removed since C++20. The
<code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_CXX20_REMOVED_UNCAUGHT_EXCEPTION</span></code> macro has been added to make <code class="docutils literal notranslate"><span class="pre">std::uncaught_exception</span></code>
available in C++20 and later modes.</p></li>
<li><p>The internal structure <code class="docutils literal notranslate"><span class="pre">__compressed_pair</span></code> has been replaced with <code class="docutils literal notranslate"><span class="pre">[[no_unique_address]]</span></code>, resulting in reduced
compile times and smaller debug information as well as better code generation if optimizations are disabled.
The Chromium project measured a 5% reduction in object file and debug information size.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ABI_BOUNDED_UNIQUE_PTR</span></code> ABI configuration was added, which allows <code class="docutils literal notranslate"><span class="pre">std::unique_ptr&lt;T[]&gt;</span></code> to
detect out-of-bounds accesses in certain circumstances. <code class="docutils literal notranslate"><span class="pre">std::unique_ptr&lt;T[]&gt;</span></code> can now also detect out-of-bounds
accesses for a limited set of types (non-trivially destructible types) when the ABI configuration is disabled.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ABI_BOUNDED_ITERATORS_IN_STD_ARRAY</span></code> ABI configuration was added, which allows storing valid bounds
in <code class="docutils literal notranslate"><span class="pre">std::array::iterator</span></code> and detecting OOB accesses when the appropriate hardening mode is enabled.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">input_iterator</span></code>-pair overload of <code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">assign(InputIt,</span> <span class="pre">InputIt)</span></code> has been optimized for <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>,
resulting in a performance improvement of up to 2x for trivial element types (e.g., <code class="docutils literal notranslate"><span class="pre">std::vector&lt;int&gt;</span></code>), and up
to 3.4x for non-trivial element types (e.g., <code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::vector&lt;int&gt;&gt;</span></code>).</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">input_iterator</span></code>-pair overload of <code class="docutils literal notranslate"><span class="pre">iterator</span> <span class="pre">insert(const_iterator,</span> <span class="pre">InputIt,</span> <span class="pre">InputIt)</span></code> has been optimized
for <code class="docutils literal notranslate"><span class="pre">std::vector</span></code>, resulting in a performance improvement of up to 10x for <code class="docutils literal notranslate"><span class="pre">std::vector&lt;int&gt;</span></code>, and up to 2.3x
for <code class="docutils literal notranslate"><span class="pre">std::vector&lt;std::vector&lt;int&gt;&gt;</span></code>.</p></li>
<li><p>On Windows, <code class="docutils literal notranslate"><span class="pre">&lt;system_error&gt;</span></code>’s <code class="docutils literal notranslate"><span class="pre">std::system_category</span></code> is now distinct from <code class="docutils literal notranslate"><span class="pre">std::generic_category</span></code>. The behavior
on other operating systems is unchanged.</p>
<p>On Windows – unlike on Unix systems – the libc and system APIs use distinct error codes. The libc functions return
<code class="docutils literal notranslate"><span class="pre">errno.h</span></code> error codes via the <code class="docutils literal notranslate"><span class="pre">errno</span></code> global, while Win32 API functions return <code class="docutils literal notranslate"><span class="pre">winerror.h</span></code> error codes via
<code class="docutils literal notranslate"><span class="pre">GetLastError()</span></code>.</p>
<p>The C++ standard’s <code class="docutils literal notranslate"><span class="pre">std::error_code</span></code> and <code class="docutils literal notranslate"><span class="pre">std::error_category</span></code> functionality was designed to support multiple
error domains, precisely in order to handle situations such as this. However, libc++ formerly treated
<code class="docutils literal notranslate"><span class="pre">generic_category()</span></code> and <code class="docutils literal notranslate"><span class="pre">system_category()</span></code> as equivalent, even on Windows. It now implements the intended split,
where <code class="docutils literal notranslate"><span class="pre">system_category</span></code> represents native <code class="docutils literal notranslate"><span class="pre">winerror.h</span></code> error codes, and <code class="docutils literal notranslate"><span class="pre">generic_category</span></code> represents libc error
codes (and, equivalently, <code class="docutils literal notranslate"><span class="pre">std::errc::*</span></code> errors).</p>
<p>This change enables code like <code class="docutils literal notranslate"><span class="pre">std::error_code(GetLastError(),</span> <span class="pre">std::system_category())</span> <span class="pre">==</span>
<span class="pre">std::errc::invalid_argument</span></code> to function as desired: constructing an <code class="docutils literal notranslate"><span class="pre">error_code</span></code> with the Windows error number in
the “system” category, and then mapping it to a generic code with <code class="docutils literal notranslate"><span class="pre">error_condition</span></code>, for comparison with the
<code class="docutils literal notranslate"><span class="pre">std::errc</span></code> constant.</p>
<p>This is an incompatible change: <code class="docutils literal notranslate"><span class="pre">std::error_code(ENOSYS,</span> <span class="pre">std::system_category())</span> <span class="pre">==</span>
<span class="pre">std::errc::function_not_supported</span></code> would formerly have returned true, but now returns false on Windows. Code
providing a number from the <code class="docutils literal notranslate"><span class="pre">errno.h</span></code> domain should be migrated to construct a <code class="docutils literal notranslate"><span class="pre">generic_category</span></code> error_code,
instead. (E.g., use <code class="docutils literal notranslate"><span class="pre">std::error_code(ENOSYS,</span> <span class="pre">std::generic_category())</span></code>). The new behavior matches MSVC.</p>
</li>
<li><p>On Windows, the <code class="docutils literal notranslate"><span class="pre">std::filesystem</span></code> library now returns the Win32 <code class="docutils literal notranslate"><span class="pre">system_category</span></code> error codes, where it’s feasible
to do so. This allows interrogation and reporting of the original error code, which is useful if multiple Windows
errors map to a single generic error (such as with <code class="docutils literal notranslate"><span class="pre">std::errc::no_such_file_or_directory</span></code>).</p>
<p>This is also a slightly-incompatible API change: code inspecting the raw integer value from the returned error_code
expecting an integer from <code class="docutils literal notranslate"><span class="pre">generic_category</span></code> (e.g. <code class="docutils literal notranslate"><span class="pre">err.value()</span> <span class="pre">==</span> <span class="pre">ENOTDIR</span></code>) will not work as desired. Instead,
such code should use the comparison operators which implicitly handle eror mappings, <code class="docutils literal notranslate"><span class="pre">err</span> <span class="pre">==</span>
<span class="pre">std::errc::not_a_directory</span></code>, or use <code class="docutils literal notranslate"><span class="pre">err.default_error_condition()</span></code> to map to an <code class="docutils literal notranslate"><span class="pre">error_condition</span></code>, and then test
its <code class="docutils literal notranslate"><span class="pre">value()</span></code> and <code class="docutils literal notranslate"><span class="pre">category()</span></code>.</p>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">std::stable_sort</span></code> uses radix sort for integral types now, which can improve the performance up to 10 times, depending
on type of sorted elements and the initial state of the sorted array.</p></li>
<li><p>Reduced the amount of debug information generated for internal typedefs. This reduces the size of debug builds.</p></li>
<li><p>Added <a class="reference internal" href="../Hardening.html#hardening"><span class="std std-ref">hardening mode</span></a> support for <code class="docutils literal notranslate"><span class="pre">forward_list</span></code> and <code class="docutils literal notranslate"><span class="pre">bitset</span></code>.</p></li>
<li><p>The performance of <code class="docutils literal notranslate"><span class="pre">std::getline</span></code> has been improved, resulting in a performance uplift of up to 10x.</p></li>
</ul>
</section>
<section id="deprecations-and-removals">
<h3><a class="toc-backref" href="#id6" role="doc-backlink">Deprecations and Removals</a><a class="headerlink" href="#deprecations-and-removals" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">LIBCXX_ENABLE_ASSERTIONS</span></code> CMake variable and the <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_ASSERTIONS</span></code> macro that were used to
enable the safe mode have been removed in LLVM 20. Please use <a class="reference internal" href="../Hardening.html#using-hardening-modes"><span class="std std-ref">support for hardening</span></a>
instead.</p></li>
<li><p>Support for the C++20 synchronization library (<code class="docutils literal notranslate"><span class="pre">&lt;barrier&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;latch&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">atomic::wait</span></code>, etc.) has been
removed in language modes prior to C++20. If you are using these features prior to C++20, you will need to
update to <code class="docutils literal notranslate"><span class="pre">-std=c++20</span></code>.</p></li>
<li><p>The relational operators for <code class="docutils literal notranslate"><span class="pre">std::chrono::weekday</span></code> has been removed entirely, and the
<code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_REMOVED_WEEKDAY_RELATIONAL_OPERATORS</span></code> macro is now ignored.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_ENABLE_REMOVED_ALLOCATOR_CONST</span></code> macro no longer has any effect. <code class="docutils literal notranslate"><span class="pre">std::allocator&lt;const</span> <span class="pre">T&gt;</span></code> is not
supported as an extension anymore, please migrate any code that uses e.g. <code class="docutils literal notranslate"><span class="pre">std::vector&lt;const</span> <span class="pre">T&gt;</span></code> to be
standards conforming.</p></li>
<li><p>Non-conforming member typedefs <code class="docutils literal notranslate"><span class="pre">base</span></code>, <code class="docutils literal notranslate"><span class="pre">iterator</span></code>, <code class="docutils literal notranslate"><span class="pre">const_iterator</span></code>, <code class="docutils literal notranslate"><span class="pre">size_type</span></code>, <code class="docutils literal notranslate"><span class="pre">difference_type</span></code>, and
<code class="docutils literal notranslate"><span class="pre">const_reference</span></code> of <code class="docutils literal notranslate"><span class="pre">std::bitset</span></code>, and member typedef <code class="docutils literal notranslate"><span class="pre">base</span></code> of <code class="docutils literal notranslate"><span class="pre">std::forward_list</span></code> and <code class="docutils literal notranslate"><span class="pre">std::list</span></code> are
removed. Previously, these member typedefs (except <code class="docutils literal notranslate"><span class="pre">const_reference</span></code>) were private but could cause ambiguity in name
lookup. Code that expects such ambiguity will possibly not compile in LLVM 20.</p></li>
<li><p>The function <code class="docutils literal notranslate"><span class="pre">__libcpp_verbose_abort()</span></code> is now <code class="docutils literal notranslate"><span class="pre">noexcept</span></code>, to match <code class="docutils literal notranslate"><span class="pre">std::terminate()</span></code>. (The combination of
<code class="docutils literal notranslate"><span class="pre">noexcept</span></code> and <code class="docutils literal notranslate"><span class="pre">[[noreturn]]</span></code> has special significance for function effects analysis.) For backwards compatibility,
the <code class="docutils literal notranslate"><span class="pre">_LIBCPP_VERBOSE_ABORT_NOT_NOEXCEPT</span></code> macro can be defined to make the function non-<code class="docutils literal notranslate"><span class="pre">noexcept</span></code>. That macro
will be removed in LLVM 21.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">&lt;ccomplex&gt;</span></code>, <code class="docutils literal notranslate"><span class="pre">&lt;cstdalign&gt;</span></code> (previously missing), <code class="docutils literal notranslate"><span class="pre">&lt;cstdbool&gt;</span></code>, and <code class="docutils literal notranslate"><span class="pre">&lt;ctgmath&gt;</span></code> are deprecated since C++17 as
specified by the standard. They, together with <code class="docutils literal notranslate"><span class="pre">&lt;ciso646&gt;</span></code>, are removed in C++20, but libc++ still provides these
headers as an extension and only deprecates them. The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_DISABLE_DEPRECATION_WARNINGS</span></code> macro can be defined to
suppress deprecation for these headers.</p></li>
<li><p>The pointer safety functions <code class="docutils literal notranslate"><span class="pre">declare_reachable</span></code>, <code class="docutils literal notranslate"><span class="pre">declare_no_pointers</span></code>, <code class="docutils literal notranslate"><span class="pre">undeclare_no_pointers</span></code> and
<code class="docutils literal notranslate"><span class="pre">__undeclare_reachable</span></code> have been removed from the library. These functions were never implemented in a non-trivial
way, making it very unlikely that any binary depends on them.</p></li>
<li><p>Non-conforming extension <code class="docutils literal notranslate"><span class="pre">packaged_task::result_type</span></code> is deprecated. It will be removed in LLVM 21.</p></li>
<li><p>The changes for <code class="docutils literal notranslate"><span class="pre">ranges::zip_view</span></code> from <a class="reference external" href="https://wg21.link/P2165R4">P2165R4</a> have been implemented. This can
lead to code assuming that <code class="docutils literal notranslate"><span class="pre">zip_view</span></code> produces <code class="docutils literal notranslate"><span class="pre">std::pair</span></code> to stop compiling now that it produces <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code>.
The cases are rare since <code class="docutils literal notranslate"><span class="pre">tuple</span></code> and <code class="docutils literal notranslate"><span class="pre">pair</span></code> are compatible for the most part, but this can lead to code that
was previously accepted now being rejected. This is necessary for libc++ to be conforming, so we don’t provide any
way to opt-out of that behavior.</p></li>
</ul>
</section>
<section id="upcoming-deprecations-and-removals">
<h3><a class="toc-backref" href="#id7" role="doc-backlink">Upcoming Deprecations and Removals</a><a class="headerlink" href="#upcoming-deprecations-and-removals" title="Link to this heading">¶</a></h3>
<section id="llvm-21">
<h4>LLVM 21<a class="headerlink" href="#llvm-21" title="Link to this heading">¶</a></h4>
<ul>
<li><p>The status of the C++03 implementation will be frozen after the LLVM 21 release. This means that starting in LLVM 22,
non-critical bug fixes may not be back-ported to C++03, including LWG issues. C++03 is a legacy platform, where most
projects are no longer actively maintained. To reduce the amount of fixes required to keep such legacy projects
compiling with up-to-date toolchains, libc++ will aim to freeze the status of the headers in C++03 mode to avoid
unintended breaking changes. See <a class="reference external" href="https://discourse.llvm.org/t/rfc-freezing-c-03-headers-in-libc">https://discourse.llvm.org/t/rfc-freezing-c-03-headers-in-libc</a> for more details.</p>
<p>If you are using C++03 in your project, you should consider moving to a newer version of the Standard to get the most
out of libc++.</p>
</li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">_LIBCPP_VERBOSE_ABORT_NOT_NOEXCEPT</span></code> macro will be removed in LLVM 21, making <code class="docutils literal notranslate"><span class="pre">std::__libcpp_verbose_abort</span></code>
unconditionally <code class="docutils literal notranslate"><span class="pre">noexcept</span></code>.</p></li>
<li><p>Non-conforming extension <code class="docutils literal notranslate"><span class="pre">packaged_task::result_type</span></code> will be removed in LLVM 21.</p></li>
</ul>
</section>
</section>
<section id="abi-affecting-changes">
<h3><a class="toc-backref" href="#id8" role="doc-backlink">ABI Affecting Changes</a><a class="headerlink" href="#abi-affecting-changes" title="Link to this heading">¶</a></h3>
<ul class="simple">
<li><p>The ABI breaks for removing undefined behaviour in <code class="docutils literal notranslate"><span class="pre">std::forward_list</span></code>, <code class="docutils literal notranslate"><span class="pre">std::list</span></code>, <code class="docutils literal notranslate"><span class="pre">std::map</span></code>, <code class="docutils literal notranslate"><span class="pre">std::set</span></code>,
<code class="docutils literal notranslate"><span class="pre">std::multimap</span></code>, <code class="docutils literal notranslate"><span class="pre">std::multiset</span></code>, <code class="docutils literal notranslate"><span class="pre">std::unordered_map</span></code>, <code class="docutils literal notranslate"><span class="pre">std::unordered_set</span></code>, <code class="docutils literal notranslate"><span class="pre">std::unordered_multimap</span></code> and
<code class="docutils literal notranslate"><span class="pre">std::unordered_multiset</span></code> are now applied unconditionally. This only affects fancy pointers which have a different
value representation when pointing at the base of an internal node type instead of the type itself. A size or
alignment difference is diagnosed, but more subtle ABI breaks may result in unexpected behaviour.</p></li>
<li><p>The internal structure <code class="docutils literal notranslate"><span class="pre">__compressed_pair</span></code> has been replaced with <code class="docutils literal notranslate"><span class="pre">[[no_unique_address]]</span></code>. The ABI impact is:</p>
<ul>
<li><p>When using the Itanium ABI (most non-MSVC platforms), empty types are now placed at the beginning of the enclosing
object instead of where the beginning of the <code class="docutils literal notranslate"><span class="pre">__compressed_pair</span></code> subobject was. This is only observable by
checking the address of the empty allocator, equality comparator or hasher.</p></li>
<li><p>Additionally, using an overaligned empty type as an allocator, comparator or hasher in the associative containers
(and only those containers) may result in the container’s object object size and data layout changing beyond only
the address of the empty member.</p></li>
<li><p>When using the MSVC ABI, this change results in some classes having a completely different memory layout, so this is
a genuine ABI break. However, the library does not currently guarantee ABI stability on MSVC platforms.</p></li>
</ul>
</li>
<li><p>The localization support base API has been reimplemented, leading to different functions being exported from the
libc++ built library on Windows and Windows-like platforms.</p></li>
<li><p>The changes for <code class="docutils literal notranslate"><span class="pre">ranges::zip_view</span></code> from <a class="reference external" href="https://wg21.link/P2165R4">P2165R4</a> have been implemented. This changes
the element type of <code class="docutils literal notranslate"><span class="pre">zip_view</span></code> from a <code class="docutils literal notranslate"><span class="pre">std::pair</span></code> to a <code class="docutils literal notranslate"><span class="pre">std::tuple</span></code> in some cases. This is technically an ABI
break, however since <code class="docutils literal notranslate"><span class="pre">zip_view</span></code> is generally not an ABI sensitive type, we don’t expect users to encounter any
issues and we don’t provide a way to change this behavior, which would make libc++ non-conforming.</p></li>
</ul>
</section>
</section>
</section>


      </div>
      <div class="bottomnav" role="navigation" aria-label="bottom navigation">
      
        <p>
        «&#160;&#160;<a href="../ReleaseNotes.html">Libc++ 22.0.0 (In-Progress) Release Notes</a>
        &#160;&#160;::&#160;&#160;
        <a class="uplink" href="../index.html">Contents</a>
        &#160;&#160;::&#160;&#160;
        <a href="21.html">Libc++ 21.0.0 (In-Progress) Release Notes</a>&#160;&#160;»
        </p>

      </div>

    <div class="footer" role="contentinfo">
    &#169; Copyright 2011-2026, LLVM Project.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>