

<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta charset="utf-8" />
    <title>LLVM 11.0.0 Release Notes &#8212; LLVM 11 documentation</title>
    <link rel="stylesheet" href="_static/llvm-theme.css" type="text/css" />
    <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
    <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
    <script type="text/javascript" src="_static/jquery.js"></script>
    <script type="text/javascript" src="_static/underscore.js"></script>
    <script type="text/javascript" src="_static/doctools.js"></script>
    <script type="text/javascript" src="_static/language_data.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="How to start LLVM Social in your town" href="MeetupGuidelines.html" />
    <link rel="prev" title="How To Add Your Build Configuration To LLVM Buildbot Infrastructure" href="HowToAddABuilder.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="MeetupGuidelines.html" title="How to start LLVM Social in your town"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="HowToAddABuilder.html" title="How To Add Your Build Configuration To LLVM Buildbot Infrastructure"
             accesskey="P">previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingInvolved.html" accesskey="U">Getting Involved</a> &#187;</li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="https://llvm.org/docs/UserGuides.html">User Guides</a></li>
    <li><a href="https://llvm.org/docs/Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/Contributing.html">Contributing to LLVM</a></li>
    <li><a href="https://llvm.org/docs/HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#irc">IRC</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/FAQ.html">FAQ</a></li>
    <li><a href="https://llvm.org/docs/Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project//">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/ReleaseNotes.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" />
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="llvm-11-0-0-release-notes">
<h1>LLVM 11.0.0 Release Notes<a class="headerlink" href="#llvm-11-0-0-release-notes" title="Permalink to this headline">¶</a></h1>
<div class="contents local topic" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#introduction" id="id1">Introduction</a></p></li>
<li><p><a class="reference internal" href="#deprecated-and-removed-features-apis" id="id2">Deprecated and Removed Features/APIs</a></p></li>
<li><p><a class="reference internal" href="#non-comprehensive-list-of-changes-in-this-release" id="id3">Non-comprehensive list of changes in this release</a></p>
<ul>
<li><p><a class="reference internal" href="#changes-to-the-llvm-ir" id="id4">Changes to the LLVM IR</a></p></li>
<li><p><a class="reference internal" href="#changes-to-building-llvm" id="id5">Changes to building LLVM</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-jit-infrastructure" id="id6">Changes to the JIT infrastructure</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-aarch64-backend" id="id7">Changes to the AArch64 Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-arm-backend" id="id8">Changes to the ARM Backend</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-powerpc-target" id="id9">Changes to the PowerPC Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-risc-v-target" id="id10">Changes to the RISC-V Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-systemz-target" id="id11">Changes to the SystemZ Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-x86-target" id="id12">Changes to the X86 Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-amdgpu-target" id="id13">Changes to the AMDGPU Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-avr-target" id="id14">Changes to the AVR Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-webassembly-target" id="id15">Changes to the WebAssembly Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-windows-target" id="id16">Changes to the Windows Target</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-dag-infrastructure" id="id17">Changes to the DAG infrastructure</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-debug-info" id="id18">Changes to the Debug Info</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-gold-plugin" id="id19">Changes to the Gold Plugin</a></p></li>
<li><p><a class="reference internal" href="#changes-to-the-llvm-tools" id="id20">Changes to the LLVM tools</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#external-open-source-projects-using-llvm-11" id="id21">External Open Source Projects Using LLVM 11</a></p>
<ul>
<li><p><a class="reference internal" href="#zig-programming-language" id="id22">Zig Programming Language</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#additional-information" id="id23">Additional Information</a></p></li>
</ul>
</div>
<div class="section" id="introduction">
<h2><a class="toc-backref" href="#id1">Introduction</a><a class="headerlink" href="#introduction" title="Permalink to this headline">¶</a></h2>
<p>This document contains the release notes for the LLVM Compiler Infrastructure,
release 11.0.0.  Here we describe the status of LLVM, including major improvements
from the previous release, improvements in various subprojects of LLVM, and
some of the current users of the code.  All LLVM releases may be downloaded
from the <a class="reference external" href="https://llvm.org/releases/">LLVM releases web site</a>.</p>
<p>For more information about LLVM, including information about the latest
release, please check out the <a class="reference external" href="https://llvm.org/">main LLVM web site</a>.  If you
have questions or comments, the <a class="reference external" href="https://lists.llvm.org/mailman/listinfo/llvm-dev">LLVM Developer’s Mailing List</a> is a good place to send
them.</p>
</div>
<div class="section" id="deprecated-and-removed-features-apis">
<h2><a class="toc-backref" href="#id2">Deprecated and Removed Features/APIs</a><a class="headerlink" href="#deprecated-and-removed-features-apis" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>BG/Q support, including QPX, will be removed in the 12.0.0 release.</p></li>
</ul>
</div>
<div class="section" id="non-comprehensive-list-of-changes-in-this-release">
<h2><a class="toc-backref" href="#id3">Non-comprehensive list of changes in this release</a><a class="headerlink" href="#non-comprehensive-list-of-changes-in-this-release" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li><p>The llgo frontend has been removed for now, but may be resurrected in the
future.</p></li>
</ul>
<div class="section" id="changes-to-the-llvm-ir">
<h3><a class="toc-backref" href="#id4">Changes to the LLVM IR</a><a class="headerlink" href="#changes-to-the-llvm-ir" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The callsite attribute <a class="reference external" href="https://llvm.org/docs/LangRef.html#call-site-attributes">vector-function-abi-variant</a> has been
added to describe the mapping between scalar functions and vector
functions, to enable vectorization of call sites. The information
provided by the attribute is interfaced via the API provided by the
<code class="docutils literal notranslate"><span class="pre">VFDatabase</span></code> class. When scanning through the set of vector
functions associated with a scalar call, the loop vectorizer now
relies on <code class="docutils literal notranslate"><span class="pre">VFDatabase</span></code>, instead of <code class="docutils literal notranslate"><span class="pre">TargetLibraryInfo</span></code>.</p></li>
<li><p><cite>dereferenceable</cite> attributes and metadata on pointers no longer imply
anything about the alignment of the pointer in question. Previously, some
optimizations would make assumptions based on the type of the pointer. This
behavior was undocumented. To preserve optimizations, frontends may need to
be updated to generate appropriate <cite>align</cite> attributes and metadata.</p></li>
<li><p>The DIModule metadata is extended to contain file and line number
information. This information is used to represent Fortran modules debug
info at IR level.</p></li>
<li><p>LLVM IR now supports two distinct <code class="docutils literal notranslate"><span class="pre">llvm::FixedVectorType</span></code> and
<code class="docutils literal notranslate"><span class="pre">llvm::ScalableVectorType</span></code> vector types, both derived from the
base class <code class="docutils literal notranslate"><span class="pre">llvm::VectorType</span></code>. A number of algorithms dealing with
IR vector types have been updated to make sure they work for both
scalable and fixed vector types. Where possible, the code has been
made generic to cover both cases using the base class. Specifically,
places that were using the type <code class="docutils literal notranslate"><span class="pre">unsigned</span></code> to count the number of
lanes of a vector are now using <code class="docutils literal notranslate"><span class="pre">llvm::ElementCount</span></code>. In places
where <code class="docutils literal notranslate"><span class="pre">uint64_t</span></code> was used to denote the size in bits of a IR type
we have partially migrated the codebase to using <code class="docutils literal notranslate"><span class="pre">llvm::TypeSize</span></code>.</p></li>
<li><p>Branching on <code class="docutils literal notranslate"><span class="pre">undef</span></code>/<code class="docutils literal notranslate"><span class="pre">poison</span></code> is undefined behavior. It is needed for
correctly analyzing value ranges based on branch conditions. This is
consistent with MSan’s behavior as well.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">memset</span></code>/<code class="docutils literal notranslate"><span class="pre">memcpy</span></code>/<code class="docutils literal notranslate"><span class="pre">memmove</span></code> can take <code class="docutils literal notranslate"><span class="pre">undef</span></code>/<code class="docutils literal notranslate"><span class="pre">poison</span></code> pointer(s)
if the size to fill is zero.</p></li>
<li><p>Passing <code class="docutils literal notranslate"><span class="pre">undef</span></code>/<code class="docutils literal notranslate"><span class="pre">poison</span></code> to a standard I/O library function call
(<cite>printf</cite>/<cite>fputc</cite>/…) is undefined behavior. The new <code class="docutils literal notranslate"><span class="pre">noundef</span></code> attribute
is attached to the functions’ arguments. The full list is available at
<code class="docutils literal notranslate"><span class="pre">llvm::inferLibFuncAttributes</span></code>.</p></li>
</ul>
</div>
<div class="section" id="changes-to-building-llvm">
<h3><a class="toc-backref" href="#id5">Changes to building LLVM</a><a class="headerlink" href="#changes-to-building-llvm" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The LLVM project has started the migration towards Python 3, and the build
system now prefers Python 3 whenever available.  If the Python 3 interpreter
(or libraries) are not found, the build system will, for the time being, fall
back to Python 2.  It is recommended that downstream projects migrate to
Python 3 as Python 2 has been end-of-life’d by the Python Software
Foundation.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-jit-infrastructure">
<h3><a class="toc-backref" href="#id6">Changes to the JIT infrastructure</a><a class="headerlink" href="#changes-to-the-jit-infrastructure" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>LLJIT now supports execution of static inits / deinits via the
LLJIT::initialize and LLJIT::deinitialize methods</p></li>
<li><p>Static libraries can now be added to a JITDylib using the
StaticLibraryDefinitionGenerator class</p></li>
<li><p>A C API has been added for OrcV2 (llvm-project/llvm/include/llvm-c/Orc.h)</p></li>
<li><p>Several OrcV2 example projects have been added to
llvm-project/llvm/examples/OrcV2Examples</p></li>
<li><p>Many bug fixes and API improvements</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-aarch64-backend">
<h3><a class="toc-backref" href="#id7">Changes to the AArch64 Backend</a><a class="headerlink" href="#changes-to-the-aarch64-backend" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Back up and restore x18 in functions with windows calling convention on
non-windows OSes.</p></li>
<li><p>Clearly error out on unsupported relocations when targeting COFF, instead
of silently accepting some (without being able to do what was requested).</p></li>
<li><p>Implemented codegen support for the SVE C-language intrinsics
documented in <a class="reference external" href="https://developer.arm.com/documentation/100987/">Arm C Language Extensions (ACLE) for SVE</a> (version
<code class="docutils literal notranslate"><span class="pre">00bet5</span></code>). For more information, see the <code class="docutils literal notranslate"><span class="pre">clang</span></code> 11 release
notes.</p></li>
<li><p>Added support for Armv8.6-A:</p>
<p>Assembly support for the following extensions:</p>
<ul class="simple">
<li><p>Enhanced Counter Virtualization (ARMv8.6-ECV).</p></li>
<li><p>Fine Grained Traps (ARMv8.6-FGT).</p></li>
<li><p>Activity Monitors virtualization (ARMv8.6-AMU).</p></li>
<li><p>Data gathering hint (ARMv8.0-DGH).</p></li>
</ul>
<p>Assembly and intrinsics support for the Armv8.6-A Matrix Multiply extension
for Neon and SVE vectors.</p>
<p>Support for the ARMv8.2-BF16 BFloat16 extension. This includes a new C-level
storage-only <cite>__bf16</cite> type, a <cite>BFloat</cite> IR type, a <cite>bf16</cite> MVT, and assembly
and intrinsics support.</p>
</li>
<li><p>Added support for Cortex-A34, Cortex-A77, Cortex-A78 and Cortex-X1 cores.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-arm-backend">
<h3><a class="toc-backref" href="#id8">Changes to the ARM Backend</a><a class="headerlink" href="#changes-to-the-arm-backend" title="Permalink to this headline">¶</a></h3>
<ul>
<li><p>Implemented C-language intrinsics for the full Arm v8.1-M MVE instruction
set. <code class="docutils literal notranslate"><span class="pre">&lt;arm_mve.h&gt;</span></code> now supports the complete API defined in the Arm C
Language Extensions.</p></li>
<li><p>Added support for assembly for the optional Custom Datapath Extension (CDE)
for Arm M-profile targets.</p></li>
<li><p>Implemented C-language intrinsics <code class="docutils literal notranslate"><span class="pre">&lt;arm_cde.h&gt;</span></code> for the CDE instruction set.</p></li>
<li><p>Clang now defaults to <code class="docutils literal notranslate"><span class="pre">-fomit-frame-pointer</span></code> when targeting non-Android
Linux for arm and thumb when optimizations are enabled. Users that were
previously not specifying a value and relying on the implicit compiler
default may wish to specify <code class="docutils literal notranslate"><span class="pre">-fno-omit-frame-pointer</span></code> to get the old
behavior. This improves compatibility with GCC.</p></li>
<li><p>Added support for Armv8.6-A:</p>
<p>Assembly and intrinsics support for the Armv8.6-A Matrix Multiply extension
for Neon vectors.</p>
<p>Support for the ARMv8.2-AA32BF16 BFloat16 extension. This includes a new
C-level storage-only <cite>__bf16</cite> type, a <cite>BFloat</cite> IR type, a <cite>bf16</cite> MVT, and
assembly and intrinsics support.</p>
</li>
<li><p>Added support for CMSE.</p></li>
<li><p>Added support for Cortex-M55, Cortex-A77, Cortex-A78 and Cortex-X1 cores.</p></li>
<li><p>The Machine Outliner is now supported for ARM and Thumb2, it is not
turned on by default and can be enabled with the <code class="docutils literal notranslate"><span class="pre">-moutline</span></code> clang flag.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-powerpc-target">
<h3><a class="toc-backref" href="#id9">Changes to the PowerPC Target</a><a class="headerlink" href="#changes-to-the-powerpc-target" title="Permalink to this headline">¶</a></h3>
<p>Optimization:</p>
<ul class="simple">
<li><p>Improved Loop Unroll-and-Jam legality checks, allowing it to handle more than two level loop nests</p></li>
<li><p>Improved Loop Unroll to be able to unroll more loops</p></li>
<li><p>Implemented an option to allow loop fusion to work on loops with different constant trip counts</p></li>
</ul>
<p>Codegen:</p>
<ul class="simple">
<li><p>POWER10 support</p>
<ul>
<li><p>Added PC Relative addressing</p></li>
<li><p>Added __int128 vector bool support</p></li>
</ul>
</li>
<li><p>Security enhancement via probe-stack attribute support to protect against stack clash</p></li>
<li><p>Floating point support enhancements</p>
<ul>
<li><p>Improved half precision and quad precision support, including GLIBC</p></li>
<li><p>constrained FP operation support for arithmetic/rounding/max/min</p></li>
<li><p>cleaning up fast math flags checks in DAGCombine, Legalizer, and Lowering</p></li>
</ul>
</li>
<li><p>Performance improvements from instruction exploitation, especially for vector permute on LE</p></li>
<li><p>Scheduling enhancements</p>
<ul>
<li><p>Added MacroFusion for POWER8</p></li>
<li><p>Added post-ra heuristics for POWER9</p></li>
</ul>
</li>
<li><p>Target dependent passes tuning</p>
<ul>
<li><p>Updated LoopStrengthReduce to use instruction number as first priority</p></li>
<li><p>Enhanced MachineCombiner to expose more ILP</p></li>
</ul>
</li>
<li><p>Code quality and maintenance enhancements</p>
<ul>
<li><p>Enabled more machine verification passes</p></li>
<li><p>Added ability to parse and emit additional extended mnemonics</p></li>
<li><p>Numerous bug fixes</p></li>
</ul>
</li>
</ul>
<p>AIX Support Improvements:</p>
<ul class="simple">
<li><p>Enabled compile and link such that a simple &lt;stdio.h&gt; “Hello World” program works with standard headers</p></li>
<li><p>Added support for the C calling convention for non-vector code</p></li>
<li><p>Implemented correct stack frame layout for functions</p></li>
<li><p>In llvm-objdump, added support for relocations, improved selection of symbol labels, and added the –symbol-description option</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-risc-v-target">
<h3><a class="toc-backref" href="#id10">Changes to the RISC-V Target</a><a class="headerlink" href="#changes-to-the-risc-v-target" title="Permalink to this headline">¶</a></h3>
<p>New features:</p>
<ul class="simple">
<li><p>After consultation through an RFC, the RISC-V backend now accepts patches for
proposed instruction set extensions that have not yet been ratified.  For these
experimental extensions, there is no expectation of ongoing support - the
compiler support will continue to change until the specification is finalised.
In line with this policy, MC layer and code generation support was added for
version 0.92 of the proposed Bit Manipulation Extension and MC layer support
was added for version 0.8 of the proposed RISC-V Vector instruction set
extension. As these extensions are not yet ratified, compiler support will
continue to change to match the specifications until they are finalised.</p></li>
<li><p>ELF attribute sections are now created, encoding information such as the ISA
string.</p></li>
<li><p>Support for saving/restoring callee-saved registers via libcalls (a code
size optimisation).</p></li>
<li><p>llvm-objdump will now print branch targets as part of disassembly.</p></li>
</ul>
<p>Improvements:</p>
<ul class="simple">
<li><p>If an immediate can be generated using a pair of <cite>addi</cite> instructions, that
pair will be selected rather than materialising the immediate into a
separate register with an <cite>lui</cite> and <cite>addi</cite> pair.</p></li>
<li><p>Multiplication by a constant was optimised.</p></li>
<li><p><cite>addi</cite> instructions are now folded into the offset of a load/store instruction
even if the load/store itself has a non-zero offset, when it is safe to do
so.</p></li>
<li><p>Additional target hooks were implemented to minimise generation of
unnecessary control flow instruction.</p></li>
<li><p>The RISC-V backend’s load/store peephole optimisation pass now supports
constant pools, improving code generation for floating point constants.</p></li>
<li><p>Debug scratch register names <cite>dscratch0</cite> and <cite>dscratch1</cite> are now recognised in
addition to the legacy <cite>dscratch</cite> register name.</p></li>
<li><p>Codegen for checking isnan was improved, removing a redundant <cite>and</cite>.</p></li>
<li><p>The <cite>dret</cite> instruction is now supported by the MC layer.</p></li>
<li><p><cite>.option pic</cite> and <cite>.option nopic</cite> are now supported in assembly and <cite>.reloc</cite>
was extended to support arbitrary relocation types.</p></li>
<li><p>Scheduling info metadata was improved.</p></li>
<li><p>The <cite>jump</cite> pseudo instruction is now supported.</p></li>
</ul>
<p>Bug fixes:</p>
<ul class="simple">
<li><p>A failure to insert indirect branches in position independent code
was fixed.</p></li>
<li><p>The calculated expanded size of atomic pseudo operations was fixed, avoiding
“fixup value out of range” errors during branch relaxation for some inputs.</p></li>
<li><p>The <cite>mcountinhibit</cite> CSR is now recognised.</p></li>
<li><p>The correct libcall is now emitted for converting a float/double to a 32-bit
signed or unsigned integer on RV64 targets lacking the F or D extensions.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-systemz-target">
<h3><a class="toc-backref" href="#id11">Changes to the SystemZ Target</a><a class="headerlink" href="#changes-to-the-systemz-target" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added support for the MemorySanitizer and the LeakSanitizer.</p></li>
<li><p>Added support for the <code class="docutils literal notranslate"><span class="pre">-fstack-clash-protection</span></code> command line option.</p></li>
<li><p>Enhanced the assembler parser to allow using <cite>%r0</cite> even in an address
register context, and to allow specifying registers using plain integer
numbers instead of register names everywhere.</p></li>
<li><p>Fixed wrong code generation violating the platform ABI when passing
a C++ class (not struct) type having only a single member of
floating-point type.</p></li>
<li><p>Fixed wrong code generation when using the <cite>vec_store_len_r</cite> or
<cite>vec_load_len_r</cite> intrinsics with an immediate length argument of
16 or larger.</p></li>
<li><p>Miscellaneous codegen enhancements, in particular to improve vector code.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-x86-target">
<h3><a class="toc-backref" href="#id12">Changes to the X86 Target</a><a class="headerlink" href="#changes-to-the-x86-target" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Functions with the probe-stack attribute set to “inline-asm” are now protected
against stack clash without the need of a third-party probing function and
with limited impact on performance.</p></li>
<li><p>-x86-enable-old-knl-abi command line switch has been removed. v32i16/v64i8
vectors are always passed in ZMM register when avx512f is enabled and avx512bw
is disabled.</p></li>
<li><p>Vectors larger than 512 bits with i16 or i8 elements will be passed in
multiple ZMM registers when avx512f is enabled. Previously this required
avx512bw otherwise they would split into multiple YMM registers. This means
vXi16/vXi8 vectors are consistently treated the same as
vXi32/vXi64/vXf64/vXf32 vectors of the same total width.</p></li>
<li><p>Support was added for Intel AMX instructions.</p></li>
<li><p>Support was added for TSXLDTRK instructions.</p></li>
<li><p>A pass was added for mitigating the Load Value Injection vulnerability.</p></li>
<li><p>The Speculative Execution Side Effect Suppression pass was added which can
be used to as a last resort mitigation for speculative execution related
CPU vulnerabilities.</p></li>
<li><p>Improved recognition of boolean vector reductions with better MOVMSKB/PTEST
handling</p></li>
<li><p>Exteded recognition of rotation patterns to handle funnel shift as well,
allowing us to remove the existing x86-specific SHLD/SHRD combine.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-amdgpu-target">
<h3><a class="toc-backref" href="#id13">Changes to the AMDGPU Target</a><a class="headerlink" href="#changes-to-the-amdgpu-target" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>The backend default denormal handling mode has been switched to on
for all targets for all compute function types. Frontends wishing to
retain the old behavior should explicitly request f32 denormal
flushing.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-avr-target">
<h3><a class="toc-backref" href="#id14">Changes to the AVR Target</a><a class="headerlink" href="#changes-to-the-avr-target" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Moved from an experimental backend to an official backend. AVR support is now
included by default in all LLVM builds and releases and is available under
the “avr-unknown-unknown” target triple.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-webassembly-target">
<h3><a class="toc-backref" href="#id15">Changes to the WebAssembly Target</a><a class="headerlink" href="#changes-to-the-webassembly-target" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Programs which don’t have a “main” function, called “reactors” are now
properly supported, with a new <cite>-mexec-model=reactor</cite> flag. Programs which
previously used <cite>-Wl,–no-entry</cite> to avoid having a main function should
switch to this new flag, so that static initialization is properly
performed.</p></li>
<li><p><cite>__attribute__((visibility(“protected”)))</cite> now evokes a warning, as
WebAssembly does not support “protected” visibility.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-windows-target">
<h3><a class="toc-backref" href="#id16">Changes to the Windows Target</a><a class="headerlink" href="#changes-to-the-windows-target" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Produce COFF weak external symbols for IR level weak symbols without a comdat
(e.g. for <cite>__attribute__((weak))</cite> in C)</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-dag-infrastructure">
<h3><a class="toc-backref" href="#id17">Changes to the DAG infrastructure</a><a class="headerlink" href="#changes-to-the-dag-infrastructure" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>A SelDag-level freeze instruction has landed. It is simply lowered as a copy
operation to MachineIR, but to make it fully correct either IMPLICIT_DEF
should be fixed or the equivalent FREEZE operation should be added to
MachineIR.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-debug-info">
<h3><a class="toc-backref" href="#id18">Changes to the Debug Info</a><a class="headerlink" href="#changes-to-the-debug-info" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>LLVM now supports the debug entry values (DW_OP_entry_value) production for
the x86, ARM, and AArch64 targets by default. Other targets can use
the utility by using the experimental option (“-debug-entry-values”).
This is a debug info feature that allows debuggers to recover the value of
optimized-out parameters by going up a stack frame and interpreting the values
passed to the callee. The feature improves the debugging user experience when
debugging optimized code.</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-gold-plugin">
<h3><a class="toc-backref" href="#id19">Changes to the Gold Plugin</a><a class="headerlink" href="#changes-to-the-gold-plugin" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">--plugin-opt=whole-program-visibility</span></code> is added to specify that classes have hidden LTO visibility in LTO and ThinLTO links of source files compiled with <code class="docutils literal notranslate"><span class="pre">-fwhole-program-vtables</span></code>. See <a class="reference external" href="https://clang.llvm.org/docs/LTOVisibility.html">LTOVisibility</a> for details.
(<a class="reference external" href="https://reviews.llvm.org/D71913">D71913</a>)</p></li>
</ul>
</div>
<div class="section" id="changes-to-the-llvm-tools">
<h3><a class="toc-backref" href="#id20">Changes to the LLVM tools</a><a class="headerlink" href="#changes-to-the-llvm-tools" title="Permalink to this headline">¶</a></h3>
<ul class="simple">
<li><p>Added an option (–show-section-sizes) to llvm-dwarfdump to show the sizes
of all debug sections within a file.</p></li>
<li><p>llvm-nm now implements the flag <code class="docutils literal notranslate"><span class="pre">--special-syms</span></code> and will filter out special
symbols, i.e. mapping symbols on ARM and AArch64, by default. This matches
the GNU nm behavior.</p></li>
<li><p>llvm-rc now tolerates -1 as menu item ID, supports the language id option
and allows string table values to be split into multiple string literals</p></li>
<li><p>llvm-lib supports adding import library objects in addition to regular
object files</p></li>
</ul>
</div>
</div>
<div class="section" id="external-open-source-projects-using-llvm-11">
<h2><a class="toc-backref" href="#id21">External Open Source Projects Using LLVM 11</a><a class="headerlink" href="#external-open-source-projects-using-llvm-11" title="Permalink to this headline">¶</a></h2>
<div class="section" id="zig-programming-language">
<h3><a class="toc-backref" href="#id22">Zig Programming Language</a><a class="headerlink" href="#zig-programming-language" title="Permalink to this headline">¶</a></h3>
<p><a class="reference external" href="https://ziglang.org">Zig</a>  is a general-purpose programming language and
toolchain for maintaining robust, optimal, and reusable software. In addition
to supporting LLVM as an optional backend, Zig links Clang and LLD to provide
an out-of-the-box cross compilation experience, not only for Zig code but for
C and C++ code as well. Using a sophisticated caching system, Zig lazily builds
from source compiler-rt, mingw-w64, musl, glibc, libcxx, libcxxabi, and
libunwind for the selected target - a “batteries included” drop-in for GCC/Clang
that works the same on every platform.</p>
</div>
</div>
<div class="section" id="additional-information">
<h2><a class="toc-backref" href="#id23">Additional Information</a><a class="headerlink" href="#additional-information" title="Permalink to this headline">¶</a></h2>
<p>A wide variety of additional information is available on the <a class="reference external" href="https://llvm.org/">LLVM web page</a>, in particular in the <a class="reference external" href="https://llvm.org/docs/">documentation</a> section.  The web page also contains versions of the
API documentation which is up-to-date with the Git version of the source
code.  You can access versions of these documents specific to this release by
going into the <code class="docutils literal notranslate"><span class="pre">llvm/docs/</span></code> directory in the LLVM tree.</p>
<p>If you have any questions or comments about LLVM, please feel free to contact
us via the <a class="reference external" href="https://llvm.org/docs/#mailing-lists">mailing lists</a>.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="MeetupGuidelines.html" title="How to start LLVM Social in your town"
             >next</a> |</li>
        <li class="right" >
          <a href="HowToAddABuilder.html" title="How To Add Your Build Configuration To LLVM Buildbot Infrastructure"
             >previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="GettingInvolved.html" >Getting Involved</a> &#187;</li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2003-2021, LLVM Project.
      Last updated on 2021-01-15.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 2.2.2.
    </div>
  </body>
</html>