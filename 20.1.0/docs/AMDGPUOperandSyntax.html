
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Syntax of AMDGPU Instruction Operands &#8212; LLVM 20.1.0 documentation</title>
    <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=649a27d8" />
    <link rel="stylesheet" type="text/css" href="_static/llvm-theme.css?v=96924833" />
    <script src="_static/documentation_options.js?v=383a7952"></script>
    <script src="_static/doctools.js?v=888ff710"></script>
    <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="AMDGPU Instruction Syntax" href="AMDGPUInstructionSyntax.html" />
    <link rel="prev" title="Syntax of AMDGPU Instruction Modifiers" href="AMDGPUModifierSyntax.html" />
<style type="text/css">
  table.right { float: right; margin-left: 20px; }
  table.right td { border: 1px solid #ccc; }
</style>

  </head><body>
<div class="logo">
  <a href="index.html">
    <img src="_static/logo.png"
         alt="LLVM Logo" width="250" height="88"/></a>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="AMDGPUInstructionSyntax.html" title="AMDGPU Instruction Syntax"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="AMDGPUModifierSyntax.html" title="Syntax of AMDGPU Instruction Modifiers"
             accesskey="P">previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="UserGuides.html" >User Guides</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="AMDGPUUsage.html" accesskey="U">User Guide for AMDGPU Backend</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Syntax of AMDGPU Instruction Operands</a></li> 
      </ul>
    </div>

      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">

<h3>Documentation</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/GettingStartedTutorials.html">Getting Started/Tutorials</a></li>
    <li><a href="https://llvm.org/docs/UserGuides.html">User Guides</a></li>
    <li><a href="https://llvm.org/docs/Reference.html">Reference</a></li>
</ul>

<h3>Getting Involved</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/Contributing.html">Contributing to LLVM</a></li>
    <li><a href="https://llvm.org/docs/HowToSubmitABug.html">Submitting Bug Reports</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#mailing-lists">Mailing Lists</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#discord">Discord</a></li>
    <li><a href="https://llvm.org/docs/GettingInvolved.html#meetups-and-social-events">Meetups and Social Events</a></li>
</ul>

<h3>Additional Links</h3>

<ul class="want-points">
    <li><a href="https://llvm.org/docs/FAQ.html">FAQ</a></li>
    <li><a href="https://llvm.org/docs/Lexicon.html">Glossary</a></li>
    <li><a href="https://llvm.org/pubs">Publications</a></li>
    <li><a href="https://github.com/llvm/llvm-project/">Github Repository</a></li>
</ul>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="_sources/AMDGPUOperandSyntax.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="syntax-of-amdgpu-instruction-operands">
<h1>Syntax of AMDGPU Instruction Operands<a class="headerlink" href="#syntax-of-amdgpu-instruction-operands" title="Link to this heading">¶</a></h1>
<nav class="contents local" id="contents">
<ul class="simple">
<li><p><a class="reference internal" href="#conventions" id="id1">Conventions</a></p></li>
<li><p><a class="reference internal" href="#operands" id="id2">Operands</a></p>
<ul>
<li><p><a class="reference internal" href="#v-32-bit" id="id3">v (32-bit)</a></p></li>
<li><p><a class="reference internal" href="#v-16-bit" id="id4">v (16-bit)</a></p></li>
<li><p><a class="reference internal" href="#a" id="id5">a</a></p></li>
<li><p><a class="reference internal" href="#s" id="id6">s</a></p></li>
<li><p><a class="reference internal" href="#trap" id="id7">trap</a></p></li>
<li><p><a class="reference internal" href="#ttmp" id="id8">ttmp</a></p></li>
<li><p><a class="reference internal" href="#tba" id="id9">tba</a></p></li>
<li><p><a class="reference internal" href="#tma" id="id10">tma</a></p></li>
<li><p><a class="reference internal" href="#flat-scratch" id="id11">flat_scratch</a></p></li>
<li><p><a class="reference internal" href="#xnack-mask" id="id12">xnack_mask</a></p></li>
<li><p><a class="reference internal" href="#vcc" id="id13">vcc</a></p></li>
<li><p><a class="reference internal" href="#m0" id="id14">m0</a></p></li>
<li><p><a class="reference internal" href="#exec" id="id15">exec</a></p></li>
<li><p><a class="reference internal" href="#vccz" id="id16">vccz</a></p></li>
<li><p><a class="reference internal" href="#execz" id="id17">execz</a></p></li>
<li><p><a class="reference internal" href="#scc" id="id18">scc</a></p></li>
<li><p><a class="reference internal" href="#lds-direct" id="id19">lds_direct</a></p></li>
<li><p><a class="reference internal" href="#null" id="id20">null</a></p></li>
<li><p><a class="reference internal" href="#inline-constant" id="id21">inline constant</a></p>
<ul>
<li><p><a class="reference internal" href="#iconst" id="id22">iconst</a></p></li>
<li><p><a class="reference internal" href="#fconst" id="id23">fconst</a></p></li>
<li><p><a class="reference internal" href="#ival" id="id24">ival</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#literal" id="id25">literal</a></p></li>
<li><p><a class="reference internal" href="#uimm8" id="id26">uimm8</a></p></li>
<li><p><a class="reference internal" href="#uimm32" id="id27">uimm32</a></p></li>
<li><p><a class="reference internal" href="#uimm20" id="id28">uimm20</a></p></li>
<li><p><a class="reference internal" href="#simm21" id="id29">simm21</a></p></li>
<li><p><a class="reference internal" href="#off" id="id30">off</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#numbers" id="id31">Numbers</a></p>
<ul>
<li><p><a class="reference internal" href="#integer-numbers" id="id32">Integer Numbers</a></p></li>
<li><p><a class="reference internal" href="#floating-point-numbers" id="id33">Floating-Point Numbers</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#expressions" id="id34">Expressions</a></p>
<ul>
<li><p><a class="reference internal" href="#absolute-expressions" id="id35">Absolute Expressions</a></p></li>
<li><p><a class="reference internal" href="#relocatable-expressions" id="id36">Relocatable Expressions</a></p></li>
<li><p><a class="reference internal" href="#operands-and-operations" id="id37">Operands and Operations</a></p></li>
<li><p><a class="reference internal" href="#syntax-of-expressions" id="id38">Syntax of Expressions</a></p></li>
<li><p><a class="reference internal" href="#binary-operators" id="id39">Binary Operators</a></p></li>
<li><p><a class="reference internal" href="#unary-operators" id="id40">Unary Operators</a></p></li>
<li><p><a class="reference internal" href="#symbols" id="id41">Symbols</a></p></li>
</ul>
</li>
<li><p><a class="reference internal" href="#type-and-size-conversion" id="id42">Type and Size Conversion</a></p>
<ul>
<li><p><a class="reference internal" href="#conversion-of-integer-values" id="id43">Conversion of Integer Values</a></p></li>
<li><p><a class="reference internal" href="#conversion-of-floating-point-values" id="id44">Conversion of Floating-Point Values</a></p></li>
<li><p><a class="reference internal" href="#conversion-of-relocatable-values" id="id45">Conversion of Relocatable Values</a></p></li>
</ul>
</li>
</ul>
</nav>
<section id="conventions">
<h2><a class="toc-backref" href="#id1" role="doc-backlink">Conventions</a><a class="headerlink" href="#conventions" title="Link to this heading">¶</a></h2>
<p>The following notation is used throughout this document:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Notation</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>{0..N}</p></td>
<td><p>Any integer value in the range from 0 to N (inclusive).</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;x&gt;</p></td>
<td><p>Syntax and meaning of <em>x</em> are explained elsewhere.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="operands">
<span id="amdgpu-syn-operands"></span><h2><a class="toc-backref" href="#id2" role="doc-backlink">Operands</a><a class="headerlink" href="#operands" title="Link to this heading">¶</a></h2>
<section id="v-32-bit">
<span id="amdgpu-synid-v"></span><h3><a class="toc-backref" href="#id3" role="doc-backlink">v (32-bit)</a><a class="headerlink" href="#v-32-bit" title="Link to this heading">¶</a></h3>
<p>Vector registers. There are 256 32-bit vector registers.</p>
<p>A sequence of <em>vector</em> registers may be used to operate with more than 32 bits of data.</p>
<p>Assembler currently supports tuples with 1 to 12, 16 and 32 <em>vector</em> registers.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>v</strong>&lt;N&gt;</p></td>
<td><p>A single 32-bit <em>vector</em> register.</p>
<p><em>N</em> must be a decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>v[</strong>&lt;N&gt;<strong>]</strong></p></td>
<td><p>A single 32-bit <em>vector</em> register.</p>
<p><em>N</em> may be specified as an
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>v[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></p></td>
<td><p>A sequence of (<em>K-N+1</em>) <em>vector</em> registers.</p>
<p><em>N</em> and <em>K</em> may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
or <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>[v</strong>&lt;N&gt;, <strong>v</strong>&lt;N+1&gt;, … <strong>v</strong>&lt;K&gt;<strong>]</strong></p></td>
<td><p>A sequence of (<em>K-N+1</em>) <em>vector</em> registers.</p>
<p>Register indices must be specified as decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note: <em>N</em> and <em>K</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><p><em>N</em> &lt;= <em>K</em>.</p></li>
<li><p>0 &lt;= <em>N</em> &lt;= 255.</p></li>
<li><p>0 &lt;= <em>K</em> &lt;= 255.</p></li>
<li><p><em>K-N+1</em> must be in the range from 1 to 12 or equal to 16 or 32.</p></li>
</ul>
<p>GFX90A and GFX940 have an additional alignment requirement:
pairs of <em>vector</em> registers must be even-aligned
(first register must be even).</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v255</span>
<span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
<span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">v252</span><span class="p">]</span>
<span class="p">[</span><span class="n">v252</span><span class="p">,</span><span class="n">v253</span><span class="p">,</span><span class="n">v254</span><span class="p">,</span><span class="n">v255</span><span class="p">]</span>
</pre></div>
</div>
<p id="amdgpu-synid-nsa"><strong>Non-Sequential Address (NSA) Syntax</strong></p>
<p>GFX10+ <em>image</em> instructions may use special <em>NSA</em> (Non-Sequential Address)
syntax for <em>image addresses</em>:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>[Vm</strong>, <strong>Vn</strong>, … <strong>Vk</strong><strong>]</strong></p></td>
<td><p>A sequence of 32-bit <em>vector</em> registers.
Each register may be specified using the syntax
defined <a class="reference internal" href="#amdgpu-synid-v"><span class="std std-ref">above</span></a>.</p>
<p>In contrast with the standard syntax, registers
in <em>NSA</em> sequence are not required to have
consecutive indices. Moreover, the same register
may appear in the sequence more than once.</p>
<p>GFX11+ has an additional limitation: if address
size occupies more than 5 dwords, registers
starting from the 5th element must be contiguous.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">[</span><span class="n">v32</span><span class="p">,</span><span class="n">v1</span><span class="p">,</span><span class="n">v</span><span class="p">[</span><span class="mi">2</span><span class="p">]]</span>
<span class="p">[</span><span class="n">v</span><span class="p">[</span><span class="mi">32</span><span class="p">],</span><span class="n">v</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">],[</span><span class="n">v2</span><span class="p">]]</span>
<span class="p">[</span><span class="n">v4</span><span class="p">,</span><span class="n">v4</span><span class="p">,</span><span class="n">v4</span><span class="p">,</span><span class="n">v4</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="v-16-bit">
<span id="amdgpu-synid-v16"></span><h3><a class="toc-backref" href="#id4" role="doc-backlink">v (16-bit)</a><a class="headerlink" href="#v-16-bit" title="Link to this heading">¶</a></h3>
<p>16-bit vector registers. Each <a class="reference internal" href="#amdgpu-synid-v"><span class="std std-ref">32-bit vector register</span></a> is divided into two 16-bit low and high registers, so there are 512 16-bit vector registers.</p>
<p>Only VOP3, VOP3P and VINTERP instructions may access all 512 registers (using <a class="reference internal" href="AMDGPUModifierSyntax.html#amdgpu-synid-op-sel"><span class="std std-ref">op_sel</span></a> modifier).
VOP1, VOP2 and VOPC instructions may currently access only 128 low 16-bit registers using the syntax described below.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>This section is incomplete. The support of 16-bit registers in the assembler is still WIP.</p>
</div>
<dl>
<dt></dt><dd><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>v</strong>&lt;N&gt;</p></td>
<td><p>A single 16-bit <em>vector</em> register (low half).</p></td>
</tr>
</tbody>
</table>
</dd>
</dl>
<p>Note: <em>N</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><p>0 &lt;= <em>N</em> &lt;= 127.</p></li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">v127</span>
</pre></div>
</div>
</section>
<section id="a">
<span id="amdgpu-synid-a"></span><h3><a class="toc-backref" href="#id5" role="doc-backlink">a</a><a class="headerlink" href="#a" title="Link to this heading">¶</a></h3>
<p>Accumulator registers. There are 256 32-bit accumulator registers.</p>
<p>A sequence of <em>accumulator</em> registers may be used to operate with more than 32 bits of data.</p>
<p>Assembler currently supports tuples with 1 to 12, 16 and 32 <em>accumulator</em> registers.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Alternative Syntax (SP3)</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>a</strong>&lt;N&gt;</p></td>
<td><p><strong>acc</strong>&lt;N&gt;</p></td>
<td><p>A single 32-bit <em>accumulator</em> register.</p>
<p><em>N</em> must be a decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>a[</strong>&lt;N&gt;<strong>]</strong></p></td>
<td><p><strong>acc[</strong>&lt;N&gt;<strong>]</strong></p></td>
<td><p>A single 32-bit <em>accumulator</em> register.</p>
<p><em>N</em> may be specified as an
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>a[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></p></td>
<td><p><strong>acc[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></p></td>
<td><p>A sequence of (<em>K-N+1</em>) <em>accumulator</em> registers.</p>
<p><em>N</em> and <em>K</em> may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
or <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>[a</strong>&lt;N&gt;, <strong>a</strong>&lt;N+1&gt;, … <strong>a</strong>&lt;K&gt;<strong>]</strong></p></td>
<td><p><strong>[acc</strong>&lt;N&gt;, <strong>acc</strong>&lt;N+1&gt;, … <strong>acc</strong>&lt;K&gt;<strong>]</strong></p></td>
<td><p>A sequence of (<em>K-N+1</em>) <em>accumulator</em> registers.</p>
<p>Register indices must be specified as decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note: <em>N</em> and <em>K</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><p><em>N</em> &lt;= <em>K</em>.</p></li>
<li><p>0 &lt;= <em>N</em> &lt;= 255.</p></li>
<li><p>0 &lt;= <em>K</em> &lt;= 255.</p></li>
<li><p><em>K-N+1</em> must be in the range from 1 to 12 or equal to 16 or 32.</p></li>
</ul>
<p>GFX90A and GFX940 have an additional alignment requirement:
pairs of <em>accumulator</em> registers must be even-aligned
(first register must be even).</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">a255</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
<span class="n">a</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">a252</span><span class="p">]</span>
<span class="p">[</span><span class="n">a252</span><span class="p">,</span><span class="n">a253</span><span class="p">,</span><span class="n">a254</span><span class="p">,</span><span class="n">a255</span><span class="p">]</span>

<span class="n">acc0</span>
<span class="n">acc</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">acc250</span><span class="p">]</span>
<span class="p">[</span><span class="n">acc2</span><span class="p">,</span><span class="n">acc3</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="s">
<span id="amdgpu-synid-s"></span><h3><a class="toc-backref" href="#id6" role="doc-backlink">s</a><a class="headerlink" href="#s" title="Link to this heading">¶</a></h3>
<p>Scalar 32-bit registers. The number of available <em>scalar</em> registers depends on the GPU:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>GPU</p></th>
<th class="head"><p>Number of <em>scalar</em> registers</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GFX7</p></td>
<td><p>104</p></td>
</tr>
<tr class="row-odd"><td><p>GFX8</p></td>
<td><p>102</p></td>
</tr>
<tr class="row-even"><td><p>GFX9</p></td>
<td><p>102</p></td>
</tr>
<tr class="row-odd"><td><p>GFX10+</p></td>
<td><p>106</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>A sequence of <em>scalar</em> registers may be used to operate with more than 32 bits of data.
Assembler currently supports tuples with 1 to 12, 16 and 32 <em>scalar</em> registers.</p>
<p>Pairs of <em>scalar</em> registers must be even-aligned (first register must be even).
Sequences of 4 and more <em>scalar</em> registers must be quad-aligned.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>s</strong>&lt;N&gt;</p></td>
<td><p>A single 32-bit <em>scalar</em> register.</p>
<p><em>N</em> must be a decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>s[</strong>&lt;N&gt;<strong>]</strong></p></td>
<td><p>A single 32-bit <em>scalar</em> register.</p>
<p><em>N</em> may be specified as an
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>s[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></p></td>
<td><p>A sequence of (<em>K-N+1</em>) <em>scalar</em> registers.</p>
<p><em>N</em> and <em>K</em> may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
or <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>[s</strong>&lt;N&gt;, <strong>s</strong>&lt;N+1&gt;, … <strong>s</strong>&lt;K&gt;<strong>]</strong></p></td>
<td><p>A sequence of (<em>K-N+1</em>) <em>scalar</em> registers.</p>
<p>Register indices must be specified as decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note: <em>N</em> and <em>K</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><p><em>N</em> must be properly aligned based on the sequence size.</p></li>
<li><p><em>N</em> &lt;= <em>K</em>.</p></li>
<li><p>0 &lt;= <em>N</em> &lt; <em>SMAX</em>, where <em>SMAX</em> is the number of available <em>scalar</em> registers.</p></li>
<li><p>0 &lt;= <em>K</em> &lt; <em>SMAX</em>, where <em>SMAX</em> is the number of available <em>scalar</em> registers.</p></li>
<li><p><em>K-N+1</em> must be in the range from 1 to 12 or equal to 16 or 32.</p></li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s0</span>
<span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">s4</span><span class="p">]</span>
<span class="p">[</span><span class="n">s4</span><span class="p">,</span><span class="n">s5</span><span class="p">,</span><span class="n">s6</span><span class="p">,</span><span class="n">s7</span><span class="p">]</span>
</pre></div>
</div>
<p>Examples of <em>scalar</em> registers with an invalid alignment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">s</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">s</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="trap">
<span id="amdgpu-synid-trap"></span><h3><a class="toc-backref" href="#id7" role="doc-backlink">trap</a><a class="headerlink" href="#trap" title="Link to this heading">¶</a></h3>
<p>A set of trap handler registers:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#amdgpu-synid-ttmp"><span class="std std-ref">ttmp</span></a></p></li>
<li><p><a class="reference internal" href="#amdgpu-synid-tba"><span class="std std-ref">tba</span></a></p></li>
<li><p><a class="reference internal" href="#amdgpu-synid-tma"><span class="std std-ref">tma</span></a></p></li>
</ul>
</section>
<section id="ttmp">
<span id="amdgpu-synid-ttmp"></span><h3><a class="toc-backref" href="#id8" role="doc-backlink">ttmp</a><a class="headerlink" href="#ttmp" title="Link to this heading">¶</a></h3>
<p>Trap handler temporary scalar registers, 32-bits wide.
The number of available <em>ttmp</em> registers depends on the GPU:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>GPU</p></th>
<th class="head"><p>Number of <em>ttmp</em> registers</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>GFX7</p></td>
<td><p>12</p></td>
</tr>
<tr class="row-odd"><td><p>GFX8</p></td>
<td><p>12</p></td>
</tr>
<tr class="row-even"><td><p>GFX9</p></td>
<td><p>16</p></td>
</tr>
<tr class="row-odd"><td><p>GFX10+</p></td>
<td><p>16</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>A sequence of <em>ttmp</em> registers may be used to operate with more than 32 bits of data.
Assembler currently supports tuples with 1 to 12 and 16 <em>ttmp</em> registers.</p>
<p>Pairs of <em>ttmp</em> registers must be even-aligned (first register must be even).
Sequences of 4 and more <em>ttmp</em> registers must be quad-aligned.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p><strong>ttmp</strong>&lt;N&gt;</p></td>
<td><p>A single 32-bit <em>ttmp</em> register.</p>
<p><em>N</em> must be a decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>ttmp[</strong>&lt;N&gt;<strong>]</strong></p></td>
<td><p>A single 32-bit <em>ttmp</em> register.</p>
<p><em>N</em> may be specified as an
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
</td>
</tr>
<tr class="row-even"><td><p><strong>ttmp[</strong>&lt;N&gt;:&lt;K&gt;<strong>]</strong></p></td>
<td><p>A sequence of (<em>K-N+1</em>) <em>ttmp</em> registers.</p>
<p><em>N</em> and <em>K</em> may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
or <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.</p>
</td>
</tr>
<tr class="row-odd"><td><p><strong>[ttmp</strong>&lt;N&gt;, <strong>ttmp</strong>&lt;N+1&gt;, … <strong>ttmp</strong>&lt;K&gt;<strong>]</strong></p></td>
<td><p>A sequence of (<em>K-N+1</em>) <em>ttmp</em> registers.</p>
<p>Register indices must be specified as decimal
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Note: <em>N</em> and <em>K</em> must satisfy the following conditions:</p>
<ul class="simple">
<li><p><em>N</em> must be properly aligned based on the sequence size.</p></li>
<li><p><em>N</em> &lt;= <em>K</em>.</p></li>
<li><p>0 &lt;= <em>N</em> &lt; <em>TMAX</em>, where <em>TMAX</em> is the number of available <em>ttmp</em> registers.</p></li>
<li><p>0 &lt;= <em>K</em> &lt; <em>TMAX</em>, where <em>TMAX</em> is the number of available <em>ttmp</em> registers.</p></li>
<li><p><em>K-N+1</em> must be in the range from 1 to 12 or equal to 16.</p></li>
</ul>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ttmp0</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">1</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">2</span><span class="o">*</span><span class="mi">2</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">1</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
<span class="p">[</span><span class="n">ttmp4</span><span class="p">]</span>
<span class="p">[</span><span class="n">ttmp4</span><span class="p">,</span><span class="n">ttmp5</span><span class="p">,</span><span class="n">ttmp6</span><span class="p">,</span><span class="n">ttmp7</span><span class="p">]</span>
</pre></div>
</div>
<p>Examples of <em>ttmp</em> registers with an invalid alignment:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ttmp</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span>
<span class="n">ttmp</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">5</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="tba">
<span id="amdgpu-synid-tba"></span><h3><a class="toc-backref" href="#id9" role="doc-backlink">tba</a><a class="headerlink" href="#tba" title="Link to this heading">¶</a></h3>
<p>Trap base address, 64-bits wide. Holds the pointer to the current
trap handler program.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Availability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tba</p></td>
<td><p>64-bit <em>trap base address</em> register.</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-odd"><td><p>[tba]</p></td>
<td><p>64-bit <em>trap base address</em> register (an SP3 syntax).</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-even"><td><p>[tba_lo,tba_hi]</p></td>
<td><p>64-bit <em>trap base address</em> register (an SP3 syntax).</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>trap base address</em> may be accessed as separate registers:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Availability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tba_lo</p></td>
<td><p>Low 32 bits of <em>trap base address</em> register.</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-odd"><td><p>tba_hi</p></td>
<td><p>High 32 bits of <em>trap base address</em> register.</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-even"><td><p>[tba_lo]</p></td>
<td><p>Low 32 bits of <em>trap base address</em> register (an SP3 syntax).</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-odd"><td><p>[tba_hi]</p></td>
<td><p>High 32 bits of <em>trap base address</em> register (an SP3 syntax).</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="tma">
<span id="amdgpu-synid-tma"></span><h3><a class="toc-backref" href="#id10" role="doc-backlink">tma</a><a class="headerlink" href="#tma" title="Link to this heading">¶</a></h3>
<p>Trap memory address, 64-bits wide.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Availability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tma</p></td>
<td><p>64-bit <em>trap memory address</em> register.</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-odd"><td><p>[tma]</p></td>
<td><p>64-bit <em>trap memory address</em> register (an SP3 syntax).</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-even"><td><p>[tma_lo,tma_hi]</p></td>
<td><p>64-bit <em>trap memory address</em> register (an SP3 syntax).</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>trap memory address</em> may be accessed as separate registers:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
<th class="head"><p>Availability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>tma_lo</p></td>
<td><p>Low 32 bits of <em>trap memory address</em> register.</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-odd"><td><p>tma_hi</p></td>
<td><p>High 32 bits of <em>trap memory address</em> register.</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-even"><td><p>[tma_lo]</p></td>
<td><p>Low 32 bits of <em>trap memory address</em> register (an SP3 syntax).</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
<tr class="row-odd"><td><p>[tma_hi]</p></td>
<td><p>High 32 bits of <em>trap memory address</em> register (an SP3 syntax).</p></td>
<td><p>GFX7, GFX8</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="flat-scratch">
<span id="amdgpu-synid-flat-scratch"></span><h3><a class="toc-backref" href="#id11" role="doc-backlink">flat_scratch</a><a class="headerlink" href="#flat-scratch" title="Link to this heading">¶</a></h3>
<p>Flat scratch address, 64-bits wide. Holds the base address of scratch memory.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>flat_scratch</p></td>
<td><p>64-bit <em>flat scratch</em> address register.</p></td>
</tr>
<tr class="row-odd"><td><p>[flat_scratch]</p></td>
<td><p>64-bit <em>flat scratch</em> address register (an SP3 syntax).</p></td>
</tr>
<tr class="row-even"><td><p>[flat_scratch_lo,flat_scratch_hi]</p></td>
<td><p>64-bit <em>flat scratch</em> address register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>flat scratch</em> address may be accessed as separate registers:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>flat_scratch_lo</p></td>
<td><p>Low 32 bits of <em>flat scratch</em> address register.</p></td>
</tr>
<tr class="row-odd"><td><p>flat_scratch_hi</p></td>
<td><p>High 32 bits of <em>flat scratch</em> address register.</p></td>
</tr>
<tr class="row-even"><td><p>[flat_scratch_lo]</p></td>
<td><p>Low 32 bits of <em>flat scratch</em> address register (an SP3 syntax).</p></td>
</tr>
<tr class="row-odd"><td><p>[flat_scratch_hi]</p></td>
<td><p>High 32 bits of <em>flat scratch</em> address register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="xnack-mask">
<span id="amdgpu-synid-xnack-mask"></span><span id="amdgpu-synid-xnack"></span><h3><a class="toc-backref" href="#id12" role="doc-backlink">xnack_mask</a><a class="headerlink" href="#xnack-mask" title="Link to this heading">¶</a></h3>
<p>Xnack mask, 64-bits wide. Holds a 64-bit mask of which threads
received an <em>XNACK</em> due to a vector memory operation.</p>
<p>For availability of <em>xnack</em> feature, refer to <a class="reference internal" href="AMDGPUUsage.html#amdgpu-processors"><span class="std std-ref">this table</span></a>.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xnack_mask</p></td>
<td><p>64-bit <em>xnack mask</em> register.</p></td>
</tr>
<tr class="row-odd"><td><p>[xnack_mask]</p></td>
<td><p>64-bit <em>xnack mask</em> register (an SP3 syntax).</p></td>
</tr>
<tr class="row-even"><td><p>[xnack_mask_lo,xnack_mask_hi]</p></td>
<td><p>64-bit <em>xnack mask</em> register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>xnack mask</em> may be accessed as separate registers:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>xnack_mask_lo</p></td>
<td><p>Low 32 bits of <em>xnack mask</em> register.</p></td>
</tr>
<tr class="row-odd"><td><p>xnack_mask_hi</p></td>
<td><p>High 32 bits of <em>xnack mask</em> register.</p></td>
</tr>
<tr class="row-even"><td><p>[xnack_mask_lo]</p></td>
<td><p>Low 32 bits of <em>xnack mask</em> register (an SP3 syntax).</p></td>
</tr>
<tr class="row-odd"><td><p>[xnack_mask_hi]</p></td>
<td><p>High 32 bits of <em>xnack mask</em> register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="vcc">
<span id="amdgpu-synid-vcc-lo"></span><span id="amdgpu-synid-vcc"></span><h3><a class="toc-backref" href="#id13" role="doc-backlink">vcc</a><a class="headerlink" href="#vcc" title="Link to this heading">¶</a></h3>
<p>Vector condition code, 64-bits wide. A bit mask with one bit per thread;
it holds the result of a vector compare operation.</p>
<p>Note that GFX10+ H/W does not use high 32 bits of <em>vcc</em> in <em>wave32</em> mode.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>vcc</p></td>
<td><p>64-bit <em>vector condition code</em> register.</p></td>
</tr>
<tr class="row-odd"><td><p>[vcc]</p></td>
<td><p>64-bit <em>vector condition code</em> register (an SP3 syntax).</p></td>
</tr>
<tr class="row-even"><td><p>[vcc_lo,vcc_hi]</p></td>
<td><p>64-bit <em>vector condition code</em> register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>vector condition code</em> may be accessed as separate registers:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>vcc_lo</p></td>
<td><p>Low 32 bits of <em>vector condition code</em> register.</p></td>
</tr>
<tr class="row-odd"><td><p>vcc_hi</p></td>
<td><p>High 32 bits of <em>vector condition code</em> register.</p></td>
</tr>
<tr class="row-even"><td><p>[vcc_lo]</p></td>
<td><p>Low 32 bits of <em>vector condition code</em> register (an SP3 syntax).</p></td>
</tr>
<tr class="row-odd"><td><p>[vcc_hi]</p></td>
<td><p>High 32 bits of <em>vector condition code</em> register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="m0">
<span id="amdgpu-synid-m0"></span><h3><a class="toc-backref" href="#id14" role="doc-backlink">m0</a><a class="headerlink" href="#m0" title="Link to this heading">¶</a></h3>
<p>A 32-bit memory register. It has various uses,
including register indexing and bounds checking.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>m0</p></td>
<td><p>A 32-bit <em>memory</em> register.</p></td>
</tr>
<tr class="row-odd"><td><p>[m0]</p></td>
<td><p>A 32-bit <em>memory</em> register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="exec">
<span id="amdgpu-synid-exec"></span><h3><a class="toc-backref" href="#id15" role="doc-backlink">exec</a><a class="headerlink" href="#exec" title="Link to this heading">¶</a></h3>
<p>Execute mask, 64-bits wide. A bit mask with one bit per thread,
which is applied to vector instructions and controls which threads execute
and which ignore the instruction.</p>
<p>Note that GFX10+ H/W does not use high 32 bits of <em>exec</em> in <em>wave32</em> mode.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exec</p></td>
<td><p>64-bit <em>execute mask</em> register.</p></td>
</tr>
<tr class="row-odd"><td><p>[exec]</p></td>
<td><p>64-bit <em>execute mask</em> register (an SP3 syntax).</p></td>
</tr>
<tr class="row-even"><td><p>[exec_lo,exec_hi]</p></td>
<td><p>64-bit <em>execute mask</em> register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>High and low 32 bits of <em>execute mask</em> may be accessed as separate registers:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>exec_lo</p></td>
<td><p>Low 32 bits of <em>execute mask</em> register.</p></td>
</tr>
<tr class="row-odd"><td><p>exec_hi</p></td>
<td><p>High 32 bits of <em>execute mask</em> register.</p></td>
</tr>
<tr class="row-even"><td><p>[exec_lo]</p></td>
<td><p>Low 32 bits of <em>execute mask</em> register (an SP3 syntax).</p></td>
</tr>
<tr class="row-odd"><td><p>[exec_hi]</p></td>
<td><p>High 32 bits of <em>execute mask</em> register (an SP3 syntax).</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="vccz">
<span id="amdgpu-synid-vccz"></span><h3><a class="toc-backref" href="#id16" role="doc-backlink">vccz</a><a class="headerlink" href="#vccz" title="Link to this heading">¶</a></h3>
<p>A single bit flag indicating that the <a class="reference internal" href="#amdgpu-synid-vcc"><span class="std std-ref">vcc</span></a>
is all zeros.</p>
<p>Note: when GFX10+ operates in <em>wave32</em> mode, this register reflects
the state of <a class="reference internal" href="#amdgpu-synid-vcc-lo"><span class="std std-ref">vcc_lo</span></a>.</p>
</section>
<section id="execz">
<span id="amdgpu-synid-execz"></span><h3><a class="toc-backref" href="#id17" role="doc-backlink">execz</a><a class="headerlink" href="#execz" title="Link to this heading">¶</a></h3>
<p>A single bit flag indicating that the <a class="reference internal" href="#amdgpu-synid-exec"><span class="std std-ref">exec</span></a>
is all zeros.</p>
<p>Note: when GFX10+ operates in <em>wave32</em> mode, this register reflects
the state of <a class="reference internal" href="#amdgpu-synid-exec"><span class="std std-ref">exec_lo</span></a>.</p>
</section>
<section id="scc">
<span id="amdgpu-synid-scc"></span><h3><a class="toc-backref" href="#id18" role="doc-backlink">scc</a><a class="headerlink" href="#scc" title="Link to this heading">¶</a></h3>
<p>A single bit flag indicating the result of a scalar compare operation.</p>
</section>
<section id="lds-direct">
<span id="amdgpu-synid-lds-direct"></span><h3><a class="toc-backref" href="#id19" role="doc-backlink">lds_direct</a><a class="headerlink" href="#lds-direct" title="Link to this heading">¶</a></h3>
<p>A special operand which supplies a 32-bit value
fetched from <em>LDS</em> memory using <a class="reference internal" href="#amdgpu-synid-m0"><span class="std std-ref">m0</span></a> as an address.</p>
</section>
<section id="null">
<span id="amdgpu-synid-null"></span><h3><a class="toc-backref" href="#id20" role="doc-backlink">null</a><a class="headerlink" href="#null" title="Link to this heading">¶</a></h3>
<p>This is a special operand that may be used as a source or a destination.</p>
<p>When used as a destination, the result of the operation is discarded.</p>
<p>When used as a source, it supplies zero value.</p>
</section>
<section id="inline-constant">
<span id="amdgpu-synid-constant"></span><h3><a class="toc-backref" href="#id21" role="doc-backlink">inline constant</a><a class="headerlink" href="#inline-constant" title="Link to this heading">¶</a></h3>
<p>An <em>inline constant</em> is an integer or a floating-point value
encoded as a part of an instruction. Compare <em>inline constants</em>
with <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literals</span></a>.</p>
<p>Inline constants include:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#amdgpu-synid-iconst"><span class="std std-ref">Integer inline constants</span></a>;</p></li>
<li><p><a class="reference internal" href="#amdgpu-synid-fconst"><span class="std std-ref">Floating-point inline constants</span></a>;</p></li>
<li><p><a class="reference internal" href="#amdgpu-synid-ival"><span class="std std-ref">Inline values</span></a>.</p></li>
</ul>
<p>If a number may be encoded as either
a <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literal</span></a> or
a <a class="reference internal" href="#amdgpu-synid-constant"><span class="std std-ref">constant</span></a>,
the assembler selects the latter encoding as more efficient.</p>
<section id="iconst">
<span id="amdgpu-synid-iconst"></span><h4><a class="toc-backref" href="#id22" role="doc-backlink">iconst</a><a class="headerlink" href="#iconst" title="Link to this heading">¶</a></h4>
<p>An <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a> or
an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>
encoded as an <em>inline constant</em>.</p>
<p>Only a small fraction of integer numbers may be encoded as <em>inline constants</em>.
They are enumerated in the table below.
Other integer numbers are encoded as <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literals</span></a>.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>{0..64}</p></td>
<td><p>Positive integer inline constants.</p></td>
</tr>
<tr class="row-odd"><td><p>{-16..-1}</p></td>
<td><p>Negative integer inline constants.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="fconst">
<span id="amdgpu-synid-fconst"></span><h4><a class="toc-backref" href="#id23" role="doc-backlink">fconst</a><a class="headerlink" href="#fconst" title="Link to this heading">¶</a></h4>
<p>A <a class="reference internal" href="#amdgpu-synid-floating-point-number"><span class="std std-ref">floating-point number</span></a>
encoded as an <em>inline constant</em>.</p>
<p>Only a small fraction of floating-point numbers may be encoded
as <em>inline constants</em>. They are enumerated in the table below.
Other floating-point numbers are encoded as
<a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literals</span></a>.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Value</p></th>
<th class="head"><p>Note</p></th>
<th class="head"><p>Availability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>0.0</p></td>
<td><p>The same as integer constant 0.</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-odd"><td><p>0.5</p></td>
<td><p>Floating-point constant 0.5</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-even"><td><p>1.0</p></td>
<td><p>Floating-point constant 1.0</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-odd"><td><p>2.0</p></td>
<td><p>Floating-point constant 2.0</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-even"><td><p>4.0</p></td>
<td><p>Floating-point constant 4.0</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-odd"><td><p>-0.5</p></td>
<td><p>Floating-point constant -0.5</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-even"><td><p>-1.0</p></td>
<td><p>Floating-point constant -1.0</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-odd"><td><p>-2.0</p></td>
<td><p>Floating-point constant -2.0</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-even"><td><p>-4.0</p></td>
<td><p>Floating-point constant -4.0</p></td>
<td><p>All GPUs</p></td>
</tr>
<tr class="row-odd"><td><p>0.1592</p></td>
<td><p>1.0/(2.0*pi). Use only for 16-bit operands.</p></td>
<td><p>GFX8+</p></td>
</tr>
<tr class="row-even"><td><p>0.15915494</p></td>
<td><p>1.0/(2.0*pi). Use only for 16- and 32-bit operands.</p></td>
<td><p>GFX8+</p></td>
</tr>
<tr class="row-odd"><td><p>0.15915494309189532</p></td>
<td><p>1.0/(2.0*pi).</p></td>
<td><p>GFX8+</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>Floating-point inline constants cannot be used with <em>16-bit integer</em> operands. Assembler encodes these values as literals.</p>
</div>
</section>
<section id="ival">
<span id="amdgpu-synid-ival"></span><h4><a class="toc-backref" href="#id24" role="doc-backlink">ival</a><a class="headerlink" href="#ival" title="Link to this heading">¶</a></h4>
<p>A symbolic operand encoded as an <em>inline constant</em>.
These operands provide read-only access to H/W registers.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Alternative Syntax (SP3)</p></th>
<th class="head"><p>Note</p></th>
<th class="head"><p>Availability</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>shared_base</p></td>
<td><p>src_shared_base</p></td>
<td><p>Base address of shared memory region.</p></td>
<td><p>GFX9+</p></td>
</tr>
<tr class="row-odd"><td><p>shared_limit</p></td>
<td><p>src_shared_limit</p></td>
<td><p>Address of the end of shared memory region.</p></td>
<td><p>GFX9+</p></td>
</tr>
<tr class="row-even"><td><p>private_base</p></td>
<td><p>src_private_base</p></td>
<td><p>Base address of private memory region.</p></td>
<td><p>GFX9+</p></td>
</tr>
<tr class="row-odd"><td><p>private_limit</p></td>
<td><p>src_private_limit</p></td>
<td><p>Address of the end of private memory region.</p></td>
<td><p>GFX9+</p></td>
</tr>
<tr class="row-even"><td><p>pops_exiting_wave_id</p></td>
<td><p>src_pops_exiting_wave_id</p></td>
<td><p>A dedicated counter for POPS.</p></td>
<td><p>GFX9, GFX10</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
</section>
<section id="literal">
<span id="amdgpu-synid-literal"></span><h3><a class="toc-backref" href="#id25" role="doc-backlink">literal</a><a class="headerlink" href="#literal" title="Link to this heading">¶</a></h3>
<p>A <em>literal</em> is a 64-bit value encoded as a separate
32-bit dword in the instruction stream. Compare <em>literals</em>
with <a class="reference internal" href="#amdgpu-synid-constant"><span class="std std-ref">inline constants</span></a>.</p>
<p>If a number may be encoded as either
a <a class="reference internal" href="#amdgpu-synid-literal"><span class="std std-ref">literal</span></a> or
an <a class="reference internal" href="#amdgpu-synid-constant"><span class="std std-ref">inline constant</span></a>,
assembler selects the latter encoding as more efficient.</p>
<p>Literals may be specified as
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>,
<a class="reference internal" href="#amdgpu-synid-floating-point-number"><span class="std std-ref">floating-point numbers</span></a>,
<a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a> or
<a class="reference internal" href="#amdgpu-synid-relocatable-expression"><span class="std std-ref">relocatable expressions</span></a>.</p>
<p>An instruction may use only one literal,
but several operands may refer to the same literal.</p>
</section>
<section id="uimm8">
<span id="amdgpu-synid-uimm8"></span><h3><a class="toc-backref" href="#id26" role="doc-backlink">uimm8</a><a class="headerlink" href="#uimm8" title="Link to this heading">¶</a></h3>
<p>An 8-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.
The value must be in the range 0..0xFF.</p>
</section>
<section id="uimm32">
<span id="amdgpu-synid-uimm32"></span><h3><a class="toc-backref" href="#id27" role="doc-backlink">uimm32</a><a class="headerlink" href="#uimm32" title="Link to this heading">¶</a></h3>
<p>A 32-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.
The value must be in the range 0..0xFFFFFFFF.</p>
</section>
<section id="uimm20">
<span id="amdgpu-synid-uimm20"></span><h3><a class="toc-backref" href="#id28" role="doc-backlink">uimm20</a><a class="headerlink" href="#uimm20" title="Link to this heading">¶</a></h3>
<p>A 20-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
<p>The value must be in the range 0..0xFFFFF.</p>
</section>
<section id="simm21">
<span id="amdgpu-synid-simm21"></span><h3><a class="toc-backref" href="#id29" role="doc-backlink">simm21</a><a class="headerlink" href="#simm21" title="Link to this heading">¶</a></h3>
<p>A 21-bit <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>
or an <a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expression</span></a>.</p>
<p>The value must be in the range -0x100000..0x0FFFFF.</p>
</section>
<section id="off">
<span id="amdgpu-synid-off"></span><h3><a class="toc-backref" href="#id30" role="doc-backlink">off</a><a class="headerlink" href="#off" title="Link to this heading">¶</a></h3>
<p>A special entity which indicates that the value of this operand is not used.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>off</p></td>
<td><p>Indicates an unused operand.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
</section>
<section id="numbers">
<span id="amdgpu-synid-number"></span><h2><a class="toc-backref" href="#id31" role="doc-backlink">Numbers</a><a class="headerlink" href="#numbers" title="Link to this heading">¶</a></h2>
<section id="integer-numbers">
<span id="amdgpu-synid-integer-number"></span><h3><a class="toc-backref" href="#id32" role="doc-backlink">Integer Numbers</a><a class="headerlink" href="#integer-numbers" title="Link to this heading">¶</a></h3>
<p>Integer numbers are 64 bits wide.
They are converted to <a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
as described <a class="reference internal" href="#amdgpu-synid-int-conv"><span class="std std-ref">here</span></a>.</p>
<p>Integer numbers may be specified in binary, octal,
hexadecimal and decimal formats:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Format</p></th>
<th class="head"><p>Syntax</p></th>
<th class="head"><p>Example</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Decimal</p></td>
<td><p>[-]?[1-9][0-9]*</p></td>
<td><p>-1234</p></td>
</tr>
<tr class="row-odd"><td><p>Binary</p></td>
<td><p>[-]?0b[01]+</p></td>
<td><p>0b1010</p></td>
</tr>
<tr class="row-even"><td><p>Octal</p></td>
<td><p>[-]?0[0-7]+</p></td>
<td><p>010</p></td>
</tr>
<tr class="row-odd"><td><p>Hexadecimal</p></td>
<td><p>[-]?0x[0-9a-fA-F]+</p></td>
<td><p>0xff</p></td>
</tr>
<tr class="row-even"><td><p></p></td>
<td><p>[-]?[0x]?[0-9][0-9a-fA-F]*[hH]</p></td>
<td><p>0ffh</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="floating-point-numbers">
<span id="amdgpu-synid-floating-point-number"></span><h3><a class="toc-backref" href="#id33" role="doc-backlink">Floating-Point Numbers</a><a class="headerlink" href="#floating-point-numbers" title="Link to this heading">¶</a></h3>
<p>All floating-point numbers are handled as double (64 bits wide).
They are converted to
<a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
as described <a class="reference internal" href="#amdgpu-synid-fp-conv"><span class="std std-ref">here</span></a>.</p>
<p>Floating-point numbers may be specified in hexadecimal and decimal formats:</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Format</p></th>
<th class="head"><p>Syntax</p></th>
<th class="head"><p>Examples</p></th>
<th class="head"><p>Note</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>Decimal</p></td>
<td><p>[-]?[0-9]*[.][0-9]*([eE][+-]?[0-9]*)?</p></td>
<td><p>-1.234, 234e2</p></td>
<td><p>Must include either
a decimal separator
or an exponent.</p></td>
</tr>
<tr class="row-odd"><td><p>Hexadecimal</p></td>
<td><p>[-]0x[0-9a-fA-F]*(.[0-9a-fA-F]*)?[pP][+-]?[0-9a-fA-F]+</p></td>
<td><p>-0x1afp-10, 0x.1afp10</p></td>
<td></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
</section>
<section id="expressions">
<span id="amdgpu-synid-expression"></span><h2><a class="toc-backref" href="#id34" role="doc-backlink">Expressions</a><a class="headerlink" href="#expressions" title="Link to this heading">¶</a></h2>
<p>An expression is evaluated to a 64-bit integer.
Note that floating-point expressions are not supported.</p>
<p>There are two kinds of expressions:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">Absolute</span></a>.</p></li>
<li><p><a class="reference internal" href="#amdgpu-synid-relocatable-expression"><span class="std std-ref">Relocatable</span></a>.</p></li>
</ul>
<section id="absolute-expressions">
<span id="amdgpu-synid-absolute-expression"></span><h3><a class="toc-backref" href="#id35" role="doc-backlink">Absolute Expressions</a><a class="headerlink" href="#absolute-expressions" title="Link to this heading">¶</a></h3>
<p>The value of an absolute expression does not change after program relocation.
Absolute expressions must not include unassigned and relocatable values
such as labels.</p>
<p>Absolute expressions are evaluated to 64-bit integer values and converted to
<a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
as described <a class="reference internal" href="#amdgpu-synid-int-conv"><span class="std std-ref">here</span></a>.</p>
<p>Examples:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">x</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">10</span>
</pre></div>
</div>
</section>
<section id="relocatable-expressions">
<span id="amdgpu-synid-relocatable-expression"></span><h3><a class="toc-backref" href="#id36" role="doc-backlink">Relocatable Expressions</a><a class="headerlink" href="#relocatable-expressions" title="Link to this heading">¶</a></h3>
<p>The value of a relocatable expression depends on program relocation.</p>
<p>Note that use of relocatable expressions is limited to branch targets
and 32-bit integer operands.</p>
<p>A relocatable expression is evaluated to a 64-bit integer value,
which depends on operand kind and
<a class="reference internal" href="AMDGPUUsage.html#amdgpu-relocation-records"><span class="std std-ref">relocation type</span></a> of symbol(s)
used in the expression. For example, if an instruction refers to a label,
this reference is evaluated to an offset from the address after
the instruction to the label address:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">label</span><span class="p">:</span>
<span class="n">v_add_co_u32_e32</span> <span class="n">v0</span><span class="p">,</span> <span class="n">vcc</span><span class="p">,</span> <span class="n">label</span><span class="p">,</span> <span class="n">v1</span>  <span class="o">//</span> <span class="s1">&#39;label&#39;</span> <span class="n">operand</span> <span class="ow">is</span> <span class="n">evaluated</span> <span class="n">to</span> <span class="o">-</span><span class="mi">4</span>
</pre></div>
</div>
<p>Note that values of relocatable expressions are usually unknown
at assembly time; they are resolved later by a linker and converted to
<a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
as described <a class="reference internal" href="#amdgpu-synid-rl-conv"><span class="std std-ref">here</span></a>.</p>
</section>
<section id="operands-and-operations">
<h3><a class="toc-backref" href="#id37" role="doc-backlink">Operands and Operations</a><a class="headerlink" href="#operands-and-operations" title="Link to this heading">¶</a></h3>
<p>Expressions are composed of 64-bit integer operands and operations.
Operands include <a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a>
and <a class="reference internal" href="#amdgpu-synid-symbol"><span class="std std-ref">symbols</span></a>.</p>
<p>Expressions may also use “.” which is a reference
to the current PC (program counter).</p>
<p><a class="reference internal" href="#amdgpu-synid-expression-un-op"><span class="std std-ref">Unary</span></a> and
<a class="reference internal" href="#amdgpu-synid-expression-bin-op"><span class="std std-ref">binary</span></a>
operations produce 64-bit integer results.</p>
</section>
<section id="syntax-of-expressions">
<h3><a class="toc-backref" href="#id38" role="doc-backlink">Syntax of Expressions</a><a class="headerlink" href="#syntax-of-expressions" title="Link to this heading">¶</a></h3>
<p>Syntax of expressions is shown below:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">expr</span> <span class="p">:</span><span class="o">:=</span> <span class="n">expr</span> <span class="n">binop</span> <span class="n">expr</span> <span class="o">|</span> <span class="n">primaryexpr</span> <span class="p">;</span>

<span class="n">primaryexpr</span> <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;(&#39;</span> <span class="n">expr</span> <span class="s1">&#39;)&#39;</span> <span class="o">|</span> <span class="n">symbol</span> <span class="o">|</span> <span class="n">number</span> <span class="o">|</span> <span class="s1">&#39;.&#39;</span> <span class="o">|</span> <span class="n">unop</span> <span class="n">primaryexpr</span> <span class="p">;</span>

<span class="n">binop</span> <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;&amp;&amp;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;||&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;|&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;^&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&amp;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;!&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;==&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;!=&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&lt;&gt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&lt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&lt;=&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&gt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&gt;=&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&lt;&lt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;&gt;&gt;&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;+&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;-&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;*&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;/&#39;</span>
        <span class="o">|</span> <span class="s1">&#39;%&#39;</span> <span class="p">;</span>

<span class="n">unop</span> <span class="p">:</span><span class="o">:=</span> <span class="s1">&#39;~&#39;</span>
       <span class="o">|</span> <span class="s1">&#39;+&#39;</span>
       <span class="o">|</span> <span class="s1">&#39;-&#39;</span>
       <span class="o">|</span> <span class="s1">&#39;!&#39;</span> <span class="p">;</span>
</pre></div>
</div>
</section>
<section id="binary-operators">
<span id="amdgpu-synid-expression-bin-op"></span><h3><a class="toc-backref" href="#id39" role="doc-backlink">Binary Operators</a><a class="headerlink" href="#binary-operators" title="Link to this heading">¶</a></h3>
<p>Binary operators are described in the following table.
They operate on and produce 64-bit integers.
Operators with higher priority are performed first.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Priority</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>*</p></td>
<td><p>5</p></td>
<td><p>Integer multiplication.</p></td>
</tr>
<tr class="row-odd"><td><p>/</p></td>
<td><p>5</p></td>
<td><p>Integer division.</p></td>
</tr>
<tr class="row-even"><td><p>%</p></td>
<td><p>5</p></td>
<td><p>Integer signed remainder.</p></td>
</tr>
<tr class="row-odd"><td><p>+</p></td>
<td><p>4</p></td>
<td><p>Integer addition.</p></td>
</tr>
<tr class="row-even"><td><p>-</p></td>
<td><p>4</p></td>
<td><p>Integer subtraction.</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;&lt;</p></td>
<td><p>3</p></td>
<td><p>Integer shift left.</p></td>
</tr>
<tr class="row-even"><td><p>&gt;&gt;</p></td>
<td><p>3</p></td>
<td><p>Logical shift right.</p></td>
</tr>
<tr class="row-odd"><td><p>==</p></td>
<td><p>2</p></td>
<td><p>Equality comparison.</p></td>
</tr>
<tr class="row-even"><td><p>!=</p></td>
<td><p>2</p></td>
<td><p>Inequality comparison.</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;&gt;</p></td>
<td><p>2</p></td>
<td><p>Inequality comparison.</p></td>
</tr>
<tr class="row-even"><td><p>&lt;</p></td>
<td><p>2</p></td>
<td><p>Signed less than comparison.</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;=</p></td>
<td><p>2</p></td>
<td><p>Signed less than or equal comparison.</p></td>
</tr>
<tr class="row-even"><td><p>&gt;</p></td>
<td><p>2</p></td>
<td><p>Signed greater than comparison.</p></td>
</tr>
<tr class="row-odd"><td><p>&gt;=</p></td>
<td><p>2</p></td>
<td><p>Signed greater than or equal comparison.</p></td>
</tr>
<tr class="row-even"><td><p>|</p></td>
<td><p>1</p></td>
<td><p>Bitwise or.</p></td>
</tr>
<tr class="row-odd"><td><p>^</p></td>
<td><p>1</p></td>
<td><p>Bitwise xor.</p></td>
</tr>
<tr class="row-even"><td><p>&amp;</p></td>
<td><p>1</p></td>
<td><p>Bitwise and.</p></td>
</tr>
<tr class="row-odd"><td><p>&amp;&amp;</p></td>
<td><p>0</p></td>
<td><p>Logical and.</p></td>
</tr>
<tr class="row-even"><td><p>||</p></td>
<td><p>0</p></td>
<td><p>Logical or.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="unary-operators">
<span id="amdgpu-synid-expression-un-op"></span><h3><a class="toc-backref" href="#id40" role="doc-backlink">Unary Operators</a><a class="headerlink" href="#unary-operators" title="Link to this heading">¶</a></h3>
<p>Unary operators are described in the following table.
They operate on and produce 64-bit integers.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Operator</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>!</p></td>
<td><p>Logical negation.</p></td>
</tr>
<tr class="row-odd"><td><p>~</p></td>
<td><p>Bitwise negation.</p></td>
</tr>
<tr class="row-even"><td><p>+</p></td>
<td><p>Integer unary plus.</p></td>
</tr>
<tr class="row-odd"><td><p>-</p></td>
<td><p>Integer unary minus.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
</section>
<section id="symbols">
<span id="amdgpu-synid-symbol"></span><h3><a class="toc-backref" href="#id41" role="doc-backlink">Symbols</a><a class="headerlink" href="#symbols" title="Link to this heading">¶</a></h3>
<p>A symbol is a named 64-bit integer value, representing a relocatable
address or an absolute (non-relocatable) number.</p>
<dl class="simple">
<dt>Symbol names have the following syntax:</dt><dd><p><code class="docutils literal notranslate"><span class="pre">[a-zA-Z_.][a-zA-Z0-9_$.&#64;]*</span></code></p>
</dd>
</dl>
<p>The table below provides several examples of syntax used for symbol definition.</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Syntax</p></th>
<th class="head"><p>Meaning</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>.globl &lt;S&gt;</p></td>
<td><p>Declares a global symbol S without assigning it a value.</p></td>
</tr>
<tr class="row-odd"><td><p>.set &lt;S&gt;, &lt;E&gt;</p></td>
<td><p>Assigns the value of an expression E to a symbol S.</p></td>
</tr>
<tr class="row-even"><td><p>&lt;S&gt; = &lt;E&gt;</p></td>
<td><p>Assigns the value of an expression E to a symbol S.</p></td>
</tr>
<tr class="row-odd"><td><p>&lt;S&gt;:</p></td>
<td><p>Declares a label S and assigns it the current PC value.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>A symbol may be used before it is declared or assigned;
unassigned symbols are assumed to be PC-relative.</p>
<p>Additional information about symbols may be found <a class="reference internal" href="AMDGPUUsage.html#amdgpu-symbols"><span class="std std-ref">here</span></a>.</p>
</section>
</section>
<section id="type-and-size-conversion">
<span id="amdgpu-synid-conv"></span><h2><a class="toc-backref" href="#id42" role="doc-backlink">Type and Size Conversion</a><a class="headerlink" href="#type-and-size-conversion" title="Link to this heading">¶</a></h2>
<p>This section describes what happens when a 64-bit
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer number</span></a>, a
<a class="reference internal" href="#amdgpu-synid-floating-point-number"><span class="std std-ref">floating-point number</span></a> or an
<a class="reference internal" href="#amdgpu-synid-expression"><span class="std std-ref">expression</span></a>
is used for an operand which has a different type or size.</p>
<section id="conversion-of-integer-values">
<span id="amdgpu-synid-int-conv"></span><h3><a class="toc-backref" href="#id43" role="doc-backlink">Conversion of Integer Values</a><a class="headerlink" href="#conversion-of-integer-values" title="Link to this heading">¶</a></h3>
<p>Instruction operands may be specified as 64-bit
<a class="reference internal" href="#amdgpu-synid-integer-number"><span class="std std-ref">integer numbers</span></a> or
<a class="reference internal" href="#amdgpu-synid-absolute-expression"><span class="std std-ref">absolute expressions</span></a>.
These values are converted to the
<a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
using the following steps:</p>
<p>1. <em>Validation</em>. Assembler checks if the input value may be truncated
without loss to the required <em>truncation width</em> (see the table below).
There are two cases when this operation is enabled:</p>
<blockquote>
<div><ul class="simple">
<li><p>The truncated bits are all 0.</p></li>
<li><p>The truncated bits are all 1 and the value after truncation has its MSB bit set.</p></li>
</ul>
</div></blockquote>
<p>In all other cases, the assembler triggers an error.</p>
<p>2. <em>Conversion</em>. The input value is converted to the expected type
as described in the table below. Depending on operand kind, this conversion
is performed by either assembler or AMDGPU H/W (or both).</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Expected type</p></th>
<th class="head"><p>Truncation Width</p></th>
<th class="head"><p>Conversion</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>i16, u16, b16</p></td>
<td><p>16</p></td>
<td><p>num.u16</p></td>
<td><p>Truncate to 16 bits.</p></td>
</tr>
<tr class="row-odd"><td><p>i32, u32, b32</p></td>
<td><p>32</p></td>
<td><p>num.u32</p></td>
<td><p>Truncate to 32 bits.</p></td>
</tr>
<tr class="row-even"><td><p>i64</p></td>
<td><p>32</p></td>
<td><p>{-1,num.i32}</p></td>
<td><p>Truncate to 32 bits and then sign-extend the result to 64 bits.</p></td>
</tr>
<tr class="row-odd"><td><p>u64, b64</p></td>
<td><p>32</p></td>
<td><p>{0,num.u32}</p></td>
<td><p>Truncate to 32 bits and then zero-extend the result to 64 bits.</p></td>
</tr>
<tr class="row-even"><td><p>f16</p></td>
<td><p>16</p></td>
<td><p>num.u16</p></td>
<td><p>Use low 16 bits as an f16 value.</p></td>
</tr>
<tr class="row-odd"><td><p>f32</p></td>
<td><p>32</p></td>
<td><p>num.u32</p></td>
<td><p>Use low 32 bits as an f32 value.</p></td>
</tr>
<tr class="row-even"><td><p>f64</p></td>
<td><p>32</p></td>
<td><p>{num.u32,0}</p></td>
<td><p>Use low 32 bits of the number as high 32 bits
of the result; low 32 bits of the result are zeroed.</p></td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Examples of enabled conversions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GFX9</span>

<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>                   <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xFFFF</span>
<span class="n">v_add_f16</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>                   <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xFFFF</span> <span class="p">(</span><span class="n">NaN</span><span class="p">)</span>
                                      <span class="o">//</span>
<span class="n">v_add_u32</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>                   <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xFFFFFFFF</span>
<span class="n">v_add_f32</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span>                   <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xFFFFFFFF</span> <span class="p">(</span><span class="n">NaN</span><span class="p">)</span>
                                      <span class="o">//</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mh">0xff00</span><span class="p">,</span> <span class="n">v0</span>              <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xff00</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mh">0xffffffffffffff00</span><span class="p">,</span> <span class="n">v0</span>  <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xff00</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="o">-</span><span class="mi">256</span><span class="p">,</span> <span class="n">v0</span>                <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xff00</span>
                                      <span class="o">//</span>
<span class="n">s_bfe_i64</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="mh">0xffefffff</span><span class="p">,</span> <span class="n">s3</span>      <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xffffffffffefffff</span>
<span class="n">s_bfe_u64</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="mh">0xffefffff</span><span class="p">,</span> <span class="n">s3</span>      <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x00000000ffefffff</span>
<span class="n">v_ceil_f64_e32</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="mh">0xffefffff</span>     <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xffefffff00000000</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.7976922776554302e308</span><span class="p">)</span>
                                      <span class="o">//</span>
<span class="n">x</span> <span class="o">=</span> <span class="mh">0xffefffff</span>                        <span class="o">//</span>
<span class="n">s_bfe_i64</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">,</span> <span class="n">s3</span>               <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xffffffffffefffff</span>
<span class="n">s_bfe_u64</span> <span class="n">s</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span><span class="p">,</span> <span class="n">s3</span>               <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x00000000ffefffff</span>
<span class="n">v_ceil_f64_e32</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="n">x</span>              <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0xffefffff00000000</span> <span class="p">(</span><span class="o">-</span><span class="mf">1.7976922776554302e308</span><span class="p">)</span>
</pre></div>
</div>
<p>Examples of disabled conversions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GFX9</span>

<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mh">0x1ff00</span><span class="p">,</span> <span class="n">v0</span>               <span class="o">//</span> <span class="n">truncated</span> <span class="n">bits</span> <span class="n">are</span> <span class="ow">not</span> <span class="nb">all</span> <span class="mi">0</span> <span class="ow">or</span> <span class="mi">1</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mh">0xffffffffffff00ff</span><span class="p">,</span> <span class="n">v0</span>    <span class="o">//</span> <span class="n">truncated</span> <span class="n">bits</span> <span class="n">do</span> <span class="ow">not</span> <span class="n">match</span> <span class="n">MSB</span> <span class="n">of</span> <span class="n">the</span> <span class="n">result</span>
</pre></div>
</div>
</section>
<section id="conversion-of-floating-point-values">
<span id="amdgpu-synid-fp-conv"></span><h3><a class="toc-backref" href="#id44" role="doc-backlink">Conversion of Floating-Point Values</a><a class="headerlink" href="#conversion-of-floating-point-values" title="Link to this heading">¶</a></h3>
<p>Instruction operands may be specified as 64-bit
<a class="reference internal" href="#amdgpu-synid-floating-point-number"><span class="std std-ref">floating-point numbers</span></a>.
These values are converted to the
<a class="reference internal" href="AMDGPUInstructionSyntax.html#amdgpu-syn-instruction-type"><span class="std std-ref">expected operand type</span></a>
using the following steps:</p>
<p>1. <em>Validation</em>. Assembler checks if the input f64 number can be converted
to the <em>required floating-point type</em> (see the table below) without overflow
or underflow. Precision lost is allowed. If this conversion is not possible,
the assembler triggers an error.</p>
<p>2. <em>Conversion</em>. The input value is converted to the expected type
as described in the table below. Depending on operand kind, this is
performed by either assembler or AMDGPU H/W (or both).</p>
<blockquote>
<div><table class="docutils align-default">
<thead>
<tr class="row-odd"><th class="head"><p>Expected type</p></th>
<th class="head"><p>Required FP Type</p></th>
<th class="head"><p>Conversion</p></th>
<th class="head"><p>Description</p></th>
</tr>
</thead>
<tbody>
<tr class="row-even"><td><p>i16, u16, b16</p></td>
<td><p>f16</p></td>
<td><p>f16(num)</p></td>
<td><p>Convert to f16 and use bits of the result as an integer value.
The value has to be encoded as a literal, or an error occurs.
Note that the value cannot be encoded as an inline constant.</p></td>
</tr>
<tr class="row-odd"><td><p>i32, u32, b32</p></td>
<td><p>f32</p></td>
<td><p>f32(num)</p></td>
<td><p>Convert to f32 and use bits of the result as an integer value.</p></td>
</tr>
<tr class="row-even"><td><p>i64, u64, b64</p></td>
<td><p>-</p></td>
<td><p>-</p></td>
<td><p>Conversion disabled.</p></td>
</tr>
<tr class="row-odd"><td><p>f16</p></td>
<td><p>f16</p></td>
<td><p>f16(num)</p></td>
<td><p>Convert to f16.</p></td>
</tr>
<tr class="row-even"><td><p>f32</p></td>
<td><p>f32</p></td>
<td><p>f32(num)</p></td>
<td><p>Convert to f32.</p></td>
</tr>
<tr class="row-odd"><td><p>f64</p></td>
<td><p>f64</p></td>
<td><p>{num.u32.hi,0}</p></td>
<td><p>Use high 32 bits of the number as high 32 bits of the result;
zero-fill low 32 bits of the result.</p>
<p>Note that the result may differ from the original number.</p>
</td>
</tr>
</tbody>
</table>
</div></blockquote>
<p>Examples of enabled conversions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GFX9</span>

<span class="n">v_add_f16</span> <span class="n">v0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span>        <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x3C00</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">v_add_u16</span> <span class="n">v0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span>        <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x3C00</span>
                            <span class="o">//</span>
<span class="n">v_add_f32</span> <span class="n">v0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span>        <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x3F800000</span> <span class="p">(</span><span class="mf">1.0</span><span class="p">)</span>
<span class="n">v_add_u32</span> <span class="n">v0</span><span class="p">,</span> <span class="mf">1.0</span><span class="p">,</span> <span class="mi">0</span>        <span class="o">//</span> <span class="n">src0</span> <span class="o">=</span> <span class="mh">0x3F800000</span>

                            <span class="o">//</span> <span class="n">src0</span> <span class="n">before</span> <span class="n">conversion</span><span class="p">:</span>
                            <span class="o">//</span>   <span class="mf">1.7976931348623157e308</span> <span class="o">=</span> <span class="mh">0x7fefffffffffffff</span>
                            <span class="o">//</span> <span class="n">src0</span> <span class="n">after</span> <span class="n">conversion</span><span class="p">:</span>
                            <span class="o">//</span>   <span class="mf">1.7976922776554302e308</span> <span class="o">=</span> <span class="mh">0x7fefffff00000000</span>
<span class="n">v_ceil_f64</span> <span class="n">v</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">1</span><span class="p">],</span> <span class="mf">1.7976931348623157e308</span>

<span class="n">v_add_f16</span> <span class="n">v1</span><span class="p">,</span> <span class="mf">65500.0</span><span class="p">,</span> <span class="n">v2</span>   <span class="o">//</span> <span class="n">ok</span> <span class="k">for</span> <span class="n">f16</span><span class="o">.</span>
<span class="n">v_add_f32</span> <span class="n">v1</span><span class="p">,</span> <span class="mf">65600.0</span><span class="p">,</span> <span class="n">v2</span>   <span class="o">//</span> <span class="n">ok</span> <span class="k">for</span> <span class="n">f32</span><span class="p">,</span> <span class="n">but</span> <span class="n">would</span> <span class="n">result</span> <span class="ow">in</span> <span class="n">overflow</span> <span class="k">for</span> <span class="n">f16</span><span class="o">.</span>
</pre></div>
</div>
<p>Examples of disabled conversions:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">GFX9</span>

<span class="n">v_add_f16</span> <span class="n">v1</span><span class="p">,</span> <span class="mf">65600.0</span><span class="p">,</span> <span class="n">v2</span>    <span class="o">//</span> <span class="n">overflow</span>
</pre></div>
</div>
</section>
<section id="conversion-of-relocatable-values">
<span id="amdgpu-synid-rl-conv"></span><h3><a class="toc-backref" href="#id45" role="doc-backlink">Conversion of Relocatable Values</a><a class="headerlink" href="#conversion-of-relocatable-values" title="Link to this heading">¶</a></h3>
<p><a class="reference internal" href="#amdgpu-synid-relocatable-expression"><span class="std std-ref">Relocatable expressions</span></a>
may be used with 32-bit integer operands and jump targets.</p>
<p>When the value of a relocatable expression is resolved by a linker, it is
converted as needed and truncated to the operand size. The conversion depends
on <a class="reference internal" href="AMDGPUUsage.html#amdgpu-relocation-records"><span class="std std-ref">relocation type</span></a> and operand kind.</p>
<p>For example, when a 32-bit operand of an instruction refers
to a relocatable expression <em>expr</em>, this reference is evaluated
to a 64-bit offset from the address after the
instruction to the address being referenced, <em>counted in bytes</em>.
Then the value is truncated to 32 bits and encoded as a literal:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">expr</span> <span class="o">=</span> <span class="o">.</span>
<span class="n">v_add_co_u32_e32</span> <span class="n">v0</span><span class="p">,</span> <span class="n">vcc</span><span class="p">,</span> <span class="n">expr</span><span class="p">,</span> <span class="n">v1</span>  <span class="o">//</span> <span class="s1">&#39;expr&#39;</span> <span class="n">operand</span> <span class="ow">is</span> <span class="n">evaluated</span> <span class="n">to</span> <span class="o">-</span><span class="mi">4</span>
                                    <span class="o">//</span> <span class="ow">and</span> <span class="n">then</span> <span class="n">truncated</span> <span class="n">to</span> <span class="mh">0xFFFFFFFC</span>
</pre></div>
</div>
<p>As another example, when a branch instruction refers to a label,
this reference is evaluated to an offset from the address after the
instruction to the label address, <em>counted in dwords</em>.
Then the value is truncated to 16 bits:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">label</span><span class="p">:</span>
<span class="n">s_branch</span> <span class="n">label</span>  <span class="o">//</span> <span class="s1">&#39;label&#39;</span> <span class="n">operand</span> <span class="ow">is</span> <span class="n">evaluated</span> <span class="n">to</span> <span class="o">-</span><span class="mi">1</span> <span class="ow">and</span> <span class="n">truncated</span> <span class="n">to</span> <span class="mh">0xFFFF</span>
</pre></div>
</div>
</section>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="AMDGPUInstructionSyntax.html" title="AMDGPU Instruction Syntax"
             >next</a> |</li>
        <li class="right" >
          <a href="AMDGPUModifierSyntax.html" title="Syntax of AMDGPU Instruction Modifiers"
             >previous</a> |</li>
  <li><a href="https://llvm.org/">LLVM Home</a>&nbsp;|&nbsp;</li>
  <li><a href="index.html">Documentation</a>&raquo;</li>

          <li class="nav-item nav-item-1"><a href="UserGuides.html" >User Guides</a> &#187;</li>
          <li class="nav-item nav-item-2"><a href="AMDGPUUsage.html" >User Guide for AMDGPU Backend</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href="">Syntax of AMDGPU Instruction Operands</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2003-2025, LLVM Project.
      Last updated on 2025-03-04.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 7.2.6.
    </div>
  </body>
</html>